(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[0],{110:function(e,t,n){"use strict";(function(e){n.d(t,"j",(function(){return s})),n.d(t,"i",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return h})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return g})),n.d(t,"k",(function(){return y})),n.d(t,"m",(function(){return x})),n.d(t,"l",(function(){return v}));var r=n(3),a=n.n(r),c=n(8),i=(n(11),n(14),n(159)),o=n(7),s=(new Map,new o.PublicKey("So11111111111111111111111111111111111111112")),u=new o.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),l=new o.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),d=new o.PublicKey("BPFLoaderUpgradeab1e11111111111111111111111"),f=new o.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),b=new o.PublicKey("11111111111111111111111111111111"),h=new o.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),p=new o.PublicKey("DDnmBpiGYyeoPGqfjxEoANTP5x3WXzU4NYv8tdHmGyPi"),m=new o.PublicKey("561gX85SDR4hYF2L7P4LcvdXsWSxWuY7Z1yGgznPwSXG"),g=new o.PublicKey("MSv9H2sMceAzccBganUXwGq3GXgqYAstmZAbFDZYbAV"),j=function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=i.a,e.next=3,i.b.fetchIdl(t,{connection:n});case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=new o.PublicKey(n),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new Error("Invalid config key ".concat(e.t0));case 7:return e.next=9,t.getAccountInfo(r);case 9:if(null!==(c=e.sent)){e.next=12;break}throw new Error("Could not fetch config");case 12:if(c.owner.equals(p)){e.next=14;break}throw new Error("Invalid config owner ".concat(c.owner.toBase58()));case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var t=Object(c.a)(a.a.mark((function t(n,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.PublicKey.findProgramAddress([e.from("candy_machine"),n.toBuffer(),e.from(r)],p);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),v=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(p,t);case 2:if(null!==(r=e.sent)){e.next=5;break}throw new Error("Could not fetch candy machine IDL");case 5:return e.next=7,t.getAccountInfo(n);case 7:if(null!==(c=e.sent)){e.next=10;break}throw new Error("Could not fetch candy machine");case 10:return e.abrupt("return",r.accounts.decode("CandyMachine",c.data));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}).call(this,n(18).Buffer)},121:function(e,t,n){"use strict";n.r(t),n.d(t,"ENDPOINTS",(function(){return j})),n.d(t,"ConnectionProvider",(function(){return v})),n.d(t,"useConnection",(function(){return O})),n.d(t,"useConnectionConfig",(function(){return w})),n.d(t,"getErrorForTransaction",(function(){return S})),n.d(t,"SequenceType",(function(){return k})),n.d(t,"sendTransactionsWithManualRetry",(function(){return C})),n.d(t,"sendTransactions",(function(){return P})),n.d(t,"sendTransaction",(function(){return E})),n.d(t,"sendTransactionWithRetry",(function(){return M})),n.d(t,"getUnixTs",(function(){return I})),n.d(t,"sendSignedTransaction",(function(){return B})),n.d(t,"envFor",(function(){return N})),n.d(t,"explorerLinkFor",(function(){return F}));var r=n(34),a=n(3),c=n.n(a),i=n(8),o=n(16),s=n(10),u=n(99),l=n(7),d=n(1),f=n.n(d),b=n(263),h=n(264),p=n(235),m=n(20),g=n(6),j=[{name:"mainnet-beta",endpoint:"https://api.mainnet-beta.solana.com",ChainId:p.a.MainnetBeta},{name:"devnet",endpoint:"https://api.devnet.solana.com",ChainId:p.a.Devnet}],y=j[0].endpoint,x=f.a.createContext({endpoint:y,setEndpoint:function(){},connection:new l.Connection(y,"recent"),env:j[0].name,tokens:[],tokenMap:new Map});function v(e){var t,n=e.children,r=void 0===n?void 0:n,a=Object(u.d)("connectionEndpoint",j[0].endpoint),c=Object(s.a)(a,2),i=c[0],f=c[1],b=Object(d.useMemo)((function(){return new l.Connection(i,"recent")}),[i]),h=(null===(t=j.find((function(e){return e.endpoint===i})))||void 0===t?void 0:t.name)||j[0].name,m=Object(d.useState)([]),y=Object(s.a)(m,2),v=y[0],O=y[1],w=Object(d.useState)(new Map),k=Object(s.a)(w,2),S=k[0],C=k[1];return Object(d.useEffect)((function(){(new p.b).resolve().then((function(e){var t,n=e.excludeByTag("nft").filterByChainId((null===(t=j.find((function(e){return e.endpoint===i})))||void 0===t?void 0:t.ChainId)||p.a.MainnetBeta).getList(),r=Object(o.a)(n).reduce((function(e,t){return e.set(t.address,t),e}),new Map);C(r),O(n)}))}),[h,i]),Object(d.useEffect)((function(){var e=b.onAccountChange(l.Keypair.generate().publicKey,(function(){}));return function(){b.removeAccountChangeListener(e)}}),[b]),Object(d.useEffect)((function(){var e=b.onSlotChange((function(){return null}));return function(){b.removeSlotChangeListener(e)}}),[b]),Object(g.jsx)(x.Provider,{value:{endpoint:i,setEndpoint:f,connection:b,tokens:v,tokenMap:S,env:h},children:r})}function O(){return Object(d.useContext)(x).connection}function w(){var e=Object(d.useContext)(x);return{endpoint:e.endpoint,setEndpoint:e.setEndpoint,env:e.env,tokens:e.tokens,tokenMap:e.tokenMap}}var k,S=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"max");case 2:return e.next=4,t.getParsedConfirmedTransaction(n);case 4:return r=e.sent,a=[],(null===r||void 0===r?void 0:r.meta)&&r.meta.logMessages&&r.meta.logMessages.forEach((function(e){for(var t,n=/Error: (.*)/gm;null!==(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,t.length>1&&a.push(t[1])})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function C(e,t,n,r){return A.apply(this,arguments)}function A(){return(A=Object(i.a)(c.a.mark((function e(t,n,r,a){var i,o,s,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0,o=0,s=null,u={},r=r.filter((function(e,t){return e.length>0||(u[t]=!0,!1)})),l=a.filter((function(e,t){return!u[t]}));case 6:if(!(i<r.length&&o<3)){e.next=29;break}if(r=r.slice(i,r.length),l=l.slice(i,l.length),r.length===s?o+=1:o=0,e.prev=10,1!==r.length){e.next=17;break}return e.next=14,M(t,n,r[0],l[0],"single");case 14:i=1,e.next=20;break;case 17:return e.next=19,P(t,n,r,l,k.StopOnFailure,"single");case 19:i=e.sent;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(10),console.error(e.t0);case 25:console.log("Died on ",i,"retrying from instruction",r[i],"instructions length is",r.length),s=r.length,e.next=6;break;case 29:case"end":return e.stop()}}),e,null,[[10,22]])})))).apply(this,arguments)}!function(e){e[e.Sequential=0]="Sequential",e[e.Parallel=1]="Parallel",e[e.StopOnFailure=2]="StopOnFailure"}(k||(k={}));var P=function(){var e=Object(i.a)(c.a.mark((function e(t,n,r,a){var i,s,u,d,f,b,h,p,g,j,y,x,v,O,w=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=w.length>4&&void 0!==w[4]?w[4]:k.Parallel,s=w.length>5&&void 0!==w[5]?w[5]:"singleGossip",u=w.length>6&&void 0!==w[6]?w[6]:function(e,t){},d=w.length>7&&void 0!==w[7]?w[7]:function(e,t){return!1},f=w.length>8?w[8]:void 0,n.publicKey){e.next=7;break}throw new m.i;case 7:if(b=[],f){e.next=12;break}return e.next=11,t.getRecentBlockhash(s);case 11:f=e.sent;case 12:h=function(e){var t=r[e],c=a[e];if(0===t.length)return"continue";var i=new l.Transaction;t.forEach((function(e){return i.add(e)})),i.recentBlockhash=f.blockhash,i.setSigners.apply(i,[n.publicKey].concat(Object(o.a)(c.map((function(e){return e.publicKey}))))),c.length>0&&i.partialSign.apply(i,Object(o.a)(c)),b.push(i)},p=0;case 14:if(!(p<r.length)){e.next=21;break}if("continue"!==h(p)){e.next=18;break}return e.abrupt("continue",18);case 18:p++,e.next=14;break;case 21:return e.next=23,n.signAllTransactions(b);case 23:g=e.sent,j=[],y={breakEarly:!1,i:0},console.log("Signed txns length",g.length,"vs handed in length",r.length),x=c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=B({connection:t,signedTransaction:g[n]})).then((function(e){var t=e.txid;e.slot;u(t,n)})).catch((function(e){d(g[n],n),i===k.StopOnFailure&&(y.breakEarly=!0,y.i=n)})),i===k.Parallel){e.next=16;break}return e.prev=3,e.next=6,r;case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),console.log("Caught failure",e.t0),!y.breakEarly){e.next=14;break}return console.log("Died on ",y.i),e.abrupt("return",{v:y.i});case 14:e.next=17;break;case 16:j.push(r);case 17:case"end":return e.stop()}}),e,null,[[3,8]])})),v=0;case 29:if(!(v<g.length)){e.next=37;break}return e.delegateYield(x(v),"t0",31);case 31:if("object"!==typeof(O=e.t0)){e.next=34;break}return e.abrupt("return",O.v);case 34:v++,e.next=29;break;case 37:if(i===k.Parallel){e.next=40;break}return e.next=40,Promise.all(j);case 40:return e.abrupt("return",g.length);case 41:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),E=function(){var e=Object(i.a)(c.a.mark((function e(t,n,r,a){var i,s,u,d,f,p,j,y,x,v,O,w,k,C,A=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(A.length>4&&void 0!==A[4])||A[4],s=A.length>5&&void 0!==A[5]?A[5]:"singleGossip",u=A.length>6&&void 0!==A[6]&&A[6],d=A.length>7?A[7]:void 0,n.publicKey){e.next=6;break}throw new m.i;case 6:if(f=new l.Transaction,r.forEach((function(e){return f.add(e)})),e.t0=d,e.t0){e.next=13;break}return e.next=12,t.getRecentBlockhash(s);case 12:e.t0=e.sent;case 13:if(f.recentBlockhash=e.t0.blockhash,u?(p=f).setSigners.apply(p,Object(o.a)(a.map((function(e){return e.publicKey})))):(j=f).setSigners.apply(j,[n.publicKey].concat(Object(o.a)(a.map((function(e){return e.publicKey}))))),a.length>0&&(y=f).partialSign.apply(y,Object(o.a)(a)),u){e.next=20;break}return e.next=19,n.signTransaction(f);case 19:f=e.sent;case 20:return x=f.serialize(),v={skipPreflight:!0,commitment:s},e.next=24,t.sendRawTransaction(x,v);case 24:if(O=e.sent,w=0,!i){e.next=39;break}return e.next=29,R(O,K,t,s);case 29:if(k=e.sent){e.next=32;break}throw new Error("Timed out awaiting confirmation on transaction");case 32:if(w=(null===k||void 0===k?void 0:k.slot)||0,!(null===k||void 0===k?void 0:k.err)){e.next=39;break}return e.next=36,S(t,O);case 36:throw C=e.sent,Object(b.a)({message:"Transaction failed...",description:Object(g.jsxs)(g.Fragment,{children:[C.map((function(e){return Object(g.jsx)("div",{children:e})})),Object(g.jsx)(h.a,{address:O,type:"transaction"})]}),type:"error"}),new Error("Raw transaction ".concat(O," failed"));case 39:return e.abrupt("return",{txid:O,slot:w});case 40:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),M=function(){var e=Object(i.a)(c.a.mark((function e(t,n,r,a){var i,s,u,d,f,b,h,p,g,j,y,x=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=x.length>4&&void 0!==x[4]?x[4]:"singleGossip",s=x.length>5&&void 0!==x[5]&&x[5],u=x.length>6?x[6]:void 0,d=x.length>7?x[7]:void 0,n.publicKey){e.next=6;break}throw new m.i;case 6:if(f=new l.Transaction,r.forEach((function(e){return f.add(e)})),e.t0=u,e.t0){e.next=13;break}return e.next=12,t.getRecentBlockhash(i);case 12:e.t0=e.sent;case 13:if(f.recentBlockhash=e.t0.blockhash,s?(b=f).setSigners.apply(b,Object(o.a)(a.map((function(e){return e.publicKey})))):(h=f).setSigners.apply(h,[n.publicKey].concat(Object(o.a)(a.map((function(e){return e.publicKey}))))),a.length>0&&(p=f).partialSign.apply(p,Object(o.a)(a)),s){e.next=26;break}return e.prev=17,e.next=20,n.signTransaction(f);case 20:f=e.sent,e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(17),e.abrupt("return","Failed to sign transaction");case 26:return d&&d(),console.log("About to send"),e.prev=28,e.next=31,B({connection:t,signedTransaction:f});case 31:return g=e.sent,j=g.txid,y=g.slot,e.abrupt("return",{txid:j,slot:y});case 37:return e.prev=37,e.t2=e.catch(28),console.error(e.t2),e.abrupt("return","See console logs");case 41:case"end":return e.stop()}}),e,null,[[17,23],[28,37]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),I=function(){return(new Date).getTime()/1e3},K=15e3;function B(e){return T.apply(this,arguments)}function T(){return(T=Object(i.a)(c.a.mark((function e(t){var n,r,a,o,s,l,d,f,b,h,p,m,g;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,r=t.connection,a=t.timeout,o=void 0===a?K:a,s=n.serialize(),l=I(),d=0,e.next=6,r.sendRawTransaction(s,{skipPreflight:!0});case 6:return f=e.sent,console.log("Started awaiting confirmation for",f),b=!1,Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b||!(I()-l<o)){e.next=6;break}return r.sendRawTransaction(s,{skipPreflight:!0}),e.next=4,Object(u.c)(500);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=10,e.next=13,R(f,o,r,"recent",!0);case 13:if(h=e.sent){e.next=16;break}throw new Error("Timed out awaiting confirmation on transaction");case 16:if(!h.err){e.next=19;break}throw console.error(h.err),new Error("Transaction failed: Custom instruction error");case 19:d=(null===h||void 0===h?void 0:h.slot)||0,e.next=47;break;case 22:if(e.prev=22,e.t0=e.catch(10),console.error("Timeout Error caught",e.t0),!e.t0.timeout){e.next=27;break}throw new Error("Timed out awaiting confirmation on transaction");case 27:return p=null,e.prev=28,e.next=31,D(r,n,"single");case 31:p=e.sent.value,e.next=36;break;case 34:e.prev=34,e.t1=e.catch(28);case 36:if(!p||!p.err){e.next=47;break}if(!p.logs){e.next=46;break}m=p.logs.length-1;case 39:if(!(m>=0)){e.next=46;break}if(!(g=p.logs[m]).startsWith("Program log: ")){e.next=43;break}throw new Error("Transaction failed: "+g.slice("Program log: ".length));case 43:--m,e.next=39;break;case 46:throw new Error(JSON.stringify(p.err));case 47:return e.prev=47,b=!0,e.finish(47);case 50:return console.log("Latency",f,I()-l),e.abrupt("return",{txid:f,slot:d});case 52:case"end":return e.stop()}}),e,null,[[10,22,47,50],[28,34]])})))).apply(this,arguments)}function D(e,t,n){return W.apply(this,arguments)}function W(){return(W=Object(i.a)(c.a.mark((function e(t,n,r){var a,i,o,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._recentBlockhash(t._disableBlockhashCaching);case 2:return n.recentBlockhash=e.sent,a=n.serializeMessage(),i=n._serialize(a),o=i.toString("base64"),s=[o,{encoding:"base64",commitment:r}],e.next=10,t._rpcRequest("simulateTransaction",s);case 10:if(!(u=e.sent).error){e.next=13;break}throw new Error("failed to simulate transaction: "+u.error.message);case 13:return e.abrupt("return",u.result);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=function(e){var t,n=e._rpcEndpoint,a="mainnet-beta",c=Object(r.a)(j);try{for(c.s();!(t=c.n()).done;){var i=t.value;if(i.endpoint===n){a=i.name;break}}}catch(o){c.e(o)}finally{c.f()}return a},F=function(e,t){return"https://explorer.solana.com/tx/".concat(e,"?cluster=").concat(N(t))};function R(e,t,n){return L.apply(this,arguments)}function L(){return L=Object(i.a)(c.a.mark((function e(t,n,r){var a,o,s,l,d,f=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>3&&void 0!==f[3]?f[3]:"recent",o=f.length>4&&void 0!==f[4]&&f[4],s=!1,l={slot:0,confirmations:0,err:null},d=0,e.next=7,new Promise(function(){var e=Object(i.a)(c.a.mark((function e(f,b){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){s||(s=!0,console.log("Rejecting for timeout..."),b({timeout:!0}))}),n);try{d=r.onSignature(t,(function(e,t){s=!0,l={err:e.err,slot:t.slot,confirmations:0},e.err?(console.log("Rejected via websocket",e.err),b(l)):(console.log("Resolved via websocket",e),f(l))}),a)}catch(h){s=!0,console.error("WS error in setup",t,h)}case 2:if(s||!o){e.next=8;break}return Object(i.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getSignatureStatuses([t]);case 3:n=e.sent,l=n&&n.value[0],console.log(F(t,r)),s||(l?l.err?(console.log("REST error for",t,l),s=!0,b(l.err)):l.confirmations?(console.log("REST confirmation for",t,l),s=!0,f(l)):console.log("REST no confirmations for",t,l):console.log("REST null result for",t,l)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),s||console.log("REST connection error: txid",t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))(),e.next=6,Object(u.c)(2e3);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return l=e.sent,r._signatureSubscriptions[d]&&r.removeSignatureListener(d),s=!0,console.log("Returning status",l),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}},216:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(3),n(8);var r=n(110),a=function(){return{token:r.i,associatedToken:r.f,bpf_upgrade_loader:r.a,system:r.g,memo:r.c}}},217:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(35),a=n(142),c=(n(1),n(865)),i=(n(809),n(6)),o=["children","closeIcon","bodyStyle","width","style"],s=function(e){var t=e.children,n=(e.closeIcon,e.bodyStyle),s=e.width,u=(e.style,Object(a.a)(e,o));return Object(i.jsx)(c.a,Object(r.a)(Object(r.a)({style:{background:"transparent",borderRadius:16},bodyStyle:Object(r.a)({background:"#333333",display:"flex",flexDirection:"column",alignItems:"center"},n),footer:null,width:s||400},u),{},{children:t}))}},229:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var r=n(10),a=n(16),c=n(34),i=n(11),o=n(14),s=n(193),u=function(){function t(e){Object(i.a)(this,t),this.leafs=void 0,this.layers=void 0,this.leafs=e.slice(),this.layers=[];for(var n=this.leafs.map(t.nodeHash);n.length>0&&(console.log("Hashes",this.layers.length,n),this.layers.push(n.slice()),1!==n.length);)n=n.reduce((function(e,n,r,a){if(r%2===0){var c=a[r+1];e.push(t.internalHash(n,c))}return e}),Array())}return Object(o.a)(t,[{key:"getRoot",value:function(){return this.layers[this.layers.length-1][0]}},{key:"getProof",value:function(e){return this.layers.reduce((function(t,n){var r=1^e;return r<n.length&&t.push(n[r]),e=Math.floor(e/2),t}),[])}},{key:"getHexRoot",value:function(){return this.getRoot().toString("hex")}},{key:"getHexProof",value:function(e){return this.getProof(e).map((function(e){return e.toString("hex")}))}},{key:"verifyProof",value:function(e,n,r){var a,i=t.nodeHash(this.leafs[e]),o=Object(c.a)(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;i=t.internalHash(i,s)}}catch(u){o.e(u)}finally{o.f()}return i.equals(r)}}],[{key:"nodeHash",value:function(t){return e.from(s.keccak_256.digest([0].concat(Object(a.a)(t))))}},{key:"internalHash",value:function(t,n){if(!n)return t;var c=[t,n].sort(e.compare),i=Object(r.a)(c,2),o=i[0],u=i[1];return e.from(s.keccak_256.digest([1].concat(Object(a.a)(o),Object(a.a)(u))))}},{key:"verifyClaim",value:function(e,n,r){var a,i=t.nodeHash(e),o=Object(c.a)(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;i=t.internalHash(i,s)}}catch(u){o.e(u)}finally{o.f()}return i.equals(r)}}]),t}()}).call(this,n(18).Buffer)},239:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return I}));n(142);var r=n(10),a=n(34),c=n(35),i=n(3),o=n.n(i),s=n(8),u=n(1),l=n.n(u),d=n(121),f=n(70),b=n(7),h=n(43),p=(n(99),n(265)),m=n(110),g=n(216),j=n(6),y=l.a.createContext(null),x=new Map,v=new Map,O=new Map,w=new Map,k=function(){var t=Object(s.a)(o.a.mark((function t(n,r){var a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getAccountInfo(r);case 2:if(null!==(a=t.sent)){t.next=5;break}throw new Error("Failed to find mint account");case 5:return c=e.from(a.data),t.abrupt("return",B(c));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),S=function(t,n){if(n.data.length>0){var r=e.from(n.data),a=K(r);return{pubkey:t,account:Object(c.a)({},n),info:a}}},C=new Map,A={emitter:new p.a,query:function(){var e=Object(s.a)(o.a.mark((function e(t,n,r){var a,c,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="string"===typeof n?new b.PublicKey(n):n,c=a.toBase58(),!(i=v.get(c))){e.next=5;break}return e.abrupt("return",i);case 5:if(!(s=x.get(c))){e.next=8;break}return e.abrupt("return",s);case 8:return s=t.getAccountInfo(a).then((function(e){if(!e)throw new Error("Account not found");return A.add(a,e,r)})),x.set(c,s),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),add:function(e,t,n,r){var a="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),c=n||C.get(a);if(!c)throw new Error("Deserializer needs to be registered or passed as a parameter");A.registerParser(e,c),x.delete(a);var i=c(a,t);if(i){void 0===r?r=!0:r instanceof Function&&(r=r(i));var o=!v.has(a);return v.set(a,i),A.emitter.raiseCacheUpdated(a,o,c,r),i}},get:function(e){var t;return t="string"!==typeof e?e.toBase58():e,v.get(t)},delete:function(e){var t;return t="string"!==typeof e?e.toBase58():e,!!v.get(t)&&(v.delete(t),A.emitter.raiseCacheDeleted(t),!0)},byParser:function(e){var t,n=[],r=Object(a.a)(C.keys());try{for(r.s();!(t=r.n()).done;){var c=t.value;C.get(c)===e&&n.push(c)}}catch(i){r.e(i)}finally{r.f()}return n},registerParser:function(e,t){if(e){var n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();C.set(n,t)}return e},queryMint:function(){var e=Object(s.a)(o.a.mark((function e(t,n){var r,a,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"===typeof n?new b.PublicKey(n):n,a=r.toBase58(),!(c=w.get(a))){e.next=5;break}return e.abrupt("return",c);case 5:if(!(i=O.get(a))){e.next=8;break}return e.abrupt("return",i);case 8:return i=k(t,r).then((function(e){return O.delete(a),w.set(a,e),e})),O.set(a,i),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getMint:function(e){var t;return t="string"!==typeof e?e.toBase58():e,w.get(t)},addMint:function(e,t){var n=B(t.data),r=e.toBase58();return w.set(r,n),n}};var P=function(){var e=Object(d.useConnection)(),t=Object(f.b)().publicKey,n=Object(u.useState)(),a=Object(r.a)(n,2),c=a[0],i=a[1],l=Object(u.useCallback)((function(e){if(t){var n=function(e,t){if(t){var n=new b.PublicKey(e);return{pubkey:e,account:t,info:{address:n,mint:m.j,owner:n,amount:new h.e(t.lamports),delegate:null,delegatedAmount:new h.e(0),isInitialized:!0,isFrozen:!1,isNative:!0,rentExemptReserve:null,closeAuthority:null}}}}(t.toBase58(),e);if(void 0!==n){var r=t.toBase58();A.registerParser(r,S),v.set(r,n),A.emitter.raiseCacheUpdated(r,!1,S,!0)}}}),[t]);return Object(u.useEffect)((function(){var n=0,r=function(e){e&&(l(e),i(e))};return Object(s.a)(o.a.mark((function a(){var c;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&t){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,a.next=5,e.getAccountInfo(t);case 5:c=a.sent,r(c),a.next=12;break;case 9:return a.prev=9,a.t0=a.catch(2),a.abrupt("return");case 12:n=e.onAccountChange(t,r);case 13:case"end":return a.stop()}}),a,null,[[2,9]])})))(),function(){n&&e.removeAccountChangeListener(n)}}),[i,t,e,l]),{nativeAccount:c}},E=new Set,M=function(){var e=Object(s.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return E.add(n.toBase58()),e.next=5,t.getTokenAccountsByOwner(n,{programId:Object(g.a)().token});case 5:e.sent.value.forEach((function(e){A.add(e.pubkey.toBase58(),e.account,S)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function I(e){var t=e.children,n=void 0===t?null:t,a=Object(d.useConnection)(),c=Object(f.b)().publicKey,i=Object(u.useState)([]),o=Object(r.a)(i,2),s=o[0],l=o[1],p=Object(u.useState)([]),m=Object(r.a)(p,2),x=m[0],v=m[1],O=P().nativeAccount,w=null===c||void 0===c?void 0:c.toBase58(),k=Object(u.useCallback)((function(){return A.byParser(S).map((function(e){return A.get(e)})).filter((function(e){return e&&e.info.owner.toBase58()===w})).map((function(e){return e}))}),[w]);return Object(u.useEffect)((function(){var e=k().filter((function(e){return void 0!==e}));v(e)}),[O,s,k]),Object(u.useEffect)((function(){var e=[];return A.emitter.onCache((function(e){if(e.isNew&&e.isActive){var t=e.id,n=e.parser;a.onAccountChange(new b.PublicKey(t),(function(e){A.add(t,e,n)}))}})),function(){e.forEach((function(e){return a.removeAccountChangeListener(e)}))}}),[a]),Object(u.useEffect)((function(){if(a&&c){M(a,c).then((function(){l(k())}));var e=a.onProgramAccountChange(Object(g.a)().token,(function(e){var t=e.accountId;if(e.accountInfo.data.length===h.a.span){var n=K(e.accountInfo.data);E.has(n.owner.toBase58())&&(A.add(t,e.accountInfo,S),l(k()))}}),"singleGossip");return function(){a.removeProgramAccountChangeListener(e)}}l([])}),[a,c,k]),Object(j.jsx)(y.Provider,{value:{userAccounts:x,nativeAccount:O},children:n})}var K=function(e){var t=h.a.decode(e);return t.mint=new b.PublicKey(t.mint),t.owner=new b.PublicKey(t.owner),t.amount=h.e.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new h.e(0)):(t.delegate=new b.PublicKey(t.delegate),t.delegatedAmount=h.e.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=h.e.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new b.PublicKey(t.closeAuthority),t},B=function(e){if(e.length!==h.b.span)throw new Error("Not a valid Mint");var t=h.b.decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new b.PublicKey(t.mintAuthority),t.supply=h.e.fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new b.PublicKey(t.freezeAuthority),t}}).call(this,n(18).Buffer)},263:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(1);var r=n(371),a=n(6);function c(e){var t=e.message,n=void 0===t?"":t,c=e.description,i=void 0===c?void 0:c,o=e.txid,s=void 0===o?"":o,u=e.type,l=void 0===u?"info":u,d=e.placement,f=void 0===d?"bottomLeft":d;s&&(i=Object(a.jsx)(a.Fragment,{})),r.a[l]({message:Object(a.jsx)("span",{style:{color:"black"},children:n}),description:Object(a.jsx)("span",{style:{color:"black",opacity:.5},children:i}),placement:f,style:{backgroundColor:"white"}})}},264:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(1);var r=n(864),a=n(99),c=n(6),i=function(e){var t,n,i=e.type,o=e.code,s="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58();if(!s)return null;var u=null!==(n=e.length)&&void 0!==n?n:9;return Object(c.jsx)("a",{href:"https://explorer.solana.com/".concat(i,"/").concat(s),target:"_blank",rel:"noreferrer",title:s,style:e.style,children:o?Object(c.jsx)(r.a.Text,{style:e.style,code:!0,children:Object(a.b)(s,u)}):Object(a.b)(s,u)})}},265:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(14),a=n(11),c=n(87),i=function e(t,n,r,c){Object(a.a)(this,e),this.id=void 0,this.parser=void 0,this.isNew=void 0,this.isActive=void 0,this.id=t,this.parser=r,this.isNew=n,this.isActive=c};i.type="CacheUpdate";var o=function e(t){Object(a.a)(this,e),this.id=void 0,this.id=t};o.type="CacheUpdate";var s=function e(t){Object(a.a)(this,e),this.ids=void 0,this.ids=t};s.type="MarketUpdate";var u=function(){function e(){Object(a.a)(this,e),this.emitter=new c.EventEmitter}return Object(r.a)(e,[{key:"onMarket",value:function(e){var t=this;return this.emitter.on(s.type,e),function(){return t.emitter.removeListener(s.type,e)}}},{key:"onCache",value:function(e){var t=this;return this.emitter.on(i.type,e),function(){return t.emitter.removeListener(i.type,e)}}},{key:"raiseMarketUpdated",value:function(e){this.emitter.emit(s.type,new s(e))}},{key:"raiseCacheUpdated",value:function(e,t,n,r){this.emitter.emit(i.type,new i(e,t,n,r))}},{key:"raiseCacheDeleted",value:function(e){this.emitter.emit(o.type,new o(e))}}]),e}()},270:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(3),a=n.n(r),c=n(8),i=n(1),o=n(70),s=n(50),u=n(31),l=n(372),d=n(855),f=n(203),b=n(858),h=n(74),p=n(98),m=n(872),g=n(501),j=n.n(g),y=n(500),x=n.n(y),v=n(6),O=function(e){var t=e.additionalSettings,n=Object(o.b)(),r=n.connected,g=n.disconnect,y=n.publicKey,O=Object(s.j)(),w=O.setEndpoint,k=O.env,S=O.endpoint,C=Object(s.l)().setVisible,A=Object(i.useCallback)((function(){return C(!0)}),[C]),P=Object(s.k)().setModal,E=Object(p.a)(),M=Object(s.h)(),I=Object(i.useCallback)((function(){P(s.f.WALLET),C(!0)}),[P,C]);return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(d.a,{sx:{display:"flex",minWidth:"100%"},children:[!r&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(f.a,{children:Object(v.jsx)(b.a,{style:{marginBottom:5},onChange:function(e){w(e.target.value)},value:S,children:s.e.map((function(e){var t=e.name,n=e.endpoint;return Object(v.jsx)("option",{value:n,children:t},t)}))})}),Object(v.jsx)(h.a,{variant:"contained",onClick:I,sx:{marginLeft:"10px"},children:"Connect"})]}),r&&Object(v.jsxs)(v.Fragment,{children:[y&&Object(v.jsxs)(h.a,{variant:"outlined",onClick:Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=4;break}return e.next=3,navigator.clipboard.writeText(y.toBase58());case 3:Object(u.i)({message:"Wallet update",description:"Address copied to clipboard"});case 4:case"end":return e.stop()}}),e)}))),children:[Object(v.jsx)(l.a,{}),Object(u.j)(y.toBase58())]}),Object(v.jsx)(h.a,{variant:"outlined",onClick:A,sx:{marginLeft:"10px"},children:"Change Wallet"}),Object(v.jsxs)(h.a,{variant:"contained",color:"error",onClick:function(){return g().catch()},sx:{marginLeft:"10px"},children:["Disconnect (",k,")"]})]}),Object(v.jsx)(m.a,{sx:{ml:1},onClick:M.toggleColorMode,color:"inherit",children:"dark"===E.palette.mode?Object(v.jsx)(x.a,{}):Object(v.jsx)(j.a,{})}),t]})})}},271:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var r=n(10),a=n(98),c=n(1),i=n.n(c),o=n(6),s=i.a.createContext({}),u=function(e){var t=e.children,n=void 0===t?null:t,c=i.a.useState("dark"),u=Object(r.a)(c,2),l=u[0],d=u[1],f=Object(a.a)();return Object(o.jsx)(s.Provider,{value:{toggleColorMode:function(){d((function(e){return"light"===e?"dark":"light"}))},mode:l,theme:f},children:n})},l=function(){return Object(c.useContext)(s)}},31:function(e,t,n){"use strict";n.d(t,"d",(function(){return r.f})),n.d(t,"e",(function(){return r.h})),n.d(t,"a",(function(){return r.b})),n.d(t,"b",(function(){return r.d})),n.d(t,"c",(function(){return r.e})),n.d(t,"f",(function(){return r.k})),n.d(t,"h",(function(){return r.m})),n.d(t,"g",(function(){return r.l})),n.d(t,"i",(function(){return a.a})),n.d(t,"j",(function(){return c.b}));n(265);var r=n(110),a=(n(216),n(471),n(263)),c=n(99);var i=n(7),o=n(129),s=n(42),u=n.n(s);o.BinaryReader.prototype.readPubkey=function(){var e=this.readFixedArray(32);return new i.PublicKey(e)},o.BinaryWriter.prototype.writePubkey=function(e){this.writeFixedArray(e.toBuffer())},o.BinaryReader.prototype.readPubkeyAsString=function(){var e=this.readFixedArray(32);return u.a.encode(e)},o.BinaryWriter.prototype.writePubkeyAsString=function(e){this.writeFixedArray(u.a.decode(e))}},368:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(159),a=n(821),c=new r.a(a)},471:function(e,t,n){"use strict";(function(e){n(16),n(7),n(38),n(92)}).call(this,n(18).Buffer)},50:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return a.ENDPOINTS})),n.d(t,"d",(function(){return a.ConnectionProvider})),n.d(t,"i",(function(){return a.useConnection})),n.d(t,"j",(function(){return a.useConnectionConfig})),n.d(t,"l",(function(){return p})),n.d(t,"g",(function(){return y})),n.d(t,"f",(function(){return m})),n.d(t,"k",(function(){return v})),n.d(t,"b",(function(){return O.a})),n.d(t,"h",(function(){return O.b}));var r=n(239),a=n(121),c=n(10),i=n(70),o=n(147),s=n(227),u=n(1),l=n.n(u),d=n(31),f=n(217),b=(n(264),n(270),n.p,n(6)),h=Object(u.createContext)({});function p(){return Object(u.useContext)(h)}var m,g=function(){var e=Object(i.b)(),t=e.wallets,n=e.wallet,r=e.select,a=p(),o=a.visible,l=a.setVisible,d=Object(u.useState)(!1),h=Object(c.a)(d,2)[1],m=Object(u.useCallback)((function(){l(!1),h(!1)}),[l,h]);return Object(b.jsxs)(f.a,{visible:o,onCancel:m,children:[Object(b.jsx)("div",{style:{background:"linear-gradient(180deg, #D329FC 0%, #8F6DDE 49.48%, #19E6AD 100%)",borderRadius:36,width:50,height:50,textAlign:"center",verticalAlign:"middle",fontWeight:700,fontSize:"1.3rem",lineHeight:2.4,marginBottom:10}}),Object(b.jsx)("h2",{style:{color:"white",fontWeight:"bold",fontSize:20},children:n?"Change provider":""}),Object(b.jsx)("p",{style:{color:"white",fontSize:14},children:n?"Choose from the following options:":"Please sign into your wallet"}),Object(b.jsx)("br",{}),t.map((function(e){return Object(b.jsx)(s.a,{size:"large",type:e===n?"primary":"ghost",onClick:function(){r(e.name),m()},icon:Object(b.jsx)("img",{alt:"".concat(e.name),width:20,height:20,src:e.icon,style:{marginRight:30,float:"left"}}),style:{display:"block",width:"100%",textAlign:"left",marginBottom:8,color:"white"},children:e.name},e.name)}))]})},j=function(e){var t=e.children,n=Object(i.b)().publicKey,r=Object(u.useState)(!!n),a=Object(c.a)(r,2),o=a[0],s=a[1],l=Object(u.useState)(!1),f=Object(c.a)(l,2),p=f[0],m=f[1];return Object(u.useEffect)((function(){if(n){var e=n.toBase58(),t=e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e;Object(d.i)({message:"Wallet update",description:"Connected to wallet "+t})}}),[n]),Object(u.useEffect)((function(){!n&&o&&Object(d.i)({message:"Wallet update",description:"Disconnected from wallet"}),s(!!n)}),[n,o,s]),Object(b.jsxs)(h.Provider,{value:{visible:p,setVisible:m},children:[t,Object(b.jsx)(g,{})]})},y=function(e){var t=e.children,n=Object(u.useMemo)((function(){return[Object(o.c)(),Object(o.d)(),Object(o.g)({options:{clientId:"BOM5Cl7PXgE9Ylq1Z1tqzhpydY0RVr8k90QQ85N7AKI5QGSrr9iDC-3rvmy0K_hF0JfpLMiXoDhta68JwcxS1LQ"}}),Object(o.a)(),Object(o.f)(),Object(o.b)(),Object(o.e)()]}),[]),r=Object(u.useCallback)((function(e){console.error(e),Object(d.i)({message:"Wallet error",description:e.message})}),[]);return Object(b.jsx)(i.a,{wallets:n,onError:r,autoConnect:!0,children:Object(b.jsx)(j,{children:t})})};!function(e){e.WALLET="wallet"}(m||(m={}));var x=l.a.createContext({setModal:function(){return null},removeModal:function(){return null}}),v=function(){var e=Object(u.useContext)(x);if(void 0===e)throw new Error("useModal must be used within a ModalProvider");return e},O=n(271)},503:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return _}));var r=n(34),a=n(3),c=n.n(a),i=n(16),o=n(10),s=n(8),u=n(1),l=n.n(u),d=n(504),f=n.n(d),b=n(164),h=n(528),p=n(62),m=n(148),g=n(74),j=n(203),y=n(237),x=n(236),v=n(114),O=n(868),w=n(873),k=n(866),S=n(202),C=n(70),A=n(7),P=n(43),E=n(59),M=n(38),I=n.n(M),K=n(42),B=n(867),T=n(526),D=n(50),W=n(31),N=n(229),F=n(368),R=n(6),L=function(){var t=Object(s.a)(c.a.mark((function t(n,r,a,s,u,l,d,f,b,h){var p,m,g,j,y,x,v,O,w,k,S,C,M,K,B,T,D,F;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,p=new A.PublicKey(u),t.next=7;break;case 4:throw t.prev=4,t.t0=t.catch(0),new Error("Invalid tokenAcc key ".concat(t.t0));case 7:return t.next=9,n.getAccountInfo(p);case 9:if(null!==(m=t.sent)){t.next=12;break}throw new Error("Could not fetch distributor token account");case 12:return g=P.a.decode(m.data),j=new A.PublicKey(g.mint),console.log(j.toBase58()),y=[j.toBuffer(),e.from(d),e.from(h.toArray("le",4))],t.next=18,A.PublicKey.findProgramAddress(y,W.b);case 18:if(x=t.sent,v=Object(o.a)(x,1),O=v[0],w=e.from([].concat(Object(i.a)(new I.a(b).toArray("le",8)),Object(i.a)(O.toBuffer()),Object(i.a)(j.toBuffer()),Object(i.a)(new I.a(f).toArray("le",8)))),N.a.verifyClaim(w,l,e.from(s.root))){t.next=25;break}throw new Error("Gumdrop merkle proof does not match");case 25:return t.next=27,A.PublicKey.findProgramAddress([e.from("ClaimStatus"),e.from(new I.a(b).toArray("le",8)),a.toBuffer()],W.b);case 27:return k=t.sent,S=Object(o.a)(k,2),C=S[0],M=S[1],t.next=33,A.PublicKey.findProgramAddress([r.toBuffer(),P.c.toBuffer(),j.toBuffer()],W.d);case 33:return K=t.sent,B=Object(o.a)(K,1),T=B[0],D=[],t.next=39,n.getAccountInfo(T);case 39:if(t.t1=t.sent,null!==t.t1){t.next=42;break}D.push(P.d.createAssociatedTokenAccountInstruction(W.d,P.c,j,T,r,r));case 42:return F=new A.TransactionInstruction({programId:W.b,keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:C,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:T,isSigner:!1,isWritable:!0},{pubkey:W.c,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:A.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:P.c,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(i.a)(e.from(E.sha256.digest("global:claim")).slice(0,8)),Object(i.a)(new I.a(M).toArray("le",1)),Object(i.a)(new I.a(b).toArray("le",8)),Object(i.a)(new I.a(f).toArray("le",8)),Object(i.a)(O.toBuffer()),Object(i.a)(new I.a(l.length).toArray("le",4)),Object(i.a)(e.concat(l))))}),t.abrupt("return",[[].concat(D,[F]),y,[]]);case 44:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e,n,r,a,c,i,o,s,u,l){return t.apply(this,arguments)}}(),U=function(){var t=Object(s.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.PublicKey.findProgramAddress([e.from("metadata"),W.e.toBuffer(),n.toBuffer()],W.e);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),z=function(){var t=Object(s.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.PublicKey.findProgramAddress([e.from("metadata"),W.e.toBuffer(),n.toBuffer(),e.from("edition")],W.e);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=function(){var t=Object(s.a)(c.a.mark((function t(n,r,a,s,u,l,d,f,b,h,p){var m,g,j,y,x,v,O,w,k,S,C,P,E,M,K,B,T,D,R,L,U,z,q,H,J,_,X,V,Y,Q;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,m=new A.PublicKey(u),t.next=7;break;case 4:throw t.prev=4,t.t0=t.catch(0),new Error("Invalid candy config key ".concat(t.t0));case 7:return g=[m.toBuffer(),e.from(f),e.from(p.toArray("le",4))],t.next=10,A.PublicKey.findProgramAddress(g,W.b);case 10:if(j=t.sent,y=Object(o.a)(j,1),x=y[0],v=e.from([].concat(Object(i.a)(new I.a(h).toArray("le",8)),Object(i.a)(x.toBuffer()),Object(i.a)(m.toBuffer()),Object(i.a)(new I.a(b).toArray("le",8)))),N.a.verifyClaim(v,d,e.from(s.root))){t.next=17;break}throw new Error("Gumdrop merkle proof does not match");case 17:return t.next=19,A.PublicKey.findProgramAddress([e.from("ClaimCount"),e.from(new I.a(h).toArray("le",8)),a.toBuffer()],W.b);case 19:return O=t.sent,w=Object(o.a)(O,2),k=w[0],S=w[1],t.next=25,A.PublicKey.findProgramAddress([e.from("Wallet"),a.toBuffer()],W.b);case 25:return C=t.sent,P=Object(o.a)(C,2),E=P[0],M=P[1],K=s.temporal.equals(A.PublicKey.default)?r:s.temporal,B=[],t.next=33,n.getAccountInfo(k);case 33:if(T=t.sent,D=0,null!==T){t.next=38;break}t.next=46;break;case 38:if(R=F.a.accounts.decode("ClaimCount",T.data),D=R.count,!R.claimant.equals(r)){t.next=44;break}K=r,t.next=46;break;case 44:throw L=R.claimant.toBase58(),new Error("This wallet does not match existing claimant ".concat(L));case 46:if(!(D>=(U=b))){t.next=49;break}throw new Error("Cannot mint another NFT. ".concat(U," NFT(s) were originally allocated")+(D>0?" and ".concat(D," NFT(s) were already minted"):""));case 49:return t.next=51,Object(W.h)(m,l);case 51:return z=t.sent,q=Object(o.a)(z,1),H=q[0],t.next=56,Object(W.g)(n,H);case 56:return J=t.sent,console.log(J),_=[],t.next=61,G(n,r,a,E,k,K,m,H,J.wallet,e.from([].concat(Object(i.a)(new I.a(M).toArray("le",1)),Object(i.a)(new I.a(S).toArray("le",1)),Object(i.a)(new I.a(h).toArray("le",8)),Object(i.a)(new I.a(b).toArray("le",8)),Object(i.a)(x.toBuffer()),Object(i.a)(new I.a(d.length).toArray("le",4)),Object(i.a)(e.concat(d)))));case 61:return X=t.sent,V=Object(o.a)(X,2),Y=V[0],Q=V[1],_.push(Q),B.push.apply(B,Object(i.a)(Y)),t.abrupt("return",[B,g,_]);case 68:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e,n,r,a,c,i,o,s,u,l,d){return t.apply(this,arguments)}}(),G=function(){var t=Object(s.a)(c.a.mark((function t(n,r,a,s,u,l,d,f,b,h){var p,m,g,j,y,x,v;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p=A.Keypair.generate(),t.next=3,U(p.publicKey);case 3:return m=t.sent,t.next=6,z(p.publicKey);case 6:return g=t.sent,t.next=9,A.PublicKey.findProgramAddress([r.toBuffer(),P.c.toBuffer(),p.publicKey.toBuffer()],W.d);case 9:return j=t.sent,y=Object(o.a)(j,1),x=y[0],v=[],t.t0=v,t.t1=A.SystemProgram,t.t2=r,t.t3=p.publicKey,t.t4=P.b.span,t.next=20,n.getMinimumBalanceForRentExemption(P.b.span);case 20:return t.t5=t.sent,t.t6=P.c,t.t7={fromPubkey:t.t2,newAccountPubkey:t.t3,space:t.t4,lamports:t.t5,programId:t.t6},t.t8=t.t1.createAccount.call(t.t1,t.t7),t.t0.push.call(t.t0,t.t8),v.push(P.d.createInitMintInstruction(P.c,p.publicKey,0,r,r)),v.push(P.d.createAssociatedTokenAccountInstruction(W.d,P.c,p.publicKey,x,r,r)),v.push(P.d.createMintToInstruction(P.c,p.publicKey,x,r,[],1)),v.push(new A.TransactionInstruction({programId:W.b,keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:p.publicKey,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:A.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:P.c,isSigner:!1,isWritable:!1},{pubkey:W.e,isSigner:!1,isWritable:!1},{pubkey:W.a,isSigner:!1,isWritable:!1},{pubkey:A.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:A.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(i.a)(e.from(E.sha256.digest("global:claim_candy")).slice(0,8)),Object(i.a)(h)))})),t.abrupt("return",[v,p]);case 30:case"end":return t.stop()}}),t)})));return function(e,n,r,a,c,i,o,s,u,l){return t.apply(this,arguments)}}(),H=function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r,a,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=new A.PublicKey(n),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new Error("Invalid distributor key ".concat(e.t0));case 7:return e.next=9,t.getAccountInfo(r);case 9:if(null!==(a=e.sent)){e.next=12;break}throw new Error("Could not fetch distributor ".concat(n));case 12:if(a.owner.equals(W.b)){e.next=15;break}throw i=a.owner.toBase58(),new Error("Invalid distributor owner ".concat(i));case 15:return o=F.a.accounts.decode("MerkleDistributor",a.data),e.abrupt("return",[r,o]);case 17:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var t=Object(s.a)(c.a.mark((function t(n,r,a,i){var s,u,l,d,f,b,h;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H(n,r);case 2:if(s=t.sent,u=Object(o.a)(s,2),l=u[0],u[1].temporal.equals(W.c)){t.next=10;break}return t.abrupt("return",!1);case 10:if("candy"!==i){t.next=22;break}return t.next=13,A.PublicKey.findProgramAddress([e.from("ClaimCount"),e.from(new I.a(Number(a)).toArray("le",8)),l.toBuffer()],W.b);case 13:return d=t.sent,f=Object(o.a)(d,1),b=f[0],t.next=18,n.getAccountInfo(b);case 18:return h=t.sent,t.abrupt("return",null===h);case 22:return t.abrupt("return",!0);case 23:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),_=function(t){var n=Object(D.i)(),a=Object(C.b)(),u=f.a.parse(t.location.search),d=l.a.useState(u.distributor||""),P=Object(o.a)(d,2),E=P[0],M=P[1],N=l.a.useState(u.tokenAcc?"transfer":"candy"),F=Object(o.a)(N,2),U=F[0],z=F[1],G=l.a.useState(u.tokenAcc||""),_=Object(o.a)(G,2),X=_[0],V=_[1],Y=l.a.useState(u.config||""),Q=Object(o.a)(Y,2),Z=Q[0],$=Q[1],ee=l.a.useState(u.uuid||""),te=Object(o.a)(ee,2),ne=te[0],re=te[1],ae=l.a.useState(u.handle||""),ce=Object(o.a)(ae,2),ie=ce[0],oe=ce[1],se=l.a.useState(u.amount||""),ue=Object(o.a)(se,2),le=ue[0],de=ue[1],fe=l.a.useState(u.index||""),be=Object(o.a)(fe,2),he=be[0],pe=be[1],me=l.a.useState(u.pin||""),ge=Object(o.a)(me,2),je=ge[0],ye=ge[1],xe=l.a.useState(u.proof||""),ve=Object(o.a)(xe,2),Oe=ve[0],we=ve[1],ke=E.length>0&&(u.tokenAcc?X.length>0:Z.length>0&&ne.length>0)&&ie.length>0&&le.length>0&&he.length>0&&je.length>0,Se=l.a.useState(!ke),Ce=Object(o.a)(Se,2),Ae=Ce[0],Pe=Ce[1],Ee=l.a.useState(null),Me=Object(o.a)(Ee,2),Ie=Me[0],Ke=Me[1],Be=l.a.useState(""),Te=Object(o.a)(Be,2),De=Te[0],We=Te[1],Ne=l.a.useState(!0),Fe=Object(o.a)(Ne,2),Re=Fe[0],Le=Fe[1];l.a.useEffect((function(){var e=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=Le,e.next=4,J(n,E,he,U);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=10;break;case 8:e.prev=8,e.t2=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[n,E,he,U]);var Ue=new B.a({region:"us-east-2",credentials:{accessKeyId:"AKIA4UZOKPKEBSISSXIX",secretAccessKey:"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"}}),ze=function(){var t=Object(s.a)(c.a.mark((function t(s){var u,l,d,f,b,h,p,m,g,j,y,x,v,O,w,k,S,C,P,M,B,D,N,F,R,z;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.preventDefault(),a.connected&&null!==a.publicKey){t.next=3;break}throw new Error("Wallet not connected");case 3:if(u=Number(he),l=Number(le),!isNaN(l)){t.next=7;break}throw new Error("Could not parse amount ".concat(le));case 7:if(!isNaN(u)){t.next=9;break}throw new Error("Could not parse index ".concat(he));case 9:t.prev=9,d=new I.a(je),t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(9),new Error("Could not parse pin ".concat(je,": ").concat(t.t0));case 16:return t.next=18,H(n,E);case 18:if(f=t.sent,b=Object(o.a)(f,2),h=b[0],p=b[1],console.log("Distributor ".concat(p)),m=""===Oe?[]:Oe.split(",").map((function(t){var n=e.from(K.decode(t));if(32!==n.length)throw new Error("Invalid proof hash length");return n})),"candy"!==U){t.next=35;break}return console.log("Building candy claim"),t.next=28,q(n,a.publicKey,h,p,Z,ne,m,ie,l,u,d);case 28:x=t.sent,v=Object(o.a)(x,3),g=v[0],j=v[1],y=v[2],t.next=46;break;case 35:if("transfer"!==U){t.next=45;break}return t.next=38,L(n,a.publicKey,h,p,X,m,ie,l,u,d);case 38:O=t.sent,w=Object(o.a)(O,3),g=w[0],j=w[1],y=w[2],t.next=46;break;case 45:throw new Error("Unknown claim method ".concat(U));case 46:return t.t1=A.Transaction,t.t2=a.publicKey,t.next=50,n.getRecentBlockhash("singleGossip");case 50:t.t3=t.sent.blockhash,t.t4={feePayer:t.t2,recentBlockhash:t.t3},k=new t.t1(t.t4),S=new Set,C=Object(r.a)(g);try{for(C.s();!(P=C.n()).done;){M=P.value,k.add(M),B=Object(r.a)(M.keys);try{for(B.s();!(D=B.n()).done;)(N=D.value).isSigner&&S.add(N.pubkey)}catch(c){B.e(c)}finally{B.f()}}}catch(c){C.e(c)}finally{C.f()}if(console.log("Expecting the following signers: ".concat(Object(i.a)(S).map((function(e){return e.toBase58()})))),k.setSigners.apply(k,Object(i.a)(S)),y.length>0&&k.partialSign.apply(k,Object(i.a)(y)),!S.has(W.c)){t.next=79;break}return F={FunctionName:"send-OTP",Payload:new Uint8Array(e.from(JSON.stringify({method:"send",transaction:K.encode(k.serializeMessage()),seeds:j})))},t.next=63,Ue.send(new T.a(F));case 63:if(R=t.sent,console.log(R),200===R.StatusCode){t.next=67;break}throw new Error("Failed to send AWS OTP. ".concat(JSON.stringify(R)));case 67:if(void 0!==R.Payload){t.next=69;break}throw new Error("No response payload");case 69:t.prev=69,z=JSON.parse(e.from(R.Payload).toString()),t.next=76;break;case 73:throw t.prev=73,t.t5=t.catch(69),new Error("Could not parse response ".concat(R.Payload));case 76:if(z.MessageId){t.next=78;break}throw new Error("Failed to send AWS OTP. ".concat(JSON.stringify(z)));case 78:Object(W.i)({message:"OTP sent",description:"Please check ".concat(ie," for a OTP")});case 79:return t.abrupt("return",k);case 80:case"end":return t.stop()}}),t,null,[[9,13],[69,73]])})));return function(e){return t.apply(this,arguments)}}(),qe=function(){var t=Object(s.a)(c.a.mark((function t(r,i){var o,s,u,l,d,f,h,p;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),i){t.next=3;break}throw new Error("Transaction not available for OTP verification");case 3:if(a.connected&&null!==a.publicKey){t.next=5;break}throw new Error("Wallet not connected");case 5:if(!i.signatures.some((function(e){return e.publicKey.equals(W.c)}))){t.next=35;break}if(o=Number(De),!isNaN(o)&&0!==De.length){t.next=10;break}throw new Error("Could not parse OTP ".concat(De));case 10:return s={FunctionName:"send-OTP",Payload:new Uint8Array(e.from(JSON.stringify({method:"verify",otp:o,handle:ie})))},t.next=13,Ue.send(new T.a(s));case 13:if(u=t.sent,console.log(u),200===u.StatusCode){t.next=18;break}throw l=JSON.stringify(u),new Error("Failed to verify AWS OTP. ".concat(l));case 18:if(void 0!==u.Payload){t.next=20;break}throw new Error("No response payload");case 20:t.prev=20,d=JSON.parse(e.from(u.Payload).toString()),t.next=27;break;case 24:throw t.prev=24,t.t0=t.catch(20),new Error("Could not parse response ".concat(u.Payload));case 27:t.prev=27,f=K.decode(JSON.parse(d.body)),t.next=34;break;case 31:throw t.prev=31,t.t1=t.catch(27),new Error("Could not decode transaction signature ".concat(d.body));case 34:i.addSignature(W.c,f);case 35:return t.prev=35,t.next=38,a.signTransaction(i);case 38:h=t.sent,t.next=44;break;case 41:throw t.prev=41,t.t2=t.catch(35),new Error("Failed to sign transaction");case 44:return t.next=46,D.c.sendSignedTransaction({connection:n,signedTransaction:h});case 46:return p=t.sent,console.log(p),Object(W.i)({message:"Claim succeeded",description:Object(R.jsx)(b.a,{href:D.c.explorerLinkFor(p.txid,n),children:"View transaction on explorer"})}),Ke(null),t.prev=50,t.t3=Le,t.next=54,J(n,E,he,U);case 54:t.t4=t.sent,(0,t.t3)(t.t4),t.next=60;break;case 58:t.prev=58,t.t5=t.catch(50);case 60:case"end":return t.stop()}}),t,null,[[20,24],[27,31],[35,41],[50,58]])})));return function(e,n){return t.apply(this,arguments)}}(),Ge=l.a.useState(!1),He=Object(o.a)(Ge,2),Je=He[0],_e=He[1],Xe=function(){return Object(R.jsx)(h.a,{size:24,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})},Ve=function(e){return"candy"===e?Object(R.jsxs)(l.a.Fragment,{children:[Object(R.jsx)(p.a,{style:{width:"60ch"},id:"config-text-field",label:"Candy Config",value:Z,onChange:function(e){return $(e.target.value)},disabled:!Ae}),Object(R.jsx)(p.a,{style:{width:"60ch"},id:"config-uuid-text-field",label:"Candy UUID",value:ne,onChange:function(e){return re(e.target.value)},disabled:!Ae})]}):"transfer"===e?Object(R.jsx)(l.a.Fragment,{children:Object(R.jsx)(p.a,{style:{width:"60ch"},id:"token-acc-text-field",label:"Source Token Account",value:X,onChange:function(e){return V(e.target.value)},disabled:!Ae})}):void 0},Ye=[{name:"Populate Claim",inner:function(e){return Object(R.jsxs)(l.a.Fragment,{children:[Object(R.jsx)(p.a,{style:{width:"60ch"},id:"distributor-text-field",label:"Distributor",value:E,onChange:function(e){return M(e.target.value)},disabled:!Ae}),Object(R.jsxs)(j.a,{fullWidth:!0,children:[Object(R.jsx)(y.a,{id:"claim-method-label",children:"Claim Method"}),Object(R.jsxs)(x.a,{labelId:"claim-method-label",id:"claim-method-select",value:U,label:"Claim Method",onChange:function(e){localStorage.setItem("claimMethod",e.target.value),z(e.target.value)},style:{textAlign:"left"},disabled:!Ae,children:[Object(R.jsx)(v.a,{value:"transfer",children:"Token Transfer"}),Object(R.jsx)(v.a,{value:"candy",children:"Candy Machine"})]})]}),""!==U&&Ve(U),Object(R.jsx)(p.a,{style:{width:"60ch"},id:"amount-text-field",label:"Amount",value:le,onChange:function(e){return de(e.target.value)},disabled:!Ae}),Object(R.jsx)(p.a,{style:{width:"60ch"},id:"handle-text-field",label:"Handle",value:ie,onChange:function(e){return oe(e.target.value)},disabled:!Ae}),Object(R.jsx)(p.a,{style:{width:"60ch"},id:"index-text-field",label:"Index",value:he,onChange:function(e){return pe(e.target.value)},disabled:!Ae}),Object(R.jsx)(p.a,{style:{width:"60ch"},id:"pin-text-field",label:"Pin",value:je,onChange:function(e){return ye(e.target.value)},disabled:!Ae}),Object(R.jsx)(p.a,{style:{width:"60ch"},id:"proof-text-field",label:"Proof",multiline:!0,value:Oe,onChange:function(e){return we(e.target.value)},disabled:!Ae}),Object(R.jsx)(g.a,{color:"info",onClick:function(e){return Pe(!Ae)},children:Ae?"Stop Editing":"Edit Claim"}),Object(R.jsx)(m.a,{}),Object(R.jsxs)(m.a,{sx:{position:"relative"},children:[Object(R.jsx)(g.a,{disabled:!a.connected||!ke||Je,variant:"contained",style:{width:"100%"},color:Re?"primary":"success",onClick:function(t){_e(!0);var r=function(){var r=Object(s.a)(c.a.mark((function r(){var a,i;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,J(n,E,he,U);case 3:return a=r.sent,r.next=6,ze(t);case 6:if(i=r.sent,a){r.next=12;break}return r.next=10,qe(t,i);case 10:r.next=13;break;case 12:Ke(i);case 13:_e(!1),e(),r.next=21;break;case 17:r.prev=17,r.t0=r.catch(0),Object(W.i)({message:"Claim failed",description:"".concat(r.t0)}),_e(!1);case 21:case"end":return r.stop()}}),r,null,[[0,17]])})));return function(){return r.apply(this,arguments)}}();r()},children:Re?"Next":"Claim Airdrop"}),Je&&Xe()]})]})}}];Re&&Ye.push({name:"Verify OTP",inner:function(e){return Object(R.jsxs)(l.a.Fragment,{children:[Object(R.jsx)(p.a,{style:{width:"60ch"},id:"otp-text-field",label:"OTP",value:De,onChange:function(e){return We(e.target.value)}}),Object(R.jsx)(m.a,{}),Object(R.jsxs)(m.a,{sx:{position:"relative"},children:[Object(R.jsx)(g.a,{disabled:!a.connected||!De||Je,variant:"contained",color:"success",style:{width:"100%"},onClick:function(t){_e(!0);var n=function(){var n=Object(s.a)(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,qe(t,Ie);case 3:_e(!1),e(),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),Object(W.i)({message:"Claim failed",description:"".concat(n.t0)}),_e(!1);case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();n()},children:"Claim Airdrop"}),Je&&Xe()]})]})}});var Qe=l.a.useState(0),Ze=Object(o.a)(Qe,2),$e=Ze[0],et=Ze[1],tt=Math.min($e,Ye.length-1),nt=Object(R.jsxs)(l.a.Fragment,{children:[Object(R.jsx)(O.a,{activeStep:tt,children:Ye.map((function(e,t){return Object(R.jsx)(w.a,{children:Object(R.jsx)(k.a,{children:e.name})},e.name)}))}),Object(R.jsx)(m.a,{})]});return Object(R.jsxs)(S.a,{spacing:2,children:[Re&&nt,Ye[tt].inner((function(){et((function(e){return e===Ye.length-1?0:e+1}))})),tt>0&&Object(R.jsx)(g.a,{color:"info",onClick:function(){et((function(e){return e-1}))},children:"Back"})]})}}).call(this,n(18).Buffer)},507:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return A}));var r=n(3),a=n.n(r),c=n(16),i=n(8),o=n(10),s=n(1),u=n.n(s),l=n(164),d=n(62),f=n(202),b=n(203),h=n(237),p=n(236),m=n(114),g=n(74),j=n(70),y=n(7),x=n(43),v=n(38),O=n.n(v),w=n(59),k=n(50),S=n(31),C=n(6),A=function(){var t=Object(k.i)(),n=Object(j.b)(),r=u.a.useState(""),s=Object(o.a)(r,2),v=s[0],A=s[1],P=u.a.useState(localStorage.getItem("claimMethod")||"transfer"),E=Object(o.a)(P,2),M=E[0],I=E[1],K=u.a.useState(localStorage.getItem("candyConfig")||""),B=Object(o.a)(K,2),T=B[0],D=B[1],W=u.a.useState(localStorage.getItem("candyUUID")||""),N=Object(o.a)(W,2),F=N[0],R=N[1],L=function(){var r=Object(i.a)(a.a.mark((function r(i){var s,u,d,f,b,h,p,m,g,j,A,P,E,I,K,B;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i.preventDefault(),n.connected&&null!==n.publicKey){r.next=3;break}throw new Error("Wallet not connected");case 3:return s=y.Keypair.fromSecretKey(new Uint8Array(JSON.parse(v))),r.next=6,y.PublicKey.findProgramAddress([e.from("MerkleDistributor"),s.publicKey.toBuffer()],S.b);case 6:return u=r.sent,d=Object(o.a)(u,2),f=d[0],b=d[1],r.next=12,y.PublicKey.findProgramAddress([e.from("Wallet"),f.toBuffer()],S.b);case 12:if(h=r.sent,p=Object(o.a)(h,2),m=p[0],g=p[1],"candy"!==M){r.next=28;break}return r.next=19,Object(S.f)(t,T);case 19:return A=r.sent,r.next=22,Object(S.h)(A,F);case 22:P=r.sent,E=Object(o.a)(P,1),I=E[0],j=[{pubkey:I,isSigner:!1,isWritable:!0},{pubkey:S.a,isSigner:!1,isWritable:!1}],r.next=29;break;case 28:j=[];case 29:return K=new y.TransactionInstruction({programId:S.b,keys:[{pubkey:s.publicKey,isSigner:!0,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:y.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:x.c,isSigner:!1,isWritable:!1}].concat(Object(c.a)(j)),data:e.from([].concat(Object(c.a)(e.from(w.sha256.digest("global:close_distributor")).slice(0,8)),Object(c.a)(new O.a(b).toArray("le",1)),Object(c.a)(new O.a(g).toArray("le",1))))}),r.next=32,k.c.sendTransactionWithRetry(t,n,[K],[s]);case 32:B=r.sent,console.log(B),"string"===typeof B?Object(S.i)({message:"Close failed",description:B}):Object(S.i)({message:"Close succeeded",description:Object(C.jsx)(l.a,{href:k.c.explorerLinkFor(B.txid,t),children:"View transaction on explorer"})});case 35:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return Object(C.jsxs)(f.a,{spacing:2,children:[Object(C.jsx)(d.a,{style:{width:"60ch"},id:"base-text-field",label:"Base Private Key",value:v,onChange:function(e){return A(e.target.value)}}),Object(C.jsxs)(b.a,{fullWidth:!0,children:[Object(C.jsx)(h.a,{id:"claim-method-label",children:"Claim Method"}),Object(C.jsxs)(p.a,{labelId:"claim-method-label",id:"claim-method-select",value:M,label:"Claim Method",onChange:function(e){localStorage.setItem("claimMethod",e.target.value),I(e.target.value)},style:{textAlign:"left"},children:[Object(C.jsx)(m.a,{value:"transfer",children:"Token Transfer"}),Object(C.jsx)(m.a,{value:"candy",children:"Candy Machine"})]})]}),""!==M&&function(e){return"candy"===e?Object(C.jsxs)(u.a.Fragment,{children:[Object(C.jsx)(d.a,{style:{width:"60ch"},id:"config-text-field",label:"Candy Config",value:T,onChange:function(e){return D(e.target.value)}}),Object(C.jsx)(d.a,{style:{width:"60ch"},id:"config-uuid-text-field",label:"Candy UUID",value:F,onChange:function(e){return R(e.target.value)}})]}):"transfer"===e?null:void 0}(M),Object(C.jsx)(g.a,{disabled:!n.connected||!v,variant:"contained",onClick:function(e){var t=function(){var t=Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(S.i)({message:"Close failed",description:"".concat(t.t0)});case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}();t()},children:"Close Merkle Airdrop"})]})}}).call(this,n(18).Buffer)},508:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return te}));var r=n(35),a=n(16),c=n(34),i=n(10),o=n(3),s=n.n(o),u=n(8),l=n(1),d=n.n(l),f=n(47),b=n.n(f),h=n(202),p=n(74),m=n(874),g=n(875),j=n(876),y=n(529),x=n(204),v=n(877),O=n(148),w=n(164),k=n(62),S=n(528),C=n(203),A=n(237),P=n(236),E=n(114),M=n(513),I=n.n(M),K=n(70),B=n(7),T=n(43),D=n(59),W=n(38),N=n.n(W),F=n(42),R=n(869),L=n(870),U=n(50),z=n(31),q=n(229),G=n(509),H=n(217),J=n(6),_=function(){var e=new Uint8Array(4);return window.crypto.getRandomValues(e),e},X="\xa0",V=function(e,t){return"Token"===t.type?{subject:"Token Drop",message:"You received ".concat(e.amount," token(s) ")+'(click <a href="'.concat(t.meta,'">here</a> to view the mint on explorer). ')+'<a href="'.concat(e.url,'">Click here to claim them!</a>')}:{subject:"NFT Drop",message:"You received a Candy Machine pre-sale crank "+'(click <a href="'.concat(t.meta,'">here</a> to view the config on explorer). ')+'<a href="'.concat(e.url,'">Click here to claim it!</a>')}},Y=function(e,t,n){if("AWS SES"===e)return function(e,t){console.log("SES auth ".concat(e));var n=new R.a({region:"us-east-2",credentials:{accessKeyId:e.accessKeyId,secretAccessKey:e.secretAccessKey}});return function(){var e=Object(u.a)(s.a.mark((function e(r,a){var c,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=V(r,a),i={Destination:{ToAddresses:[r.handle]},Message:{Subject:{Data:c.subject,Charset:"utf-8"},Body:{Html:{Data:c.message,Charset:"utf-8"}}},Source:t},console.log(i),e.prev=3,e.next=6,n.send(new L.a(i));case 6:o=e.sent,console.log(o),o.$metadata.httpStatusCode,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n){return e.apply(this,arguments)}}()}(t,n);if("Manual"===e)return function(){var e=Object(u.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log({handle:t.handle,url:t.url});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();throw new Error("Unrecognized claim distribution method ".concat(e))},Q=function(e){return JSON.parse(e).map((function(e){return{handle:e.handle,amount:e.amount,url:e.url}}))},Z=function(e){var t=document.createElement("div");document.body.appendChild(t);var n=function(){b.a.unmountComponentAtNode(t),document.body.removeChild(t)};return new Promise((function(n){!function(n){var r=n.onSubmit,a=n.onDismiss;b.a.render(e({onSubmit:r,onDismiss:a,show:!0}),t)}({onSubmit:function(e){return n(e)},onDismiss:function(){return n(void 0)}})})).finally((function(){!function(n,r){var a=n.onSubmit,c=n.onDismiss;b.a.render(e({onSubmit:a,onDismiss:c,show:!1}),t,r)}({onSubmit:function(){},onDismiss:function(){}},n)}))},$=function(){var t=Object(u.a)(s.a.mark((function t(n,r){var a,c,i,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,a=new B.PublicKey(r),t.next=7;break;case 4:throw t.prev=4,t.t0=t.catch(0),new Error("Invalid mint key ".concat(t.t0));case 7:return t.next=9,n.getAccountInfo(a);case 9:if(null!==(c=t.sent)){t.next=12;break}throw new Error("Could not fetch mint");case 12:if(c.owner.equals(T.c)){t.next=15;break}throw i=c.owner.toBase58(),new Error("Invalid mint owner ".concat(i));case 15:if(c.data.length===T.b.span){t.next=17;break}throw new Error("Invalid mint size ".concat(c.data.length));case 17:return o=T.b.decode(e.from(c.data)),t.abrupt("return",{key:a,info:o});case 19:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e,n){return t.apply(this,arguments)}}(),ee=function(){var t=Object(u.a)(s.a.mark((function t(n,r,a,c){var o,u,l,d,f;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.PublicKey.findProgramAddress([n.toBuffer(),T.c.toBuffer(),a.toBuffer()],z.d);case 2:return o=t.sent,u=Object(i.a)(o,1),l=u[0],t.next=7,r.getAccountInfo(l);case 7:if(null!==(d=t.sent)){t.next=10;break}throw new Error("Could not fetch creator token account");case 10:if(d.data.length===T.a.span){t.next=12;break}throw new Error("Invalid token account size ".concat(d.data.length));case 12:if(f=T.a.decode(e.from(d.data)),!(new N.a(f.amount,8,"le").toNumber()<c)){t.next=15;break}throw new Error("Creator token account does not have enough tokens");case 15:return t.abrupt("return",l);case 16:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),te=function(t){var n=Object(U.i)(),o=Object(K.b)(),l=d.a.useState(localStorage.getItem("claimMethod")||""),f=Object(i.a)(l,2),b=f[0],M=f[1],W=d.a.useState(localStorage.getItem("candyConfig")||""),R=Object(i.a)(W,2),L=R[0],V=R[1],te=d.a.useState(localStorage.getItem("candyUUID")||""),ne=Object(i.a)(te,2),re=ne[0],ae=ne[1],ce=d.a.useState(localStorage.getItem("mint")||""),ie=Object(i.a)(ce,2),oe=ie[0],se=ie[1],ue=d.a.useState(""),le=Object(i.a)(ue,2),de=le[0],fe=le[1],be=d.a.useState(""),he=Object(i.a)(be,2),pe=he[0],me=he[1],ge=d.a.useState(void 0),je=Object(i.a)(ge,2),ye=je[0],xe=je[1],ve=d.a.useState([]),Oe=Object(i.a)(ve,2),we=Oe[0],ke=Oe[1],Se=d.a.useState(localStorage.getItem("otpAuth")||"default"),Ce=Object(i.a)(Se,2),Ae=Ce[0],Pe=Ce[1],Ee=d.a.useState(localStorage.getItem("commMethod")||""),Me=Object(i.a)(Ee,2),Ie=Me[0],Ke=Me[1],Be=d.a.useState({}),Te=Object(i.a)(Be,2),De=Te[0],We=Te[1],Ne=d.a.useState(localStorage.getItem("commSource")||""),Fe=Object(i.a)(Ne,2),Re=Fe[0],Le=Fe[1],Ue=d.a.useState(""),ze=Object(i.a)(Ue,2),qe=ze[0],Ge=ze[1],He=d.a.useState(""),Je=Object(i.a)(He,2),_e=Je[0],Xe=Je[1],Ve=d.a.useState(""),Ye=Object(i.a)(Ve,2),Qe=Ye[0],Ze=Ye[1],$e=function(e){return"https://explorer.solana.com/address/".concat(e.toBase58(),"?cluster=").concat(U.c.envFor(n))},et=function(){var t=Object(u.a)(s.a.mark((function t(r){var u,l,d,f,k,S,C,A,P,E,M,I,K,W,R,G,X,V,te,ne,ae,ce,ie,se,ue,le,de,fe,be,he,me,ge,je,ye,ve,Oe,we,Se,Ce,Pe,Ee,Me,Ke,Be,Te;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),xe(void 0),ke([]),o.connected&&null!==o.publicKey){t.next=5;break}throw new Error("Wallet not connected");case 5:if(u=function(e,t){return String(e/Math.pow(10,t.decimals))},0!==(l=Q(pe)).length){t.next=9;break}throw new Error("No claimants provided");case 9:if(l.forEach((function(e,t){if(!e.handle)throw new Error("Claimant ".concat(t," doesn't have handle"));if(!e.amount)throw new Error("Claimant ".concat(t," doesn't have amount"));if(0===e.amount)throw new Error("Claimant ".concat(t," amount is 0"))})),(d={}).total=l.reduce((function(e,t){return e+t.amount}),0),"transfer"!==b){t.next=23;break}return f=!0,t.next=16,$(n,oe);case 16:return d.mint=t.sent,t.next=19,ee(o.publicKey,n,d.mint.key,d.total);case 19:d.source=t.sent,d.info={type:"Token",meta:$e(d.mint.key)},t.next=47;break;case 23:if("candy"!==b){t.next=46;break}return f=!1,t.next=27,Object(z.f)(n,L);case 27:return d.config=t.sent,d.info={type:"Candy",meta:$e(d.config)},t.next=31,Object(z.h)(d.config,re);case 31:return k=t.sent,S=Object(i.a)(k,1),C=S[0],d.candyMachineKey=C,t.next=37,Object(z.g)(n,C);case 37:if(A=t.sent,console.log(A),P=A.data.itemsAvailable.toNumber()-A.itemsRedeemed.toNumber(),!isNaN(P)){t.next=42;break}throw new Error("Could not calculae how many candy machine items are remaining");case 42:if(!(P<d.total)){t.next=44;break}throw new Error("Distributor is allocated more mints than the candy machine has remaining");case 44:t.next=47;break;case 46:throw new Error("Unknown claim method ".concat(b));case 47:if(console.log(d),E=function(e){return void 0!==e.url&&null!==e.url},!l.reduce((function(e,t){return e&&E(t)}),!0)){t.next=81;break}return t.next=52,Z((function(e){var t=e.show,n=e.onSubmit,r=e.onDismiss,a=[{click:function(){return n("create")},name:"Create and Send"},{click:function(){return n("send")},name:"Send only"}];return Object(J.jsxs)(H.a,{visible:t,onCancel:r,width:"70ch",children:[Object(J.jsx)("p",{style:{color:"white",fontSize:"1rem",width:"50ch",marginTop:8},children:"Uploaded distribution list has URLs for all claimants. Skip creation of airdrop and only re-send links?"}),Object(J.jsx)("br",{}),Object(J.jsx)(h.a,{direction:"row",spacing:2,children:a.map((function(e){return Object(J.jsx)(p.a,{style:{width:"30ch",color:"white",marginBottom:8},variant:"outlined",onClick:e.click,children:e.name},e.name)}))})]})}));case 52:if(M=t.sent,console.log(M),"send"!==M){t.next=77;break}ke(l),I=Y(Ie,De,Re),K=Object(c.a)(l),t.prev=58,K.s();case 60:if((W=K.n()).done){t.next=66;break}return R=W.value,t.next=64,I(R,d.info);case 64:t.next=60;break;case 66:t.next=71;break;case 68:t.prev=68,t.t0=t.catch(58),K.e(t.t0);case 71:return t.prev=71,K.f(),t.finish(71);case 74:return t.abrupt("return");case 77:if("create"!==M){t.next=80;break}t.next=81;break;case 80:throw new Error("Dismissed");case 81:l.forEach((function(e){e.pin=new N.a(_()),e.seed=f?d.mint.key:d.config})),G=[],X=0;case 84:if(!(X<l.length)){t.next=99;break}return V=l[X],te=[V.seed.toBuffer(),e.from(V.handle),e.from(V.pin.toArray("le",4))],t.next=89,B.PublicKey.findProgramAddress(te,z.b);case 89:ne=t.sent,ae=Object(i.a)(ne,2),ce=ae[0],ie=ae[1],V.bump=ie,V.pda=ce,G.push(e.from([].concat(Object(a.a)(new N.a(X).toArray("le",8)),Object(a.a)(ce.toBuffer()),Object(a.a)(V.seed.toBuffer()),Object(a.a)(new N.a(V.amount).toArray("le",8)))));case 96:++X,t.next=84;break;case 99:return se=new q.a(G),ue=se.getRoot(),le=B.Keypair.generate(),console.log("Base ".concat(le.publicKey.toBase58())),t.next=105,B.PublicKey.findProgramAddress([e.from("MerkleDistributor"),le.publicKey.toBuffer()],z.b);case 105:de=t.sent,fe=Object(i.a)(de,2),be=fe[0],he=fe[1],me=0;case 110:if(!(me<l.length)){t.next=123;break}if(ge=se.getProof(me),se.verifyProof(me,ge,ue)){t.next=115;break}throw new Error("Gumdrop merkle tree verification failed");case 115:je=l[me],ye=["distributor=".concat(be),"handle=".concat(je.handle),"amount=".concat(je.amount),"index=".concat(me),"pin=".concat(je.pin.toNumber()),"proof=".concat(ge.map((function(e){return F.encode(e)})))],f?ye.push("tokenAcc=".concat(d.source)):(ye.push("config=".concat(L)),ye.push("uuid=".concat(re))),ve=ye.join("&"),je.url="".concat(window.location.origin).concat(window.location.pathname,"#/claim?").concat(ve);case 120:++me,t.next=110;break;case 123:return t.next=125,Z((function(e){var t=e.show,n=e.onSubmit,r=e.onDismiss,a=[{click:function(){return n(!1)},name:"Cancel"},{click:function(){return n(!0)},name:"Approve"}];return Object(J.jsxs)(H.a,{visible:t,onCancel:r,width:"70ch",children:[Object(J.jsx)("h2",{style:{color:"white",fontWeight:"bold",fontSize:20},children:"Claim Distribution Preview"}),Object(J.jsx)(m.a,{sx:{"td, th":{color:"white"},backgroundColor:"#444444",borderRadius:"5px",maxHeight:"30ch"},children:Object(J.jsxs)(g.a,{size:"small",children:[Object(J.jsx)(j.a,{children:Object(J.jsxs)(y.a,{children:[Object(J.jsx)(x.a,{children:"Handle"}),Object(J.jsx)(x.a,{children:"Tokens"}),Object(J.jsx)(x.a,{children:"Pin"})]})}),Object(J.jsx)(v.a,{children:l.map((function(e){return Object(J.jsxs)(y.a,{sx:{"td, th":{border:0}},children:[Object(J.jsxs)(x.a,{component:"th",scope:"row",children:[e.handle," "]}),Object(J.jsx)(x.a,{children:f?u(e.amount,d.mint.info):e.amount}),Object(J.jsx)(x.a,{children:e.pin.toNumber()})]},e.pda.toBase58())}))})]})}),Object(J.jsx)(O.a,{style:{height:10}}),Object(J.jsx)(h.a,{direction:"row",spacing:2,children:a.map((function(e){return Object(J.jsx)(p.a,{style:{width:"30ch",color:"white",marginBottom:8},variant:"outlined",onClick:e.click,children:e.name},e.name)}))})]})}));case 125:if(!0!==t.sent){t.next=129;break}t.next=130;break;case 129:throw new Error("Claim distribution preview not approved");case 130:if(xe(le),ke(l),"default"!==Ae){t.next=136;break}Oe=z.c,t.next=141;break;case 136:if("none"!==Ae){t.next=140;break}Oe=B.PublicKey.default,t.next=141;break;case 140:throw new Error("Unknown OTP authorization type ".concat(Ae));case 141:if((we=Array()).push(new B.TransactionInstruction({programId:z.b,keys:[{pubkey:le.publicKey,isSigner:!0,isWritable:!1},{pubkey:be,isSigner:!1,isWritable:!0},{pubkey:o.publicKey,isSigner:!0,isWritable:!1},{pubkey:B.SystemProgram.programId,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(a.a)(e.from(D.sha256.digest("global:new_distributor")).slice(0,8)),Object(a.a)(new N.a(he).toArray("le",1)),Object(a.a)(ue),Object(a.a)(Oe.toBuffer())))})),!f){t.next=147;break}we.push(T.d.createApproveInstruction(T.c,d.source,be,o.publicKey,[],d.total)),t.next=153;break;case 147:return t.next=149,B.PublicKey.findProgramAddress([e.from("Wallet"),be.toBuffer()],z.b);case 149:Se=t.sent,Ce=Object(i.a)(Se,1),Pe=Ce[0],we.push(new B.TransactionInstruction({programId:z.a,keys:[{pubkey:d.candyMachineKey,isSigner:!1,isWritable:!0},{pubkey:o.publicKey,isSigner:!0,isWritable:!1}],data:e.from([].concat(Object(a.a)(e.from(D.sha256.digest("global:update_authority")).slice(0,8)),Object(a.a)(new N.a(1).toArray("le",1)),Object(a.a)(Pe.toBuffer())))}));case 153:return t.next=155,U.c.sendTransactionWithRetry(n,o,we,[le]);case 155:if(Ee=t.sent,console.log(Ee),"string"!==typeof Ee){t.next=161;break}throw new Error(Ee);case 161:Object(z.i)({message:"Distributor creation succeeded",description:Object(J.jsx)(w.a,{href:U.c.explorerLinkFor(Ee.txid,n),children:"View transaction on explorer"})});case 162:console.log("Distributing claim URLs"),Me=Y(Ie,De,Re),Ke=Object(c.a)(l),t.prev=165,Ke.s();case 167:if((Be=Ke.n()).done){t.next=173;break}return Te=Be.value,t.next=171,Me(Te,d.info);case 171:t.next=167;break;case 173:t.next=178;break;case 175:t.prev=175,t.t1=t.catch(165),Ke.e(t.t1);case 178:return t.prev=178,Ke.f(),t.finish(178);case 181:case"end":return t.stop()}}),t,null,[[58,68,71,74],[165,175,178,181]])})));return function(e){return t.apply(this,arguments)}}(),tt=function(e){if(1===e.length){var t=e[0],n=new FileReader;n.onload=function(e){if(null!==e&&null!==e.target)if("string"===typeof e.target.result){try{Q(e.target.result)}catch(n){return Object(z.i)({message:"File upload failed for: ".concat(t.name),description:Object(J.jsxs)("span",{children:["Could not parse uploaded file.",X,Object(J.jsx)(w.a,{href:"#/",children:"Does it follow the JSON scheme?"})]})}),fe(""),void me("")}fe(t.name),me(e.target.result)}else Object(z.i)({message:"File upload failed for: ".concat(t.name),description:"Could not read uploaded file"})},n.readAsText(t)}else Object(z.i)({message:"File upload failed",description:"Received ".concat(e.length," files")})},nt=Object(J.jsxs)(d.a.Fragment,{children:[Object(J.jsx)(G.a,{handleDrop:tt,children:Object(J.jsxs)(h.a,{direction:"row",style:{width:"60ch",height:"15ch"},sx:{border:"1px dashed grey",justifyContent:"center",alignContent:"center"},children:[Object(J.jsxs)(p.a,{variant:"text",component:"label",style:{padding:0,marginTop:"5ch",marginBottom:"5ch"},children:["Upload a ",""===de?"distribution":"different"," list",Object(J.jsx)("input",{type:"file",onChange:function(e){tt(e.target.files),e.target.value=""},hidden:!0})]}),X,Object(J.jsx)(p.a,{variant:"text",component:"label",disabled:!0,style:{padding:0},children:"or drag it here"})]})}),""!==de?Object(J.jsxs)(p.a,{variant:"text",component:"label",disabled:!0,style:{padding:0},children:[Object(J.jsx)(I.a,{}),Object(J.jsxs)("span",{children:[X," Uploaded ",de]})]}):Object(J.jsx)(O.a,{})]}),rt=d.a.useState(!1),at=Object(i.a)(rt,2),ct=at[0],it=at[1],ot=Object(J.jsxs)(O.a,{sx:{position:"relative"},children:[Object(J.jsx)(p.a,{disabled:!o.connected||!de||ct||we.length>0,variant:"contained",style:{width:"100%"},onClick:function(e){it(!0);var t=function(){var t=Object(u.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,et(e);case 3:it(!1),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),Object(z.i)({message:"Create failed",description:"".concat(t.t0)}),it(!1);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}();t()},children:"Create Airdrop"}),ct&&Object(J.jsx)(S.a,{size:24,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]}),st=function(e){var t=encodeURIComponent(JSON.stringify(e));return"data:text/plain;charset=utf-8,".concat(t)};return Object(J.jsxs)(h.a,{spacing:2,children:[Object(J.jsxs)(C.a,{fullWidth:!0,children:[Object(J.jsx)(A.a,{id:"claim-method-label",children:"Claim Method"}),Object(J.jsxs)(P.a,{labelId:"claim-method-label",id:"claim-method-select",value:b,label:"Claim Method",onChange:function(e){localStorage.setItem("claimMethod",e.target.value),M(e.target.value)},style:{textAlign:"left"},children:[Object(J.jsx)(E.a,{value:"transfer",children:"Token Transfer"}),Object(J.jsx)(E.a,{value:"candy",children:"Candy Machine"})]})]}),""!==b&&function(e){return"candy"===e?Object(J.jsxs)(d.a.Fragment,{children:[Object(J.jsx)(k.a,{style:{width:"60ch"},id:"config-text-field",label:"Candy Config",value:L,onChange:function(e){V(e.target.value),localStorage.setItem("candyConfig",e.target.value)}}),Object(J.jsx)(k.a,{style:{width:"60ch"},id:"config-uuid-text-field",label:"Candy UUID",value:re,onChange:function(e){ae(e.target.value),localStorage.setItem("candyUUID",e.target.value)}})]}):"transfer"===e?Object(J.jsx)(k.a,{style:{width:"60ch"},id:"mint-text-field",label:"Mint",value:oe,onChange:function(e){localStorage.setItem("mint",e.target.value),se(e.target.value)}}):void 0}(b),Object(J.jsxs)(C.a,{fullWidth:!0,children:[Object(J.jsx)(A.a,{id:"otp-auth-label",children:"OTP Authorization"}),Object(J.jsxs)(P.a,{labelId:"otp-auth-label",id:"otp-auth-select",value:Ae,label:"OTP Authorization",onChange:function(e){localStorage.setItem("otpAuth",e.target.value),Pe(e.target.value)},style:{textAlign:"left"},children:[Object(J.jsxs)(E.a,{value:"default",children:["Default",X,Object(J.jsxs)(w.a,{href:$e(z.c),underline:"none",target:"_blank",rel:"noopener noreferrer",children:["(",Object(z.j)(z.c.toBase58()),")"]})]}),Object(J.jsx)(E.a,{value:"none",children:"None"})]})]}),Object(J.jsxs)(C.a,{fullWidth:!0,children:[Object(J.jsx)(A.a,{id:"comm-method-label",children:"Distribution Method"}),Object(J.jsxs)(P.a,{labelId:"comm-method-label",id:"comm-method-select",value:Ie,label:"Distribution Method",onChange:function(e){localStorage.setItem("commMethod",e.target.value),Ke(e.target.value)},style:{textAlign:"left"},children:[Object(J.jsx)(E.a,{value:"AWS SES",children:"AWS SES"}),Object(J.jsx)(E.a,{value:"Manual",children:"Manual"})]})]}),""!==Ie&&function(e){return"Manual"===e?null:"AWS SES"===e?Object(J.jsxs)(d.a.Fragment,{children:[Object(J.jsx)(k.a,{style:{width:"60ch"},id:"comm-access-key-id-field",label:"".concat(e," Access Key Id"),value:qe,onChange:function(e){We((function(t){return Object(r.a)(Object(r.a)({},t),{},{accessKeyId:e.target.value})})),Ge(e.target.value)}}),Object(J.jsx)(k.a,{style:{width:"60ch"},id:"comm-secret-access-key-field",label:"".concat(e," Secret Access Key"),value:_e,onChange:function(e){We((function(t){return Object(r.a)(Object(r.a)({},t),{},{secretAccessKey:e.target.value})})),Xe(e.target.value)}}),Object(J.jsx)(k.a,{style:{width:"60ch"},id:"comm-source-field",label:"".concat(e," Source"),value:Re,onChange:function(e){localStorage.setItem("commSource",e.target.value),Le(e.target.value)}})]}):Object(J.jsxs)(d.a.Fragment,{children:[Object(J.jsx)(k.a,{style:{width:"60ch"},id:"comm-auth-field",label:"".concat(e," API key"),value:Qe,onChange:function(e){We((function(t){return Object(r.a)(Object(r.a)({},t),{},{apiKey:e.target.value})})),Ze(e.target.value)}}),Object(J.jsx)(k.a,{style:{width:"60ch"},id:"comm-source-field",label:"".concat(e," Source"),value:Re,onChange:function(e){localStorage.setItem("commSource",e.target.value),Le(e.target.value)}})]})}(Ie),""!==Ie&&nt,""!==Ie&&ot,void 0!==ye&&Object(J.jsx)(w.a,{href:st(Array.from(ye.secretKey)),download:"basekey.json",underline:"none",style:{width:"100%"},children:Object(J.jsx)(p.a,{variant:"contained",style:{width:"100%"},children:"Download Distributor Base Secret Key"})}),we.length>0&&Object(J.jsx)(w.a,{href:st(we),download:"claimURLs.json",underline:"none",style:{width:"100%"},children:Object(J.jsx)(p.a,{variant:"contained",style:{width:"100%"},children:"Download claim URLs"})})]})}}).call(this,n(18).Buffer)},509:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(10),a=n(1),c=n.n(a),i=n(271),o=n(6),s=function(e){var t=c.a.useRef(null),n=c.a.useState(0),a=Object(r.a)(n,2),s=a[0],u=a[1],l=c.a.useState(!1),d=Object(r.a)(l,2),f=d[0],b=d[1],h=function(e){e.preventDefault(),e.stopPropagation()},p=function(e){e.preventDefault(),e.stopPropagation(),u(s+1),e.dataTransfer.items&&e.dataTransfer.items.length>0&&b(!0)},m=function(e){e.preventDefault(),e.stopPropagation();var t=s-1;u(t),0===t&&b(!1)},g=function(t){t.preventDefault(),t.stopPropagation(),b(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0&&(e.handleDrop(t.dataTransfer.files),t.dataTransfer.clearData(),u(0))};c.a.useEffect((function(){var e=t.current;if(null!==e)return e.addEventListener("dragenter",p),e.addEventListener("dragleave",m),e.addEventListener("dragover",h),e.addEventListener("drop",g),function(){e.removeEventListener("dragenter",p),e.removeEventListener("dragleave",m),e.removeEventListener("dragover",h),e.removeEventListener("drop",g)}}));var j="dark"===Object(i.b)().mode?"rgba(255,255,255,.1)":"rgba(0, 0, 0,.1)";return Object(o.jsx)("div",{ref:t,style:f?{backgroundColor:j}:{},children:e.children})}},545:function(e,t){},546:function(e,t){},568:function(e,t){},569:function(e,t){},703:function(e,t){},705:function(e,t){},719:function(e,t){},723:function(e,t){},725:function(e,t){},737:function(e,t){},739:function(e,t){},766:function(e,t){},768:function(e,t){},773:function(e,t){},775:function(e,t){},782:function(e,t){},794:function(e,t){},797:function(e,t){},808:function(e,t){},809:function(e,t,n){},816:function(e,t,n){},821:function(e){e.exports=JSON.parse('{"version":"0.0.0","name":"merkle_distributor","instructions":[{"name":"newDistributor","accounts":[{"name":"base","isMut":false,"isSigner":true},{"name":"distributor","isMut":true,"isSigner":false},{"name":"payer","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"root","type":{"array":["u8",32]}},{"name":"temporal","type":"publicKey"}]},{"name":"closeDistributor","accounts":[{"name":"base","isMut":false,"isSigner":true},{"name":"distributor","isMut":true,"isSigner":false},{"name":"distributorWallet","isMut":true,"isSigner":false},{"name":"receiver","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"walletBump","type":"u8"}]},{"name":"claim","accounts":[{"name":"distributor","isMut":true,"isSigner":false},{"name":"claimStatus","isMut":true,"isSigner":false},{"name":"from","isMut":true,"isSigner":false},{"name":"to","isMut":true,"isSigner":false},{"name":"temporal","isMut":false,"isSigner":true},{"name":"payer","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"index","type":"u64"},{"name":"amount","type":"u64"},{"name":"claimantSecret","type":"publicKey"},{"name":"proof","type":{"vec":{"array":["u8",32]}}}]},{"name":"claimCandy","accounts":[{"name":"distributor","isMut":true,"isSigner":false},{"name":"distributorWallet","isMut":true,"isSigner":false},{"name":"claimCount","isMut":true,"isSigner":false},{"name":"temporal","isMut":false,"isSigner":true},{"name":"payer","isMut":false,"isSigner":true},{"name":"candyMachineConfig","isMut":false,"isSigner":false},{"name":"candyMachine","isMut":true,"isSigner":false},{"name":"candyMachineWallet","isMut":true,"isSigner":false},{"name":"candyMachineMint","isMut":true,"isSigner":false},{"name":"candyMachineMetadata","isMut":true,"isSigner":false},{"name":"candyMachineMasterEdition","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"tokenMetadataProgram","isMut":false,"isSigner":false},{"name":"candyMachineProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"clock","isMut":false,"isSigner":false}],"args":[{"name":"walletBump","type":"u8"},{"name":"claimBump","type":"u8"},{"name":"index","type":"u64"},{"name":"amount","type":"u64"},{"name":"claimantSecret","type":"publicKey"},{"name":"proof","type":{"vec":{"array":["u8",32]}}}]}],"accounts":[{"name":"MerkleDistributor","type":{"kind":"struct","fields":[{"name":"base","type":"publicKey"},{"name":"bump","type":"u8"},{"name":"root","type":{"array":["u8",32]}},{"name":"temporal","type":"publicKey"}]}},{"name":"ClaimStatus","type":{"kind":"struct","fields":[{"name":"isClaimed","type":"bool"},{"name":"claimant","type":"publicKey"},{"name":"claimedAt","type":"i64"},{"name":"amount","type":"u64"}]}},{"name":"ClaimCount","type":{"kind":"struct","fields":[{"name":"count","type":"u64"},{"name":"claimant","type":"publicKey"}]}},{"name":"CandyMachine","type":{"kind":"struct","fields":[{"name":"authority","type":"publicKey"},{"name":"wallet","type":"publicKey"},{"name":"tokenMint","type":{"option":"publicKey"}},{"name":"config","type":"publicKey"},{"name":"data","type":{"defined":"CandyMachineData"}},{"name":"itemsRedeemed","type":"u64"},{"name":"bump","type":"u8"}]}}],"types":[{"name":"CandyMachineData","type":{"kind":"struct","fields":[{"name":"uuid","type":"string"},{"name":"price","type":"u64"},{"name":"itemsAvailable","type":"u64"},{"name":"goLiveDate","type":{"option":"i64"}}]}}],"events":[{"name":"ClaimedEvent","fields":[{"name":"index","type":"u64","index":false},{"name":"claimant","type":"publicKey","index":false},{"name":"amount","type":"u64","index":false}]}],"errors":[{"code":300,"name":"InvalidProof","msg":"Invalid Merkle proof."},{"code":301,"name":"DropAlreadyClaimed","msg":"Drop already claimed."},{"code":302,"name":"Unauthorized","msg":"Account is not authorized to execute this instruction"},{"code":303,"name":"OwnerMismatch","msg":"Token account owner did not match intended owner"},{"code":304,"name":"TemporalMismatch","msg":"Temporal signer did not match distributor"}]}')},851:function(e){e.exports=JSON.parse('[{"handle":"alice@solana.com","mint":"58iV1fAXFvXoPk28xpB2ihedEnM9HSRkiPHXXm1r4V8z","amount":1500000000},{"handle":"bob@solana.com","mint":"58iV1fAXFvXoPk28xpB2ihedEnM9HSRkiPHXXm1r4V8z","amount":1500000000}]')},852:function(e,t,n){},854:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(47),i=n.n(c),o=n(50),s=(n(812),n(813),n(814),n(815),n(10)),u=n(234),l=n(57),d=n(370),f=n(919),b=n(915),h=n(202),p=n(164),m=n(148),g=(n(816),n(6)),j=function(e){return Object(g.jsx)("div",{style:{display:"table",position:"absolute",top:0,left:0,height:"100%",width:"100%"},children:Object(g.jsx)("div",{style:{display:"table-cell",verticalAlign:"middle"},children:Object(g.jsx)("div",{style:{marginLeft:"auto",marginRight:"auto",height:e.height,width:e.width},children:e.children})})})},y=n(74),x=n(502),v=n.n(x),O=n(35),w=n(142),k=n(920),S=n(270),C=["isConnected","onClickConnect","onClickChange"],A=function(e){e.isConnected,e.onClickConnect,e.onClickChange;var t=Object(w.a)(e,C);return Object(g.jsx)(k.a,Object(O.a)(Object(O.a)({},t),{},{children:Object(g.jsx)(S.a,{})}))},P=n(70),E=n(921),M=function(){var e=Object(o.k)().setModal,t=Object(o.l)().setVisible,n=Object(P.b)().connected,a=Object(r.useCallback)((function(){return t(!0)}),[t]),c=Object(r.useCallback)((function(){e(o.f.WALLET),t(!0)}),[e,t]);return Object(g.jsx)(E.a,{color:"default",children:Object(g.jsxs)(m.a,{sx:{display:"flex",bgcolor:"action.disabledBackground"},minWidth:"100%",children:[Object(g.jsxs)(h.a,{direction:"row",spacing:2,sx:{display:"flex",height:"62px",justifyContent:"flex-start",alignItems:"center",marginLeft:"36px"},children:[Object(g.jsx)(p.a,{href:"#/",underline:"none",children:Object(g.jsx)(y.a,{variant:"outlined",children:Object(g.jsx)(v.a,{})})}),Object(g.jsx)(p.a,{href:"#/create",underline:"none",children:Object(g.jsx)(y.a,{variant:"outlined",children:"Create"})}),Object(g.jsx)(p.a,{href:"#/claim",underline:"none",children:Object(g.jsx)(y.a,{variant:"outlined",children:"Claim"})}),Object(g.jsx)(p.a,{href:"#/close",underline:"none",children:Object(g.jsx)(y.a,{variant:"outlined",children:"Close"})})]}),Object(g.jsx)(m.a,{sx:{flexGrow:1}}),Object(g.jsx)(m.a,{sx:{display:"flex",height:"62px",justifyContent:"flex-end",alignItems:"center"},children:Object(g.jsx)(A,{isConnected:n,sx:{marginRight:"36px"},onClickConnect:c,onClickChange:a})})]})})},I=n(503),K=n(507),B=n(508),T=function(e){var t=[{name:"summary",inner:Object(g.jsxs)(h.a,{spacing:1,children:[Object(g.jsx)("div",{children:"The Gumdrop program leverages the Solana blockchain and merkle trees to facilitate airdrops to a large number of whitelisted users at a low cost to creators."}),Object(g.jsxs)("div",{children:["In the Solana ecosystem, the cost of token airdrops is currently largely due to rent costs being","\xa0",Object(g.jsx)(p.a,{href:"https://docs.solana.com/implemented-proposals/rent",underline:"none",children:'"fixed at the genesis"'}),". With the large increase in SOLUSD since genesis, rent costs when creating accounts for thousands of users have duly skyrocketed."]}),Object(g.jsx)("div",{children:"Simultaneously, NFT projects often have a presale to early project followers and contributors. However, the candy-machine doesn't have the ability to grant early minting to a whitelisted subset of wallets while also using the same asset configuration for open launch."}),Object(g.jsxs)("div",{children:["Gumpdrop (originally pioneered for token airdrops by"," ",Object(g.jsx)(p.a,{href:"https://github.com/Uniswap/merkle-distributor",underline:"none",children:"Uniswap"})," ","and ported to Solana by","\xa0",Object(g.jsx)(p.a,{href:"https://github.com/saber-hq/merkle-distributor",underline:"none",children:"Saber"}),") solves both these issues by building a space-efficient hash structure (the merkle tree) such that an on-chain program can validate whether the user is part of a whitelist. Moreover, Gumdrop allows creators to directly send whitelisted users an airdrop reclamation link by building the tree with off-chain handles (e.g email, twitter, etc) and allowing the user to redeem into any wallet."]})]})},{name:"create",inner:Object(g.jsxs)(h.a,{spacing:1,children:[Object(g.jsx)(u.b,{to:"/create",children:"CREATION"}),Object(g.jsx)("div",{children:"Creation builds a whitelist of users that can claim either existing fungible tokens or directly mint from a pre-sale candy-machine."}),Object(g.jsxs)("div",{children:["Creators must choose a mint or a candy-machine config and UUID, an off-chain notification method (based on the handles supplied below, e.g email, twitter, etc), and supply a list of recipients and balances with the following JSON schema","\xa0",Object(g.jsx)(p.a,{href:"data:text/plain;charset=utf-8,".concat(JSON.stringify(n(851))),download:"example.json",underline:"none",children:"(Click here for an example)"})]}),Object(g.jsx)("pre",{style:{fontSize:14},children:'\n[\n  {\n    "handle": "<DISTRIBUTION-SPECIFIC-HANDLE>"\n    "amount": <#-TOKENS-OR-CANDY-MINTS>\n  },\n  ...\n]'}),Object(g.jsx)("div",{children:"NB: When a candy-machine is supplied, update authority for the candy-machine will be transferred to the Gumdrop state. This can be reclaimed by closing the Gumdrop."})]})},{name:"claim",inner:Object(g.jsxs)(h.a,{spacing:1,children:[Object(g.jsx)(u.b,{to:"/claim",children:"CLAIMS"}),Object(g.jsx)("div",{children:"Claims are redeemed through a URL with query parameters holding claim-specific keys. Claimants will need to verify ownership of the specified handle by answering a OTP challenge and pay the rent and minting fees if applicable."})]})},{name:"close",inner:Object(g.jsxs)(h.a,{spacing:1,children:[Object(g.jsx)(u.b,{to:"/close",children:"CLOSING"}),Object(g.jsx)("div",{children:"Closing the Gumdrop cleans up the on-chain state and allows creators to recycle any lamports held for rent-exemption after the airdrop is complete."}),Object(g.jsx)("div",{children:"When closing a candy-machine-integrated distributor, update authority will be transferred back to the wallet owner."})]})}];return Object(g.jsx)(h.a,{alignContent:"left",textAlign:"left",spacing:2,children:t.map((function(e){return e.inner}))})},D=function(){var e=window;return{width:e.innerWidth,height:e.innerHeight}};var W=function(){var e=Object(o.h)();a.a.useEffect((function(){}),[e.mode]);var t=a.a.useMemo((function(){var t,n;return"dark"!==e.mode&&e.mode?(t="light",n="#111"):(t="dark",n="#eee"),Object(d.a)({palette:{mode:t,action:{disabled:n}}})}),[e.mode]),n=function(){var e=a.a.useState(D()),t=Object(s.a)(e,2),n=t[0],r=t[1];return a.a.useEffect((function(){var e=function(){r(D())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}().height;return Object(g.jsx)("div",{className:"App",style:{backgroundColor:"transparent"},children:Object(g.jsxs)(f.a,{theme:t,children:[Object(g.jsx)(b.a,{}),Object(g.jsx)(M,{}),Object(g.jsxs)(j,{height:"".concat(.8*n,"px"),width:"60ch",children:[Object(g.jsx)(m.a,{height:"60px"}),Object(g.jsx)(u.a,{children:Object(g.jsxs)(l.c,{children:[Object(g.jsx)(l.a,{path:"/create",component:B.a}),Object(g.jsx)(l.a,{path:"/claim",component:I.a}),Object(g.jsx)(l.a,{path:"/close",component:K.a}),Object(g.jsx)(l.a,{path:"/",component:T})]})}),Object(g.jsx)(m.a,{height:"80px"})]})]})})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,924)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};n(852);i.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(o.d,{children:Object(g.jsx)(o.g,{children:Object(g.jsx)(o.a,{children:Object(g.jsx)(o.b,{children:Object(g.jsx)(W,{})})})})})}),document.getElementById("root")),N()},99:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d}));n(34),n(3),n(8);var r=n(10),a=n(1),c=(n(7),n(38)),i=n.n(c),o=new i.a(10);o.pow(new i.a(18)),o.pow(new i.a(18)),o.pow(new i.a(27)),new i.a(0),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:8});function s(e,t){var n=Object(a.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),c=Object(r.a)(n,2),i=c[0],o=c[1],s=Object(a.useCallback)((function(t){if(i!==t)if(o(t),null===t)localStorage.removeItem(e);else try{localStorage.setItem(e,JSON.stringify(t))}catch(n){}}),[i,e]);return[i,s]}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}new Set(["USDC","wUSDC","USDT"]);function l(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,r){return e.slice(r*t,(r+1)*t)}))}new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});function d(e){return new Promise((function(t){return setTimeout(t,e)}))}}},[[854,1,2]]]);
//# sourceMappingURL=main.ea67511a.chunk.js.map