(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[0],{105:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return u}));n(8),n(11);var r=n(5),a=(new Map,new r.PublicKey("So11111111111111111111111111111111111111112")),i=new r.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),c=new r.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),o=new r.PublicKey("BPFLoaderUpgradeab1e11111111111111111111111"),s=new r.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),u=new r.PublicKey("11111111111111111111111111111111")},113:function(e,t,n){"use strict";n.r(t),n.d(t,"ENDPOINTS",(function(){return v})),n.d(t,"ConnectionProvider",(function(){return y})),n.d(t,"useConnection",(function(){return O})),n.d(t,"useConnectionConfig",(function(){return w})),n.d(t,"getErrorForTransaction",(function(){return C})),n.d(t,"SequenceType",(function(){return k})),n.d(t,"sendTransactionsWithManualRetry",(function(){return S})),n.d(t,"sendTransactions",(function(){return E})),n.d(t,"sendTransaction",(function(){return P})),n.d(t,"sendTransactionWithRetry",(function(){return B})),n.d(t,"getUnixTs",(function(){return M})),n.d(t,"sendSignedTransaction",(function(){return K})),n.d(t,"envFor",(function(){return F})),n.d(t,"explorerLinkFor",(function(){return N}));var r=n(27),a=n(2),i=n.n(a),c=n(6),o=n(17),s=n(10),u=n(94),l=n(5),d=n(0),f=n.n(d),b=n(233),p=n(234),h=n(208),m=n(16),g=n(4),v=[{name:"mainnet-beta",endpoint:"https://api.mainnet-beta.solana.com",ChainId:h.a.MainnetBeta},{name:"devnet",endpoint:"https://api.devnet.solana.com",ChainId:h.a.Devnet}],j=v[0].endpoint,x=f.a.createContext({endpoint:j,setEndpoint:function(){},connection:new l.Connection(j,"recent"),env:v[0].name,tokens:[],tokenMap:new Map});function y(e){var t,n=e.children,r=void 0===n?void 0:n,a=Object(u.d)("connectionEndpoint",v[0].endpoint),i=Object(s.a)(a,2),c=i[0],f=i[1],b=Object(d.useMemo)((function(){return new l.Connection(c,"recent")}),[c]),p=(null===(t=v.find((function(e){return e.endpoint===c})))||void 0===t?void 0:t.name)||v[0].name,m=Object(d.useState)([]),j=Object(s.a)(m,2),y=j[0],O=j[1],w=Object(d.useState)(new Map),k=Object(s.a)(w,2),C=k[0],S=k[1];return Object(d.useEffect)((function(){(new h.b).resolve().then((function(e){var t,n=e.excludeByTag("nft").filterByChainId((null===(t=v.find((function(e){return e.endpoint===c})))||void 0===t?void 0:t.ChainId)||h.a.MainnetBeta).getList(),r=Object(o.a)(n).reduce((function(e,t){return e.set(t.address,t),e}),new Map);S(r),O(n)}))}),[p,c]),Object(d.useEffect)((function(){var e=b.onAccountChange(l.Keypair.generate().publicKey,(function(){}));return function(){b.removeAccountChangeListener(e)}}),[b]),Object(d.useEffect)((function(){var e=b.onSlotChange((function(){return null}));return function(){b.removeSlotChangeListener(e)}}),[b]),Object(g.jsx)(x.Provider,{value:{endpoint:c,setEndpoint:f,connection:b,tokens:y,tokenMap:C,env:p},children:r})}function O(){return Object(d.useContext)(x).connection}function w(){var e=Object(d.useContext)(x);return{endpoint:e.endpoint,setEndpoint:e.setEndpoint,env:e.env,tokens:e.tokens,tokenMap:e.tokenMap}}var k,C=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"max");case 2:return e.next=4,t.getParsedConfirmedTransaction(n);case 4:return r=e.sent,a=[],(null===r||void 0===r?void 0:r.meta)&&r.meta.logMessages&&r.meta.logMessages.forEach((function(e){for(var t,n=/Error: (.*)/gm;null!==(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,t.length>1&&a.push(t[1])})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function S(e,t,n,r){return A.apply(this,arguments)}function A(){return(A=Object(c.a)(i.a.mark((function e(t,n,r,a){var c,o,s,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=0,o=0,s=null,u={},r=r.filter((function(e,t){return e.length>0||(u[t]=!0,!1)})),l=a.filter((function(e,t){return!u[t]}));case 6:if(!(c<r.length&&o<3)){e.next=29;break}if(r=r.slice(c,r.length),l=l.slice(c,l.length),r.length===s?o+=1:o=0,e.prev=10,1!==r.length){e.next=17;break}return e.next=14,B(t,n,r[0],l[0],"single");case 14:c=1,e.next=20;break;case 17:return e.next=19,E(t,n,r,l,k.StopOnFailure,"single");case 19:c=e.sent;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(10),console.error(e.t0);case 25:console.log("Died on ",c,"retrying from instruction",r[c],"instructions length is",r.length),s=r.length,e.next=6;break;case 29:case"end":return e.stop()}}),e,null,[[10,22]])})))).apply(this,arguments)}!function(e){e[e.Sequential=0]="Sequential",e[e.Parallel=1]="Parallel",e[e.StopOnFailure=2]="StopOnFailure"}(k||(k={}));var E=function(){var e=Object(c.a)(i.a.mark((function e(t,n,r,a){var c,s,u,d,f,b,p,h,g,v,j,x,y,O,w=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=w.length>4&&void 0!==w[4]?w[4]:k.Parallel,s=w.length>5&&void 0!==w[5]?w[5]:"singleGossip",u=w.length>6&&void 0!==w[6]?w[6]:function(e,t){},d=w.length>7&&void 0!==w[7]?w[7]:function(e,t){return!1},f=w.length>8?w[8]:void 0,n.publicKey){e.next=7;break}throw new m.i;case 7:if(b=[],f){e.next=12;break}return e.next=11,t.getRecentBlockhash(s);case 11:f=e.sent;case 12:p=function(e){var t=r[e],i=a[e];if(0===t.length)return"continue";var c=new l.Transaction;t.forEach((function(e){return c.add(e)})),c.recentBlockhash=f.blockhash,c.setSigners.apply(c,[n.publicKey].concat(Object(o.a)(i.map((function(e){return e.publicKey}))))),i.length>0&&c.partialSign.apply(c,Object(o.a)(i)),b.push(c)},h=0;case 14:if(!(h<r.length)){e.next=21;break}if("continue"!==p(h)){e.next=18;break}return e.abrupt("continue",18);case 18:h++,e.next=14;break;case 21:return e.next=23,n.signAllTransactions(b);case 23:g=e.sent,v=[],j={breakEarly:!1,i:0},console.log("Signed txns length",g.length,"vs handed in length",r.length),x=i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=K({connection:t,signedTransaction:g[n]})).then((function(e){var t=e.txid;e.slot;u(t,n)})).catch((function(e){d(g[n],n),c===k.StopOnFailure&&(j.breakEarly=!0,j.i=n)})),c===k.Parallel){e.next=16;break}return e.prev=3,e.next=6,r;case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),console.log("Caught failure",e.t0),!j.breakEarly){e.next=14;break}return console.log("Died on ",j.i),e.abrupt("return",{v:j.i});case 14:e.next=17;break;case 16:v.push(r);case 17:case"end":return e.stop()}}),e,null,[[3,8]])})),y=0;case 29:if(!(y<g.length)){e.next=37;break}return e.delegateYield(x(y),"t0",31);case 31:if("object"!==typeof(O=e.t0)){e.next=34;break}return e.abrupt("return",O.v);case 34:y++,e.next=29;break;case 37:if(c===k.Parallel){e.next=40;break}return e.next=40,Promise.all(v);case 40:return e.abrupt("return",g.length);case 41:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),P=function(){var e=Object(c.a)(i.a.mark((function e(t,n,r,a){var c,s,u,d,f,h,v,j,x,y,O,w,k,S,A=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=!(A.length>4&&void 0!==A[4])||A[4],s=A.length>5&&void 0!==A[5]?A[5]:"singleGossip",u=A.length>6&&void 0!==A[6]&&A[6],d=A.length>7?A[7]:void 0,n.publicKey){e.next=6;break}throw new m.i;case 6:if(f=new l.Transaction,r.forEach((function(e){return f.add(e)})),e.t0=d,e.t0){e.next=13;break}return e.next=12,t.getRecentBlockhash(s);case 12:e.t0=e.sent;case 13:if(f.recentBlockhash=e.t0.blockhash,u?(h=f).setSigners.apply(h,Object(o.a)(a.map((function(e){return e.publicKey})))):(v=f).setSigners.apply(v,[n.publicKey].concat(Object(o.a)(a.map((function(e){return e.publicKey}))))),a.length>0&&(j=f).partialSign.apply(j,Object(o.a)(a)),u){e.next=20;break}return e.next=19,n.signTransaction(f);case 19:f=e.sent;case 20:return x=f.serialize(),y={skipPreflight:!0,commitment:s},e.next=24,t.sendRawTransaction(x,y);case 24:if(O=e.sent,w=0,!c){e.next=39;break}return e.next=29,R(O,T,t,s);case 29:if(k=e.sent){e.next=32;break}throw new Error("Timed out awaiting confirmation on transaction");case 32:if(w=(null===k||void 0===k?void 0:k.slot)||0,!(null===k||void 0===k?void 0:k.err)){e.next=39;break}return e.next=36,C(t,O);case 36:throw S=e.sent,Object(b.a)({message:"Transaction failed...",description:Object(g.jsxs)(g.Fragment,{children:[S.map((function(e){return Object(g.jsx)("div",{children:e})})),Object(g.jsx)(p.a,{address:O,type:"transaction"})]}),type:"error"}),new Error("Raw transaction ".concat(O," failed"));case 39:return e.abrupt("return",{txid:O,slot:w});case 40:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),B=function(){var e=Object(c.a)(i.a.mark((function e(t,n,r,a){var c,s,u,d,f,b,p,h,g,v,j,x=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=x.length>4&&void 0!==x[4]?x[4]:"singleGossip",s=x.length>5&&void 0!==x[5]&&x[5],u=x.length>6?x[6]:void 0,d=x.length>7?x[7]:void 0,n.publicKey){e.next=6;break}throw new m.i;case 6:if(f=new l.Transaction,r.forEach((function(e){return f.add(e)})),e.t0=u,e.t0){e.next=13;break}return e.next=12,t.getRecentBlockhash(c);case 12:e.t0=e.sent;case 13:if(f.recentBlockhash=e.t0.blockhash,s?(b=f).setSigners.apply(b,Object(o.a)(a.map((function(e){return e.publicKey})))):(p=f).setSigners.apply(p,[n.publicKey].concat(Object(o.a)(a.map((function(e){return e.publicKey}))))),a.length>0&&(h=f).partialSign.apply(h,Object(o.a)(a)),s){e.next=26;break}return e.prev=17,e.next=20,n.signTransaction(f);case 20:f=e.sent,e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(17),e.abrupt("return","Failed to sign transaction");case 26:return d&&d(),console.log("About to send"),e.prev=28,e.next=31,K({connection:t,signedTransaction:f});case 31:return g=e.sent,v=g.txid,j=g.slot,e.abrupt("return",{txid:v,slot:j});case 37:return e.prev=37,e.t2=e.catch(28),console.error(e.t2),e.abrupt("return","See console logs");case 41:case"end":return e.stop()}}),e,null,[[17,23],[28,37]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),M=function(){return(new Date).getTime()/1e3},T=15e3;function K(e){return I.apply(this,arguments)}function I(){return(I=Object(c.a)(i.a.mark((function e(t){var n,r,a,o,s,l,d,f,b,p,h,m,g;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,r=t.connection,a=t.timeout,o=void 0===a?T:a,s=n.serialize(),l=M(),d=0,e.next=6,r.sendRawTransaction(s,{skipPreflight:!0});case 6:return f=e.sent,console.log("Started awaiting confirmation for",f),b=!1,Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b||!(M()-l<o)){e.next=6;break}return r.sendRawTransaction(s,{skipPreflight:!0}),e.next=4,Object(u.c)(500);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=10,e.next=13,R(f,o,r,"recent",!0);case 13:if(p=e.sent){e.next=16;break}throw new Error("Timed out awaiting confirmation on transaction");case 16:if(!p.err){e.next=19;break}throw console.error(p.err),new Error("Transaction failed: Custom instruction error");case 19:d=(null===p||void 0===p?void 0:p.slot)||0,e.next=47;break;case 22:if(e.prev=22,e.t0=e.catch(10),console.error("Timeout Error caught",e.t0),!e.t0.timeout){e.next=27;break}throw new Error("Timed out awaiting confirmation on transaction");case 27:return h=null,e.prev=28,e.next=31,W(r,n,"single");case 31:h=e.sent.value,e.next=36;break;case 34:e.prev=34,e.t1=e.catch(28);case 36:if(!h||!h.err){e.next=47;break}if(!h.logs){e.next=46;break}m=h.logs.length-1;case 39:if(!(m>=0)){e.next=46;break}if(!(g=h.logs[m]).startsWith("Program log: ")){e.next=43;break}throw new Error("Transaction failed: "+g.slice("Program log: ".length));case 43:--m,e.next=39;break;case 46:throw new Error(JSON.stringify(h.err));case 47:return e.prev=47,b=!0,e.finish(47);case 50:return console.log("Latency",f,M()-l),e.abrupt("return",{txid:f,slot:d});case 52:case"end":return e.stop()}}),e,null,[[10,22,47,50],[28,34]])})))).apply(this,arguments)}function W(e,t,n){return D.apply(this,arguments)}function D(){return(D=Object(c.a)(i.a.mark((function e(t,n,r){var a,c,o,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._recentBlockhash(t._disableBlockhashCaching);case 2:return n.recentBlockhash=e.sent,a=n.serializeMessage(),c=n._serialize(a),o=c.toString("base64"),s=[o,{encoding:"base64",commitment:r}],e.next=10,t._rpcRequest("simulateTransaction",s);case 10:if(!(u=e.sent).error){e.next=13;break}throw new Error("failed to simulate transaction: "+u.error.message);case 13:return e.abrupt("return",u.result);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=function(e){var t,n=e._rpcEndpoint,a="mainnet-beta",i=Object(r.a)(v);try{for(i.s();!(t=i.n()).done;){var c=t.value;if(c.endpoint===n){a=c.name;break}}}catch(o){i.e(o)}finally{i.f()}return a},N=function(e,t){return"https://explorer.solana.com/tx/".concat(e,"?cluster=").concat(F(t))};function R(e,t,n){return L.apply(this,arguments)}function L(){return L=Object(c.a)(i.a.mark((function e(t,n,r){var a,o,s,l,d,f=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>3&&void 0!==f[3]?f[3]:"recent",o=f.length>4&&void 0!==f[4]&&f[4],s=!1,l={slot:0,confirmations:0,err:null},d=0,e.next=7,new Promise(function(){var e=Object(c.a)(i.a.mark((function e(f,b){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){s||(s=!0,console.log("Rejecting for timeout..."),b({timeout:!0}))}),n);try{d=r.onSignature(t,(function(e,t){s=!0,l={err:e.err,slot:t.slot,confirmations:0},e.err?(console.log("Rejected via websocket",e.err),b(l)):(console.log("Resolved via websocket",e),f(l))}),a)}catch(p){s=!0,console.error("WS error in setup",t,p)}case 2:if(s||!o){e.next=8;break}return Object(c.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getSignatureStatuses([t]);case 3:n=e.sent,l=n&&n.value[0],console.log(N(t,r)),s||(l?l.err?(console.log("REST error for",t,l),s=!0,b(l.err)):l.confirmations?(console.log("REST confirmation for",t,l),s=!0,f(l)):console.log("REST no confirmations for",t,l):console.log("REST null result for",t,l)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),s||console.log("REST connection error: txid",t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))(),e.next=6,Object(u.c)(2e3);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return l=e.sent,r._signatureSubscriptions[d]&&r.removeSignatureListener(d),s=!0,console.log("Returning status",l),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}},192:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(2),n(6);var r=n(105),a=function(){return{token:r.e,associatedToken:r.c,bpf_upgrade_loader:r.a,system:r.d,memo:r.b}}},211:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return M}));n(131);var r=n(10),a=n(27),i=n(29),c=n(2),o=n.n(c),s=n(6),u=n(0),l=n.n(u),d=n(113),f=n(75),b=n(5),p=n(49),h=(n(94),n(235)),m=n(105),g=n(192),v=n(4),j=l.a.createContext(null),x=new Map,y=new Map,O=new Map,w=new Map,k=function(){var t=Object(s.a)(o.a.mark((function t(n,r){var a,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getAccountInfo(r);case 2:if(null!==(a=t.sent)){t.next=5;break}throw new Error("Failed to find mint account");case 5:return i=e.from(a.data),t.abrupt("return",K(i));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),C=function(t,n){if(n.data.length>0){var r=e.from(n.data),a=T(r);return{pubkey:t,account:Object(i.a)({},n),info:a}}},S=new Map,A={emitter:new h.a,query:function(){var e=Object(s.a)(o.a.mark((function e(t,n,r){var a,i,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="string"===typeof n?new b.PublicKey(n):n,i=a.toBase58(),!(c=y.get(i))){e.next=5;break}return e.abrupt("return",c);case 5:if(!(s=x.get(i))){e.next=8;break}return e.abrupt("return",s);case 8:return s=t.getAccountInfo(a).then((function(e){if(!e)throw new Error("Account not found");return A.add(a,e,r)})),x.set(i,s),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),add:function(e,t,n,r){var a="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),i=n||S.get(a);if(!i)throw new Error("Deserializer needs to be registered or passed as a parameter");A.registerParser(e,i),x.delete(a);var c=i(a,t);if(c){void 0===r?r=!0:r instanceof Function&&(r=r(c));var o=!y.has(a);return y.set(a,c),A.emitter.raiseCacheUpdated(a,o,i,r),c}},get:function(e){var t;return t="string"!==typeof e?e.toBase58():e,y.get(t)},delete:function(e){var t;return t="string"!==typeof e?e.toBase58():e,!!y.get(t)&&(y.delete(t),A.emitter.raiseCacheDeleted(t),!0)},byParser:function(e){var t,n=[],r=Object(a.a)(S.keys());try{for(r.s();!(t=r.n()).done;){var i=t.value;S.get(i)===e&&n.push(i)}}catch(c){r.e(c)}finally{r.f()}return n},registerParser:function(e,t){if(e){var n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();S.set(n,t)}return e},queryMint:function(){var e=Object(s.a)(o.a.mark((function e(t,n){var r,a,i,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"===typeof n?new b.PublicKey(n):n,a=r.toBase58(),!(i=w.get(a))){e.next=5;break}return e.abrupt("return",i);case 5:if(!(c=O.get(a))){e.next=8;break}return e.abrupt("return",c);case 8:return c=k(t,r).then((function(e){return O.delete(a),w.set(a,e),e})),O.set(a,c),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getMint:function(e){var t;return t="string"!==typeof e?e.toBase58():e,w.get(t)},addMint:function(e,t){var n=K(t.data),r=e.toBase58();return w.set(r,n),n}};var E=function(){var e=Object(d.useConnection)(),t=Object(f.b)().publicKey,n=Object(u.useState)(),a=Object(r.a)(n,2),i=a[0],c=a[1],l=Object(u.useCallback)((function(e){if(t){var n=function(e,t){if(t){var n=new b.PublicKey(e);return{pubkey:e,account:t,info:{address:n,mint:m.f,owner:n,amount:new p.e(t.lamports),delegate:null,delegatedAmount:new p.e(0),isInitialized:!0,isFrozen:!1,isNative:!0,rentExemptReserve:null,closeAuthority:null}}}}(t.toBase58(),e);if(void 0!==n){var r=t.toBase58();A.registerParser(r,C),y.set(r,n),A.emitter.raiseCacheUpdated(r,!1,C,!0)}}}),[t]);return Object(u.useEffect)((function(){var n=0,r=function(e){e&&(l(e),c(e))};return Object(s.a)(o.a.mark((function a(){var i;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&t){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,a.next=5,e.getAccountInfo(t);case 5:i=a.sent,r(i),a.next=12;break;case 9:return a.prev=9,a.t0=a.catch(2),a.abrupt("return");case 12:n=e.onAccountChange(t,r);case 13:case"end":return a.stop()}}),a,null,[[2,9]])})))(),function(){n&&e.removeAccountChangeListener(n)}}),[c,t,e,l]),{nativeAccount:i}},P=new Set,B=function(){var e=Object(s.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return P.add(n.toBase58()),e.next=5,t.getTokenAccountsByOwner(n,{programId:Object(g.a)().token});case 5:e.sent.value.forEach((function(e){A.add(e.pubkey.toBase58(),e.account,C)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function M(e){var t=e.children,n=void 0===t?null:t,a=Object(d.useConnection)(),i=Object(f.b)().publicKey,c=Object(u.useState)([]),o=Object(r.a)(c,2),s=o[0],l=o[1],h=Object(u.useState)([]),m=Object(r.a)(h,2),x=m[0],y=m[1],O=E().nativeAccount,w=null===i||void 0===i?void 0:i.toBase58(),k=Object(u.useCallback)((function(){return A.byParser(C).map((function(e){return A.get(e)})).filter((function(e){return e&&e.info.owner.toBase58()===w})).map((function(e){return e}))}),[w]);return Object(u.useEffect)((function(){var e=k().filter((function(e){return void 0!==e}));y(e)}),[O,s,k]),Object(u.useEffect)((function(){var e=[];return A.emitter.onCache((function(e){if(e.isNew&&e.isActive){var t=e.id,n=e.parser;a.onAccountChange(new b.PublicKey(t),(function(e){A.add(t,e,n)}))}})),function(){e.forEach((function(e){return a.removeAccountChangeListener(e)}))}}),[a]),Object(u.useEffect)((function(){if(a&&i){B(a,i).then((function(){l(k())}));var e=a.onProgramAccountChange(Object(g.a)().token,(function(e){var t=e.accountId;if(e.accountInfo.data.length===p.a.span){var n=T(e.accountInfo.data);P.has(n.owner.toBase58())&&(A.add(t,e.accountInfo,C),l(k()))}}),"singleGossip");return function(){a.removeProgramAccountChangeListener(e)}}l([])}),[a,i,k]),Object(v.jsx)(j.Provider,{value:{userAccounts:x,nativeAccount:O},children:n})}var T=function(e){var t=p.a.decode(e);return t.mint=new b.PublicKey(t.mint),t.owner=new b.PublicKey(t.owner),t.amount=p.e.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new p.e(0)):(t.delegate=new b.PublicKey(t.delegate),t.delegatedAmount=p.e.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=p.e.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new b.PublicKey(t.closeAuthority),t},K=function(e){if(e.length!==p.b.span)throw new Error("Not a valid Mint");var t=p.b.decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new b.PublicKey(t.mintAuthority),t.supply=p.e.fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new b.PublicKey(t.freezeAuthority),t}}).call(this,n(13).Buffer)},233:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(0);var r=n(335),a=n(4);function i(e){var t=e.message,n=void 0===t?"":t,i=e.description,c=void 0===i?void 0:i,o=e.txid,s=void 0===o?"":o,u=e.type,l=void 0===u?"info":u,d=e.placement,f=void 0===d?"bottomLeft":d;s&&(c=Object(a.jsx)(a.Fragment,{})),r.a[l]({message:Object(a.jsx)("span",{style:{color:"black"},children:n}),description:Object(a.jsx)("span",{style:{color:"black",opacity:.5},children:c}),placement:f,style:{backgroundColor:"white"}})}},234:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(0);var r=n(823),a=n(94),i=n(4),c=function(e){var t,n,c=e.type,o=e.code,s="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58();if(!s)return null;var u=null!==(n=e.length)&&void 0!==n?n:9;return Object(i.jsx)("a",{href:"https://explorer.solana.com/".concat(c,"/").concat(s),target:"_blank",rel:"noreferrer",title:s,style:e.style,children:o?Object(i.jsx)(r.a.Text,{style:e.style,code:!0,children:Object(a.b)(s,u)}):Object(a.b)(s,u)})}},235:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(11),a=n(8),i=n(84),c=function e(t,n,r,i){Object(a.a)(this,e),this.id=void 0,this.parser=void 0,this.isNew=void 0,this.isActive=void 0,this.id=t,this.parser=r,this.isNew=n,this.isActive=i};c.type="CacheUpdate";var o=function e(t){Object(a.a)(this,e),this.id=void 0,this.id=t};o.type="CacheUpdate";var s=function e(t){Object(a.a)(this,e),this.ids=void 0,this.ids=t};s.type="MarketUpdate";var u=function(){function e(){Object(a.a)(this,e),this.emitter=new i.EventEmitter}return Object(r.a)(e,[{key:"onMarket",value:function(e){var t=this;return this.emitter.on(s.type,e),function(){return t.emitter.removeListener(s.type,e)}}},{key:"onCache",value:function(e){var t=this;return this.emitter.on(c.type,e),function(){return t.emitter.removeListener(c.type,e)}}},{key:"raiseMarketUpdated",value:function(e){this.emitter.emit(s.type,new s(e))}},{key:"raiseCacheUpdated",value:function(e,t,n,r){this.emitter.emit(c.type,new c(e,t,n,r))}},{key:"raiseCacheDeleted",value:function(e){this.emitter.emit(o.type,new o(e))}}]),e}()},236:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(2),a=n.n(r),i=n(6),c=n(0),o=n(75),s=n(50),u=n(58),l=n(336),d=n(812),f=n(482),b=n(815),p=n(97),h=n(102),m=n(827),g=n(460),v=n.n(g),j=n(459),x=n.n(j),y=n(4),O=function(e){var t=e.additionalSettings,n=Object(o.b)(),r=n.connected,g=n.disconnect,j=n.publicKey,O=Object(s.j)(),w=O.setEndpoint,k=O.env,C=O.endpoint,S=Object(s.l)().setVisible,A=Object(c.useCallback)((function(){return S(!0)}),[S]),E=Object(s.k)().setModal,P=Object(h.a)(),B=Object(s.h)(),M=Object(c.useCallback)((function(){E(s.f.WALLET),S(!0)}),[E,S]);return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(d.a,{sx:{display:"flex",minWidth:"100%"},children:[!r&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(f.a,{children:Object(y.jsx)(b.a,{style:{marginBottom:5},onChange:function(e){w(e.target.value)},value:C,children:s.e.map((function(e){var t=e.name,n=e.endpoint;return Object(y.jsx)("option",{value:n,children:t},t)}))})}),Object(y.jsx)(p.a,{variant:"contained",onClick:M,sx:{marginLeft:"10px"},children:"Connect"})]}),r&&Object(y.jsxs)(y.Fragment,{children:[j&&Object(y.jsxs)(p.a,{variant:"outlined",onClick:Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=4;break}return e.next=3,navigator.clipboard.writeText(j.toBase58());case 3:Object(u.b)({message:"Wallet update",description:"Address copied to clipboard"});case 4:case"end":return e.stop()}}),e)}))),children:[Object(y.jsx)(l.a,{}),Object(u.c)(j.toBase58())]}),Object(y.jsx)(p.a,{variant:"outlined",onClick:A,sx:{marginLeft:"10px"},children:"Change Wallet"}),Object(y.jsxs)(p.a,{variant:"contained",color:"error",onClick:function(){return g().catch()},sx:{marginLeft:"10px"},children:["Disconnect (",k,")"]})]}),Object(y.jsx)(m.a,{sx:{ml:1},onClick:B.toggleColorMode,color:"inherit",children:"dark"===P.palette.mode?Object(y.jsx)(x.a,{}):Object(y.jsx)(v.a,{})}),t]})})}},272:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var r=n(10),a=n(17),i=n(27),c=n(8),o=n(11),s=n(107),u=function(){function t(e){Object(c.a)(this,t),this.leafs=void 0,this.layers=void 0,this.leafs=e.slice(),this.layers=[];for(var n=this.leafs.map(t.nodeHash);n.length>0&&(console.log("Hashes",this.layers.length,n),this.layers.push(n.slice()),1!==n.length);)n=n.reduce((function(e,n,r,a){if(r%2===0){var i=a[r+1];e.push(t.internalHash(n,i))}return e}),Array())}return Object(o.a)(t,[{key:"getRoot",value:function(){return this.layers[this.layers.length-1][0]}},{key:"getProof",value:function(e){return this.layers.reduce((function(t,n){var r=1^e;return r<n.length&&t.push(n[r]),e=Math.floor(e/2),t}),[])}},{key:"getHexRoot",value:function(){return this.getRoot().toString("hex")}},{key:"getHexProof",value:function(e){return this.getProof(e).map((function(e){return e.toString("hex")}))}},{key:"verifyProof",value:function(e,n,r){var a,c=t.nodeHash(this.leafs[e]),o=Object(i.a)(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;c=t.internalHash(c,s)}}catch(u){o.e(u)}finally{o.f()}return c.equals(r)}}],[{key:"nodeHash",value:function(t){return e.from(s.keccak_256.digest([0].concat(Object(a.a)(t))))}},{key:"internalHash",value:function(t,n){if(!n)return t;var i=[t,n].sort(e.compare),c=Object(r.a)(i,2),o=c[0],u=c[1];return e.from(s.keccak_256.digest([1].concat(Object(a.a)(o),Object(a.a)(u))))}},{key:"verifyClaim",value:function(e,n,r){var a,c=t.nodeHash(e),o=Object(i.a)(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;c=t.internalHash(c,s)}}catch(u){o.e(u)}finally{o.f()}return c.equals(r)}}]),t}()}).call(this,n(13).Buffer)},432:function(e,t,n){"use strict";(function(e){n(17),n(5),n(35),n(88)}).call(this,n(13).Buffer)},461:function(e,t,n){"use strict";(function(e){var r=n(17),a=n(10),i=n(2),c=n.n(i),o=n(6),s=n(0),u=n.n(s),l=n(273),d=n(51),f=n(462),b=n.n(f),p=n(274),h=n(825),m=n(821),g=n(481),v=n(124),j=n(275),x=n(97),y=n(276),O=n(482),w=n(824),k=n(822),C=n(480),S=n(466),A=n.n(S),E=n(75),P=n(5),B=n(49),M=n(264),T=n(107),K=n(70),I=n(35),W=n.n(I),D=n(39),F=n(464),N=n.n(F),R=(n(805),n(50)),L=n(58),z=n(474),U=n(465),_=n(272),H=n(4),q=function(){var e=new Uint8Array(4);return window.crypto.getRandomValues(e),e},V=new P.PublicKey("2BXKBuQPRVjV9e9qC2wAVJgFLWDH8MULRQ5W5ABmJj45"),J=n(807),G=new M.a(J),Q=function(e,t){var n=N()(e);return function(){var e=Object(o.a)(c.a.mark((function e(r,a,i,o){var s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Link: claim?".concat(o)),s={from_email:t,subject:"Merkle Airdrop",text:"You received ".concat(r," airdropped token(s) (").concat(i,"). ")+"Claim them at ".concat(window.location.origin,"/claim?").concat(o),to:[{email:a,type:"to"}]},e.next=4,n.messages.send({message:s});case 4:if(u=e.sent,console.log(u),u[0]&&"sent"===u[0].status){e.next=8;break}throw new Error("Mailchimp failed to send email: ".concat(u[0].reject_reason));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},Y=function(t){var n=Object(R.i)(),i=Object(E.b)(),s=u.a.useState(localStorage.getItem("mint")||""),l=Object(a.a)(s,2),d=l[0],f=l[1],b=u.a.useState(localStorage.getItem("commMethod")||""),p=Object(a.a)(b,2),h=p[0],m=p[1],S=u.a.useState(""),M=Object(a.a)(S,2),I=M[0],F=M[1],N=u.a.useState(""),z=Object(a.a)(N,2),J=z[0],G=z[1],Y=u.a.useState(""),X=Object(a.a)(Y,2),Z=X[0],$=X[1],ee=u.a.useState(""),te=Object(a.a)(ee,2),ne=te[0],re=te[1],ae=function(){var t=Object(o.a)(c.a.mark((function t(s){var u,l,f,b,p,m,v,j,x,y,O,w,k,C,S,A,E,M,F,N,z,U,G,Y,X,Z,$,ee,te,re,ae,ie,ce,oe,se,ue,le,de,fe;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.preventDefault(),i.connected&&null!==i.publicKey){t.next=3;break}throw new Error("Wallet not connected");case 3:if(u=JSON.parse(ne),l=u.reduce((function(e,t){return e+t.amount}),0),f=u.map((function(){return q()})),console.log(u,f),0!==u.length){t.next=9;break}throw new Error("No claimants provided");case 9:t.prev=9,b=new P.PublicKey(d),t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(9),new Error("Invalid mint key ".concat(t.t0));case 16:return t.next=18,n.getAccountInfo(b);case 18:if(null!==(p=t.sent)){t.next=21;break}throw new Error("Could not fetch mint");case 21:if(p.owner.equals(B.c)){t.next=23;break}throw new Error("Invalid mint owner ".concat(p.owner.toBase58()));case 23:if(p.data.length===B.b.span){t.next=25;break}throw new Error("Invalid mint size ".concat(p.data.length));case 25:return B.b.decode(e.from(p.data)),t.next=28,P.PublicKey.findProgramAddress([i.publicKey.toBuffer(),B.c.toBuffer(),b.toBuffer()],L.a);case 28:return m=t.sent,v=Object(a.a)(m,1),j=v[0],t.next=33,n.getAccountInfo(j);case 33:if(null!==(x=t.sent)){t.next=36;break}throw new Error("Could not fetch creator token account");case 36:if(x.data.length===B.a.span){t.next=38;break}throw new Error("Invalid token account size ".concat(x.data.length));case 38:if(y=B.a.decode(e.from(x.data)),!(new W.a(y.amount,8,"le").toNumber()<l)){t.next=41;break}throw new Error("Creator token account does not have enough tokens");case 41:O=[],w=0;case 43:if(!(w<u.length)){t.next=58;break}return k=u[w],C=[b.toBuffer(),e.from(k.handle),e.from(f[w])],t.next=48,P.PublicKey.findProgramAddress(C,V);case 48:S=t.sent,A=Object(a.a)(S,2),E=A[0],M=A[1],k.bump=M,k.pda=E,O.push(e.from(T.keccak_256.digest([].concat(Object(r.a)(new W.a(w).toArray("le",8)),Object(r.a)(E.toBuffer()),Object(r.a)(new W.a(k.amount).toArray("le",8))))));case 55:++w,t.next=43;break;case 58:return F=new _.a(O),N=F.getRoot(),z=new P.Keypair,t.next=63,P.PublicKey.findProgramAddress([e.from("MerkleDistributor"),z.publicKey.toBuffer()],V);case 63:return U=t.sent,G=Object(a.a)(U,2),Y=G[0],X=G[1],t.next=69,P.PublicKey.findProgramAddress([Y.toBuffer(),B.c.toBuffer(),b.toBuffer()],L.a);case 69:if(Z=t.sent,$=Object(a.a)(Z,1),ee=$[0],te="https://explorer.solana.com/address/".concat(b.toBase58(),"?cluster=").concat(R.c.envFor(n)),"Mailchimp"!==h){t.next=77;break}re=Q(I,J),t.next=83;break;case 77:if("Manual"!==h){t.next=82;break}console.log(te),re=function(){var e=Object(o.a)(c.a.mark((function e(t,n,r,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log({handle:n,claim:"".concat(window.location.origin,"/claim?").concat(a)});case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),t.next=83;break;case 82:throw new Error("Unrecognized claim distribution method ".concat(h));case 83:ae=0;case 84:if(!(ae<u.length)){t.next=97;break}if(ie=F.getProof(ae),F.verifyProof(ae,ie,N)){t.next=89;break}throw new Error("Merkle tree verification failed");case 89:return ce=u[ae],oe=["distributor=".concat(Y),"handle=".concat(ce.handle),"amount=".concat(ce.amount),"index=".concat(ae),"pin=".concat(f[ae]),"proof=".concat(ie.map((function(e){return D.encode(e)})))],se=oe.join("&"),t.next=94,re(ce.amount,ce.handle,te,se);case 94:++ae,t.next=84;break;case 97:return ue=new P.TransactionInstruction({programId:L.a,keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0},{pubkey:ee,isSigner:!1,isWritable:!0},{pubkey:Y,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:P.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:B.c,isSigner:!1,isWritable:!1},{pubkey:P.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],data:e.from([])}),le=new P.TransactionInstruction({programId:V,keys:[{pubkey:z.publicKey,isSigner:!0,isWritable:!1},{pubkey:Y,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:i.publicKey,isSigner:!0,isWritable:!1},{pubkey:P.SystemProgram.programId,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(r.a)(e.from(K.sha256.digest("global:new_distributor")).slice(0,8)),Object(r.a)(new W.a(X).toArray("le",1)),Object(r.a)(N),Object(r.a)(new W.a(l).toArray("le",8)),Object(r.a)(new W.a(u.length).toArray("le",8))))}),de=B.d.createTransferInstruction(B.c,j,ee,i.publicKey,[],l),t.next=102,R.c.sendTransactionWithRetry(n,i,[ue,le,de],[z]);case 102:fe=t.sent,console.log(fe),"string"===typeof fe?Object(L.b)({message:"Create failed",description:fe}):Object(L.b)({message:"Create succeeded",description:Object(H.jsx)(g.a,{href:R.c.explorerLinkFor(fe.txid,n),children:"View transaction on explorer"})});case 105:case"end":return t.stop()}}),t,null,[[9,13]])})));return function(e){return t.apply(this,arguments)}}(),ie=function(e){if(1===e.length){var t=e[0],n=new FileReader;n.onload=function(e){null!==e&&null!==e.target&&("string"===typeof e.target.result?($(t.name),re(e.target.result)):alert("Could not read uploaded file ".concat(t)))},n.readAsText(t)}else alert("Expecting exactly one handle-file upload")},ce=Object(H.jsxs)(u.a.Fragment,{children:[Object(H.jsx)(U.a,{handleDrop:ie,children:Object(H.jsxs)(j.a,{direction:"row",style:{width:"60ch",height:"15ch"},sx:{border:"1px dashed grey",justifyContent:"center",alignContent:"center"},children:[Object(H.jsxs)(x.a,{variant:"text",component:"label",style:{padding:0,marginTop:"5ch",marginBottom:"5ch"},children:["Upload a distribution list",Object(H.jsx)("input",{type:"file",onChange:function(e){return ie(e.target.files)},hidden:!0})]}),"\xa0",Object(H.jsx)(x.a,{variant:"text",component:"label",disabled:!0,style:{color:"white",padding:0},children:"or drag it here"})]})}),""!==Z?Object(H.jsxs)(y.a,{style:{display:"flex",justifyContent:"center",width:"60ch",color:"rgba(255,255,255,.8)"},children:[Object(H.jsx)(A.a,{}),Object(H.jsxs)("span",{children:["\xa0"," Uploaded ",Z]})]}):Object(H.jsx)(y.a,{})]}),oe=Object(H.jsx)(x.a,{disabled:!i.connected,variant:"contained",color:"success",onClick:function(e){var t=function(){var t=Object(o.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ae(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(L.b)({message:"Create failed",description:"".concat(t.t0)});case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}();t()},sx:{marginRight:"4px"},children:"Create Merkle Airdrop"});return Object(H.jsxs)(j.a,{spacing:2,children:[Object(H.jsx)(v.a,{style:{width:"60ch"},id:"mint-text-field",label:"Mint",value:d,onChange:function(e){localStorage.setItem("mint",e.target.value),f(e.target.value)}}),Object(H.jsxs)(O.a,{fullWidth:!0,children:[Object(H.jsx)(w.a,{id:"comm-method-label",children:"Claim Distribution Method"}),Object(H.jsxs)(k.a,{labelId:"comm-method-label",id:"comm-method-select",value:h,label:"Claim Distribution Method",onChange:function(e){localStorage.setItem("commMethod",e.target.value),m(e.target.value)},style:{textAlign:"left"},children:[Object(H.jsx)(C.a,{value:"Mailchimp",children:"Mailchimp"}),Object(H.jsx)(C.a,{value:"Manual",children:"Manual"})]})]}),""!==h&&function(e){return"Manual"===e?null:Object(H.jsxs)(u.a.Fragment,{children:[Object(H.jsx)(v.a,{style:{width:"60ch"},id:"comm-auth-field",label:"".concat(e," API key"),value:I,onChange:function(e){return F(e.target.value)}}),Object(H.jsx)(v.a,{style:{width:"60ch"},id:"comm-source-field",label:"".concat(e," Source"),value:J,onChange:function(e){return G(e.target.value)}})]})}(h),""!==h&&""!==d&&ce,""!==Z&&oe]})},X=function(t){var n=Object(R.i)(),i=Object(E.b)(),s=u.a.useState(!1),l=Object(a.a)(s,2),d=l[0],f=l[1],p=b.a.parse(t.location.search),h=u.a.useState(p.distributor),m=Object(a.a)(h,2),O=m[0],w=m[1],k=u.a.useState(p.handle),C=Object(a.a)(k,2),S=C[0],A=C[1],M=u.a.useState(p.amount),I=Object(a.a)(M,2),F=I[0],N=I[1],z=u.a.useState(p.index),U=Object(a.a)(z,2),q=U[0],J=U[1],Q=u.a.useState(p.pin),Y=Object(a.a)(Q,2),X=Y[0],Z=Y[1],$=u.a.useState(p.proof),ee=Object(a.a)($,2),te=ee[0],ne=ee[1],re=function(){var t=Object(o.a)(c.a.mark((function t(o){var s,u,l,d,f,b,p,h,m,v,j,x,y,w,k,C,A,E,M,I,N,z,U,J;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.preventDefault(),i.connected&&null!==i.publicKey){t.next=3;break}throw new Error("Wallet not connected");case 3:if(s=Number(F),u=Number(q),l=X.split(",").map(Number),!isNaN(s)){t.next=8;break}throw new Error("Could not parse amount ".concat(F));case 8:if(!isNaN(u)){t.next=10;break}throw new Error("Could not parse index ".concat(q));case 10:t.prev=10,d=new P.PublicKey(O),t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(10),new Error("Invalid distributor key ".concat(t.t0));case 17:return t.next=19,n.getAccountInfo(d);case 19:if(null!==(f=t.sent)){t.next=22;break}throw new Error("Could not fetch distributor");case 22:return b=G.accounts.decode("MerkleDistributor",f.data),p=""===te?[]:te.split(",").map((function(t){var n=e.from(D.decode(t));if(32!==n.length)throw new Error("Invalid proof hash length");return n})),console.log("Proof",p),console.log(b.mint.toBase58(),S,l),t.next=28,P.PublicKey.findProgramAddress([b.mint.toBuffer(),e.from(S),e.from(l)],V);case 28:if(h=t.sent,m=Object(a.a)(h,1),v=m[0],j=e.from(T.keccak_256.digest([].concat(Object(r.a)(new W.a(u).toArray("le",8)),Object(r.a)(v.toBuffer()),Object(r.a)(new W.a(s).toArray("le",8))))),console.log(j,v.toBase58(),_.a.nodeHash(j)),_.a.verifyClaim(e.from(T.keccak_256.digest([].concat(Object(r.a)(new W.a(u).toArray("le",8)),Object(r.a)(v.toBuffer()),Object(r.a)(new W.a(s).toArray("le",8))))),p,e.from(b.root))){t.next=36;break}throw new Error("Merkle proof does not match");case 36:return t.next=38,P.PublicKey.findProgramAddress([e.from("ClaimStatus"),e.from(new W.a(u).toArray("le",8)),d.toBuffer()],V);case 38:return x=t.sent,y=Object(a.a)(x,2),w=y[0],k=y[1],t.next=44,P.PublicKey.findProgramAddress([d.toBuffer(),B.c.toBuffer(),b.mint.toBuffer()],L.a);case 44:return C=t.sent,A=Object(a.a)(C,1),E=A[0],t.next=49,P.PublicKey.findProgramAddress([i.publicKey.toBuffer(),B.c.toBuffer(),b.mint.toBuffer()],L.a);case 49:return M=t.sent,I=Object(a.a)(M,1),N=I[0],z=[],t.next=55,n.getAccountInfo(N);case 55:if(t.t1=t.sent,null!==t.t1){t.next=58;break}z.push(new P.TransactionInstruction({programId:L.a,keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0},{pubkey:N,isSigner:!1,isWritable:!0},{pubkey:i.publicKey,isSigner:!1,isWritable:!1},{pubkey:b.mint,isSigner:!1,isWritable:!1},{pubkey:P.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:B.c,isSigner:!1,isWritable:!1},{pubkey:P.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],data:e.from([])}));case 58:return U=new P.TransactionInstruction({programId:V,keys:[{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:w,isSigner:!1,isWritable:!0},{pubkey:E,isSigner:!1,isWritable:!0},{pubkey:N,isSigner:!1,isWritable:!0},{pubkey:i.publicKey,isSigner:!0,isWritable:!1},{pubkey:P.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:B.c,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(r.a)(e.from(K.sha256.digest("global:claim")).slice(0,8)),Object(r.a)(new W.a(k).toArray("le",1)),Object(r.a)(new W.a(u).toArray("le",8)),Object(r.a)(new W.a(s).toArray("le",8)),Object(r.a)(v.toBuffer()),Object(r.a)(new W.a(p.length).toArray("le",4)),Object(r.a)(e.concat(p))))}),t.next=61,R.c.sendTransactionWithRetry(n,i,[].concat(z,[U]),[]);case 61:J=t.sent,console.log(J),"string"===typeof J?Object(L.b)({message:"Claim failed",description:J}):Object(L.b)({message:"Claim succeeded",description:Object(H.jsx)(g.a,{href:R.c.explorerLinkFor(J.txid,n),children:"View transaction on explorer"})});case 64:case"end":return t.stop()}}),t,null,[[10,14]])})));return function(e){return t.apply(this,arguments)}}();return Object(H.jsxs)(j.a,{spacing:2,children:[Object(H.jsx)(v.a,{style:{width:"60ch"},id:"distributor-text-field",label:"Distributor",value:O,onChange:function(e){return w(e.target.value)},disabled:!d}),Object(H.jsx)(v.a,{style:{width:"60ch"},id:"handle-text-field",label:"Handle",value:S,onChange:function(e){return A(e.target.value)},disabled:!d}),Object(H.jsx)(v.a,{style:{width:"60ch"},id:"amount-text-field",label:"Amount",value:F,onChange:function(e){return N(e.target.value)},disabled:!d}),Object(H.jsx)(v.a,{style:{width:"60ch"},id:"index-text-field",label:"Index",value:q,onChange:function(e){return J(e.target.value)},disabled:!d}),Object(H.jsx)(v.a,{style:{width:"60ch"},id:"pin-text-field",label:"Pin",value:X,onChange:function(e){return Z(e.target.value)},disabled:!d}),Object(H.jsx)(v.a,{style:{width:"60ch"},id:"proof-text-field",label:"Proof",multiline:!0,value:te,onChange:function(e){return ne(e.target.value)},disabled:!d}),Object(H.jsx)(y.a,{}),Object(H.jsxs)("div",{children:[Object(H.jsx)(x.a,{style:{width:"15ch"},color:"info",onClick:function(e){return f(!d)},children:d?"Stop Editing":"Edit Claim"}),Object(H.jsx)(x.a,{style:{width:"45ch"},disabled:!i.connected,variant:"contained",color:"success",onClick:function(e){var t=function(){var t=Object(o.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,re(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(L.b)({message:"Claim failed",description:"".concat(t.t0)});case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}();t()},children:"Claim Merkle Airdrop"})]})]})},Z=function(e){return Object(H.jsxs)(j.a,{direction:"row",spacing:2,children:[Object(H.jsx)(l.b,{to:"/create",children:Object(H.jsx)(x.a,{style:{width:"30ch"},variant:"contained",color:"info",children:"Create"})}),Object(H.jsx)(l.b,{to:"/claim",children:Object(H.jsx)(x.a,{style:{width:"30ch"},variant:"contained",color:"info",children:"claim"})})]})},$=function(){var e=window;return{width:e.innerWidth,height:e.innerHeight}};t.a=function(){var e=Object(R.h)(),t="dark"!==e.mode&&e.mode?"light":"dark";Object(s.useEffect)((function(){}),[e.mode]);var n=function(){var e=Object(s.useState)($()),t=Object(a.a)(e,2),n=t[0],r=t[1];return Object(s.useEffect)((function(){var e=function(){r($())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}().height,r=u.a.useMemo((function(){return Object(p.a)({palette:{mode:t}})}),[e.mode]);return Object(H.jsx)("div",{className:"App",style:{backgroundColor:"transparent"},children:Object(H.jsxs)(h.a,{theme:r,children:[Object(H.jsx)(m.a,{}),Object(H.jsx)(z.a,{}),Object(H.jsx)(y.a,{sx:{width:600,height:"100%",flexGrow:1,pt:"".concat(Math.floor(.2*n),"px"),px:"50%",display:"flex",alignSelf:"center",justifyContent:"center",alignContent:"center"},children:Object(H.jsx)(l.a,{children:Object(H.jsxs)(d.c,{children:[Object(H.jsx)(d.a,{path:"/create",component:Y}),Object(H.jsx)(d.a,{path:"/claim",component:X}),Object(H.jsx)(d.a,{path:"/",component:Z})]})})})]})})}}).call(this,n(13).Buffer)},465:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(10),a=n(0),i=n.n(a),c=n(4),o=function(e){var t=i.a.useRef(null),n=i.a.useState(0),a=Object(r.a)(n,2),o=a[0],s=a[1],u=i.a.useState(!1),l=Object(r.a)(u,2),d=l[0],f=l[1],b=function(e){e.preventDefault(),e.stopPropagation()},p=function(e){e.preventDefault(),e.stopPropagation(),s(o+1),e.dataTransfer.items&&e.dataTransfer.items.length>0&&f(!0)},h=function(e){e.preventDefault(),e.stopPropagation();var t=o-1;s(t),0===t&&f(!1)},m=function(t){t.preventDefault(),t.stopPropagation(),f(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0&&(e.handleDrop(t.dataTransfer.files),t.dataTransfer.clearData(),s(0))};return i.a.useEffect((function(){var e=t.current;if(null!==e)return e.addEventListener("dragenter",p),e.addEventListener("dragleave",h),e.addEventListener("dragover",b),e.addEventListener("drop",m),function(){e.removeEventListener("dragenter",p),e.removeEventListener("dragleave",h),e.removeEventListener("dragover",b),e.removeEventListener("drop",m)}})),Object(c.jsx)("div",{ref:t,style:d?{backgroundColor:"rgba(255,255,255,.3)"}:{},children:e.children})}},474:function(e,t,n){"use strict";var r=n(0),a=n(812),i=n(29),c=n(131),o=n(865),s=n(236),u=n(4),l=["isConnected","onClickConnect","onClickChange"],d=function(e){e.isConnected,e.onClickConnect,e.onClickChange;var t=Object(c.a)(e,l);return Object(u.jsx)(o.a,Object(i.a)(Object(i.a)({},t),{},{children:Object(u.jsx)(s.a,{})}))},f=n(50),b=n(75),p=n(866);t.a=function(){var e=Object(f.k)().setModal,t=Object(f.l)().setVisible,n=Object(b.b)().connected,i=Object(r.useCallback)((function(){return t(!0)}),[t]),c=Object(r.useCallback)((function(){e(f.f.WALLET),t(!0)}),[e,t]);return Object(u.jsx)(p.a,{color:"transparent",children:Object(u.jsxs)(a.a,{sx:{display:"flex",bgcolor:"action.disabledBackground"},minWidth:"100%",children:[Object(u.jsx)(a.a,{sx:{flexGrow:1}}),Object(u.jsx)(a.a,{sx:{display:"flex",height:"62px",justifyContent:"flex-end",alignItems:"center"},children:Object(u.jsx)(d,{isConnected:n,sx:{marginRight:"36px"},onClickConnect:c,onClickChange:i})})]})})}},497:function(e,t){},498:function(e,t){},50:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return a.ENDPOINTS})),n.d(t,"d",(function(){return a.ConnectionProvider})),n.d(t,"i",(function(){return a.useConnection})),n.d(t,"j",(function(){return a.useConnectionConfig})),n.d(t,"l",(function(){return j})),n.d(t,"g",(function(){return w})),n.d(t,"f",(function(){return x})),n.d(t,"k",(function(){return C})),n.d(t,"b",(function(){return E})),n.d(t,"h",(function(){return P}));var r=n(211),a=n(113),i=n(10),c=n(75),o=n(135),s=n(202),u=n(0),l=n.n(u),d=n(58),f=n(29),b=n(131),p=n(861),h=(n(755),n(4)),m=["children","closeIcon","bodyStyle","style"],g=function(e){var t=e.children,n=(e.closeIcon,e.bodyStyle),r=(e.style,Object(b.a)(e,m));return Object(h.jsx)(p.a,Object(f.a)(Object(f.a)({style:{background:"transparent",borderRadius:16},bodyStyle:Object(f.a)({background:"#333333",display:"flex",flexDirection:"column",alignItems:"center"},n),footer:null,width:400},r),{},{children:t}))},v=(n(234),n(236),n.p,Object(u.createContext)({}));function j(){return Object(u.useContext)(v)}var x,y=function(){var e=Object(c.b)(),t=e.wallets,n=e.wallet,r=e.select,a=j(),o=a.visible,l=a.setVisible,d=Object(u.useState)(!1),f=Object(i.a)(d,2)[1],b=Object(u.useCallback)((function(){l(!1),f(!1)}),[l,f]);return Object(h.jsxs)(g,{visible:o,onCancel:b,children:[Object(h.jsx)("div",{style:{background:"linear-gradient(180deg, #D329FC 0%, #8F6DDE 49.48%, #19E6AD 100%)",borderRadius:36,width:50,height:50,textAlign:"center",verticalAlign:"middle",fontWeight:700,fontSize:"1.3rem",lineHeight:2.4,marginBottom:10}}),Object(h.jsx)("h2",{style:{color:"white",fontWeight:"bold",fontSize:20},children:n?"Change provider":""}),Object(h.jsx)("p",{style:{color:"white",fontSize:14},children:n?"Choose from the following options:":"Please sign into your wallet"}),Object(h.jsx)("br",{}),t.map((function(e){return Object(h.jsx)(s.a,{size:"large",type:e===n?"primary":"ghost",onClick:function(){r(e.name),b()},icon:Object(h.jsx)("img",{alt:"".concat(e.name),width:20,height:20,src:e.icon,style:{marginRight:30,float:"left"}}),style:{display:"block",width:"100%",textAlign:"left",marginBottom:8,color:"white"},children:e.name},e.name)}))]})},O=function(e){var t=e.children,n=Object(c.b)().publicKey,r=Object(u.useState)(!!n),a=Object(i.a)(r,2),o=a[0],s=a[1],l=Object(u.useState)(!1),f=Object(i.a)(l,2),b=f[0],p=f[1];return Object(u.useEffect)((function(){if(n){var e=n.toBase58(),t=e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e;Object(d.b)({message:"Wallet update",description:"Connected to wallet "+t})}}),[n]),Object(u.useEffect)((function(){!n&&o&&Object(d.b)({message:"Wallet update",description:"Disconnected from wallet"}),s(!!n)}),[n,o,s]),Object(h.jsxs)(v.Provider,{value:{visible:b,setVisible:p},children:[t,Object(h.jsx)(y,{})]})},w=function(e){var t=e.children,n=Object(u.useMemo)((function(){return[Object(o.c)(),Object(o.d)(),Object(o.g)({options:{clientId:"BOM5Cl7PXgE9Ylq1Z1tqzhpydY0RVr8k90QQ85N7AKI5QGSrr9iDC-3rvmy0K_hF0JfpLMiXoDhta68JwcxS1LQ"}}),Object(o.a)(),Object(o.f)(),Object(o.b)(),Object(o.e)()]}),[]),r=Object(u.useCallback)((function(e){console.error(e),Object(d.b)({message:"Wallet error",description:e.message})}),[]);return Object(h.jsx)(c.a,{wallets:n,onError:r,autoConnect:!0,children:Object(h.jsx)(O,{children:t})})};!function(e){e.WALLET="wallet"}(x||(x={}));var k=l.a.createContext({setModal:function(){return null},removeModal:function(){return null}}),C=function(){var e=Object(u.useContext)(k);if(void 0===e)throw new Error("useModal must be used within a ModalProvider");return e},S=n(102),A=l.a.createContext({}),E=function(e){var t=e.children,n=void 0===t?null:t,r=l.a.useState("dark"),a=Object(i.a)(r,2),c=a[0],o=a[1],s=Object(S.a)();return Object(h.jsx)(A.Provider,{value:{toggleColorMode:function(){o((function(e){return"light"===e?"dark":"light"}))},mode:c,theme:s},children:n})},P=function(){return Object(u.useContext)(A)}},520:function(e,t){},521:function(e,t){},58:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.c})),n.d(t,"b",(function(){return a.a})),n.d(t,"c",(function(){return i.b}));n(235);var r=n(105),a=(n(192),n(432),n(233)),i=n(94);var c=n(5),o=n(123),s=n(39),u=n.n(s);o.BinaryReader.prototype.readPubkey=function(){var e=this.readFixedArray(32);return new c.PublicKey(e)},o.BinaryWriter.prototype.writePubkey=function(e){this.writeFixedArray(e.toBuffer())},o.BinaryReader.prototype.readPubkeyAsString=function(){var e=this.readFixedArray(32);return u.a.encode(e)},o.BinaryWriter.prototype.writePubkeyAsString=function(e){this.writeFixedArray(u.a.decode(e))}},649:function(e,t){},651:function(e,t){},665:function(e,t){},669:function(e,t){},671:function(e,t){},683:function(e,t){},685:function(e,t){},712:function(e,t){},714:function(e,t){},719:function(e,t){},721:function(e,t){},728:function(e,t){},740:function(e,t){},743:function(e,t){},754:function(e,t){},755:function(e,t,n){},805:function(e,t,n){},807:function(e){e.exports=JSON.parse('{"version":"0.0.0","name":"merkle_distributor","instructions":[{"name":"newDistributor","accounts":[{"name":"base","isMut":false,"isSigner":true},{"name":"distributor","isMut":true,"isSigner":false},{"name":"mint","isMut":false,"isSigner":false},{"name":"payer","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"root","type":{"array":["u8",32]}},{"name":"maxTotalClaim","type":"u64"},{"name":"maxNumNodes","type":"u64"}]},{"name":"claim","accounts":[{"name":"distributor","isMut":true,"isSigner":false},{"name":"claimStatus","isMut":true,"isSigner":false},{"name":"from","isMut":true,"isSigner":false},{"name":"to","isMut":true,"isSigner":false},{"name":"payer","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"claimantAccount","type":"publicKey"},{"name":"index","type":"u64"},{"name":"amount","type":"u64"},{"name":"proof","type":{"vec":{"array":["u8",32]}}}]}],"accounts":[{"name":"MerkleDistributor","type":{"kind":"struct","fields":[{"name":"base","type":"publicKey"},{"name":"bump","type":"u8"},{"name":"root","type":{"array":["u8",32]}},{"name":"mint","type":"publicKey"},{"name":"maxTotalClaim","type":"u64"},{"name":"maxNumNodes","type":"u64"},{"name":"totalAmountClaimed","type":"u64"},{"name":"numNodesClaimed","type":"u64"}]}},{"name":"ClaimStatus","type":{"kind":"struct","fields":[{"name":"isClaimed","type":"bool"},{"name":"claimant","type":"publicKey"},{"name":"claimedAt","type":"i64"},{"name":"amount","type":"u64"}]}}],"events":[{"name":"ClaimedEvent","fields":[{"name":"index","type":"u64","index":false},{"name":"claimant","type":"publicKey","index":false},{"name":"amount","type":"u64","index":false}]}],"errors":[{"code":300,"name":"InvalidProof","msg":"Invalid Merkle proof."},{"code":301,"name":"DropAlreadyClaimed","msg":"Drop already claimed."},{"code":302,"name":"ExceededMaxClaim","msg":"Exceeded maximum claim amount."},{"code":303,"name":"ExceededMaxNumNodes","msg":"Exceeded maximum number of claimed nodes."},{"code":304,"name":"Unauthorized","msg":"Account is not authorized to execute this instruction"},{"code":305,"name":"OwnerMismatch","msg":"Token account owner did not match intended owner"}]}')},809:function(e,t,n){},811:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(46),c=n.n(i),o=n(50),s=(n(758),n(759),n(760),n(761),n(461)),u=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,869)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))},l=(n(809),n(4));c.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(o.d,{children:Object(l.jsx)(o.g,{children:Object(l.jsx)(o.a,{children:Object(l.jsx)(o.b,{children:Object(l.jsx)(s.a,{})})})})})}),document.getElementById("root")),u()},94:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d}));n(27),n(2),n(6);var r=n(10),a=n(0),i=(n(5),n(35)),c=n.n(i),o=new c.a(10);o.pow(new c.a(18)),o.pow(new c.a(18)),o.pow(new c.a(27)),new c.a(0),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:8});function s(e,t){var n=Object(a.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),i=Object(r.a)(n,2),c=i[0],o=i[1],s=Object(a.useCallback)((function(t){if(c!==t)if(o(t),null===t)localStorage.removeItem(e);else try{localStorage.setItem(e,JSON.stringify(t))}catch(n){}}),[c,e]);return[c,s]}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}new Set(["USDC","wUSDC","USDT"]);function l(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,r){return e.slice(r*t,(r+1)*t)}))}new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});function d(e){return new Promise((function(t){return setTimeout(t,e)}))}}},[[811,1,2]]]);
//# sourceMappingURL=main.5275efee.chunk.js.map