{"version":3,"sources":["utils/ids.ts","contexts/ConnectionContext.tsx","utils/programIds.ts","components/DefaultModal/index.tsx","utils/merkle-tree.ts","contexts/AccountContext.tsx","utils/notifications.tsx","components/ExplorerLink/index.tsx","utils/eventEmitter.ts","components/Settings/index.tsx","components/Claim.tsx","components/Create.tsx","components/DragAndDrop.tsx","contexts/WalletContext/wallet.less","contexts/WalletContext/WalletContext.tsx","contexts/ModalContext.tsx","contexts/ColorModeContext.tsx","utils/borsh.ts","components/Centered.tsx","components/ConnectButton.tsx","components/Header/Header.tsx","App.tsx","reportWebVitals.ts","index.tsx","constants/math.ts","utils/utils.ts"],"names":["WRAPPED_SOL_MINT","Map","PublicKey","TOKEN_PROGRAM_ID","SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID","BPF_UPGRADE_LOADER_ID","MEMO_ID","SYSTEM","ENDPOINTS","name","endpoint","ChainId","MainnetBeta","Devnet","DEFAULT","ConnectionContext","React","createContext","setEndpoint","connection","Connection","env","tokens","tokenMap","ConnectionProvider","children","undefined","useLocalStorageState","useMemo","find","end","useState","setTokens","setTokenMap","useEffect","TokenListProvider","resolve","then","container","list","excludeByTag","filterByChainId","getList","knownMints","reduce","map","item","set","address","id","onAccountChange","Keypair","generate","publicKey","removeAccountChangeListener","onSlotChange","removeSlotChangeListener","Provider","value","useConnection","useContext","useConnectionConfig","context","SequenceType","getErrorForTransaction","txid","a","confirmTransaction","getParsedConfirmedTransaction","tx","errors","meta","logMessages","forEach","log","m","regex","exec","index","lastIndex","length","push","sendTransactionsWithManualRetry","wallet","instructions","signers","stopPoint","tries","lastInstructionsLength","toRemoveSigners","filter","instr","i","filteredSigners","_","slice","sendTransactionWithRetry","sendTransactions","StopOnFailure","console","error","instructionSet","signersSet","sequenceType","Parallel","commitment","successCallback","ind","failCallback","block","WalletNotConnectedError","unsignedTxns","getRecentBlockhash","transaction","Transaction","instruction","add","recentBlockhash","blockhash","setSigners","s","partialSign","signAllTransactions","signedTxns","pendingTxns","breakEarlyObject","breakEarly","signedTxnPromise","sendSignedTransaction","signedTransaction","slot","catch","reason","Promise","all","sendTransaction","awaitConfirmation","includesFeePayer","signTransaction","rawTransaction","serialize","options","skipPreflight","sendRawTransaction","awaitTransactionSignatureConfirmation","DEFAULT_TIMEOUT","confirmation","Error","err","notify","message","description","type","beforeSend","getUnixTs","Date","getTime","timeout","startTime","done","sleep","simulateResult","simulateTransaction","logs","line","startsWith","JSON","stringify","_recentBlockhash","_disableBlockhashCaching","signData","serializeMessage","wireTransaction","_serialize","encodedTransaction","toString","args","encoding","_rpcRequest","res","result","envFor","_rpcEndpoint","cfg","explorerLinkFor","queryStatus","status","confirmations","subId","reject","setTimeout","onSignature","e","getSignatureStatuses","signatureStatuses","_signatureSubscriptions","removeSignatureListener","programIds","token","associatedToken","bpf_upgrade_loader","system","memo","DefaultModal","props","bodyStyle","closeIcon","rest","style","background","borderRadius","display","flexDirection","alignItems","footer","width","MerkleTree","leafs","layers","this","hashes","nodeHash","acc","cur","idx","arr","nxt","internalHash","Array","proof","layer","sibling","Math","floor","getRoot","getProof","el","root","pair","equals","data","Buffer","from","keccak_256","digest","first","second","sort","compare","fst","snd","leaf","AccountsContext","pendingCalls","genericCache","pendingMintCalls","mintCache","getMintInfo","pubKey","getAccountInfo","info","deserializeMint","TokenAccountParser","buffer","deserializeAccount","pubkey","account","keyToAccountParser","cache","emitter","EventEmitter","query","parser","toBase58","get","obj","isActive","deserialize","registerParser","delete","Function","isNew","has","raiseCacheUpdated","key","raiseCacheDeleted","byParser","keys","queryMint","mint","getMint","addMint","UseNativeAccount","useWallet","nativeAccount","setNativeAccount","updateCache","useCallback","wrapped","owner","amount","u64","lamports","delegate","delegatedAmount","isInitialized","isFrozen","isNative","rentExemptReserve","closeAuthority","wrapNativeAccount","updateAccount","PRECACHED_OWNERS","Set","precacheUserTokenAccounts","getTokenAccountsByOwner","programId","AccountsProvider","tokenAccounts","setTokenAccounts","userAccounts","setUserAccounts","walletKey","selectUserAccounts","accounts","subs","onCache","tokenSubID","onProgramAccountChange","accountId","accountInfo","AccountLayout","span","removeProgramAccountChangeListener","decode","fromBuffer","delegateOption","state","isNativeOption","closeAuthorityOption","MintLayout","mintInfo","mintAuthorityOption","mintAuthority","supply","freezeAuthorityOption","freezeAuthority","placement","notification","color","opacity","backgroundColor","ExplorerLink","code","href","target","rel","title","Text","shortenAddress","CacheUpdateEvent","CacheDeleteEvent","MarketUpdateEvent","ids","Emitter","callback","on","removeListener","emit","Settings","additionalSettings","connected","disconnect","setVisible","useWalletModal","open","setModal","useModal","theme","useTheme","colorModeCtx","useColorMode","handleConnect","ModalEnum","WALLET","sx","minWidth","marginBottom","onChange","variant","onClick","marginLeft","navigator","clipboard","writeText","ml","toggleColorMode","palette","mode","MERKLE_DISTRIBUTOR_ID","idl","require","coder","Coder","Claim","editable","setEditable","params","queryString","parse","location","search","distributor","setDistributor","handle","setHandle","amountStr","setAmount","indexStr","setIndex","pin","pinStr","setPin","proofStr","setProof","submit","preventDefault","Number","split","isNaN","distributorKey","distributorAccount","distributorInfo","b","ret","bs58","findProgramAddress","toBuffer","claimantPda","BN","toArray","verifyClaim","claimStatus","cbump","distributorTokenKey","walletTokenKey","setup","TransactionInstruction","isSigner","isWritable","SystemProgram","SYSVAR_RENT_PUBKEY","claimAirdrop","sha256","concat","claimResult","spacing","label","disabled","multiline","wrap","randomBytes","buf","Uint8Array","window","crypto","getRandomValues","WHITESPACE","setupSender","method","auth","source","mailchimp","Mailchimp","mintUrl","from_email","subject","text","url","to","email","messages","send","response","reject_reason","setupMailchimp","parseClaimants","input","bump","pda","reactModal","renderModal","document","createElement","body","appendChild","destroyModal","ReactDOM","unmountComponentAtNode","removeChild","onSubmit","onDismiss","render","show","displayModal","finally","hideModal","Create","localStorage","getItem","setMint","commMethod","setMethod","commAuth","setCommAuth","commSource","setCommSource","filename","setFilename","setText","claimURLs","setClaimURLs","mintKey","mintAccount","displayMintTokens","pow","decimals","claimants","mightHaveExisting","c","click","visible","onCancel","fontSize","opt","resendOnly","sender","totalClaim","creatorTokenKey","creatorTokenAccount","creatorTokenInfo","toNumber","claimant","seeds","tree","base","dbump","verifyProof","join","origin","pathname","fontWeight","maxHeight","size","border","component","scope","shouldSend","createDistributorTokenAccount","initDistributor","transferToATA","Token","createTransferInstruction","createResult","handleFiles","files","file","reader","FileReader","onload","readAsText","fileUpload","Fragment","handleDrop","direction","height","justifyContent","alignContent","padding","marginTop","hidden","createAirdrop","marginRight","setItem","fullWidth","labelId","textAlign","commAuthorization","encoded","encodeURIComponent","encodedClaimURLs","download","underline","DragAndDrop","dropRef","useRef","dragCounter","setDragCounter","dragging","setDragging","handleDrag","stopPropagation","handleDragIn","dataTransfer","items","handleDragOut","remainingDrags","clearData","node","current","addEventListener","removeEventListener","ref","WalletModalContext","WalletModal","wallets","selected","select","setShowWallets","close","verticalAlign","lineHeight","icon","alt","src","float","WalletModalProvider","setConnected","base58","keyToDisplay","substring","WalletProvider","getPhantomWallet","getSolflareWallet","getTorusWallet","clientId","getLedgerWallet","getSolongWallet","getMathWallet","getSolletWallet","onError","autoConnect","ModalContext","removeModal","ColorModeContext","ColorModeContextProvider","setMode","prevMode","BinaryReader","prototype","readPubkey","array","readFixedArray","BinaryWriter","writePubkey","writeFixedArray","readPubkeyAsString","encode","writePubkeyAsString","Centered","position","top","left","ConnectButton","isConnected","onClickConnect","onClickChange","restProps","ButtonGroup","Header","handleChange","AppBar","Box","bgcolor","Stack","Link","Button","flexGrow","About","App","disabledColor","createTheme","action","className","ThemeProvider","CssBaseline","path","reportWebVitals","onPerfEntry","getCLS","getFID","getFCP","getLCP","getTTFB","StrictMode","getElementById","TEN","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","defaultState","storedState","setState","setLocalStorageState","newState","removeItem","chars","chunks","apply","ceil","currency","ms"],"mappings":"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","file":"static/js/main.9d8a93df.chunk.js","sourcesContent":["import { PublicKey, AccountInfo } from '@solana/web3.js';\n\nexport type StringPublicKey = string;\n\nexport class LazyAccountInfoProxy<T> {\n  executable: boolean = false;\n  owner: StringPublicKey = '';\n  lamports: number = 0;\n\n  get data() {\n    //\n    return undefined as unknown as T;\n  }\n}\n\nexport interface LazyAccountInfo {\n  executable: boolean;\n  owner: StringPublicKey;\n  lamports: number;\n  data: [string, string];\n}\n\nconst PubKeysInternedMap = new Map<string, PublicKey>();\n\nexport const toPublicKey = (key: string | PublicKey) => {\n  if (typeof key !== 'string') {\n    return key;\n  }\n\n  let result = PubKeysInternedMap.get(key);\n  if (!result) {\n    result = new PublicKey(key);\n    PubKeysInternedMap.set(key, result);\n  }\n\n  return result;\n};\n\nexport interface PublicKeyStringAndAccount<T> {\n  pubkey: string;\n  account: AccountInfo<T>;\n}\n\nexport const WRAPPED_SOL_MINT = new PublicKey('So11111111111111111111111111111111111111112');\n\nexport const TOKEN_PROGRAM_ID = new PublicKey('TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA');\n\nexport const SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID = new PublicKey('ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL');\n\nexport const BPF_UPGRADE_LOADER_ID = new PublicKey('BPFLoaderUpgradeab1e11111111111111111111111');\n\nexport const MEMO_ID = new PublicKey('MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr');\n\nexport const SYSTEM = new PublicKey('11111111111111111111111111111111');\n","import { sleep, useLocalStorageState } from \"../utils/utils\";\nimport {\n  Keypair,\n  Commitment,\n  Connection,\n  RpcResponseAndContext,\n  SignatureStatus,\n  SimulatedTransactionResponse,\n  Transaction,\n  TransactionInstruction,\n  TransactionSignature,\n  Blockhash,\n  FeeCalculator,\n} from \"@solana/web3.js\";\nimport React, { useContext, useEffect, useMemo, useState } from \"react\";\nimport { notify } from \"../utils/notifications\";\nimport { ExplorerLink } from \"../components/ExplorerLink\";\nimport {\n  TokenInfo,\n  TokenListProvider,\n  ENV as ChainId,\n} from \"@solana/spl-token-registry\";\nimport { WalletSigner } from \"./WalletContext/WalletContext\";\nimport { WalletNotConnectedError } from \"@solana/wallet-adapter-base\";\n\ninterface BlockhashAndFeeCalculator {\n  blockhash: Blockhash;\n  feeCalculator: FeeCalculator;\n}\n\nexport type ENV = \"mainnet-beta\" | \"testnet\" | \"devnet\" | \"localnet\";\n\nexport const ENDPOINTS = [\n  {\n    name: \"mainnet-beta\" as ENV,\n    endpoint: \"https://api.mainnet-beta.solana.com\",\n    ChainId: ChainId.MainnetBeta,\n  },\n  {\n    name: \"devnet\" as ENV,\n    endpoint: \"https://api.devnet.solana.com\",\n    ChainId: ChainId.Devnet,\n  },\n];\n\nconst DEFAULT = ENDPOINTS[0].endpoint;\n\ninterface ConnectionConfig {\n  connection: Connection;\n  endpoint: string;\n  env: ENV;\n  setEndpoint: (val: string) => void;\n  tokens: TokenInfo[];\n  tokenMap: Map<string, TokenInfo>;\n}\n\nconst ConnectionContext = React.createContext<ConnectionConfig>({\n  endpoint: DEFAULT,\n  setEndpoint: () => {},\n  connection: new Connection(DEFAULT, \"recent\"),\n  env: ENDPOINTS[0].name,\n  tokens: [],\n  tokenMap: new Map<string, TokenInfo>(),\n});\n\nexport function ConnectionProvider({ children = undefined as any }) {\n  const [endpoint, setEndpoint] = useLocalStorageState(\n    \"connectionEndpoint\",\n    ENDPOINTS[0].endpoint\n  );\n\n  const connection = useMemo(\n    () => new Connection(endpoint, \"recent\"),\n    [endpoint]\n  );\n\n  const env =\n    ENDPOINTS.find((end) => end.endpoint === endpoint)?.name ||\n    ENDPOINTS[0].name;\n\n  const [tokens, setTokens] = useState<TokenInfo[]>([]);\n  const [tokenMap, setTokenMap] = useState<Map<string, TokenInfo>>(new Map());\n  useEffect(() => {\n    // fetch token files\n    new TokenListProvider().resolve().then((container) => {\n      const list = container\n        .excludeByTag(\"nft\")\n        .filterByChainId(\n          ENDPOINTS.find((end) => end.endpoint === endpoint)?.ChainId ||\n            ChainId.MainnetBeta\n        )\n        .getList();\n\n      const knownMints = [...list].reduce((map, item) => {\n        map.set(item.address, item);\n        return map;\n      }, new Map<string, TokenInfo>());\n\n      setTokenMap(knownMints);\n      setTokens(list);\n    });\n  }, [env, endpoint]);\n\n  // The websocket library solana/web3.js uses closes its websocket connection when the subscription list\n  // is empty after opening its first time, preventing subsequent subscriptions from receiving responses.\n  // This is a hack to prevent the list from every getting empty\n  useEffect(() => {\n    const id = connection.onAccountChange(\n      Keypair.generate().publicKey,\n      () => {}\n    );\n    return () => {\n      connection.removeAccountChangeListener(id);\n    };\n  }, [connection]);\n\n  useEffect(() => {\n    const id = connection.onSlotChange(() => null);\n    return () => {\n      connection.removeSlotChangeListener(id);\n    };\n  }, [connection]);\n\n  return (\n    <ConnectionContext.Provider\n      value={{\n        endpoint,\n        setEndpoint,\n        connection,\n        tokens,\n        tokenMap,\n        env,\n      }}\n    >\n      {children}\n    </ConnectionContext.Provider>\n  );\n}\n\nexport function useConnection() {\n  return useContext(ConnectionContext).connection as Connection;\n}\n\nexport function useConnectionConfig() {\n  const context = useContext(ConnectionContext);\n  return {\n    endpoint: context.endpoint,\n    setEndpoint: context.setEndpoint,\n    env: context.env,\n    tokens: context.tokens,\n    tokenMap: context.tokenMap,\n  };\n}\n\nexport const getErrorForTransaction = async (\n  connection: Connection,\n  txid: string\n) => {\n  // wait for all confirmation before geting transaction\n  await connection.confirmTransaction(txid, \"max\");\n\n  const tx = await connection.getParsedConfirmedTransaction(txid);\n\n  const errors: string[] = [];\n  if (tx?.meta && tx.meta.logMessages) {\n    tx.meta.logMessages.forEach((log) => {\n      const regex = /Error: (.*)/gm;\n      let m;\n      while ((m = regex.exec(log)) !== null) {\n        // This is necessary to avoid infinite loops with zero-width matches\n        if (m.index === regex.lastIndex) {\n          regex.lastIndex++;\n        }\n\n        if (m.length > 1) {\n          errors.push(m[1]);\n        }\n      }\n    });\n  }\n\n  return errors;\n};\n\nexport enum SequenceType {\n  Sequential,\n  Parallel,\n  StopOnFailure,\n}\n\nexport async function sendTransactionsWithManualRetry(\n  connection: Connection,\n  wallet: WalletSigner,\n  instructions: TransactionInstruction[][],\n  signers: Keypair[][]\n) {\n  let stopPoint = 0;\n  let tries = 0;\n  let lastInstructionsLength: any = null;\n  let toRemoveSigners: Record<number, boolean> = {};\n\n \n  instructions = instructions.filter((instr, i) => {\n    if (instr.length > 0) {\n      return true;\n    } else {\n      toRemoveSigners[i] = true;\n      return false;\n    }\n  });\n  let filteredSigners = signers.filter((_, i) => !toRemoveSigners[i]);\n\n  while (stopPoint < instructions.length && tries < 3) {\n    instructions = instructions.slice(stopPoint, instructions.length);\n    filteredSigners = filteredSigners.slice(stopPoint, filteredSigners.length);\n\n    if (instructions.length === lastInstructionsLength) tries = tries + 1;\n    else tries = 0;\n\n    try {\n      if (instructions.length === 1) {\n        await sendTransactionWithRetry(\n          connection,\n          wallet,\n          instructions[0],\n          filteredSigners[0],\n          \"single\"\n        );\n        stopPoint = 1;\n      } else {\n        stopPoint = await sendTransactions(\n          connection,\n          wallet,\n          instructions,\n          filteredSigners,\n          SequenceType.StopOnFailure,\n          \"single\"\n        );\n      }\n    } catch (e) {\n      console.error(e);\n    }\n    console.log(\n      \"Died on \",\n      stopPoint,\n      \"retrying from instruction\",\n      instructions[stopPoint],\n      \"instructions length is\",\n      instructions.length\n    );\n    lastInstructionsLength = instructions.length;\n  }\n}\n\nexport const sendTransactions = async (\n  connection: Connection,\n  wallet: WalletSigner,\n  instructionSet: TransactionInstruction[][],\n  signersSet: Keypair[][],\n  sequenceType: SequenceType = SequenceType.Parallel,\n  commitment: Commitment = \"singleGossip\",\n  successCallback: (txid: string, ind: number) => void = (txid, ind) => {},\n  failCallback: (reason: string, ind: number) => boolean = (txid, ind) => false,\n  block?: BlockhashAndFeeCalculator\n): Promise<number> => {\n  if (!wallet.publicKey) throw new WalletNotConnectedError();\n\n  const unsignedTxns: Transaction[] = [];\n\n  if (!block) {\n    block = await connection.getRecentBlockhash(commitment);\n  }\n\n  for (let i = 0; i < instructionSet.length; i++) {\n    const instructions = instructionSet[i];\n    const signers = signersSet[i];\n\n    if (instructions.length === 0) {\n      continue;\n    }\n\n    let transaction = new Transaction();\n    instructions.forEach((instruction) => transaction.add(instruction));\n    transaction.recentBlockhash = block.blockhash;\n    transaction.setSigners(\n      // fee payed by the wallet owner\n      wallet.publicKey,\n      ...signers.map((s) => s.publicKey)\n    );\n\n    if (signers.length > 0) {\n      transaction.partialSign(...signers);\n    }\n\n    unsignedTxns.push(transaction);\n  }\n\n  const signedTxns = await wallet.signAllTransactions(unsignedTxns);\n\n  const pendingTxns: Promise<{ txid: string; slot: number }>[] = [];\n\n  let breakEarlyObject = { breakEarly: false, i: 0 };\n  console.log(\n    \"Signed txns length\",\n    signedTxns.length,\n    \"vs handed in length\",\n    instructionSet.length\n  );\n  for (let i = 0; i < signedTxns.length; i++) {\n    const signedTxnPromise = sendSignedTransaction({\n      connection,\n      signedTransaction: signedTxns[i],\n    });\n\n    signedTxnPromise\n      .then(({ txid, slot }) => {\n        successCallback(txid, i);\n      })\n      .catch((reason) => {\n        // @ts-ignore\n        failCallback(signedTxns[i], i);\n        if (sequenceType === SequenceType.StopOnFailure) {\n          breakEarlyObject.breakEarly = true;\n          breakEarlyObject.i = i;\n        }\n      });\n\n    if (sequenceType !== SequenceType.Parallel) {\n      try {\n        await signedTxnPromise;\n      } catch (e) {\n        console.log(\"Caught failure\", e);\n        if (breakEarlyObject.breakEarly) {\n          console.log(\"Died on \", breakEarlyObject.i);\n          return breakEarlyObject.i; // Return the txn we failed on by index\n        }\n      }\n    } else {\n      pendingTxns.push(signedTxnPromise);\n    }\n  }\n\n  if (sequenceType !== SequenceType.Parallel) {\n    await Promise.all(pendingTxns);\n  }\n\n  return signedTxns.length;\n};\n\nexport const sendTransaction = async (\n  connection: Connection,\n  wallet: WalletSigner,\n  instructions: TransactionInstruction[],\n  signers: Keypair[],\n  awaitConfirmation = true,\n  commitment: Commitment = \"singleGossip\",\n  includesFeePayer: boolean = false,\n  block?: BlockhashAndFeeCalculator\n) => {\n  if (!wallet.publicKey) throw new WalletNotConnectedError();\n\n  let transaction = new Transaction();\n  instructions.forEach((instruction) => transaction.add(instruction));\n  transaction.recentBlockhash = (\n    block || (await connection.getRecentBlockhash(commitment))\n  ).blockhash;\n\n  if (includesFeePayer) {\n    transaction.setSigners(...signers.map((s) => s.publicKey));\n  } else {\n    transaction.setSigners(\n      // fee payed by the wallet owner\n      wallet.publicKey,\n      ...signers.map((s) => s.publicKey)\n    );\n  }\n\n  if (signers.length > 0) {\n    transaction.partialSign(...signers);\n  }\n  if (!includesFeePayer) {\n    transaction = await wallet.signTransaction(transaction);\n  }\n\n  const rawTransaction = transaction.serialize();\n  let options = {\n    skipPreflight: true,\n    commitment,\n  };\n\n  const txid = await connection.sendRawTransaction(rawTransaction, options);\n  let slot = 0;\n\n  if (awaitConfirmation) {\n    const confirmation = await awaitTransactionSignatureConfirmation(\n      txid,\n      DEFAULT_TIMEOUT,\n      connection,\n      commitment\n    );\n\n    if (!confirmation)\n      throw new Error(\"Timed out awaiting confirmation on transaction\");\n    slot = confirmation?.slot || 0;\n\n    if (confirmation?.err) {\n      const errors = await getErrorForTransaction(connection, txid);\n      notify({\n        message: \"Transaction failed...\",\n        description: (\n          <>\n            {errors.map((err) => (\n              <div>{err}</div>\n            ))}\n            <ExplorerLink address={txid} type=\"transaction\" />\n          </>\n        ),\n        type: \"error\",\n      });\n\n      throw new Error(`Raw transaction ${txid} failed`);\n    }\n  }\n\n  return { txid, slot };\n};\n\nexport const sendTransactionWithRetry = async (\n  connection: Connection,\n  wallet: WalletSigner,\n  instructions: TransactionInstruction[],\n  signers: Keypair[],\n  commitment: Commitment = \"singleGossip\",\n  includesFeePayer: boolean = false,\n  block?: BlockhashAndFeeCalculator,\n  beforeSend?: () => void\n) : Promise<string| { txid: string; slot: number }> => {\n  if (!wallet.publicKey) throw new WalletNotConnectedError();\n\n  let transaction = new Transaction();\n  instructions.forEach((instruction) => transaction.add(instruction));\n  transaction.recentBlockhash = (\n    block || (await connection.getRecentBlockhash(commitment))\n  ).blockhash;\n\n  if (includesFeePayer) {\n    transaction.setSigners(...signers.map((s) => s.publicKey));\n  } else {\n    transaction.setSigners(\n      // fee payed by the wallet owner\n      wallet.publicKey,\n      ...signers.map((s) => s.publicKey)\n    );\n  }\n\n  if (signers.length > 0) {\n    transaction.partialSign(...signers);\n  }\n  if (!includesFeePayer) {\n    try {\n      transaction = await wallet.signTransaction(transaction);\n    } catch {\n      return \"Failed to sign transaction\";\n    }\n  }\n\n  if (beforeSend) {\n    beforeSend();\n  }\n  console.log(\"About to send\");\n  try {\n    const { txid, slot } = await sendSignedTransaction({\n      connection,\n      signedTransaction: transaction,\n    });\n\n    return { txid, slot };\n  } catch (error) {\n    console.error(error);\n    return \"See console logs\";\n  }\n};\n\nexport const getUnixTs = () => {\n  return new Date().getTime() / 1000;\n};\n\nconst DEFAULT_TIMEOUT = 15000;\n\nexport async function sendSignedTransaction({\n  signedTransaction,\n  connection,\n  timeout = DEFAULT_TIMEOUT,\n}: {\n  signedTransaction: Transaction;\n  connection: Connection;\n  sendingMessage?: string;\n  sentMessage?: string;\n  successMessage?: string;\n  timeout?: number;\n}): Promise<{ txid: string; slot: number }> {\n  const rawTransaction = signedTransaction.serialize();\n  const startTime = getUnixTs();\n  let slot = 0;\n  const txid: TransactionSignature = await connection.sendRawTransaction(\n    rawTransaction,\n    {\n      skipPreflight: true,\n    }\n  );\n\n  console.log(\"Started awaiting confirmation for\", txid);\n\n  let done = false;\n  (async () => {\n    while (!done && getUnixTs() - startTime < timeout) {\n      connection.sendRawTransaction(rawTransaction, {\n        skipPreflight: true,\n      });\n      await sleep(500);\n    }\n  })();\n  try {\n    const confirmation = await awaitTransactionSignatureConfirmation(\n      txid,\n      timeout,\n      connection,\n      \"recent\",\n      true\n    );\n\n    if (!confirmation)\n      throw new Error(\"Timed out awaiting confirmation on transaction\");\n\n    if (confirmation.err) {\n      console.error(confirmation.err);\n      throw new Error(\"Transaction failed: Custom instruction error\");\n    }\n\n    slot = confirmation?.slot || 0;\n  } catch (err) {\n    console.error(\"Timeout Error caught\", err);\n    if ((err as any).timeout) {\n      throw new Error(\"Timed out awaiting confirmation on transaction\");\n    }\n    let simulateResult: SimulatedTransactionResponse | null = null;\n    try {\n      simulateResult = (\n        await simulateTransaction(connection, signedTransaction, \"single\")\n      ).value;\n    } catch (e) {}\n    if (simulateResult && simulateResult.err) {\n      if (simulateResult.logs) {\n        for (let i = simulateResult.logs.length - 1; i >= 0; --i) {\n          const line = simulateResult.logs[i];\n          if (line.startsWith(\"Program log: \")) {\n            throw new Error(\n              \"Transaction failed: \" + line.slice(\"Program log: \".length)\n            );\n          }\n        }\n      }\n      throw new Error(JSON.stringify(simulateResult.err));\n    }\n    // throw new Error('Transaction failed');\n  } finally {\n    done = true;\n  }\n\n  console.log(\"Latency\", txid, getUnixTs() - startTime);\n  return { txid, slot };\n}\n\nasync function simulateTransaction(\n  connection: Connection,\n  transaction: Transaction,\n  commitment: Commitment\n): Promise<RpcResponseAndContext<SimulatedTransactionResponse>> {\n  // @ts-ignore\n  transaction.recentBlockhash = await connection._recentBlockhash(\n    // @ts-ignore\n    connection._disableBlockhashCaching\n  );\n\n  const signData = transaction.serializeMessage();\n  // @ts-ignore\n  const wireTransaction = transaction._serialize(signData);\n  const encodedTransaction = wireTransaction.toString(\"base64\");\n  const config: any = { encoding: \"base64\", commitment };\n  const args = [encodedTransaction, config];\n\n  // @ts-ignore\n  const res = await connection._rpcRequest(\"simulateTransaction\", args);\n  if (res.error) {\n    throw new Error(\"failed to simulate transaction: \" + res.error.message);\n  }\n  return res.result;\n}\n\nexport const envFor = (\n  connection: Connection\n) : string => {\n  let endpoint = (connection as any)._rpcEndpoint;\n  let env = \"mainnet-beta\";\n  for (const cfg of ENDPOINTS) {\n    if (cfg.endpoint === endpoint) {\n      env = cfg.name;\n      break;\n    }\n  }\n  return env;\n}\n\nexport const explorerLinkFor = (\n  txid: TransactionSignature,\n  connection: Connection\n) : string => {\n  return `https://explorer.solana.com/tx/${txid}?cluster=${envFor(connection)}`;\n}\n\nasync function awaitTransactionSignatureConfirmation(\n  txid: TransactionSignature,\n  timeout: number,\n  connection: Connection,\n  commitment: Commitment = \"recent\",\n  queryStatus = false\n): Promise<SignatureStatus | null | void> {\n\n  let done = false;\n  let status: SignatureStatus | null | void = {\n    slot: 0,\n    confirmations: 0,\n    err: null,\n  };\n  let subId = 0;\n  status = await new Promise(async (resolve, reject) => {\n    setTimeout(() => {\n      if (done) {\n        return;\n      }\n      done = true;\n      console.log(\"Rejecting for timeout...\");\n      reject({ timeout: true });\n    }, timeout);\n    try {\n      subId = connection.onSignature(\n        txid,\n        (result, context) => {\n          done = true;\n          status = {\n            err: result.err,\n            slot: context.slot,\n            confirmations: 0,\n          };\n          if (result.err) {\n            console.log(\"Rejected via websocket\", result.err);\n            reject(status);\n          } else {\n            console.log(\"Resolved via websocket\", result);\n            resolve(status);\n          }\n        },\n        commitment\n      );\n    } catch (e) {\n      done = true;\n      console.error(\"WS error in setup\", txid, e);\n    }\n    while (!done && queryStatus) {\n      // eslint-disable-next-line no-loop-func\n      (async () => {\n        try {\n          const signatureStatuses = await connection.getSignatureStatuses([\n            txid,\n          ]);\n          status = signatureStatuses && signatureStatuses.value[0];\n          console.log(explorerLinkFor(txid, connection));\n          if (!done) {\n            if (!status) {\n              console.log(\"REST null result for\", txid, status);\n            } else if (status.err) {\n              console.log(\"REST error for\", txid, status);\n              done = true;\n              reject(status.err);\n            } else if (!status.confirmations) {\n              console.log(\"REST no confirmations for\", txid, status);\n            } else {\n              console.log(\"REST confirmation for\", txid, status);\n              done = true;\n              resolve(status);\n            }\n          }\n        } catch (e) {\n          if (!done) {\n            console.log(\"REST connection error: txid\", txid, e);\n          }\n        }\n      })();\n      await sleep(2000);\n    }\n  });\n\n  //@ts-ignore\n  if (connection._signatureSubscriptions[subId])\n    connection.removeSignatureListener(subId);\n  done = true;\n  console.log(\"Returning status\", status);\n  return status;\n}\n","import {\n  TOKEN_PROGRAM_ID,\n  SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n  BPF_UPGRADE_LOADER_ID,\n  SYSTEM,\n  MEMO_ID,\n} from './ids';\n\nexport const setProgramIds = async () => {};\n\nexport const programIds = () => {\n  return {\n    token: TOKEN_PROGRAM_ID,\n    associatedToken: SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n    bpf_upgrade_loader: BPF_UPGRADE_LOADER_ID,\n    system: SYSTEM,\n    memo: MEMO_ID,\n    // store: STORE,\n  };\n};\n","import React from \"react\";\nimport { Modal } from \"antd\";\n\nimport \"./index.css\";\n\nexport const DefaultModal = (props: any) => {\n  const { children, closeIcon, bodyStyle, style, ...rest } = props;\n\n  return (\n    <Modal\n      style={{ background: \"transparent\", borderRadius: 16 }}\n      bodyStyle={{\n        background: \"#333333\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        ...bodyStyle,\n      }}\n      footer={null}\n      width={400}\n      {...rest}\n    >\n      {children}\n    </Modal>\n  );\n};\n","import { keccak_256 } from \"js-sha3\";\n\nexport class MerkleTree {\n  leafs: Array<Buffer>;\n  layers: Array<Array<Buffer>>;\n\n  constructor(leafs : Array<Buffer>) {\n    this.leafs = leafs.slice();\n    this.layers = [];\n\n    let hashes = this.leafs.map(MerkleTree.nodeHash);\n    while (hashes.length > 0) {\n      console.log(\"Hashes\", this.layers.length, hashes);\n      this.layers.push(hashes.slice());\n      if (hashes.length === 1) break;\n      hashes = hashes.reduce((acc, cur, idx, arr) => {\n        if (idx % 2 === 0) {\n          const nxt = arr[idx + 1];\n          acc.push(MerkleTree.internalHash(cur, nxt));\n        }\n        return acc;\n      }, Array<Buffer>());\n    }\n  }\n\n  static nodeHash(\n    data : Buffer,\n  ) : Buffer {\n    return Buffer.from(keccak_256.digest([0x00, ...data]));\n  }\n\n\n  static internalHash(\n    first : Buffer,\n    second : Buffer | undefined,\n  ) : Buffer {\n    if (!second) return first;\n    const [fst, snd] = [first, second].sort(Buffer.compare)\n    return Buffer.from(\n      keccak_256.digest([0x01, ...fst, ...snd])\n    );\n  }\n\n  getRoot() : Buffer {\n    return this.layers[this.layers.length - 1][0];\n  }\n\n  getProof(idx : number) : Buffer[] {\n    return this.layers.reduce((proof, layer) => {\n      const sibling = idx ^ 1;\n      if (sibling < layer.length) {\n        proof.push(layer[sibling]);\n      }\n\n      idx = Math.floor(idx / 2);\n\n      return proof;\n    }, []);\n  }\n\n  getHexRoot(): string {\n    return this.getRoot().toString(\"hex\");\n  }\n\n  getHexProof(idx : number) : string[] {\n    return this.getProof(idx).map((el) => el.toString(\"hex\"));\n  }\n\n  verifyProof(\n    idx : number,\n    proof : Buffer[],\n    root : Buffer\n  ): boolean {\n    let pair = MerkleTree.nodeHash(this.leafs[idx]);\n    for (const item of proof) {\n      pair = MerkleTree.internalHash(pair, item);\n    }\n\n    return pair.equals(root);\n  }\n\n  static verifyClaim(\n    leaf : Buffer,\n    proof : Buffer[],\n    root : Buffer\n  ): boolean {\n    let pair = MerkleTree.nodeHash(leaf);\n    for (const item of proof) {\n      pair = MerkleTree.internalHash(pair, item);\n    }\n\n    return pair.equals(root);\n  }\n\n}\n","import React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\nimport { useConnection } from './ConnectionContext';\nimport { useWallet } from '@solana/wallet-adapter-react';\nimport { AccountInfo, Connection, PublicKey } from '@solana/web3.js';\nimport { AccountLayout, MintInfo, MintLayout, u64 } from '@solana/spl-token';\nimport { TokenAccount } from '../models';\nimport { chunks } from '../utils/utils';\nimport { EventEmitter } from '../utils/eventEmitter';\nimport { StringPublicKey, WRAPPED_SOL_MINT } from '../utils/ids';\nimport { programIds } from '../utils/programIds';\n\nconst AccountsContext = React.createContext<any>(null);\n\nconst pendingCalls = new Map<string, Promise<ParsedAccountBase>>();\nconst genericCache = new Map<string, ParsedAccountBase>();\nconst pendingMintCalls = new Map<string, Promise<MintInfo>>();\nconst mintCache = new Map<string, MintInfo>();\n\nexport interface ParsedAccountBase {\n  pubkey: StringPublicKey;\n  account: AccountInfo<Buffer>;\n  info: any; // TODO: change to unknown\n}\n\nexport type AccountParser = (\n  pubkey: StringPublicKey,\n  data: AccountInfo<Buffer>,\n) => ParsedAccountBase | undefined;\n\nexport interface ParsedAccount<T> extends ParsedAccountBase {\n  info: T;\n}\n\nconst getMintInfo = async (connection: Connection, pubKey: PublicKey) => {\n  const info = await connection.getAccountInfo(pubKey);\n  if (info === null) {\n    throw new Error('Failed to find mint account');\n  }\n\n  const data = Buffer.from(info.data);\n\n  return deserializeMint(data);\n};\n\nexport const MintParser = (pubKey: string, info: AccountInfo<Buffer>) => {\n  const buffer = Buffer.from(info.data);\n\n  const data = deserializeMint(buffer);\n\n  const details = {\n    pubkey: pubKey,\n    account: {\n      ...info,\n    },\n    info: data,\n  } as ParsedAccountBase;\n\n  return details;\n};\n\nexport const TokenAccountParser = (\n  pubKey: string,\n  info: AccountInfo<Buffer>,\n) => {\n  // Sometimes a wrapped sol account gets closed, goes to 0 length,\n  // triggers an update over wss which triggers this guy to get called\n  // since your UI already logged that pubkey as a token account. Check for length.\n  if (info.data.length > 0) {\n    const buffer = Buffer.from(info.data);\n    const data = deserializeAccount(buffer);\n\n    const details = {\n      pubkey: pubKey,\n      account: {\n        ...info,\n      },\n      info: data,\n    } as TokenAccount;\n\n    return details;\n  }\n};\n\nexport const GenericAccountParser = (\n  pubKey: string,\n  info: AccountInfo<Buffer>,\n) => {\n  const buffer = Buffer.from(info.data);\n\n  const details = {\n    pubkey: pubKey,\n    account: {\n      ...info,\n    },\n    info: buffer,\n  } as ParsedAccountBase;\n\n  return details;\n};\n\nexport const keyToAccountParser = new Map<string, AccountParser>();\n\nexport const cache = {\n  emitter: new EventEmitter(),\n  query: async (\n    connection: Connection,\n    pubKey: string | PublicKey,\n    parser?: AccountParser,\n  ) => {\n    let id: PublicKey;\n    if (typeof pubKey === 'string') {\n      id = new PublicKey(pubKey);\n    } else {\n      id = pubKey;\n    }\n\n    const address = id.toBase58();\n\n    let account = genericCache.get(address);\n    if (account) {\n      return account;\n    }\n\n    let query = pendingCalls.get(address);\n    if (query) {\n      return query;\n    }\n\n    // TODO: refactor to use multiple accounts query with flush like behavior\n    query = connection.getAccountInfo(id).then(data => {\n      if (!data) {\n        throw new Error('Account not found');\n      }\n\n      return cache.add(id, data, parser);\n    }) as Promise<TokenAccount>;\n    pendingCalls.set(address, query as any);\n\n    return query;\n  },\n  add: (\n    id: PublicKey | string,\n    obj: AccountInfo<Buffer>,\n    parser?: AccountParser,\n    isActive?: boolean | undefined | ((parsed: any) => boolean),\n  ) => {\n    const address = typeof id === 'string' ? id : id?.toBase58();\n    const deserialize = parser ? parser : keyToAccountParser.get(address);\n    if (!deserialize) {\n      throw new Error(\n        'Deserializer needs to be registered or passed as a parameter',\n      );\n    }\n\n    cache.registerParser(id, deserialize);\n    pendingCalls.delete(address);\n    const account = deserialize(address, obj);\n    if (!account) {\n      return;\n    }\n\n    if (isActive === undefined) isActive = true;\n    else if (isActive instanceof Function) isActive = isActive(account);\n\n    const isNew = !genericCache.has(address);\n\n    genericCache.set(address, account);\n    cache.emitter.raiseCacheUpdated(address, isNew, deserialize, isActive);\n    return account;\n  },\n  get: (pubKey: string | PublicKey) => {\n    let key: string;\n    if (typeof pubKey !== 'string') {\n      key = pubKey.toBase58();\n    } else {\n      key = pubKey;\n    }\n\n    return genericCache.get(key);\n  },\n  delete: (pubKey: string | PublicKey) => {\n    let key: string;\n    if (typeof pubKey !== 'string') {\n      key = pubKey.toBase58();\n    } else {\n      key = pubKey;\n    }\n\n    if (genericCache.get(key)) {\n      genericCache.delete(key);\n      cache.emitter.raiseCacheDeleted(key);\n      return true;\n    }\n    return false;\n  },\n\n  byParser: (parser: AccountParser) => {\n    const result: string[] = [];\n    for (const id of keyToAccountParser.keys()) {\n      if (keyToAccountParser.get(id) === parser) {\n        result.push(id);\n      }\n    }\n\n    return result;\n  },\n  registerParser: (pubkey: PublicKey | string, parser: AccountParser) => {\n    if (pubkey) {\n      const address = typeof pubkey === 'string' ? pubkey : pubkey?.toBase58();\n      keyToAccountParser.set(address, parser);\n    }\n\n    return pubkey;\n  },\n  queryMint: async (connection: Connection, pubKey: string | PublicKey) => {\n    let id: PublicKey;\n    if (typeof pubKey === 'string') {\n      id = new PublicKey(pubKey);\n    } else {\n      id = pubKey;\n    }\n\n    const address = id.toBase58();\n    let mint = mintCache.get(address);\n    if (mint) {\n      return mint;\n    }\n\n    let query = pendingMintCalls.get(address);\n    if (query) {\n      return query;\n    }\n\n    query = getMintInfo(connection, id).then(data => {\n      pendingMintCalls.delete(address);\n\n      mintCache.set(address, data);\n      return data;\n    }) as Promise<MintInfo>;\n    pendingMintCalls.set(address, query as any);\n\n    return query;\n  },\n  getMint: (pubKey: string | PublicKey) => {\n    let key: string;\n    if (typeof pubKey !== 'string') {\n      key = pubKey.toBase58();\n    } else {\n      key = pubKey;\n    }\n\n    return mintCache.get(key);\n  },\n  addMint: (pubKey: PublicKey, obj: AccountInfo<Buffer>) => {\n    const mint = deserializeMint(obj.data);\n    const id = pubKey.toBase58();\n    mintCache.set(id, mint);\n    return mint;\n  },\n};\n\nexport const useAccountsContext = () => {\n  const context = useContext(AccountsContext);\n\n  return context;\n};\n\nfunction wrapNativeAccount(\n  pubkey: string,\n  account?: AccountInfo<Buffer>,\n): TokenAccount | undefined {\n  if (!account) {\n    return undefined;\n  }\n\n  const key = new PublicKey(pubkey);\n\n  return {\n    pubkey: pubkey,\n    account,\n    info: {\n      address: key,\n      mint: WRAPPED_SOL_MINT,\n      owner: key,\n      amount: new u64(account.lamports),\n      delegate: null,\n      delegatedAmount: new u64(0),\n      isInitialized: true,\n      isFrozen: false,\n      isNative: true,\n      rentExemptReserve: null,\n      closeAuthority: null,\n    },\n  };\n}\n\nexport const getCachedAccount = (\n  predicate: (account: TokenAccount) => boolean,\n) => {\n  for (const account of genericCache.values()) {\n    if (predicate(account)) {\n      return account as TokenAccount;\n    }\n  }\n};\n\nconst UseNativeAccount = () => {\n  const connection = useConnection();\n  const { publicKey } = useWallet();\n\n  const [nativeAccount, setNativeAccount] = useState<AccountInfo<Buffer>>();\n\n  const updateCache = useCallback(\n    account => {\n      if (publicKey) {\n        const wrapped = wrapNativeAccount(publicKey.toBase58(), account);\n        if (wrapped !== undefined) {\n          const id = publicKey.toBase58();\n          cache.registerParser(id, TokenAccountParser);\n          genericCache.set(id, wrapped as TokenAccount);\n          cache.emitter.raiseCacheUpdated(id, false, TokenAccountParser, true);\n        }\n      }\n    },\n    [publicKey],\n  );\n\n  useEffect(() => {\n    let subId = 0;\n    const updateAccount = (account: AccountInfo<Buffer> | null) => {\n      if (account) {\n        updateCache(account);\n        setNativeAccount(account);\n      }\n    };\n\n    (async () => {\n      if (!connection || !publicKey) {\n        return;\n      }\n\n      try {\n        const account = await connection.getAccountInfo(publicKey);\n        updateAccount(account);\n      } catch {\n        return;\n      }\n\n      subId = connection.onAccountChange(publicKey, updateAccount);\n    })();\n\n    return () => {\n      if (subId) {\n        connection.removeAccountChangeListener(subId);\n      }\n    };\n  }, [setNativeAccount, publicKey, connection, updateCache]);\n\n  return { nativeAccount };\n};\n\nconst PRECACHED_OWNERS = new Set<string>();\nconst precacheUserTokenAccounts = async (\n  connection: Connection,\n  owner?: PublicKey,\n) => {\n  if (!owner) {\n    return;\n  }\n\n  // used for filtering account updates over websocket\n  PRECACHED_OWNERS.add(owner.toBase58());\n\n  // user accounts are updated via ws subscription\n  const accounts = await connection.getTokenAccountsByOwner(owner, {\n    programId: programIds().token,\n  });\n\n  accounts.value.forEach(info => {\n    cache.add(info.pubkey.toBase58(), info.account, TokenAccountParser);\n  });\n};\n\nexport function AccountsProvider({ children = null as any }) {\n  const connection = useConnection();\n  const { publicKey } = useWallet();\n  const [tokenAccounts, setTokenAccounts] = useState<TokenAccount[]>([]);\n  const [userAccounts, setUserAccounts] = useState<TokenAccount[]>([]);\n  const { nativeAccount } = UseNativeAccount();\n  const walletKey = publicKey?.toBase58();\n\n  const selectUserAccounts = useCallback(() => {\n    return cache\n      .byParser(TokenAccountParser)\n      .map(id => cache.get(id))\n      .filter(a => a && a.info.owner.toBase58() === walletKey)\n      .map(a => a as TokenAccount);\n  }, [walletKey]);\n\n  useEffect(() => {\n    const accounts = selectUserAccounts().filter(\n      a => a !== undefined,\n    ) as TokenAccount[];\n    setUserAccounts(accounts);\n  }, [nativeAccount, tokenAccounts, selectUserAccounts]);\n\n  useEffect(() => {\n    const subs: number[] = [];\n    cache.emitter.onCache(args => {\n      if (args.isNew && args.isActive) {\n        let id = args.id;\n        let deserialize = args.parser;\n        connection.onAccountChange(new PublicKey(id), info => {\n          cache.add(id, info, deserialize);\n        });\n      }\n    });\n\n    return () => {\n      subs.forEach(id => connection.removeAccountChangeListener(id));\n    };\n  }, [connection]);\n\n  useEffect(() => {\n    if (!connection || !publicKey) {\n      setTokenAccounts([]);\n    } else {\n      precacheUserTokenAccounts(connection, publicKey).then(() => {\n        setTokenAccounts(selectUserAccounts());\n      });\n\n      // This can return different types of accounts: token-account, mint, multisig\n      // TODO: web3.js expose ability to filter.\n      // this should use only filter syntax to only get accounts that are owned by user\n      const tokenSubID = connection.onProgramAccountChange(\n        programIds().token,\n        info => {\n          // TODO: fix type in web3.js\n          const id = info.accountId as unknown as string;\n          // TODO: do we need a better way to identify layout (maybe a enum identifing type?)\n          if (info.accountInfo.data.length === AccountLayout.span) {\n            const data = deserializeAccount(info.accountInfo.data);\n\n            if (PRECACHED_OWNERS.has(data.owner.toBase58())) {\n              cache.add(id, info.accountInfo, TokenAccountParser);\n              setTokenAccounts(selectUserAccounts());\n            }\n          }\n        },\n        'singleGossip',\n      );\n\n      return () => {\n        connection.removeProgramAccountChangeListener(tokenSubID);\n      };\n    }\n  }, [connection, publicKey, selectUserAccounts]);\n\n  return (\n    <AccountsContext.Provider\n      value={{\n        userAccounts,\n        nativeAccount,\n      }}\n    >\n      {children}\n    </AccountsContext.Provider>\n  );\n}\n\nexport function useNativeAccount() {\n  const context = useContext(AccountsContext);\n  return {\n    account: context.nativeAccount as AccountInfo<Buffer>,\n  };\n}\n\nexport const getMultipleAccounts = async (\n  connection: any,\n  keys: string[],\n  commitment: string,\n) => {\n  const result = await Promise.all(\n    chunks(keys, 99).map(chunk =>\n      getMultipleAccountsCore(connection, chunk, commitment),\n    ),\n  );\n\n  const array = result\n    .map(\n      a =>\n        a.array.map(acc => {\n          if (!acc) {\n            return undefined;\n          }\n\n          const { data, ...rest } = acc;\n          const obj = {\n            ...rest,\n            data: Buffer.from(data[0], 'base64'),\n          } as AccountInfo<Buffer>;\n          return obj;\n        }) as AccountInfo<Buffer>[],\n    )\n    .flat();\n  return { keys, array };\n};\n\nconst getMultipleAccountsCore = async (\n  connection: any,\n  keys: string[],\n  commitment: string,\n) => {\n  const args = connection._buildArgs([keys], commitment, 'base64');\n\n  const unsafeRes = await connection._rpcRequest('getMultipleAccounts', args);\n  if (unsafeRes.error) {\n    throw new Error(\n      'failed to get info about account ' + unsafeRes.error.message,\n    );\n  }\n\n  if (unsafeRes.result.value) {\n    const array = unsafeRes.result.value as AccountInfo<string[]>[];\n    return { keys, array };\n  }\n\n  // TODO: fix\n  throw new Error();\n};\n\nexport function useMint(key?: string | PublicKey) {\n  const connection = useConnection();\n  const [mint, setMint] = useState<MintInfo>();\n\n  const id = typeof key === 'string' ? key : key?.toBase58();\n\n  useEffect(() => {\n    if (!id) {\n      return;\n    }\n\n    cache\n      .query(connection, id, MintParser)\n      .then(acc => setMint(acc.info as any))\n      .catch(err => console.log(err));\n\n    const dispose = cache.emitter.onCache(e => {\n      const event = e;\n      if (event.id === id) {\n        cache\n          .query(connection, id, MintParser)\n          .then(mint => setMint(mint.info as any));\n      }\n    });\n    return () => {\n      dispose();\n    };\n  }, [connection, id]);\n\n  return mint;\n}\n\nexport function useAccount(pubKey?: PublicKey) {\n  const connection = useConnection();\n  const [account, setAccount] = useState<TokenAccount>();\n\n  const key = pubKey?.toBase58();\n  useEffect(() => {\n    const query = async () => {\n      try {\n        if (!key) {\n          return;\n        }\n\n        const acc = await cache\n          .query(connection, key, TokenAccountParser)\n          .catch(err => console.log(err));\n        if (acc) {\n          setAccount(acc);\n        }\n      } catch (err) {\n        console.error(err);\n      }\n    };\n\n    query();\n\n    const dispose = cache.emitter.onCache(e => {\n      const event = e;\n      if (event.id === key) {\n        query();\n      }\n    });\n    return () => {\n      dispose();\n    };\n  }, [connection, key]);\n\n  return account;\n}\n\n// TODO: expose in spl package\nexport const deserializeAccount = (data: Buffer) => {\n  const accountInfo = AccountLayout.decode(data);\n  accountInfo.mint = new PublicKey(accountInfo.mint);\n  accountInfo.owner = new PublicKey(accountInfo.owner);\n  accountInfo.amount = u64.fromBuffer(accountInfo.amount);\n\n  if (accountInfo.delegateOption === 0) {\n    accountInfo.delegate = null;\n    accountInfo.delegatedAmount = new u64(0);\n  } else {\n    accountInfo.delegate = new PublicKey(accountInfo.delegate);\n    accountInfo.delegatedAmount = u64.fromBuffer(accountInfo.delegatedAmount);\n  }\n\n  accountInfo.isInitialized = accountInfo.state !== 0;\n  accountInfo.isFrozen = accountInfo.state === 2;\n\n  if (accountInfo.isNativeOption === 1) {\n    accountInfo.rentExemptReserve = u64.fromBuffer(accountInfo.isNative);\n    accountInfo.isNative = true;\n  } else {\n    accountInfo.rentExemptReserve = null;\n    accountInfo.isNative = false;\n  }\n\n  if (accountInfo.closeAuthorityOption === 0) {\n    accountInfo.closeAuthority = null;\n  } else {\n    accountInfo.closeAuthority = new PublicKey(accountInfo.closeAuthority);\n  }\n\n  return accountInfo;\n};\n\n// TODO: expose in spl package\nexport const deserializeMint = (data: Buffer) => {\n  if (data.length !== MintLayout.span) {\n    throw new Error('Not a valid Mint');\n  }\n\n  const mintInfo = MintLayout.decode(data);\n\n  if (mintInfo.mintAuthorityOption === 0) {\n    mintInfo.mintAuthority = null;\n  } else {\n    mintInfo.mintAuthority = new PublicKey(mintInfo.mintAuthority);\n  }\n\n  mintInfo.supply = u64.fromBuffer(mintInfo.supply);\n  mintInfo.isInitialized = mintInfo.isInitialized !== 0;\n\n  if (mintInfo.freezeAuthorityOption === 0) {\n    mintInfo.freezeAuthority = null;\n  } else {\n    mintInfo.freezeAuthority = new PublicKey(mintInfo.freezeAuthority);\n  }\n\n  return mintInfo as MintInfo;\n};\n","import React from 'react';\nimport { notification } from 'antd';\n// import Link from '../components/Link';\n\nexport function notify({\n  message = '',\n  description = undefined as any,\n  txid = '',\n  type = 'info',\n  placement = 'bottomLeft',\n}) {\n  if (txid) {\n    //   <Link\n    //     external\n    //     to={'https://explorer.solana.com/tx/' + txid}\n    //     style={{ color: '#0000ff' }}\n    //   >\n    //     View transaction {txid.slice(0, 8)}...{txid.slice(txid.length - 8)}\n    //   </Link>\n\n    description = <></>;\n  }\n  (notification as any)[type]({\n    message: <span style={{ color: 'black' }}>{message}</span>,\n    description: (\n      <span style={{ color: 'black', opacity: 0.5 }}>{description}</span>\n    ),\n    placement,\n    style: {\n      backgroundColor: 'white',\n    },\n  });\n}\n","import React from 'react';\nimport { Typography } from 'antd';\nimport { shortenAddress } from '../../utils/utils';\nimport { PublicKey } from '@solana/web3.js';\n\nexport const ExplorerLink = (props: {\n  address: string | PublicKey;\n  type: string;\n  code?: boolean;\n  style?: React.CSSProperties;\n  length?: number;\n}) => {\n  const { type, code } = props;\n\n  const address =\n    typeof props.address === 'string'\n      ? props.address\n      : props.address?.toBase58();\n\n  if (!address) {\n    return null;\n  }\n\n  const length = props.length ?? 9;\n\n  return (\n    <a\n      href={`https://explorer.solana.com/${type}/${address}`}\n      target=\"_blank\"\n      rel=\"noreferrer\"\n      title={address}\n      style={props.style}\n    >\n      {code ? (\n        <Typography.Text style={props.style} code>\n          {shortenAddress(address, length)}\n        </Typography.Text>\n      ) : (\n        shortenAddress(address, length)\n      )}\n    </a>\n  );\n};\n","import { EventEmitter as Emitter } from 'eventemitter3';\n\nexport class CacheUpdateEvent {\n  static type = 'CacheUpdate';\n  id: string;\n  parser: any;\n  isNew: boolean;\n  isActive: boolean;\n  constructor(id: string, isNew: boolean, parser: any, isActive: boolean) {\n    this.id = id;\n    this.parser = parser;\n    this.isNew = isNew;\n    this.isActive = isActive;\n  }\n}\n\nexport class CacheDeleteEvent {\n  static type = 'CacheUpdate';\n  id: string;\n  constructor(id: string) {\n    this.id = id;\n  }\n}\n\nexport class MarketUpdateEvent {\n  static type = 'MarketUpdate';\n  ids: Set<string>;\n  constructor(ids: Set<string>) {\n    this.ids = ids;\n  }\n}\n\nexport class EventEmitter {\n  private emitter = new Emitter();\n\n  onMarket(callback: (args: MarketUpdateEvent) => void) {\n    this.emitter.on(MarketUpdateEvent.type, callback);\n\n    return () => this.emitter.removeListener(MarketUpdateEvent.type, callback);\n  }\n\n  onCache(callback: (args: CacheUpdateEvent) => void) {\n    this.emitter.on(CacheUpdateEvent.type, callback);\n\n    return () => this.emitter.removeListener(CacheUpdateEvent.type, callback);\n  }\n\n  raiseMarketUpdated(ids: Set<string>) {\n    this.emitter.emit(MarketUpdateEvent.type, new MarketUpdateEvent(ids));\n  }\n\n  raiseCacheUpdated(\n    id: string,\n    isNew: boolean,\n    parser: any,\n    isActive: boolean,\n  ) {\n    this.emitter.emit(\n      CacheUpdateEvent.type,\n      new CacheUpdateEvent(id, isNew, parser, isActive),\n    );\n  }\n\n  raiseCacheDeleted(id: string) {\n    this.emitter.emit(CacheDeleteEvent.type, new CacheDeleteEvent(id));\n  }\n}\n","import { useCallback } from \"react\";\nimport { useWallet } from \"@solana/wallet-adapter-react\";\nimport { ENDPOINTS, useColorMode, useConnectionConfig } from \"../../contexts\";\nimport { notify, shortenAddress } from \"../../utils\";\nimport { CopyOutlined } from \"@ant-design/icons\";\nimport { ModalEnum, useModal, useWalletModal } from \"../../contexts\";\nimport { Box } from \"@mui/system\";\nimport { Button, FormControl, NativeSelect } from \"@mui/material\";\nimport { useTheme } from \"@mui/material/styles\";\nimport IconButton from \"@mui/material/IconButton\";\nimport Brightness4Icon from \"@mui/icons-material/Brightness4\";\nimport Brightness7Icon from \"@mui/icons-material/Brightness7\";\n\nexport const Settings = ({\n  additionalSettings,\n}: {\n  additionalSettings?: JSX.Element;\n}) => {\n  const { connected, disconnect, publicKey } = useWallet();\n  const { setEndpoint, env, endpoint } = useConnectionConfig();\n  const { setVisible } = useWalletModal();\n  const open = useCallback(() => setVisible(true), [setVisible]);\n  const { setModal } = useModal();\n  const theme = useTheme();\n  const colorModeCtx = useColorMode();\n\n  const handleConnect = useCallback(() => {\n    setModal(ModalEnum.WALLET);\n    setVisible(true);\n  }, [setModal, setVisible]);\n\n  return (\n    <>\n      <Box sx={{ display: \"flex\", minWidth: \"100%\" }}>\n        {!connected && (\n          <>\n            <FormControl>\n              <NativeSelect\n                style={{ marginBottom: 5 }}\n                onChange={(e) => {\n                  setEndpoint(e.target.value);\n                }}\n                value={endpoint}\n              >\n                {ENDPOINTS.map(({ name, endpoint }) => (\n                  <option key={name} value={endpoint}>{name}</option>\n                ))}\n              </NativeSelect>\n            </FormControl>\n            <Button\n              variant=\"contained\"\n              onClick={handleConnect}\n              sx={{ marginLeft: \"10px\" }}\n            >\n              Connect\n            </Button>\n          </>\n        )}\n        {connected && (\n          <>\n            {publicKey && (\n              <Button\n                variant=\"outlined\"\n                onClick={async () => {\n                  if (publicKey) {\n                    await navigator.clipboard.writeText(publicKey.toBase58());\n                    notify({\n                      message: \"Wallet update\",\n                      description: \"Address copied to clipboard\",\n                    });\n                  }\n                }}\n              >\n                <CopyOutlined />\n                {shortenAddress(publicKey.toBase58())}\n              </Button>\n            )}\n            <Button\n              variant=\"outlined\"\n              onClick={open}\n              sx={{ marginLeft: \"10px\" }}\n            >\n              Change Wallet\n            </Button>\n            <Button\n              variant=\"contained\"\n              color=\"error\"\n              onClick={() => disconnect().catch()}\n              sx={{ marginLeft: \"10px\" }}\n            >\n              Disconnect ({env})\n            </Button>\n          </>\n        )}\n        <IconButton\n          sx={{ ml: 1 }}\n          onClick={colorModeCtx.toggleColorMode}\n          color=\"inherit\"\n        >\n          {theme.palette.mode === \"dark\" ? (\n            <Brightness7Icon />\n          ) : (\n            <Brightness4Icon />\n          )}\n        </IconButton>\n        {additionalSettings}\n      </Box>\n    </>\n  );\n};\n","import React from \"react\";\nimport { RouteComponentProps, } from \"react-router-dom\";\nimport queryString from 'query-string';\n\nimport {\n  Box,\n  Button,\n  Link as HyperLink,\n  Stack,\n  TextField,\n} from \"@mui/material\";\n\nimport {\n  useWallet,\n} from \"@solana/wallet-adapter-react\";\nimport {\n  PublicKey,\n  SystemProgram,\n  TransactionInstruction,\n  SYSVAR_RENT_PUBKEY,\n} from \"@solana/web3.js\";\nimport {\n  TOKEN_PROGRAM_ID,\n} from \"@solana/spl-token\";\nimport {\n  Coder,\n} from \"@project-serum/anchor\"\nimport { keccak_256 } from \"js-sha3\";\nimport { sha256 } from \"js-sha256\";\nimport BN from 'bn.js';\nimport * as bs58 from \"bs58\";\n\nimport {\n  useConnection,\n  Connection,\n} from \"../contexts\";\nimport { SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID, notify } from \"../utils\";\nimport { MerkleTree } from \"../utils/merkle-tree\";\n\nconst MERKLE_DISTRIBUTOR_ID = new PublicKey(\"2BXKBuQPRVjV9e9qC2wAVJgFLWDH8MULRQ5W5ABmJj45\");\n\nconst idl = require(\"../utils/merkle_distributor.json\");\nconst coder = new Coder(idl);\n\nexport type ClaimProps = {};\n\nexport const Claim = (\n  props : RouteComponentProps<ClaimProps>,\n) => {\n  const connection = useConnection();\n  const wallet = useWallet();\n  const [editable, setEditable] = React.useState(false);\n\n  let params = queryString.parse(props.location.search);\n  const [distributor, setDistributor] = React.useState(params.distributor as string);\n  const [handle, setHandle] = React.useState(params.handle as string);\n  const [amountStr, setAmount] = React.useState(params.amount as string);\n  const [indexStr, setIndex] = React.useState(params.index as string);\n  const [pinStr, setPin] = React.useState(params.pin as string);\n  const [proofStr, setProof] = React.useState(params.proof as string);\n\n  const submit = async (e : React.SyntheticEvent) => {\n    e.preventDefault();\n\n    if (!wallet.connected || wallet.publicKey === null) {\n      throw new Error(`Wallet not connected`);\n    }\n\n    const amount = Number(amountStr);\n    const index = Number(indexStr);\n    const pin = pinStr.split(\",\").map(Number);\n\n    if (isNaN(amount)) {\n      throw new Error(`Could not parse amount ${amountStr}`);\n    }\n    if (isNaN(index)) {\n      throw new Error(`Could not parse index ${indexStr}`);\n    }\n\n    let distributorKey : PublicKey;\n    try {\n      distributorKey = new PublicKey(distributor);\n    } catch (err) {\n      throw new Error(`Invalid distributor key ${err}`);\n    }\n    const distributorAccount = await connection.getAccountInfo(distributorKey);\n    if (distributorAccount === null) {\n      throw new Error(`Could not fetch distributor`);\n    }\n\n    const distributorInfo = coder.accounts.decode(\n      \"MerkleDistributor\", distributorAccount.data);\n\n    const proof = proofStr === \"\" ? [] : proofStr.split(\",\").map(b => {\n      const ret = Buffer.from(bs58.decode(b))\n      if (ret.length !== 32)\n        throw new Error(`Invalid proof hash length`);\n      return ret;\n    });\n\n    console.log(\"Proof\", proof);\n\n    console.log(distributorInfo.mint.toBase58(), handle, pin);\n\n    const [claimantPda, ] = await PublicKey.findProgramAddress(\n      [\n        distributorInfo.mint.toBuffer(),\n        Buffer.from(handle),\n        Buffer.from(pin),\n      ],\n      MERKLE_DISTRIBUTOR_ID\n    );\n\n    const leaf = Buffer.from(keccak_256.digest(\n      [...new BN(index).toArray(\"le\", 8),\n       ...claimantPda.toBuffer(),\n       ...new BN(amount).toArray(\"le\", 8),\n      ]\n    ));\n\n    console.log(leaf, claimantPda.toBase58(), MerkleTree.nodeHash(leaf));\n\n    const matches = MerkleTree.verifyClaim(\n      Buffer.from(keccak_256.digest(\n        [...new BN(index).toArray(\"le\", 8),\n         ...claimantPda.toBuffer(),\n         ...new BN(amount).toArray(\"le\", 8),\n        ]\n      )),\n      proof,\n      Buffer.from(distributorInfo.root)\n    );\n\n    if (!matches) {\n      throw new Error(\"Merkle proof does not match\");\n    }\n\n    const [claimStatus, cbump] = await PublicKey.findProgramAddress(\n      [\n        Buffer.from(\"ClaimStatus\"),\n        Buffer.from(new BN(index).toArray(\"le\", 8)),\n        distributorKey.toBuffer(),\n      ],\n      MERKLE_DISTRIBUTOR_ID\n    );\n\n    const [distributorTokenKey, ] = await PublicKey.findProgramAddress(\n      [\n        distributorKey.toBuffer(),\n        TOKEN_PROGRAM_ID.toBuffer(),\n        distributorInfo.mint.toBuffer(),\n      ],\n      SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID\n    );\n\n    const [walletTokenKey, ] = await PublicKey.findProgramAddress(\n      [\n        wallet.publicKey.toBuffer(),\n        TOKEN_PROGRAM_ID.toBuffer(),\n        distributorInfo.mint.toBuffer(),\n      ],\n      SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID\n    );\n\n    const setup : Array<TransactionInstruction> = [];\n\n    if (await connection.getAccountInfo(walletTokenKey) === null) {\n      setup.push(new TransactionInstruction({\n          programId: SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n          keys: [\n              { pubkey: wallet.publicKey        , isSigner: true  , isWritable: true  } ,\n              { pubkey: walletTokenKey          , isSigner: false , isWritable: true  } ,\n              { pubkey: wallet.publicKey        , isSigner: false , isWritable: false } ,\n              { pubkey: distributorInfo.mint    , isSigner: false , isWritable: false } ,\n              { pubkey: SystemProgram.programId , isSigner: false , isWritable: false } ,\n              { pubkey: TOKEN_PROGRAM_ID        , isSigner: false , isWritable: false } ,\n              { pubkey: SYSVAR_RENT_PUBKEY      , isSigner: false , isWritable: false } ,\n          ],\n          data: Buffer.from([])\n      }));\n    }\n\n    const claimAirdrop = new TransactionInstruction({\n        programId: MERKLE_DISTRIBUTOR_ID,\n        keys: [\n            { pubkey: distributorKey          , isSigner: false , isWritable: true  } ,\n            { pubkey: claimStatus             , isSigner: false , isWritable: true  } ,\n            { pubkey: distributorTokenKey     , isSigner: false , isWritable: true  } ,\n            { pubkey: walletTokenKey          , isSigner: false , isWritable: true  } ,\n            { pubkey: wallet.publicKey        , isSigner: true  , isWritable: false } ,  // payer\n            { pubkey: SystemProgram.programId , isSigner: false , isWritable: false } ,\n            { pubkey: TOKEN_PROGRAM_ID        , isSigner: false , isWritable: false } ,\n        ],\n        data: Buffer.from([\n          ...Buffer.from(sha256.digest(\"global:claim\")).slice(0, 8),\n          ...new BN(cbump).toArray(\"le\", 1),\n          ...new BN(index).toArray(\"le\", 8),\n          ...new BN(amount).toArray(\"le\", 8),\n          ...claimantPda.toBuffer(),\n          ...new BN(proof.length).toArray(\"le\", 4),\n          ...Buffer.concat(proof),\n        ])\n    })\n\n    const claimResult = await Connection.sendTransactionWithRetry(\n      connection,\n      wallet,\n      [\n        ...setup,\n        claimAirdrop\n      ],\n      []\n    );\n\n    console.log(claimResult);\n    if (typeof claimResult === \"string\") {\n      notify({\n        message: \"Claim failed\",\n        description: claimResult,\n      });\n    } else {\n      notify({\n        message: \"Claim succeeded\",\n        description: (\n          <HyperLink href={Connection.explorerLinkFor(claimResult.txid, connection)}>\n            View transaction on explorer\n          </HyperLink>\n        ),\n      });\n    }\n  };\n\n  return (\n    <Stack spacing={2}>\n      <TextField\n        style={{width: \"60ch\"}}\n        id=\"distributor-text-field\"\n        label=\"Distributor\"\n        value={distributor}\n        onChange={(e) => setDistributor(e.target.value)}\n        disabled={!editable}\n      />\n      <TextField\n        style={{width: \"60ch\"}}\n        id=\"handle-text-field\"\n        label=\"Handle\"\n        value={handle}\n        onChange={(e) => setHandle(e.target.value)}\n        disabled={!editable}\n      />\n      <TextField\n        style={{width: \"60ch\"}}\n        id=\"amount-text-field\"\n        label=\"Amount\"\n        value={amountStr}\n        onChange={(e) => setAmount(e.target.value)}\n        disabled={!editable}\n      />\n      <TextField\n        style={{width: \"60ch\"}}\n        id=\"index-text-field\"\n        label=\"Index\"\n        value={indexStr}\n        onChange={(e) => setIndex(e.target.value)}\n        disabled={!editable}\n      />\n      <TextField\n        style={{width: \"60ch\"}}\n        id=\"pin-text-field\"\n        label=\"Pin\"\n        value={pinStr}\n        onChange={(e) => setPin(e.target.value)}\n        disabled={!editable}\n      />\n      <TextField\n        style={{width: \"60ch\"}}\n        id=\"proof-text-field\"\n        label=\"Proof\"\n        multiline\n        value={proofStr}\n        onChange={(e) => setProof(e.target.value)}\n        disabled={!editable}\n      />\n      <Box />\n      <div>\n        <Button\n          style={{width: \"15ch\"}}\n          color=\"info\"\n          onClick={(e) => setEditable(!editable)}\n        >\n          {!editable ? \"Edit Claim\" : \"Stop Editing\"}\n        </Button>\n        <Button\n          style={{width: \"45ch\"}}\n          disabled={!wallet.connected}\n          variant=\"contained\"\n          color=\"success\"\n          onClick={(e) => {\n            const wrap = async () => {\n              try {\n                await submit(e);\n              } catch (err) {\n                notify({\n                  message: \"Claim failed\",\n                  description: `${err}`,\n                });\n              }\n            };\n            wrap();\n          }}\n        >\n          Claim Merkle Airdrop\n        </Button>\n      </div>\n    </Stack>\n  );\n};\n\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport {\n  Box,\n  Button,\n  FormControl,\n  Link as HyperLink,\n  InputLabel,\n  MenuItem,\n  Stack,\n  Select,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  TextField,\n} from \"@mui/material\";\nimport FilePresentIcon from '@mui/icons-material/FilePresent';\n\nimport {\n  useWallet,\n} from \"@solana/wallet-adapter-react\";\nimport {\n  Keypair,\n  PublicKey,\n  SystemProgram,\n  TransactionInstruction,\n  SYSVAR_RENT_PUBKEY,\n} from \"@solana/web3.js\";\nimport {\n  AccountLayout,\n  MintLayout,\n  Token,\n  TOKEN_PROGRAM_ID,\n} from \"@solana/spl-token\";\nimport { keccak_256 } from \"js-sha3\";\nimport { sha256 } from \"js-sha256\";\nimport BN from 'bn.js';\nimport * as bs58 from \"bs58\";\n\n// claim distribution\nimport Mailchimp from \"@mailchimp/mailchimp_transactional\"\n\nimport {\n  useConnection,\n  Connection,\n} from \"../contexts\";\nimport {\n  SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n  notify,\n  shortenAddress,\n} from \"../utils\";\nimport { MerkleTree } from \"../utils/merkle-tree\";\nimport { DragAndDrop } from \"./DragAndDrop\";\nimport { DefaultModal } from \"./DefaultModal\";\n\n// NB: assumes no overflow\nconst randomBytes = () : Uint8Array => {\n  // TODO: some predictable seed? sha256?\n  const buf = new Uint8Array(4);\n  window.crypto.getRandomValues(buf);\n  return buf;\n}\n\nconst MERKLE_DISTRIBUTOR_ID = new PublicKey(\"2BXKBuQPRVjV9e9qC2wAVJgFLWDH8MULRQ5W5ABmJj45\");\nconst WHITESPACE = \"\\u00A0\";\n\nexport type ClaimantInfo = {\n  handle : string,\n  amount : number,\n  pin    : Uint8Array,\n  bump   : number,\n  pda    : PublicKey,\n  url    : string,\n};\n\nconst setupMailchimp = (auth : string, source : string) => {\n  const mailchimp = Mailchimp(auth);\n\n  return async (\n    info : ClaimantInfo,\n    mintUrl: string,\n  ) => {\n    const message = {\n      from_email: source,\n      subject: \"Merkle Airdrop\",\n      text: `You received ${info.amount} airdropped token(s) (${mintUrl}). `\n          + `Claim them at ${info.url}`,\n      to: [\n        {\n          email: info.handle,\n          type: \"to\"\n        }\n      ]\n    };\n\n    const response = await mailchimp.messages.send({ message });\n\n    console.log(response);\n    if (!response[0] || response[0].status !== \"sent\") {\n      throw new Error(`Mailchimp failed to send email: ${response[0].reject_reason}`);\n    }\n  };\n}\n\nconst setupManual = (auth : string, source : string) => {\n  return async (\n    info : ClaimantInfo,\n    mintUrl: string,\n  ) => {\n    // TODO duplicated work since claim URLs are available for download\n    // regardless...\n    console.log({\n      \"handle\": info.handle,\n      \"url\": info.url,\n    });\n  };\n}\n\nconst setupSender = (\n  method : string,\n  auth : string,\n  source : string,\n) => {\n  if (method === \"Mailchimp\") {\n    return setupMailchimp(auth, source);\n  } else if (method === \"Manual\") {\n    return setupManual(auth, source);\n  } else {\n    throw new Error(`Unrecognized claim distribution method ${method}`);\n  }\n}\n\nconst parseClaimants = (\n  input : string\n) : Array<ClaimantInfo> => {\n  const json = JSON.parse(input);\n  return json.map(obj => {\n    return {\n      handle : obj.handle,\n      amount : obj.amount,\n      pin    : obj.pin,\n      bump   : obj.bump,\n      pda    : obj.pda,\n      url    : obj.url,\n    };\n  });\n};\n\nconst reactModal = (renderModal) => {\n  const container = document.createElement('div');\n  document.body.appendChild(container);\n\n  const displayModal = ({ onSubmit, onDismiss }) => {\n    ReactDOM.render(renderModal({ onSubmit, onDismiss, show: true }), container);\n  };\n\n  const hideModal = ({ onSubmit, onDismiss }, callback) => {\n    ReactDOM.render(renderModal({ onSubmit, onDismiss, show: false }), container, callback);\n  };\n\n  const destroyModal = () => {\n    ReactDOM.unmountComponentAtNode(container);\n    document.body.removeChild(container);\n  };\n\n  const confirmation = new Promise((resolve) => {\n    const onSubmit = (value) => resolve(value);\n    const onDismiss = () => resolve(undefined);\n    displayModal({ onSubmit, onDismiss });\n  });\n\n  return confirmation.finally(() => {\n    const onSubmit = () => {};\n    const onDismiss = () => {};\n    hideModal({ onSubmit, onDismiss }, destroyModal);\n  });\n};\n\nexport type CreateProps = {};\n\nexport const Create = (\n  props : CreateProps,\n) => {\n  const connection = useConnection();\n  const wallet = useWallet();\n  const [mint, setMint] = React.useState(localStorage.getItem(\"mint\") || \"\");\n  const [commMethod, setMethod] = React.useState(localStorage.getItem(\"commMethod\") || \"\");\n  const [commAuth, setCommAuth] = React.useState(\"\");\n  const [commSource, setCommSource] = React.useState(\"\");\n  const [filename, setFilename] = React.useState(\"\");\n  const [text, setText] = React.useState(\"\");\n  const [claimURLs, setClaimURLs] = React.useState<Array<ClaimantInfo>>([]);\n\n  const submit = async (e : React.SyntheticEvent) => {\n    e.preventDefault();\n\n    if (!wallet.connected || wallet.publicKey === null) {\n      throw new Error(`Wallet not connected`);\n    }\n\n    let mintKey : PublicKey;\n    try {\n      mintKey = new PublicKey(mint);\n    } catch (err) {\n      throw new Error(`Invalid mint key ${err}`);\n    }\n    const mintAccount = await connection.getAccountInfo(mintKey);\n    if (mintAccount === null) {\n      throw new Error(`Could not fetch mint`);\n    }\n    if (!mintAccount.owner.equals(TOKEN_PROGRAM_ID)) {\n      throw new Error(`Invalid mint owner ${mintAccount.owner.toBase58()}`);\n    }\n    if (mintAccount.data.length !== MintLayout.span) {\n      throw new Error(`Invalid mint size ${mintAccount.data.length}`);\n    }\n    const mintInfo = MintLayout.decode(Buffer.from(mintAccount.data));\n    const displayMintTokens = (amount : number) : string => {\n      // TODO: better decimal rounding\n      return (amount / Math.pow(10, mintInfo.decimals)).toString();\n    };\n\n    const mintUrl = `https://explorer.solana.com/address/${mintKey.toBase58()}?cluster=${Connection.envFor(connection)}`;\n    console.log(mintUrl);\n\n\n    const claimants = parseClaimants(text);\n    if (claimants.length === 0) {\n      throw new Error(`No claimants provided`);\n    }\n\n    const mightHaveExisting = (info : ClaimantInfo) => {\n      // TODO: others?\n      return info.url !== undefined && info.url !== null;\n    };\n    if (claimants.reduce((acc, c) => acc && mightHaveExisting(c), true)) {\n      // TODO: more validation of URLs? The creator is using they're own\n      // credentials to re-send so if they're malicious it's not that bad\n      // right?...\n      const resendOnly = await reactModal(({ show, onSubmit, onDismiss }) => {\n        const options = [\n          { click: () => onSubmit(\"create\"), name: \"Create and Send\" },\n          { click: () => onSubmit(\"send\")  , name: \"Send only\"       },\n        ];\n        return (\n          <DefaultModal visible={show} onCancel={onDismiss}>\n            <p style={{ color: \"white\", fontSize: 14 }}>\n              Uploaded distribution list has URLs for all claimants.\n              Skip creation of airdrop and only re-send links?\n            </p>\n            <br />\n            {options.map((opt) => {\n              return (\n                <Button\n                  key={opt.name}\n                  style={{\n                    width: \"100%\",\n                    color: \"white\",\n                    marginBottom: 8,\n                  }}\n                  variant=\"outlined\"\n                  onClick={opt.click}\n                >\n                  {opt.name}\n                </Button>\n              );\n            })}\n          </DefaultModal>\n        );\n      }) as string | undefined;\n      console.log(resendOnly);\n      if (resendOnly === \"send\") {\n        setClaimURLs(claimants);\n        const sender = setupSender(commMethod, commAuth, commSource);\n        for (let idx = 0; idx < claimants.length; ++idx) {\n          await sender(claimants[idx], mintUrl);\n        }\n        return;\n      } else if (resendOnly === \"create\") {\n        // fallthrough to full create\n      } else {\n        // dismissed. don't use exceptions for control flow?\n        throw new Error(\"Dismissed\");\n      }\n    }\n    const totalClaim = claimants.reduce((acc, c) => acc + c.amount, 0);\n    claimants.forEach(c => {\n      c.pin = randomBytes();\n    });\n\n    const [creatorTokenKey, ] = await PublicKey.findProgramAddress(\n      [\n        wallet.publicKey.toBuffer(),\n        TOKEN_PROGRAM_ID.toBuffer(),\n        mintKey.toBuffer(),\n      ],\n      SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID\n    );\n    const creatorTokenAccount = await connection.getAccountInfo(creatorTokenKey);\n    if (creatorTokenAccount === null) {\n      throw new Error(`Could not fetch creator token account`);\n    }\n    if (creatorTokenAccount.data.length !== AccountLayout.span) {\n      throw new Error(`Invalid token account size ${creatorTokenAccount.data.length}`);\n    }\n    const creatorTokenInfo = AccountLayout.decode(Buffer.from(creatorTokenAccount.data));\n    if (new BN(creatorTokenInfo.amount, 8, \"le\").toNumber() < totalClaim) {\n      throw new Error(`Creator token account does not have enough tokens`);\n    }\n\n\n    const leafs : Array<Buffer> = [];\n    for (let idx = 0; idx < claimants.length; ++idx ) {\n      const claimant = claimants[idx];\n      const seeds = [\n        mintKey.toBuffer(),\n        Buffer.from(claimant.handle),\n        Buffer.from(claimant.pin),\n      ];\n      const [claimantPda, bump] = await PublicKey.findProgramAddress(seeds, MERKLE_DISTRIBUTOR_ID);\n      claimant.bump = bump;\n      claimant.pda = claimantPda;\n      leafs.push(Buffer.from(\n        keccak_256.digest(\n          [...new BN(idx).toArray(\"le\", 8),\n           ...claimantPda.toBuffer(),\n           ...new BN(claimant.amount).toArray(\"le\", 8),\n          ]\n        )\n      ));\n    }\n\n    const tree = new MerkleTree(leafs);\n    const root = tree.getRoot();\n\n\n    const base = new Keypair();\n    const [distributor, dbump] = await PublicKey.findProgramAddress(\n      [\n        Buffer.from(\"MerkleDistributor\"),\n        base.publicKey.toBuffer(),\n      ],\n      MERKLE_DISTRIBUTOR_ID);\n\n    const [distributorTokenKey, ] = await PublicKey.findProgramAddress(\n      [\n        distributor.toBuffer(),\n        TOKEN_PROGRAM_ID.toBuffer(),\n        mintKey.toBuffer(),\n      ],\n      SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID\n    );\n\n    for (let idx = 0; idx < claimants.length; ++idx) {\n      const proof = tree.getProof(idx);\n      const verified = tree.verifyProof(idx, proof, root);\n\n      if (!verified) {\n        throw new Error(\"Merkle tree verification failed\");\n      }\n\n      const claimant = claimants[idx];\n      const params = [\n        `distributor=${distributor}`,\n        `handle=${claimant.handle}`,\n        `amount=${claimant.amount}`,\n        `index=${idx}`,\n        `pin=${claimant.pin}`,\n        `proof=${proof.map(b => bs58.encode(b))}`,\n      ];\n      const query = params.join(\"&\");\n\n      claimant.url = `${window.location.origin}${window.location.pathname}#/claim?${query}`;\n    }\n\n    const shouldSend = await reactModal(({ show, onSubmit, onDismiss }) => {\n      const options = [\n        { click: () => onSubmit(true) , name: \"Approve\" },\n        { click: () => onSubmit(false), name: \"Cancel\"  },\n      ];\n      return (\n        <DefaultModal visible={show} onCancel={onDismiss}>\n          <h2\n            style={{\n              color: \"white\",\n              fontWeight: \"bold\",\n              fontSize: 20,\n            }}\n          >\n            Claim Distribution Preview\n          </h2>\n          <p style={{ color: \"white\", fontSize: 14 }}>\n            Distributing a total of {displayMintTokens(totalClaim)}{WHITESPACE}\n            <HyperLink href={mintUrl}>\n              {shortenAddress(mintKey.toBase58())}\n            </HyperLink>\n            {WHITESPACE}token(s)\n          </p>\n          <TableContainer\n            sx={{\n              \"td, th\": { color: \"white\" },\n              backgroundColor: \"#444444\",\n              borderRadius: \"5px\",\n              maxHeight: \"30ch\",\n            }}\n          >\n            <Table size=\"small\">\n              <TableHead>\n                <TableRow>\n                  <TableCell>Handle</TableCell>\n                  <TableCell>Tokens</TableCell>\n                  <TableCell>Pin</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {claimants.map((c) => (\n                  <TableRow\n                    key={c.pda.toBase58()}\n                    sx={{ 'td, th': { border: 0 } }}\n                  >\n                    <TableCell component=\"th\" scope=\"row\">{c.handle} </TableCell>\n                    <TableCell>{displayMintTokens(c.amount)}</TableCell>\n                    <TableCell>{c.pin.join(\",\")}</TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n          <br />\n          {options.map((opt) => {\n            return (\n              <Button\n                key={opt.name}\n                style={{\n                  width: \"100%\",\n                  color: \"white\",\n                  marginBottom: 8,\n                }}\n                variant=\"outlined\"\n                onClick={opt.click}\n              >\n                {opt.name}\n              </Button>\n            );\n          })}\n        </DefaultModal>\n      );\n    }) as boolean | undefined;\n    console.log(shouldSend);\n    if (shouldSend === true) {\n    } else {\n      // dismissed. don't use exceptions for control flow?\n      throw new Error(\"Claim distribution preview not approved\");\n    }\n\n    // TODO: defer until success?\n    setClaimURLs(claimants);\n\n    const createDistributorTokenAccount = new TransactionInstruction({\n        programId: SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n        keys: [\n            { pubkey: wallet.publicKey        , isSigner: true  , isWritable: true  } ,\n            { pubkey: distributorTokenKey     , isSigner: false , isWritable: true  } ,\n            { pubkey: distributor             , isSigner: false , isWritable: false } ,\n            { pubkey: mintKey                 , isSigner: false , isWritable: false } ,\n            { pubkey: SystemProgram.programId , isSigner: false , isWritable: false } ,\n            { pubkey: TOKEN_PROGRAM_ID        , isSigner: false , isWritable: false } ,\n            { pubkey: SYSVAR_RENT_PUBKEY      , isSigner: false , isWritable: false } ,\n        ],\n        data: Buffer.from([])\n    });\n\n    // initial merkle-distributor state\n    const initDistributor = new TransactionInstruction({\n        programId: MERKLE_DISTRIBUTOR_ID,\n        keys: [\n            { pubkey: base.publicKey          , isSigner: true  , isWritable: false } ,\n            { pubkey: distributor             , isSigner: false , isWritable: true  } ,\n            { pubkey: mintKey                 , isSigner: false , isWritable: false } ,\n            { pubkey: wallet.publicKey        , isSigner: true  , isWritable: false } ,\n            { pubkey: SystemProgram.programId , isSigner: false , isWritable: false } ,\n        ],\n        data: Buffer.from([\n          ...Buffer.from(sha256.digest(\"global:new_distributor\")).slice(0, 8),\n          ...new BN(dbump).toArray(\"le\", 1),\n          ...root,\n          ...new BN(totalClaim).toArray(\"le\", 8),\n          ...new BN(claimants.length).toArray(\"le\", 8),\n        ])\n    })\n\n    const transferToATA = Token.createTransferInstruction(\n        TOKEN_PROGRAM_ID,\n        creatorTokenKey,\n        distributorTokenKey,\n        wallet.publicKey,\n        [],\n        totalClaim\n      );\n\n\n    const createResult = await Connection.sendTransactionWithRetry(\n      connection,\n      wallet,\n      [\n        createDistributorTokenAccount,\n        initDistributor,\n        transferToATA,\n      ],\n      [base]\n    );\n\n    console.log(createResult);\n    if (typeof createResult === \"string\") {\n      throw new Error(createResult);\n    } else {\n      notify({\n        message: \"Create succeeded\",\n        description: (\n          <HyperLink href={Connection.explorerLinkFor(createResult.txid, connection)}>\n            View transaction on explorer\n          </HyperLink>\n        ),\n      });\n    }\n\n    console.log(\"Distributing claim URLs\");\n    const sender = setupSender(commMethod, commAuth, commSource);\n    for (let idx = 0; idx < claimants.length; ++idx) {\n      await sender(claimants[idx], mintUrl);\n    }\n  };\n\n  const handleFiles = (files) => {\n    if (files.length !== 1) {\n      notify({\n        message: \"File upload failed\",\n        description: `Received ${files.length} files`,\n      });\n      return;\n    }\n\n    const file = files[0];\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      if (e !== null && e.target !== null) {\n        if (typeof e.target.result === \"string\") {\n          try {\n            parseClaimants(e.target.result);\n          } catch {\n            notify({\n              message: `File upload failed for: ${file.name}`,\n              description: (\n                <span>\n                  Could not parse uploaded file.{WHITESPACE}\n                  <HyperLink href=\"#/\">\n                    Does it follow the JSON scheme?\n                  </HyperLink>\n                </span>\n              ),\n            });\n            setFilename(\"\");\n            setText(\"\");\n            return;\n          }\n          setFilename(file.name);\n          setText(e.target.result);\n        } else {\n          notify({\n            message: `File upload failed for: ${file.name}`,\n            description: \"Could not read uploaded file\",\n          });\n        }\n      }\n    };\n    reader.readAsText(file);\n  };\n\n  const commAuthorization = (commMethod) => {\n    if (commMethod === \"Manual\") {\n      return null;\n    }\n    return (\n      <React.Fragment>\n        <TextField\n          style={{width: \"60ch\"}}\n          id=\"comm-auth-field\"\n          label={`${commMethod} API key`}\n          value={commAuth}\n          onChange={(e) => setCommAuth(e.target.value)}\n        />\n        <TextField\n          style={{width: \"60ch\"}}\n          id=\"comm-source-field\"\n          label={`${commMethod} Source`}\n          value={commSource}\n          onChange={(e) => setCommSource(e.target.value)}\n        />\n      </React.Fragment>\n    );\n  };\n\n  const fileUpload = (\n    <React.Fragment>\n      <DragAndDrop handleDrop={handleFiles} >\n        <Stack\n          direction=\"row\"\n          style={{\n            width: \"60ch\",\n            height: \"15ch\",\n          }}\n          sx={{\n            border: '1px dashed grey',\n            justifyContent: \"center\",\n            alignContent: \"center\",\n          }}\n        >\n          <Button\n            variant=\"text\"\n            component=\"label\"\n            style={{\n              padding: 0,\n              // don't make the button click field too large...\n              marginTop: \"5ch\",\n              marginBottom: \"5ch\",\n            }}\n          >\n            Upload a distribution list\n            <input\n              type=\"file\"\n              onChange={(e) => handleFiles(e.target.files)}\n              hidden\n            />\n          </Button>\n          {WHITESPACE}\n          {/*For display alignment...*/}\n          <Button\n            variant=\"text\"\n            component=\"label\"\n            disabled={true}\n            color=\"secondary\"\n            style={{padding: 0}}\n          >\n            or drag it here\n          </Button>\n        </Stack>\n      </DragAndDrop>\n      {filename !== \"\"\n      ? (<Box style={{\n            display: 'flex',\n            justifyContent: 'center',\n            width: \"60ch\",\n            color: \"rgba(255,255,255,.8)\",\n          }}>\n            <FilePresentIcon />\n            <span>{WHITESPACE} Uploaded {filename}</span>\n          </Box>\n        )\n      : (<Box/>)}\n    </React.Fragment>\n  );\n\n  const createAirdrop = (\n    <Button\n      disabled={!wallet.connected}\n      variant=\"contained\"\n      color=\"success\"\n      onClick={(e) => {\n        const wrap = async () => {\n          try {\n            await submit(e);\n          } catch (err) {\n            setClaimURLs([]);\n            notify({\n              message: \"Create failed\",\n              description: `${err}`,\n            });\n          }\n        };\n        wrap();\n      }}\n      sx={{ marginRight: \"4px\" }}\n    >\n      Create Merkle Airdrop\n    </Button>\n  );\n\n  const encodedClaimURLs = () => {\n    const encoded = encodeURIComponent(JSON.stringify(claimURLs));\n    return `data:text/plain;charset=utf-8,${encoded}`;\n  };\n\n  return (\n    <Stack spacing={2}>\n      <TextField\n        style={{width: \"60ch\"}}\n        id=\"mint-text-field\"\n        label=\"Mint\"\n        value={mint}\n        onChange={(e) => {\n          localStorage.setItem(\"mint\", e.target.value);\n          setMint(e.target.value);\n        }}\n      />\n      <FormControl fullWidth>\n        <InputLabel id=\"comm-method-label\">Claim Distribution Method</InputLabel>\n        <Select\n          labelId=\"comm-method-label\"\n          id=\"comm-method-select\"\n          value={commMethod}\n          label=\"Claim Distribution Method\"\n          onChange={(e) => {\n            localStorage.setItem(\"commMethod\", e.target.value);\n            setMethod(e.target.value);\n          }}\n          style={{textAlign: \"left\"}}\n        >\n          <MenuItem value={\"Mailchimp\"}>Mailchimp</MenuItem>\n          <MenuItem value={\"Manual\"}>Manual</MenuItem>\n        </Select>\n      </FormControl>\n      {commMethod !== \"\" && commAuthorization(commMethod)}\n      {commMethod !== \"\" && mint !== \"\" && fileUpload}\n      {filename !== \"\" && createAirdrop}\n      {claimURLs.length > 0 && (\n        <HyperLink\n          href={encodedClaimURLs()}\n          download=\"claimURLs.json\"\n          underline=\"none\"\n          style={{width: \"100%\"}}\n        >\n          <Button\n            variant=\"contained\"\n            style={{width: \"100%\"}}\n          >\n            Download claim URLs\n          </Button>\n        </HyperLink>\n      )}\n    </Stack>\n  );\n};\n","import React from \"react\"\n\nexport const DragAndDrop = (props) => {\n  const dropRef = React.useRef<HTMLDivElement>(null);\n  const [dragCounter, setDragCounter] = React.useState(0);\n  const [dragging, setDragging] = React.useState(false);\n\n  const handleDrag = (e) => {\n    e.preventDefault()\n    e.stopPropagation()\n  };\n\n  const handleDragIn = (e) => {\n    e.preventDefault()\n    e.stopPropagation()\n\n    setDragCounter(dragCounter + 1);\n    if (e.dataTransfer.items && e.dataTransfer.items.length > 0) {\n      setDragging(true);\n    }\n  };\n\n  const handleDragOut = (e) => {\n    e.preventDefault()\n    e.stopPropagation()\n\n    const remainingDrags = dragCounter - 1;\n    setDragCounter(remainingDrags);\n    if (remainingDrags === 0) {\n      setDragging(false);\n    }\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault()\n    e.stopPropagation()\n\n    setDragging(false);\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n      props.handleDrop(e.dataTransfer.files);\n      e.dataTransfer.clearData();\n      setDragCounter(0);\n    }\n  };\n\n  React.useEffect(() => {\n    const node = dropRef.current;\n    if (node === null) return;\n    node.addEventListener(\"dragenter\" , handleDragIn);\n    node.addEventListener(\"dragleave\" , handleDragOut);\n    node.addEventListener(\"dragover\"  , handleDrag);\n    node.addEventListener(\"drop\"      , handleDrop);\n\n    return () => {\n      node.removeEventListener(\"dragenter\" , handleDragIn);\n      node.removeEventListener(\"dragleave\" , handleDragOut);\n      node.removeEventListener(\"dragover\"  , handleDrag);\n      node.removeEventListener(\"drop\"      , handleDrop);\n    };\n  });\n\n  return (\n    <div\n      ref={dropRef}\n      style={dragging ? { backgroundColor: \"rgba(255,255,255,.3)\"} : {}}\n    >\n      {props.children}\n    </div>\n  );\n};\n\n\nexport default DragAndDrop;\n","export default __webpack_public_path__ + \"static/media/wallet.c746d144.less\";","import { WalletAdapter, WalletError } from \"@solana/wallet-adapter-base\";\nimport {\n  useWallet,\n  WalletProvider as BaseWalletProvider,\n} from \"@solana/wallet-adapter-react\";\nimport {\n  getLedgerWallet,\n  getMathWallet,\n  getPhantomWallet,\n  getSolflareWallet,\n  getSolletWallet,\n  getSolongWallet,\n  getTorusWallet,\n} from \"@solana/wallet-adapter-wallets\";\nimport { Button } from \"antd\";\nimport React, {\n  createContext,\n  FC,\n  ReactNode,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\";\nimport { notify } from \"../../utils\";\nimport { DefaultModal } from \"../../components\";\n\nimport \"./wallet.less\";\n\nexport interface WalletModalContextState {\n  visible: boolean;\n  setVisible: (open: boolean) => void;\n}\n\nexport const WalletModalContext = createContext<WalletModalContextState>(\n  {} as WalletModalContextState\n);\n\nexport function useWalletModal(): WalletModalContextState {\n  return useContext(WalletModalContext);\n}\n\nexport const WalletModal: FC = () => {\n  const { wallets, wallet: selected, select } = useWallet();\n  const { visible, setVisible } = useWalletModal();\n  const [ , setShowWallets] = useState(false);\n  const close = useCallback(() => {\n    setVisible(false);\n    setShowWallets(false);\n  }, [setVisible, setShowWallets]);\n\n  return (\n    <DefaultModal visible={visible} onCancel={close}>\n      <div\n        style={{\n          background:\n            \"linear-gradient(180deg, #D329FC 0%, #8F6DDE 49.48%, #19E6AD 100%)\",\n          borderRadius: 36,\n          width: 50,\n          height: 50,\n          textAlign: \"center\",\n          verticalAlign: \"middle\",\n          fontWeight: 700,\n          fontSize: \"1.3rem\",\n          lineHeight: 2.4,\n          marginBottom: 10,\n        }}\n      ></div>\n      <h2\n        style={{\n          color: \"white\",\n          fontWeight: \"bold\",\n          fontSize: 20,\n        }}\n      >\n        {selected ? \"Change provider\" : \"\"}\n      </h2>\n      <p style={{ color: \"white\", fontSize: 14 }}>\n        {selected\n          ? \"Choose from the following options:\"\n          : \"Please sign into your wallet\"}\n      </p>\n\n      <br />\n      {wallets.map((wallet) => {\n        return (\n          <Button\n            key={wallet.name}\n            size=\"large\"\n            type={wallet === selected ? \"primary\" : \"ghost\"}\n            onClick={() => {\n              select(wallet.name);\n              close();\n            }}\n            icon={\n              <img\n                alt={`${wallet.name}`}\n                width={20}\n                height={20}\n                src={wallet.icon}\n                style={{ marginRight: 30, float: \"left\" }}\n              />\n            }\n            style={{\n              display: \"block\",\n              width: \"100%\",\n              textAlign: \"left\",\n              marginBottom: 8,\n              color: \"white\",\n            }}\n          >\n            {wallet.name}\n          </Button>\n        );\n      })}\n    </DefaultModal>\n  );\n};\n\nexport const WalletModalProvider: FC<{ children: ReactNode }> = ({\n  children,\n}) => {\n  const { publicKey } = useWallet();\n  const [connected, setConnected] = useState(!!publicKey);\n  const [visible, setVisible] = useState(false);\n\n  useEffect(() => {\n    if (publicKey) {\n      const base58 = publicKey.toBase58();\n      const keyToDisplay =\n        base58.length > 20\n          ? `${base58.substring(0, 7)}.....${base58.substring(\n              base58.length - 7,\n              base58.length\n            )}`\n          : base58;\n\n      notify({\n        message: \"Wallet update\",\n        description: \"Connected to wallet \" + keyToDisplay,\n      });\n    }\n  }, [publicKey]);\n\n  useEffect(() => {\n    if (!publicKey && connected) {\n      notify({\n        message: \"Wallet update\",\n        description: \"Disconnected from wallet\",\n      });\n    }\n    setConnected(!!publicKey);\n  }, [publicKey, connected, setConnected]);\n\n  return (\n    <WalletModalContext.Provider\n      value={{\n        visible,\n        setVisible,\n      }}\n    >\n      {children}\n      <WalletModal />\n    </WalletModalContext.Provider>\n  );\n};\n\nexport const WalletProvider: FC<{ children: ReactNode }> = ({ children }) => {\n  const wallets = useMemo(\n    () => [\n      getPhantomWallet(),\n      getSolflareWallet(),\n      getTorusWallet({\n        options: {\n          // @FIXME: this should be changed for Default, and by each Default storefront\n          clientId:\n            \"BOM5Cl7PXgE9Ylq1Z1tqzhpydY0RVr8k90QQ85N7AKI5QGSrr9iDC-3rvmy0K_hF0JfpLMiXoDhta68JwcxS1LQ\",\n        },\n      }),\n      getLedgerWallet(),\n      getSolongWallet(),\n      getMathWallet(),\n      getSolletWallet(),\n    ],\n    []\n  );\n\n  const onError = useCallback((error: WalletError) => {\n    console.error(error);\n    notify({\n      message: \"Wallet error\",\n      description: error.message,\n    });\n  }, []);\n\n  return (\n    <BaseWalletProvider wallets={wallets} onError={onError} autoConnect>\n      <WalletModalProvider>{children}</WalletModalProvider>\n    </BaseWalletProvider>\n  );\n};\n\nexport type WalletSigner = Pick<\n  WalletAdapter,\n  \"publicKey\" | \"signTransaction\" | \"signAllTransactions\"\n>;\n","import React, { useState, useContext, useCallback } from 'react';\n\nimport { WalletModal } from './WalletContext/WalletContext';\n\nexport enum ModalEnum {\n  WALLET = 'wallet',\n}\n\ntype ModalContextProps = {\n  setModal: (modal: ModalEnum | undefined) => void;\n  removeModal: () => void;\n};\n\nexport const ModalContext = React.createContext<ModalContextProps>({\n  setModal: () => null,\n  removeModal: () => null,\n});\n\nexport const ModalProvider: React.FC = ({ children }) => {\n  const [modal, setModal] = useState<ModalEnum | undefined>(undefined);\n\n  const removeModal = useCallback(() => {\n    setModal(undefined);\n  }, [setModal]);\n\n  return (\n    <ModalContext.Provider\n      value={{\n        setModal,\n        removeModal,\n      }}\n    >\n      {children}\n      {modal === ModalEnum.WALLET && <WalletModal />}\n    </ModalContext.Provider>\n  );\n};\n\nexport const useModal = (): ModalContextProps => {\n  const context = useContext(ModalContext);\n  if (context === undefined) {\n    throw new Error('useModal must be used within a ModalProvider');\n  }\n  return context;\n};\n","import { useTheme } from \"@mui/material\";\nimport React, { useContext } from \"react\";\n\nexport const ColorModeContext = React.createContext({});\n\nexport const ColorModeContextProvider = ({children=null as any }) => {\n  const [mode, setMode] = React.useState<'light' | 'dark'>('dark'); \n  const theme = useTheme();\n  const toggleColorMode = () => {\n    setMode((prevMode) => (prevMode === 'light' ? 'dark' : 'light'));\n  }\n  return (\n    <ColorModeContext.Provider\n      value={{\n        toggleColorMode,\n        mode,\n        theme,\n      }}\n    >\n      {children}\n    </ColorModeContext.Provider>\n  );\n};\n\nexport const useColorMode = (): any => {\n  const context = useContext(ColorModeContext);\n  return context;\n};\n","import { PublicKey } from '@solana/web3.js';\nimport { BinaryReader, BinaryWriter } from 'borsh';\nimport base58 from 'bs58';\nimport { StringPublicKey } from './ids';\n\nexport const extendBorsh = () => {\n  (BinaryReader.prototype as any).readPubkey = function () {\n    const reader = this as unknown as BinaryReader;\n    const array = reader.readFixedArray(32);\n    return new PublicKey(array);\n  };\n\n  (BinaryWriter.prototype as any).writePubkey = function (value: PublicKey) {\n    const writer = this as unknown as BinaryWriter;\n    writer.writeFixedArray(value.toBuffer());\n  };\n\n  (BinaryReader.prototype as any).readPubkeyAsString = function () {\n    const reader = this as unknown as BinaryReader;\n    const array = reader.readFixedArray(32);\n    return base58.encode(array) as StringPublicKey;\n  };\n\n  (BinaryWriter.prototype as any).writePubkeyAsString = function (\n    value: StringPublicKey,\n  ) {\n    const writer = this as unknown as BinaryWriter;\n    writer.writeFixedArray(base58.decode(value));\n  };\n};\n\nextendBorsh();\n","import React from \"react\";\n\nexport type CenteredProps = {\n  children : React.ReactNode,\n  height : string,\n  width : string,\n}\n\nexport const Centered = (\n  props : CenteredProps\n) => {\n  return (\n    <div\n      style={{\n        display: \"table\",\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        height: \"100%\",\n        width: \"100%\",\n      }}\n    >\n      <div\n        style={{\n          display: \"table-cell\",\n          verticalAlign: \"middle\",\n        }}\n      >\n        <div\n          style={{\n            marginLeft: \"auto\",\n            marginRight: \"auto\",\n            height: props.height,\n            width: props.width,\n          }}\n        >\n          {props.children}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Centered;\n","import { ButtonGroup, ButtonGroupProps } from \"@mui/material\";\nimport { Settings } from \"./Settings\";\n\nexport type ConnectButtonProps = ButtonGroupProps & {\n  isConnected: boolean;\n  onClickConnect: () => void;\n  onClickChange: () => void;\n};\n\nexport const ConnectButton: React.FC<ConnectButtonProps> = ({\n  isConnected,\n  onClickConnect,\n  onClickChange,\n  ...restProps\n}) => {\n  return (\n    <ButtonGroup   {...restProps}>\n      <Settings/>\n    </ButtonGroup>\n  );\n};\n\nexport default ConnectButton;\n","import React, { useCallback } from \"react\";\nimport {\n  Box,\n  Button,\n  Link,\n  Stack,\n} from \"@mui/material\";\n\nimport ConnectButton from \"../ConnectButton\";\nimport { ModalEnum, useModal, useWalletModal } from \"../../contexts\";\nimport { useWallet } from \"@solana/wallet-adapter-react\";\nimport { AppBar } from \"@mui/material\";\n\nexport const Header: React.FC = () => {\n  const { setModal } = useModal();\n  const { setVisible } = useWalletModal();\n  const wallet = useWallet();\n  const connected = wallet.connected;\n\n  const handleChange = useCallback(() => setVisible(true), [setVisible]);\n\n  const handleConnect = useCallback(() => {\n    setModal(ModalEnum.WALLET);\n    setVisible(true);\n  }, [setModal, setVisible]);\n  return (\n    <AppBar color=\"transparent\">\n    <Box\n      sx={{\n        display: \"flex\",\n        bgcolor: \"action.disabledBackground\",\n      }}\n      minWidth=\"100%\"\n    >\n      <Stack\n        direction=\"row\"\n        spacing={2}\n        sx={{\n          display: \"flex\",\n          height: \"62px\",\n          justifyContent: \"flex-start\",\n          alignItems: \"center\",\n          marginLeft: \"36px\",\n        }}\n      >\n        <Link href=\"#/\" underline=\"none\">\n          <Button variant=\"outlined\">\n            About\n          </Button>\n        </Link>\n        <Link href=\"#/create\" underline=\"none\">\n          <Button variant=\"outlined\">\n            Create\n          </Button>\n        </Link>\n        <Link href=\"#/claim\" underline=\"none\">\n          <Button variant=\"outlined\">\n            Claim\n          </Button>\n        </Link>\n      </Stack>\n      <Box sx={{flexGrow: 1}}></Box>\n      <Box\n        sx={{\n          display: \"flex\",\n          height: \"62px\",\n          justifyContent: \"flex-end\",\n          alignItems: \"center\",\n        }}\n      >\n        <ConnectButton\n          isConnected={connected}\n          sx={{ marginRight: \"36px\" }}\n          onClickConnect={handleConnect}\n          onClickChange={handleChange}\n        />\n      </Box>\n    </Box>\n</AppBar>\n  );\n};\n\nexport default Header;\n","import React from \"react\";\nimport {\n  HashRouter,\n  Link,\n  Route,\n  Switch,\n} from \"react-router-dom\";\n\nimport { createTheme, ThemeProvider } from \"@mui/material/styles\";\nimport CssBaseline from \"@mui/material/CssBaseline\";\nimport {\n  Box,\n  Button,\n  Link as HyperLink,\n  Stack,\n} from \"@mui/material\";\n\nimport \"./App.css\";\nimport {\n  useColorMode,\n} from \"./contexts\";\nimport Centered from \"./components/Centered\";\nimport Header from \"./components/Header/Header\";\nimport { Claim } from \"./components/Claim\";\nimport { Create } from \"./components/Create\";\n\nconst WHITESPACE = \"\\u00A0\";\n\ntype AboutProps = {};\n\nconst About = (\n  props : AboutProps,\n) => {\n  return (\n    <Stack spacing={3}>\n    <Stack\n      alignContent=\"left\"\n      textAlign=\"left\"\n      spacing={1}\n    >\n      <div>\n      Merkle Airdrop leverages the Solana blockchain and merkle trees to\n      facilitate airdrops by removing the prohibitive costs to the creators.\n      </div>\n\n\n      <div>\n      In the Solana ecosystem, the cost to creators for airdropped tokens is\n      currently largely due to rent costs being{WHITESPACE}\n      <HyperLink\n        href=\"https://docs.solana.com/implemented-proposals/rent\"\n        underline=\"none\"\n      >\n        \"fixed at the genesis\"\n      </HyperLink>\n      {WHITESPACE}(although there is a{WHITESPACE}\n      <HyperLink\n        href=\"https://forums.solana.com/t/proposal-for-a-temporary-one-off-code-change-to-reduce-the-skyrocketing-costs-of-rent/1572\"\n        underline=\"none\"\n      >\n        proposal\n      </HyperLink>\n      {WHITESPACE}to temporarily reduce these costs until a dynamic solution is\n      built). With the large increase in SOLUSD since genesis, rent costs have\n      duly skyrocketed.\n      </div>\n\n\n      <div>\n      The merkle distributor, pioneered by{WHITESPACE}\n      <HyperLink\n        href=\"https://github.com/Uniswap/merkle-distributor\"\n        underline=\"none\"\n      >\n        Uniswap\n      </HyperLink>\n      {WHITESPACE}and ported to Solana by{WHITESPACE}\n      <HyperLink\n        href=\"https://github.com/saber-hq/merkle-distributor\"\n        underline=\"none\"\n      >\n        Saber\n      </HyperLink>, solves this issue by building a 256-bit \"root hash\" from a\n      list of recipients and balances. This moves the rent costs and (nominal)\n      transaction fee to the claimer if they so choose to redeem the airdrop.\n      </div>\n\n      <div>\n      This website exposes a web-friendly way to access the on-chain\n      distributor. Creation is done by choosing a Mint, an off-chain\n      notification method, and supplying a list of recipients and balances with\n      the following JSON schema.\n      <pre>{`\n[\n  {\n    \"handle\": \"<DISTRIBUTION-SPECIFIC-HANDLE>\"\n    \"amount\": <#-TOKENS>\n  },\n  ...\n]\n      `}</pre>\n      Claims are redeemed through a URL with query parameters holding\n      claim-specific keys. These should be kept secret! Anyone can redeem a\n      claim once they have the URL.\n      </div>\n    </Stack>\n    <Stack\n      direction=\"row\"\n      spacing={2}\n    >\n      <Link to=\"/create\">\n        <Button\n          style={{width: \"30ch\"}}\n          variant=\"contained\"\n          color=\"info\"\n        >\n          Create\n        </Button>\n      </Link>\n      <Link to=\"/claim\">\n        <Button\n          style={{width: \"30ch\"}}\n          variant=\"contained\"\n          color=\"info\"\n        >\n          claim\n        </Button>\n      </Link>\n    </Stack>\n    </Stack>\n  );\n};\n\nconst getWindowDimensions = () => {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height,\n  };\n};\n\n// eslint-disable-next-line\nconst useWindowDimensions = () => {\n  const [windowDimensions, setWindowDimensions] = React.useState(\n    getWindowDimensions()\n  );\n\n  React.useEffect(() => {\n    const handleResize = () => {\n      setWindowDimensions(getWindowDimensions());\n    }\n\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return windowDimensions;\n};\n\nfunction App() {\n  const colorModeCtx = useColorMode();\n\n  React.useEffect(() => {}, [colorModeCtx.mode]);\n\n  const theme = React.useMemo(\n    () => {\n      let mode, disabledColor;\n      if (colorModeCtx.mode === \"dark\" || !colorModeCtx.mode) {\n        mode = \"dark\";\n        disabledColor = \"#eee\";\n      } else {\n        mode = \"light\";\n        disabledColor = \"#111\";\n      }\n\n      return createTheme({\n        palette: {\n          mode,\n          action: {\n            disabled: disabledColor,\n          },\n        },\n      })\n    },\n    [colorModeCtx.mode]\n  );\n\n  return (\n    <div className=\"App\" style={{ backgroundColor: \"transparent\" }}>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <Header />\n        <Centered height=\"100ch\" width=\"60ch\">\n          <Box sx={{height: \"10ch\"}} />\n          <HashRouter>\n            <Switch>\n              <Route path=\"/create\" component={Create} />\n              <Route path=\"/claim\" component={Claim} />\n              <Route path=\"/\" component={About} />\n            </Switch>\n          </HashRouter>\n        </Centered>\n      </ThemeProvider>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport {\n  AccountsProvider,\n  WalletProvider,\n  ConnectionProvider,\n  ColorModeContextProvider,\n} from \"./contexts\";\n\nimport \"antd/dist/antd.css\";\nimport \"@fontsource/open-sans\";\nimport \"@fontsource/roboto\";\nimport \"@fontsource/sora\";\n\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <ConnectionProvider>\n      <WalletProvider>\n        <AccountsProvider>\n          <ColorModeContextProvider>\n            <App />\n          </ColorModeContextProvider>\n        </AccountsProvider>\n      </WalletProvider>\n    </ConnectionProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nreportWebVitals();\n","import BN from 'bn.js';\n\nexport const TEN = new BN(10);\nexport const HALF_WAD = TEN.pow(new BN(18));\nexport const WAD = TEN.pow(new BN(18));\nexport const RAY = TEN.pow(new BN(27));\nexport const ZERO = new BN(0);\n","import { useCallback, useState } from 'react';\nimport { MintInfo } from '@solana/spl-token';\n\nimport { TokenAccount } from './../models';\nimport { PublicKey } from '@solana/web3.js';\nimport BN from 'bn.js';\nimport { WAD, ZERO } from '../constants';\nimport { TokenInfo } from '@solana/spl-token-registry';\n\nexport type KnownTokenMap = Map<string, TokenInfo>;\n\nexport const formatPriceNumber = new Intl.NumberFormat('en-US', {\n  style: 'decimal',\n  minimumFractionDigits: 2,\n  maximumFractionDigits: 8,\n});\n\nexport function useLocalStorageState(key: string, defaultState?: string) {\n  const [state, setState] = useState(() => {\n    // NOTE: Not sure if this is ok\n    const storedState = localStorage.getItem(key);\n    if (storedState) {\n      return JSON.parse(storedState);\n    }\n    return defaultState;\n  });\n\n  const setLocalStorageState = useCallback(\n    newState => {\n      const changed = state !== newState;\n      if (!changed) {\n        return;\n      }\n      setState(newState);\n      if (newState === null) {\n        localStorage.removeItem(key);\n      } else {\n        try {\n          localStorage.setItem(key, JSON.stringify(newState));\n        } catch {\n          // ignore\n        }\n      }\n    },\n    [state, key],\n  );\n\n  return [state, setLocalStorageState];\n}\n\nexport const findProgramAddress = async (\n  seeds: (Buffer | Uint8Array)[],\n  programId: PublicKey,\n) => {\n  const key =\n    'pda-' +\n    seeds.reduce((agg, item) => agg + item.toString('hex'), '') +\n    programId.toString();\n  let cached = localStorage.getItem(key);\n  if (cached) {\n    const value = JSON.parse(cached);\n\n    return [value.key, parseInt(value.nonce)] as [string, number];\n  }\n\n  const result = await PublicKey.findProgramAddress(seeds, programId);\n\n  try {\n    localStorage.setItem(\n      key,\n      JSON.stringify({\n        key: result[0].toBase58(),\n        nonce: result[1],\n      }),\n    );\n  } catch {\n    // ignore\n  }\n\n  return [result[0].toBase58(), result[1]] as [string, number];\n};\n\n// shorten the checksummed version of the input address to have 4 characters at start and end\nexport function shortenAddress(address: string, chars = 4): string {\n  return `${address.slice(0, chars)}...${address.slice(-chars)}`;\n}\n\nexport function getTokenName(\n  map: KnownTokenMap,\n  mint?: string | PublicKey,\n  shorten = true,\n): string {\n  const mintAddress = typeof mint === 'string' ? mint : mint?.toBase58();\n\n  if (!mintAddress) {\n    return 'N/A';\n  }\n\n  const knownSymbol = map.get(mintAddress)?.symbol;\n  if (knownSymbol) {\n    return knownSymbol;\n  }\n\n  return shorten ? `${mintAddress.substring(0, 5)}...` : mintAddress;\n}\nexport function getVerboseTokenName(\n  map: KnownTokenMap,\n  mint?: string | PublicKey,\n  shorten = true,\n): string {\n  const mintAddress = typeof mint === 'string' ? mint : mint?.toBase58();\n\n  if (!mintAddress) {\n    return 'N/A';\n  }\n\n  const knownName = map.get(mintAddress)?.name;\n  if (knownName) {\n    return knownName;\n  }\n\n  return shorten ? `${mintAddress.substring(0, 5)}...` : mintAddress;\n}\n\nexport function getTokenByName(tokenMap: KnownTokenMap, name: string) {\n  let token: TokenInfo | null = null;\n  for (const val of tokenMap.values()) {\n    if (val.symbol === name) {\n      token = val;\n      break;\n    }\n  }\n  return token;\n}\n\nexport function getTokenIcon(\n  map: KnownTokenMap,\n  mintAddress?: string | PublicKey,\n): string | undefined {\n  const address =\n    typeof mintAddress === 'string' ? mintAddress : mintAddress?.toBase58();\n  if (!address) {\n    return;\n  }\n\n  return map.get(address)?.logoURI;\n}\n\nexport function isKnownMint(map: KnownTokenMap, mintAddress: string) {\n  return !!map.get(mintAddress);\n}\n\nexport const STABLE_COINS = new Set(['USDC', 'wUSDC', 'USDT']);\n\nexport function chunks<T>(array: T[], size: number): T[][] {\n  return Array.apply<number, T[], T[][]>(\n    0,\n    new Array(Math.ceil(array.length / size)),\n  ).map((_, index) => array.slice(index * size, (index + 1) * size));\n}\n\nexport function toLamports(\n  account?: TokenAccount | number,\n  mint?: MintInfo,\n): number {\n  if (!account) {\n    return 0;\n  }\n\n  const amount =\n    typeof account === 'number' ? account : account.info.amount?.toNumber();\n\n  const precision = Math.pow(10, mint?.decimals || 0);\n  return Math.floor(amount * precision);\n}\n\nexport function wadToLamports(amount?: BN): BN {\n  return amount?.div(WAD) || ZERO;\n}\n\nexport function fromLamports(\n  account?: TokenAccount | number | BN,\n  mint?: MintInfo,\n  rate: number = 1.0,\n): number {\n  if (!account) {\n    return 0;\n  }\n\n  const amount = Math.floor(\n    typeof account === 'number'\n      ? account\n      : BN.isBN(account)\n      ? account.toNumber()\n      : account.info.amount.toNumber(),\n  );\n\n  const precision = Math.pow(10, mint?.decimals || 9);\n  return (amount / precision) * rate;\n}\n\nexport const tryParseKey = (key: string): PublicKey | null => {\n  try {\n    return new PublicKey(key);\n  } catch (error) {\n    return null;\n  }\n};\n\nvar SI_SYMBOL = ['', 'k', 'M', 'G', 'T', 'P', 'E'];\n\nconst abbreviateNumber = (number: number, precision: number) => {\n  let tier = (Math.log10(number) / 3) | 0;\n  let scaled = number;\n  let suffix = SI_SYMBOL[tier];\n  if (tier !== 0) {\n    let scale = Math.pow(10, tier * 3);\n    scaled = number / scale;\n  }\n\n  return scaled.toFixed(precision) + suffix;\n};\n\nexport const formatAmount = (\n  val: number,\n  precision: number = 2,\n  abbr: boolean = true,\n) => (abbr ? abbreviateNumber(val, precision) : val.toFixed(precision));\n\nexport function formatTokenAmount(\n  account?: TokenAccount | number | BN,\n  mint?: MintInfo,\n  rate: number = 1.0,\n  prefix = '',\n  suffix = '',\n  precision = 2,\n  abbr = false,\n): string {\n  if (!account) {\n    return '';\n  }\n\n  return `${[prefix]}${formatAmount(\n    fromLamports(account, mint, rate),\n    precision,\n    abbr,\n  )}${suffix}`;\n}\n\nexport const formatUSD = new Intl.NumberFormat('en-US', {\n  style: 'currency',\n  currency: 'USD',\n});\n\nconst numberFormater = new Intl.NumberFormat('en-US', {\n  style: 'decimal',\n  minimumFractionDigits: 2,\n  maximumFractionDigits: 2,\n});\n\nexport const formatNumber = {\n  format: (val?: number) => {\n    if (!val) {\n      return '--';\n    }\n\n    return numberFormater.format(val);\n  },\n};\n\nexport const formatPct = new Intl.NumberFormat('en-US', {\n  style: 'percent',\n  minimumFractionDigits: 2,\n  maximumFractionDigits: 2,\n});\n\nexport function convert(\n  account?: TokenAccount | number,\n  mint?: MintInfo,\n  rate: number = 1.0,\n): number {\n  if (!account) {\n    return 0;\n  }\n\n  const amount =\n    typeof account === 'number' ? account : account.info.amount?.toNumber();\n\n  const precision = Math.pow(10, mint?.decimals || 0);\n  let result = (amount / precision) * rate;\n\n  return result;\n}\n\nexport function sleep(ms: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n"],"sourceRoot":""}