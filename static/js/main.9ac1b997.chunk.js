(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[0],{105:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f}));var r=n(2),a=n.n(r),i=(n(13),n(8)),c=(n(7),n(95)),o=n(66),s=n.n(o),u=function(){return(new Date).getTime()/1e3},l=function(e){var t=e._rpcEndpoint.match(/https:\/\/api.([^.]*).solana.com/);return t[1]?t[1]:"mainnet-beta"},d=function(e,t){return"https://explorer.solana.com/tx/".concat(e,"?cluster=").concat(l(t))};function f(e){return b.apply(this,arguments)}function b(){return(b=Object(i.a)(a.a.mark((function e(t){var n,r,o,l,d,f,b,p,g,j,y,x,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,r=t.connection,o=t.timeout,l=void 0===o?15e3:o,d=n.serialize(),f=u(),b=0,e.next=6,r.sendRawTransaction(d,{skipPreflight:!0});case 6:return p=e.sent,s.a.debug("Started awaiting confirmation for",p),g=!1,Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g||!(u()-f<l)){e.next=6;break}return r.sendRawTransaction(d,{skipPreflight:!0}),e.next=4,Object(c.c)(500);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=10,e.next=13,m(p,l,r,"confirmed",!0);case 13:if(j=e.sent){e.next=16;break}throw new Error("Timed out awaiting confirmation on transaction");case 16:if(!j.err){e.next=19;break}throw s.a.error(j.err),new Error("Transaction failed: Custom instruction error");case 19:b=(null===j||void 0===j?void 0:j.slot)||0,e.next=48;break;case 22:if(e.prev=22,e.t0=e.catch(10),s.a.error("Timeout Error caught",e.t0),!e.t0.timeout){e.next=27;break}throw new Error("Timed out awaiting confirmation on transaction");case 27:return y=null,e.prev=28,e.next=31,h(r,n,"single");case 31:y=e.sent.value,e.next=37;break;case 34:e.prev=34,e.t1=e.catch(28),s.a.error("Simulate Transaction error",e.t1);case 37:if(!y||!y.err){e.next=48;break}if(!y.logs){e.next=47;break}x=y.logs.length-1;case 40:if(!(x>=0)){e.next=47;break}if(!(v=y.logs[x]).startsWith("Program log: ")){e.next=44;break}throw new Error("Transaction failed: "+v.slice("Program log: ".length));case 44:--x,e.next=40;break;case 47:throw new Error(JSON.stringify(y.err));case 48:return e.prev=48,g=!0,e.finish(48);case 51:return s.a.debug("Latency (ms)",p,u()-f),e.abrupt("return",{txid:p,slot:b});case 53:case"end":return e.stop()}}),e,null,[[10,22,48,51],[28,34]])})))).apply(this,arguments)}function h(e,t,n){return p.apply(this,arguments)}function p(){return(p=Object(i.a)(a.a.mark((function e(t,n,r){var i,c,o,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._recentBlockhash(t._disableBlockhashCaching);case 2:return n.recentBlockhash=e.sent,i=n.serializeMessage(),c=n._serialize(i),o=c.toString("base64"),s=[o,{encoding:"base64",commitment:r}],e.next=10,t._rpcRequest("simulateTransaction",s);case 10:if(!(u=e.sent).error){e.next=13;break}throw new Error("failed to simulate transaction: "+u.error.message);case 13:return e.abrupt("return",u.result);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t,n){return g.apply(this,arguments)}function g(){return g=Object(i.a)(a.a.mark((function e(t,n,r){var o,u,l,f,b,h=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=h.length>3&&void 0!==h[3]?h[3]:"recent",u=h.length>4&&void 0!==h[4]&&h[4],l=!1,f={slot:0,confirmations:0,err:null},b=0,e.next=7,new Promise(function(){var e=Object(i.a)(a.a.mark((function e(h,p){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){l||(l=!0,s.a.warn("Rejecting for timeout..."),p({timeout:!0}))}),n);try{b=r.onSignature(t,(function(e,t){l=!0,f={err:e.err,slot:t.slot,confirmations:0},e.err?(s.a.warn("Rejected via websocket",e.err),p(f)):(s.a.debug("Resolved via websocket",e),h(f))}),o)}catch(m){l=!0,s.a.error("WS error in setup",t,m)}case 2:if(l||!u){e.next=8;break}return Object(i.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getSignatureStatuses([t]);case 3:n=e.sent,f=n&&n.value[0],console.log(d(t,r)),l||(f?f.err?(s.a.error("REST error for",t,f),l=!0,p(f.err)):f.confirmations?(s.a.debug("REST confirmation for",t,f),l=!0,h(f)):s.a.error("REST no confirmations for",t,f):s.a.debug("REST null result for",t,f)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),l||s.a.error("REST connection error: txid",t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))(),e.next=6,Object(c.c)(2e3);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return f=e.sent,r._signatureSubscriptions[b]&&r.removeSignatureListener(b),l=!0,s.a.debug("Returning status",f),e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}},125:function(e,t,n){"use strict";n.r(t),n.d(t,"ENDPOINTS",(function(){return m})),n.d(t,"ConnectionProvider",(function(){return y})),n.d(t,"useConnection",(function(){return x})),n.d(t,"useConnectionConfig",(function(){return v})),n.d(t,"getErrorForTransaction",(function(){return O})),n.d(t,"SequenceType",(function(){return w})),n.d(t,"sendTransactionWithRetry",(function(){return k}));var r=n(2),a=n.n(r),i=n(8),c=n(13),o=n(9),s=n(95),u=n(7),l=n(1),d=n.n(l),f=n(105),b=n(229),h=n(21),p=n(5),m=[{name:"mainnet-beta",endpoint:"https://api.mainnet-beta.solana.com",ChainId:b.a.MainnetBeta},{name:"devnet",endpoint:"https://api.devnet.solana.com",ChainId:b.a.Devnet}],g=m[0].endpoint,j=d.a.createContext({endpoint:g,setEndpoint:function(){},connection:new u.Connection(g,"recent"),env:m[0].name,tokens:[],tokenMap:new Map});function y(e){var t,n=e.children,r=void 0===n?void 0:n,a=Object(s.d)("connectionEndpoint",m[0].endpoint),i=Object(o.a)(a,2),d=i[0],f=i[1],h=Object(l.useMemo)((function(){return new u.Connection(d,"recent")}),[d]),g=(null===(t=m.find((function(e){return e.endpoint===d})))||void 0===t?void 0:t.name)||m[0].name,y=Object(l.useState)([]),x=Object(o.a)(y,2),v=x[0],w=x[1],O=Object(l.useState)(new Map),k=Object(o.a)(O,2),S=k[0],C=k[1];return Object(l.useEffect)((function(){(new b.b).resolve().then((function(e){var t,n=e.excludeByTag("nft").filterByChainId((null===(t=m.find((function(e){return e.endpoint===d})))||void 0===t?void 0:t.ChainId)||b.a.MainnetBeta).getList(),r=Object(c.a)(n).reduce((function(e,t){return e.set(t.address,t),e}),new Map);C(r),w(n)}))}),[g,d]),Object(l.useEffect)((function(){var e=h.onAccountChange(u.Keypair.generate().publicKey,(function(){}));return function(){h.removeAccountChangeListener(e)}}),[h]),Object(l.useEffect)((function(){var e=h.onSlotChange((function(){return null}));return function(){h.removeSlotChangeListener(e)}}),[h]),Object(p.jsx)(j.Provider,{value:{endpoint:d,setEndpoint:f,connection:h,tokens:v,tokenMap:S,env:g},children:r})}function x(){return Object(l.useContext)(j).connection}function v(){var e=Object(l.useContext)(j);return{endpoint:e.endpoint,setEndpoint:e.setEndpoint,env:e.env,tokens:e.tokens,tokenMap:e.tokenMap}}var w,O=function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"max");case 2:return e.next=4,t.getParsedConfirmedTransaction(n);case 4:return r=e.sent,i=[],(null===r||void 0===r?void 0:r.meta)&&r.meta.logMessages&&r.meta.logMessages.forEach((function(e){for(var t,n=/Error: (.*)/gm;null!==(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,t.length>1&&i.push(t[1])})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();!function(e){e[e.Sequential=0]="Sequential",e[e.Parallel=1]="Parallel",e[e.StopOnFailure=2]="StopOnFailure"}(w||(w={}));var k=function(){var e=Object(i.a)(a.a.mark((function e(t,n,r,i){var o,s,l,d,b,p,m,g,j,y,x,v=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=v.length>4&&void 0!==v[4]?v[4]:"singleGossip",s=v.length>5&&void 0!==v[5]&&v[5],l=v.length>6?v[6]:void 0,d=v.length>7?v[7]:void 0,n.publicKey){e.next=6;break}throw new h.i;case 6:if(b=new u.Transaction,r.forEach((function(e){return b.add(e)})),e.t0=l,e.t0){e.next=13;break}return e.next=12,t.getRecentBlockhash(o);case 12:e.t0=e.sent;case 13:if(b.recentBlockhash=e.t0.blockhash,s?(p=b).setSigners.apply(p,Object(c.a)(i.map((function(e){return e.publicKey})))):(m=b).setSigners.apply(m,[n.publicKey].concat(Object(c.a)(i.map((function(e){return e.publicKey}))))),i.length>0&&(g=b).partialSign.apply(g,Object(c.a)(i)),s){e.next=26;break}return e.prev=17,e.next=20,n.signTransaction(b);case 20:b=e.sent,e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(17),e.abrupt("return","Failed to sign transaction");case 26:return d&&d(),console.log("About to send"),e.prev=28,e.next=31,Object(f.c)({connection:t,signedTransaction:b});case 31:return j=e.sent,y=j.txid,x=j.slot,e.abrupt("return",{txid:y,slot:x});case 37:return e.prev=37,e.t2=e.catch(28),console.error(e.t2),e.abrupt("return","See console logs");case 41:case"end":return e.stop()}}),e,null,[[17,23],[28,37]])})));return function(t,n,r,a){return e.apply(this,arguments)}}()},197:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var r=n(9),a=n(13),i=n(34),c=n(11),o=n(15),s=n(193),u=function(){function t(e){Object(c.a)(this,t),this.leafs=void 0,this.layers=void 0,this.leafs=e.slice(),this.layers=[];for(var n=this.leafs.map(t.nodeHash);n.length>0&&(console.log("Hashes",this.layers.length,n),this.layers.push(n.slice()),1!==n.length);)n=n.reduce((function(e,n,r,a){if(r%2===0){var i=a[r+1];e.push(t.internalHash(n,i))}return e}),Array())}return Object(o.a)(t,[{key:"getRoot",value:function(){return this.layers[this.layers.length-1][0]}},{key:"getProof",value:function(e){return this.layers.reduce((function(t,n){var r=1^e;return r<n.length&&t.push(n[r]),e=Math.floor(e/2),t}),[])}},{key:"getHexRoot",value:function(){return this.getRoot().toString("hex")}},{key:"getHexProof",value:function(e){return this.getProof(e).map((function(e){return e.toString("hex")}))}},{key:"verifyProof",value:function(e,n,r){var a,c=t.nodeHash(this.leafs[e]),o=Object(i.a)(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;c=t.internalHash(c,s)}}catch(u){o.e(u)}finally{o.f()}return c.equals(r)}}],[{key:"nodeHash",value:function(t){return e.from(s.keccak_256.digest([0].concat(Object(a.a)(t))))}},{key:"internalHash",value:function(t,n){if(!n)return t;var i=[t,n].sort(e.compare),c=Object(r.a)(i,2),o=c[0],u=c[1];return e.from(s.keccak_256.digest([1].concat(Object(a.a)(o),Object(a.a)(u))))}},{key:"verifyClaim",value:function(e,n,r){var a,c=t.nodeHash(e),o=Object(i.a)(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;c=t.internalHash(c,s)}}catch(u){o.e(u)}finally{o.f()}return c.equals(r)}}]),t}()}).call(this,n(18).Buffer)},210:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(2),n(8);var r=n(40),a=function(){return{token:r.i,associatedToken:r.f,bpf_upgrade_loader:r.a,system:r.g,memo:r.e}}},211:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(35),a=n(191),i=(n(1),n(851)),c=(n(723),n(5)),o=["children","closeIcon","bodyStyle","width","style"],s=function(e){var t=e.children,n=(e.closeIcon,e.bodyStyle),s=e.width,u=(e.style,Object(a.a)(e,o));return Object(c.jsx)(i.a,Object(r.a)(Object(r.a)({style:{background:"transparent",borderRadius:16},bodyStyle:Object(r.a)({background:"#333333",display:"flex",flexDirection:"column",alignItems:"center"},n),footer:null,width:s||400},u),{},{children:t}))}},232:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return I}));n(191);var r=n(9),a=n(34),i=n(35),c=n(2),o=n.n(c),s=n(8),u=n(1),l=n.n(u),d=n(125),f=n(81),b=n(7),h=n(44),p=(n(95),n(255)),m=n(40),g=n(210),j=n(5),y=l.a.createContext(null),x=new Map,v=new Map,w=new Map,O=new Map,k=function(){var t=Object(s.a)(o.a.mark((function t(n,r){var a,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getAccountInfo(r);case 2:if(null!==(a=t.sent)){t.next=5;break}throw new Error("Failed to find mint account");case 5:return i=e.from(a.data),t.abrupt("return",K(i));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),S=function(t,n){if(n.data.length>0){var r=e.from(n.data),a=B(r);return{pubkey:t,account:Object(i.a)({},n),info:a}}},C=new Map,A={emitter:new p.a,query:function(){var e=Object(s.a)(o.a.mark((function e(t,n,r){var a,i,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="string"===typeof n?new b.PublicKey(n):n,i=a.toBase58(),!(c=v.get(i))){e.next=5;break}return e.abrupt("return",c);case 5:if(!(s=x.get(i))){e.next=8;break}return e.abrupt("return",s);case 8:return s=t.getAccountInfo(a).then((function(e){if(!e)throw new Error("Account not found");return A.add(a,e,r)})),x.set(i,s),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),add:function(e,t,n,r){var a="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),i=n||C.get(a);if(!i)throw new Error("Deserializer needs to be registered or passed as a parameter");A.registerParser(e,i),x.delete(a);var c=i(a,t);if(c){void 0===r?r=!0:r instanceof Function&&(r=r(c));var o=!v.has(a);return v.set(a,c),A.emitter.raiseCacheUpdated(a,o,i,r),c}},get:function(e){var t;return t="string"!==typeof e?e.toBase58():e,v.get(t)},delete:function(e){var t;return t="string"!==typeof e?e.toBase58():e,!!v.get(t)&&(v.delete(t),A.emitter.raiseCacheDeleted(t),!0)},byParser:function(e){var t,n=[],r=Object(a.a)(C.keys());try{for(r.s();!(t=r.n()).done;){var i=t.value;C.get(i)===e&&n.push(i)}}catch(c){r.e(c)}finally{r.f()}return n},registerParser:function(e,t){if(e){var n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();C.set(n,t)}return e},queryMint:function(){var e=Object(s.a)(o.a.mark((function e(t,n){var r,a,i,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"===typeof n?new b.PublicKey(n):n,a=r.toBase58(),!(i=O.get(a))){e.next=5;break}return e.abrupt("return",i);case 5:if(!(c=w.get(a))){e.next=8;break}return e.abrupt("return",c);case 8:return c=k(t,r).then((function(e){return w.delete(a),O.set(a,e),e})),w.set(a,c),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getMint:function(e){var t;return t="string"!==typeof e?e.toBase58():e,O.get(t)},addMint:function(e,t){var n=K(t.data),r=e.toBase58();return O.set(r,n),n}};var E=function(){var e=Object(d.useConnection)(),t=Object(f.b)().publicKey,n=Object(u.useState)(),a=Object(r.a)(n,2),i=a[0],c=a[1],l=Object(u.useCallback)((function(e){if(t){var n=function(e,t){if(t){var n=new b.PublicKey(e);return{pubkey:e,account:t,info:{address:n,mint:m.j,owner:n,amount:new h.e(t.lamports),delegate:null,delegatedAmount:new h.e(0),isInitialized:!0,isFrozen:!1,isNative:!0,rentExemptReserve:null,closeAuthority:null}}}}(t.toBase58(),e);if(void 0!==n){var r=t.toBase58();A.registerParser(r,S),v.set(r,n),A.emitter.raiseCacheUpdated(r,!1,S,!0)}}}),[t]);return Object(u.useEffect)((function(){var n=0,r=function(e){e&&(l(e),c(e))};return Object(s.a)(o.a.mark((function a(){var i;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&t){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,a.next=5,e.getAccountInfo(t);case 5:i=a.sent,r(i),a.next=12;break;case 9:return a.prev=9,a.t0=a.catch(2),a.abrupt("return");case 12:n=e.onAccountChange(t,r);case 13:case"end":return a.stop()}}),a,null,[[2,9]])})))(),function(){n&&e.removeAccountChangeListener(n)}}),[c,t,e,l]),{nativeAccount:i}},P=new Set,M=function(){var e=Object(s.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return P.add(n.toBase58()),e.next=5,t.getTokenAccountsByOwner(n,{programId:Object(g.a)().token});case 5:e.sent.value.forEach((function(e){A.add(e.pubkey.toBase58(),e.account,S)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function I(e){var t=e.children,n=void 0===t?null:t,a=Object(d.useConnection)(),i=Object(f.b)().publicKey,c=Object(u.useState)([]),o=Object(r.a)(c,2),s=o[0],l=o[1],p=Object(u.useState)([]),m=Object(r.a)(p,2),x=m[0],v=m[1],w=E().nativeAccount,O=null===i||void 0===i?void 0:i.toBase58(),k=Object(u.useCallback)((function(){return A.byParser(S).map((function(e){return A.get(e)})).filter((function(e){return e&&e.info.owner.toBase58()===O})).map((function(e){return e}))}),[O]);return Object(u.useEffect)((function(){var e=k().filter((function(e){return void 0!==e}));v(e)}),[w,s,k]),Object(u.useEffect)((function(){var e=[];return A.emitter.onCache((function(e){if(e.isNew&&e.isActive){var t=e.id,n=e.parser;a.onAccountChange(new b.PublicKey(t),(function(e){A.add(t,e,n)}))}})),function(){e.forEach((function(e){return a.removeAccountChangeListener(e)}))}}),[a]),Object(u.useEffect)((function(){if(a&&i){M(a,i).then((function(){l(k())}));var e=a.onProgramAccountChange(Object(g.a)().token,(function(e){var t=e.accountId;if(e.accountInfo.data.length===h.a.span){var n=B(e.accountInfo.data);P.has(n.owner.toBase58())&&(A.add(t,e.accountInfo,S),l(k()))}}),"singleGossip");return function(){a.removeProgramAccountChangeListener(e)}}l([])}),[a,i,k]),Object(j.jsx)(y.Provider,{value:{userAccounts:x,nativeAccount:w},children:n})}var B=function(e){var t=h.a.decode(e);return t.mint=new b.PublicKey(t.mint),t.owner=new b.PublicKey(t.owner),t.amount=h.e.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new h.e(0)):(t.delegate=new b.PublicKey(t.delegate),t.delegatedAmount=h.e.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=h.e.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new b.PublicKey(t.closeAuthority),t},K=function(e){if(e.length!==h.b.span)throw new Error("Not a valid Mint");var t=h.b.decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new b.PublicKey(t.mintAuthority),t.supply=h.e.fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new b.PublicKey(t.freezeAuthority),t}}).call(this,n(18).Buffer)},255:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(15),a=n(11),i=n(91),c=function e(t,n,r,i){Object(a.a)(this,e),this.id=void 0,this.parser=void 0,this.isNew=void 0,this.isActive=void 0,this.id=t,this.parser=r,this.isNew=n,this.isActive=i};c.type="CacheUpdate";var o=function e(t){Object(a.a)(this,e),this.id=void 0,this.id=t};o.type="CacheUpdate";var s=function e(t){Object(a.a)(this,e),this.ids=void 0,this.ids=t};s.type="MarketUpdate";var u=function(){function e(){Object(a.a)(this,e),this.emitter=new i.EventEmitter}return Object(r.a)(e,[{key:"onMarket",value:function(e){var t=this;return this.emitter.on(s.type,e),function(){return t.emitter.removeListener(s.type,e)}}},{key:"onCache",value:function(e){var t=this;return this.emitter.on(c.type,e),function(){return t.emitter.removeListener(c.type,e)}}},{key:"raiseMarketUpdated",value:function(e){this.emitter.emit(s.type,new s(e))}},{key:"raiseCacheUpdated",value:function(e,t,n,r){this.emitter.emit(c.type,new c(e,t,n,r))}},{key:"raiseCacheDeleted",value:function(e){this.emitter.emit(o.type,new o(e))}}]),e}()},260:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(2),a=n.n(r),i=n(8),c=n(1),o=n(81),s=n(55),u=n(36),l=n(357),d=n(507),f=n(510),b=n(843),h=n(149),p=n(129),m=n(857),g=n(487),j=n.n(g),y=n(486),x=n.n(y),v=n(5),w=function(e){var t=e.additionalSettings,n=Object(o.b)(),r=n.connected,g=n.disconnect,y=n.publicKey,w=Object(s.j)(),O=w.setEndpoint,k=w.env,S=w.endpoint,C=Object(s.l)().setVisible,A=Object(c.useCallback)((function(){return C(!0)}),[C]),E=Object(s.k)().setModal,P=Object(p.a)(),M=Object(s.h)(),I=Object(c.useCallback)((function(){E(s.f.WALLET),C(!0)}),[E,C]);return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(d.a,{spacing:2,direction:"row",sx:{display:"flex",height:"62px",justifyContent:"flex-end",alignItems:"center",marginRight:"36px"},children:[!r&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(f.a,{children:Object(v.jsx)(b.a,{style:{marginBottom:5},onChange:function(e){O(e.target.value)},value:S,children:s.e.map((function(e){var t=e.name,n=e.endpoint;return Object(v.jsx)("option",{value:n,children:t},t)}))})}),Object(v.jsx)(h.a,{variant:"contained",onClick:I,children:"Connect"})]}),r&&Object(v.jsxs)(v.Fragment,{children:[y&&Object(v.jsxs)(h.a,{variant:"outlined",onClick:Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=4;break}return e.next=3,navigator.clipboard.writeText(y.toBase58());case 3:Object(u.k)({message:"Wallet update",description:"Address copied to clipboard"});case 4:case"end":return e.stop()}}),e)}))),children:[Object(v.jsx)(l.a,{}),Object(u.l)(y.toBase58())]}),Object(v.jsxs)(h.a,{variant:"outlined",onClick:A,children:["Change","\xa0","Wallet"]}),Object(v.jsxs)(h.a,{variant:"contained",color:"error",onClick:function(){return g().catch()},children:["Disconnect","\xa0","(",k,")"]})]}),Object(v.jsx)(m.a,{sx:{ml:1},onClick:M.toggleColorMode,color:"inherit",children:"dark"===P.palette.mode?Object(v.jsx)(x.a,{}):Object(v.jsx)(j.a,{})}),t]})})}},262:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var r=n(9),a=n(129),i=n(1),c=n.n(i),o=n(5),s=c.a.createContext({}),u=function(e){var t=e.children,n=void 0===t?null:t,i=c.a.useState("dark"),u=Object(r.a)(i,2),l=u[0],d=u[1],f=Object(a.a)();return Object(o.jsx)(s.Provider,{value:{toggleColorMode:function(){d((function(e){return"light"===e?"dark":"light"}))},mode:l,theme:f},children:n})},l=function(){return Object(i.useContext)(s)}},355:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(160),a=n(804),i=new r.a(a)},36:function(e,t,n){"use strict";n.d(t,"d",(function(){return r.f})),n.d(t,"e",(function(){return r.h})),n.d(t,"a",(function(){return r.b})),n.d(t,"b",(function(){return r.c})),n.d(t,"c",(function(){return r.d})),n.d(t,"k",(function(){return c})),n.d(t,"l",(function(){return o.b})),n.d(t,"g",(function(){return f.c})),n.d(t,"f",(function(){return f.b})),n.d(t,"j",(function(){return f.g})),n.d(t,"h",(function(){return f.e})),n.d(t,"i",(function(){return f.f}));n(255);var r=n(40),a=(n(210),n(442),n(1),n(505)),i=n(5);function c(e){var t=e.message,n=void 0===t?"":t,r=e.description,c=void 0===r?void 0:r,o=e.txid,s=void 0===o?"":o,u=e.type,l=void 0===u?"info":u,d=e.placement,f=void 0===d?"bottomLeft":d;s&&(c=Object(i.jsx)(i.Fragment,{})),a.a[l]({message:Object(i.jsx)("span",{style:{color:"black"},children:n}),description:Object(i.jsx)("span",{style:{color:"black",opacity:.5},children:c}),placement:f,style:{backgroundColor:"white"}})}var o=n(95);var s=n(7),u=n(134),l=n(43),d=n.n(l);u.BinaryReader.prototype.readPubkey=function(){var e=this.readFixedArray(32);return new s.PublicKey(e)},u.BinaryWriter.prototype.writePubkey=function(e){this.writeFixedArray(e.toBuffer())},u.BinaryReader.prototype.readPubkeyAsString=function(){var e=this.readFixedArray(32);return d.a.encode(e)},u.BinaryWriter.prototype.writePubkeyAsString=function(e){this.writeFixedArray(d.a.decode(e))};var f=n(84)},40:function(e,t,n){"use strict";n.d(t,"j",(function(){return a})),n.d(t,"i",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return b}));n(11),n(15);var r=n(7),a=(new Map,new r.PublicKey("So11111111111111111111111111111111111111112")),i=new r.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),c=new r.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),o=new r.PublicKey("BPFLoaderUpgradeab1e11111111111111111111111"),s=new r.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),u=new r.PublicKey("11111111111111111111111111111111"),l=new r.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),d=new r.PublicKey("cndyAnrLdpjq1Ssp1z8xxDsB8dxe7u4HL5Nxi2K5WXZ"),f=new r.PublicKey("561gX85SDR4hYF2L7P4LcvdXsWSxWuY7Z1yGgznPwSXG"),b=new r.PublicKey("MSv9H2sMceAzccBganUXwGq3GXgqYAstmZAbFDZYbAV")},442:function(e,t,n){"use strict";(function(e){n(13),n(7),n(26),n(96)}).call(this,n(18).Buffer)},489:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return V}));var r=n(34),a=n(2),i=n.n(a),c=n(13),o=n(9),s=n(8),u=n(1),l=n.n(u),d=n(490),f=n.n(d),b=n(853),h=n(858),p=n(98),m=n(230),g=n(149),j=n(510),y=n(854),x=n(850),v=n(359),w=n(855),O=n(859),k=n(852),S=n(507),C=n(81),A=n(7),E=n(44),P=n(58),M=n(26),I=n.n(M),B=n(43),K=n(55),T=n(36),W=n(197),D=n(105),N=n(97),F=n(355),R=n(5),U=function(){var t=Object(s.a)(i.a.mark((function t(n,r,a,s){var u,l,d,f,b;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a){t.next=13;break}if(t.prev=1,(u=new A.PublicKey(r)).equals(n)){t.next=5;break}throw new Error("Claimant wallet handle does not match connected wallet");case 5:return t.abrupt("return",[u,[]]);case 8:throw t.prev=8,t.t0=t.catch(1),new Error("Invalid claimant wallet handle ".concat(t.t0));case 11:t.next=20;break;case 13:return l=[s.toBuffer(),e.from(r),e.from(a.toArray("le",4))],t.next=16,A.PublicKey.findProgramAddress([l[0]].concat(Object(c.a)(Object(N.b)(l[1],32)),[l[2]]),T.b);case 16:return d=t.sent,f=Object(o.a)(d,1),b=f[0],t.abrupt("return",[b,l]);case 20:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),L=function(){var t=Object(s.a)(i.a.mark((function t(n,r,a,s,u,l,d,f,b,h){var p,m,g,j,y,x,v,w,O,k,S,C,M,B,K,D,N,F,R;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,p=new A.PublicKey(u),t.next=7;break;case 4:throw t.prev=4,t.t0=t.catch(0),new Error("Invalid tokenAcc key ".concat(t.t0));case 7:return t.next=9,n.getAccountInfo(p);case 9:if(null!==(m=t.sent)){t.next=12;break}throw new Error("Could not fetch distributor token account");case 12:return g=E.a.decode(m.data),j=new A.PublicKey(g.mint),console.log(j.toBase58()),t.next=17,U(r,d,h,j);case 17:if(y=t.sent,x=Object(o.a)(y,2),v=x[0],w=x[1],O=e.from([].concat(Object(c.a)(new I.a(b).toArray("le",8)),Object(c.a)(v.toBuffer()),Object(c.a)(j.toBuffer()),Object(c.a)(new I.a(f).toArray("le",8)))),W.a.verifyClaim(O,l,e.from(s.root))){t.next=25;break}throw new Error("Gumdrop merkle proof does not match");case 25:return t.next=27,A.PublicKey.findProgramAddress([e.from("ClaimStatus"),e.from(new I.a(b).toArray("le",8)),a.toBuffer()],T.b);case 27:return k=t.sent,S=Object(o.a)(k,2),C=S[0],M=S[1],t.next=33,A.PublicKey.findProgramAddress([r.toBuffer(),E.c.toBuffer(),j.toBuffer()],T.d);case 33:return B=t.sent,K=Object(o.a)(B,1),D=K[0],N=[],t.next=39,n.getAccountInfo(D);case 39:if(t.t1=t.sent,null!==t.t1){t.next=42;break}N.push(E.d.createAssociatedTokenAccountInstruction(T.d,E.c,j,D,r,r));case 42:return F=s.temporal.equals(A.PublicKey.default)||v.equals(r)?r:s.temporal,R=new A.TransactionInstruction({programId:T.b,keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:C,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:D,isSigner:!1,isWritable:!0},{pubkey:F,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:A.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:E.c,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(c.a)(e.from(P.sha256.digest("global:claim")).slice(0,8)),Object(c.a)(new I.a(M).toArray("le",1)),Object(c.a)(new I.a(b).toArray("le",8)),Object(c.a)(new I.a(f).toArray("le",8)),Object(c.a)(v.toBuffer()),Object(c.a)(new I.a(l.length).toArray("le",4)),Object(c.a)(e.concat(l))))}),t.abrupt("return",[[].concat(N,[R]),w,[]]);case 45:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e,n,r,a,i,c,o,s,u,l){return t.apply(this,arguments)}}(),z=function(){var t=Object(s.a)(i.a.mark((function t(n,r,a,s,u,l,d,f,b,h,p){var m,g,j,y,x,v,w,O,k,S,C,E,P,M,B,K,D,N,R,L,z,G,H,_,J,V,X,Y,Z,Q;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,m=new A.PublicKey(u),t.next=7;break;case 4:throw t.prev=4,t.t0=t.catch(0),new Error("Invalid candy config key ".concat(t.t0));case 7:return t.next=9,U(r,f,p,m);case 9:if(g=t.sent,j=Object(o.a)(g,2),y=j[0],x=j[1],v=e.from([].concat(Object(c.a)(new I.a(h).toArray("le",8)),Object(c.a)(y.toBuffer()),Object(c.a)(m.toBuffer()),Object(c.a)(new I.a(b).toArray("le",8)))),W.a.verifyClaim(v,d,e.from(s.root))){t.next=17;break}throw new Error("Gumdrop merkle proof does not match");case 17:return t.next=19,A.PublicKey.findProgramAddress([e.from("ClaimCount"),e.from(new I.a(h).toArray("le",8)),a.toBuffer()],T.b);case 19:return w=t.sent,O=Object(o.a)(w,2),k=O[0],S=O[1],t.next=25,A.PublicKey.findProgramAddress([e.from("Wallet"),a.toBuffer()],T.b);case 25:return C=t.sent,E=Object(o.a)(C,2),P=E[0],M=E[1],B=s.temporal.equals(A.PublicKey.default)||y.equals(r)?r:s.temporal,K=[],t.next=33,n.getAccountInfo(k);case 33:if(D=t.sent,N=0,null!==D){t.next=38;break}t.next=46;break;case 38:if(R=F.a.accounts.decode("ClaimCount",D.data),N=R.count,!R.claimant.equals(r)){t.next=44;break}B=r,t.next=46;break;case 44:throw L=R.claimant.toBase58(),new Error("This wallet does not match existing claimant ".concat(L));case 46:if(!(N>=(z=b))){t.next=49;break}throw new Error("Cannot mint another NFT. ".concat(z," NFT(s) were originally allocated")+(N>0?" and ".concat(N," NFT(s) were already minted"):""));case 49:return t.next=51,Object(T.g)(m,l);case 51:return G=t.sent,H=Object(o.a)(G,1),_=H[0],t.next=56,Object(T.f)(n,_);case 56:return J=t.sent,console.log("Candy Machine",J),V=[],t.next=61,q(n,r,a,P,k,B,m,_,J.wallet,e.from([].concat(Object(c.a)(new I.a(M).toArray("le",1)),Object(c.a)(new I.a(S).toArray("le",1)),Object(c.a)(new I.a(h).toArray("le",8)),Object(c.a)(new I.a(b).toArray("le",8)),Object(c.a)(y.toBuffer()),Object(c.a)(new I.a(d.length).toArray("le",4)),Object(c.a)(e.concat(d)))));case 61:return X=t.sent,Y=Object(o.a)(X,2),Z=Y[0],Q=Y[1],V.push(Q),K.push.apply(K,Object(c.a)(Z)),t.abrupt("return",[K,x,V]);case 68:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e,n,r,a,i,c,o,s,u,l,d){return t.apply(this,arguments)}}(),q=function(){var t=Object(s.a)(i.a.mark((function t(n,r,a,o,s,u,l,d,f,b){var h,p,m,g;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h=A.Keypair.generate(),t.next=3,Object(T.j)(h.publicKey);case 3:return p=t.sent,t.next=6,Object(T.h)(h.publicKey);case 6:return m=t.sent,g=[],t.next=10,G(n,r,h.publicKey,g);case 10:return g.push(new A.TransactionInstruction({programId:T.b,keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:h.publicKey,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:A.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:E.c,isSigner:!1,isWritable:!1},{pubkey:T.e,isSigner:!1,isWritable:!1},{pubkey:T.a,isSigner:!1,isWritable:!1},{pubkey:A.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:A.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(c.a)(e.from(P.sha256.digest("global:claim_candy")).slice(0,8)),Object(c.a)(b)))})),t.abrupt("return",[g,h]);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r,a,i,c,o,s,u,l){return t.apply(this,arguments)}}(),G=function(){var e=Object(s.a)(i.a.mark((function e(t,n,r,a){var c,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.PublicKey.findProgramAddress([n.toBuffer(),E.c.toBuffer(),r.toBuffer()],T.d);case 2:return c=e.sent,s=Object(o.a)(c,1),u=s[0],e.t0=a,e.t1=A.SystemProgram,e.t2=n,e.t3=r,e.t4=E.b.span,e.next=12,t.getMinimumBalanceForRentExemption(E.b.span);case 12:e.t5=e.sent,e.t6=E.c,e.t7={fromPubkey:e.t2,newAccountPubkey:e.t3,space:e.t4,lamports:e.t5,programId:e.t6},e.t8=e.t1.createAccount.call(e.t1,e.t7),e.t0.push.call(e.t0,e.t8),a.push(E.d.createInitMintInstruction(E.c,r,0,n,n)),a.push(E.d.createAssociatedTokenAccountInstruction(T.d,E.c,r,u,n,n)),a.push(E.d.createMintToInstruction(E.c,r,u,n,[],1));case 20:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),H=function(){var t=Object(s.a)(i.a.mark((function t(n,r,a,s,u,l,d,f,b,h,p){var m,g,j,y,x,v,w,O,k,S,C,M,B,K,D,N,F,R,L,z,q;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,m=new A.PublicKey(u),t.next=7;break;case 4:throw t.prev=4,t.t0=t.catch(0),new Error("Invalid master mint key ".concat(t.t0));case 7:return t.next=9,U(r,f,p,m);case 9:if(g=t.sent,j=Object(o.a)(g,2),y=j[0],x=j[1],v=e.from([].concat(Object(c.a)(new I.a(h).toArray("le",8)),Object(c.a)(y.toBuffer()),Object(c.a)(m.toBuffer()),Object(c.a)(new I.a(b).toArray("le",8)),Object(c.a)(new I.a(l).toArray("le",8)))),W.a.verifyClaim(v,d,e.from(s.root))){t.next=17;break}throw new Error("Gumdrop merkle proof does not match");case 17:return t.next=19,A.PublicKey.findProgramAddress([e.from("ClaimCount"),e.from(new I.a(h).toArray("le",8)),a.toBuffer()],T.b);case 19:return w=t.sent,O=Object(o.a)(w,2),k=O[0],S=O[1],C=s.temporal.equals(A.PublicKey.default)||y.equals(r)?r:s.temporal,t.next=26,n.getAccountInfo(k);case 26:if(null===t.sent){t.next=29;break}throw new Error("This edition was already claimed");case 29:return M=[],B=A.Keypair.generate(),t.next=33,Object(T.j)(B.publicKey);case 33:return K=t.sent,t.next=36,Object(T.j)(m);case 36:return D=t.sent,t.next=39,Object(T.h)(B.publicKey);case 39:return N=t.sent,t.next=42,Object(T.h)(m);case 42:return F=t.sent,t.next=45,G(n,r,B.publicKey,M);case 45:return t.next=47,A.PublicKey.findProgramAddress([a.toBuffer(),E.c.toBuffer(),m.toBuffer()],T.d);case 47:return R=t.sent,L=Object(o.a)(R,1),z=L[0],t.next=52,Object(T.i)(m,new I.a(l));case 52:return q=t.sent,M.push(new A.TransactionInstruction({programId:T.b,keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:C,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:K,isSigner:!1,isWritable:!0},{pubkey:N,isSigner:!1,isWritable:!0},{pubkey:F,isSigner:!1,isWritable:!0},{pubkey:B.publicKey,isSigner:!1,isWritable:!0},{pubkey:q,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:z,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:D,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:A.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:E.c,isSigner:!1,isWritable:!1},{pubkey:T.e,isSigner:!1,isWritable:!1},{pubkey:A.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(c.a)(e.from(P.sha256.digest("global:claim_edition")).slice(0,8)),Object(c.a)(new I.a(S).toArray("le",1)),Object(c.a)(new I.a(h).toArray("le",8)),Object(c.a)(new I.a(b).toArray("le",8)),Object(c.a)(new I.a(l).toArray("le",8)),Object(c.a)(y.toBuffer()),Object(c.a)(new I.a(d.length).toArray("le",4)),Object(c.a)(e.concat(d))))})),t.abrupt("return",[M,x,[B]]);case 55:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e,n,r,a,i,c,o,s,u,l,d){return t.apply(this,arguments)}}(),_=function(){var e=Object(s.a)(i.a.mark((function e(t,n){var r,a,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=new A.PublicKey(n),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new Error("Invalid distributor key ".concat(e.t0));case 7:return e.next=9,t.getAccountInfo(r);case 9:if(null!==(a=e.sent)){e.next=12;break}throw new Error("Could not fetch distributor ".concat(n));case 12:if(a.owner.equals(T.b)){e.next=15;break}throw c=a.owner.toBase58(),new Error("Invalid distributor owner ".concat(c));case 15:return o=F.a.accounts.decode("MerkleDistributor",a.data),e.abrupt("return",[r,o]);case 17:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var t=Object(s.a)(i.a.mark((function t(n,r,a,c){var s,u,l,d,f,b,h;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(n,r);case 2:if(s=t.sent,u=Object(o.a)(s,2),l=u[0],u[1].temporal.equals(T.c)){t.next=10;break}return t.abrupt("return",!1);case 10:if("candy"!==c){t.next=22;break}return t.next=13,A.PublicKey.findProgramAddress([e.from("ClaimCount"),e.from(new I.a(Number(a)).toArray("le",8)),l.toBuffer()],T.b);case 13:return d=t.sent,f=Object(o.a)(d,1),b=f[0],t.next=18,n.getAccountInfo(b);case 18:return h=t.sent,t.abrupt("return",null===h);case 22:return t.abrupt("return",!0);case 23:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),V=function(t){var n=Object(K.i)(),a=Object(C.b)(),u=f.a.parse(t.location.search),d=l.a.useState(u.distributor||""),E=Object(o.a)(d,2),P=E[0],M=E[1],W=l.a.useState(u.tokenAcc?"transfer":u.config?"candy":u.master?"edition":""),N=Object(o.a)(W,2),F=N[0],U=N[1],q=l.a.useState(u.tokenAcc||""),G=Object(o.a)(q,2),V=G[0],X=G[1],Y=l.a.useState(u.config||""),Z=Object(o.a)(Y,2),Q=Z[0],$=Z[1],ee=l.a.useState(u.uuid||""),te=Object(o.a)(ee,2),ne=te[0],re=te[1],ae=l.a.useState(u.master||""),ie=Object(o.a)(ae,2),ce=ie[0],oe=ie[1],se=l.a.useState(u.edition||""),ue=Object(o.a)(se,2),le=ue[0],de=ue[1],fe=l.a.useState(u.handle||""),be=Object(o.a)(fe,2),he=be[0],pe=be[1],me=l.a.useState(u.amount||""),ge=Object(o.a)(me,2),je=ge[0],ye=ge[1],xe=l.a.useState(u.index||""),ve=Object(o.a)(xe,2),we=ve[0],Oe=ve[1],ke=l.a.useState(u.pin||""),Se=Object(o.a)(ke,2),Ce=Se[0],Ae=Se[1],Ee=l.a.useState(u.proof||""),Pe=Object(o.a)(Ee,2),Me=Pe[0],Ie=Pe[1],Be=P.length>0&&("transfer"===F?V.length>0:"candy"===F?Q.length>0&&ne.length>0:"edition"===F&&(ce.length>0&&le.length>0))&&he.length>0&&je.length>0&&we.length>0,Ke=l.a.useState(!Be),Te=Object(o.a)(Ke,2),We=Te[0],De=Te[1],Ne=l.a.useState(null),Fe=Object(o.a)(Ne,2),Re=Fe[0],Ue=Fe[1],Le=l.a.useState(""),ze=Object(o.a)(Le,2),qe=ze[0],Ge=ze[1],He=l.a.useState(!0),_e=Object(o.a)(He,2),Je=_e[0],Ve=_e[1];l.a.useEffect((function(){var e=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=Ve,e.next=4,J(n,P,we,F);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=10;break;case 8:e.prev=8,e.t2=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[n,P,we,F]);var Xe="https://n82bm4ts81.execute-api.us-east-2.amazonaws.com/send-OTP",Ye=function(){var t=Object(s.a)(i.a.mark((function t(s){var l,d,f,b,h,p,m,g,j,y,x,v,w,O,k,S,C,E,M,K,W,D,N,R,U,q,G,J,X;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.preventDefault(),a.connected&&null!==a.publicKey){t.next=3;break}throw new Error("Wallet not connected");case 3:if(l=Number(we),d=Number(je),f=null,!isNaN(d)){t.next=8;break}throw new Error("Could not parse amount ".concat(je));case 8:if(!isNaN(l)){t.next=10;break}throw new Error("Could not parse index ".concat(we));case 10:if("NA"===u.pin){t.next=18;break}t.prev=11,f=new I.a(Ce),t.next=18;break;case 15:throw t.prev=15,t.t0=t.catch(11),new Error("Could not parse pin ".concat(Ce,": ").concat(t.t0));case 18:return t.next=20,_(n,P);case 20:if(b=t.sent,h=Object(o.a)(b,2),p=h[0],m=h[1],console.log("Distributor",m),g=""===Me?[]:Me.split(",").map((function(t){var n=e.from(B.decode(t));if(32!==n.length)throw new Error("Invalid proof hash length");return n})),"candy"!==F){t.next=37;break}return console.log("Building candy claim"),t.next=30,z(n,a.publicKey,p,m,Q,ne,g,he,d,l,f);case 30:v=t.sent,w=Object(o.a)(v,3),j=w[0],y=w[1],x=w[2],t.next=61;break;case 37:if("transfer"!==F){t.next=47;break}return t.next=40,L(n,a.publicKey,p,m,V,g,he,d,l,f);case 40:O=t.sent,k=Object(o.a)(O,3),j=k[0],y=k[1],x=k[2],t.next=61;break;case 47:if("edition"!==F){t.next=60;break}if(S=Number(le),!isNaN(S)){t.next=51;break}throw new Error("Could not parse edition ".concat(le));case 51:return t.next=53,H(n,a.publicKey,p,m,ce,S,g,he,d,l,f);case 53:C=t.sent,E=Object(o.a)(C,3),j=E[0],y=E[1],x=E[2],t.next=61;break;case 60:throw new Error("Unknown claim method ".concat(F));case 61:if(!(null===f&&y.length>0)){t.next=63;break}throw new Error("Internal error: PDA generated when distributing to wallet directly");case 63:return t.t1=A.Transaction,t.t2=a.publicKey,t.next=67,n.getRecentBlockhash("singleGossip");case 67:t.t3=t.sent.blockhash,t.t4={feePayer:t.t2,recentBlockhash:t.t3},M=new t.t1(t.t4),K=new Set,W=Object(r.a)(j);try{for(W.s();!(D=W.n()).done;){N=D.value,M.add(N),R=Object(r.a)(N.keys);try{for(R.s();!(U=R.n()).done;)(q=U.value).isSigner&&K.add(q.pubkey)}catch(i){R.e(i)}finally{R.f()}}}catch(i){W.e(i)}finally{W.f()}if(console.log("Expecting the following signers: ".concat(Object(c.a)(K).map((function(e){return e.toBase58()})))),M.setSigners.apply(M,Object(c.a)(K)),x.length>0&&M.partialSign.apply(M,Object(c.a)(x)),!M.signatures.some((function(e){return e.publicKey.equals(T.c)}))){t.next=98;break}return G={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:"send",transaction:B.encode(M.serializeMessage()),seeds:y})},t.next=81,fetch(Xe,G);case 81:if(J=t.sent,console.log(J),200===J.status){t.next=85;break}throw new Error("Failed to send AWS OTP");case 85:return t.prev=85,t.next=88,J.json();case 88:X=t.sent,t.next=94;break;case 91:throw t.prev=91,t.t5=t.catch(85),new Error("Could not parse AWS OTP response");case 94:if(console.log("AWS OTP response data:",X),X.MessageId){t.next=97;break}throw new Error("Failed to send AWS OTP");case 97:Object(T.k)({message:"OTP sent",description:"Please check ".concat(he," for a OTP")});case 98:return t.abrupt("return",M);case 99:case"end":return t.stop()}}),t,null,[[11,15],[85,91]])})));return function(e){return t.apply(this,arguments)}}(),Ze=function(){var e=Object(s.a)(i.a.mark((function e(t,r){var c,o,s,u,l,d,f,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r){e.next=3;break}throw new Error("Transaction not available for OTP verification");case 3:if(a.connected&&null!==a.publicKey){e.next=5;break}throw new Error("Wallet not connected");case 5:if(!r.signatures.some((function(e){return e.publicKey.equals(T.c)}))){e.next=36;break}if(c=Number(qe),!isNaN(c)&&0!==qe.length){e.next=10;break}throw new Error("Could not parse OTP ".concat(qe));case 10:return o={method:"POST",headers:{"Content-Type":"application/json"},FunctionName:"send-OTP",body:JSON.stringify({method:"verify",otp:c,handle:he})},e.next=13,fetch(Xe,o);case 13:if(s=e.sent,console.log(s),200===s.status){e.next=18;break}throw u=JSON.stringify(s),new Error("Failed to verify AWS OTP. ".concat(u));case 18:return e.prev=18,e.next=21,s.json();case 21:l=e.sent,e.next=27;break;case 24:throw e.prev=24,e.t0=e.catch(18),new Error("Could not parse AWS OTP verification response");case 27:console.log("AWS verify response data:",l),e.prev=28,d=B.decode(l),e.next=35;break;case 32:throw e.prev=32,e.t1=e.catch(28),new Error("Could not decode transaction signature ".concat(l.body));case 35:r.addSignature(T.c,d);case 36:return e.prev=36,e.next=39,a.signTransaction(r);case 39:f=e.sent,e.next=45;break;case 42:throw e.prev=42,e.t2=e.catch(36),new Error("Failed to sign transaction");case 45:return e.next=47,Object(D.c)({connection:n,signedTransaction:f});case 47:return h=e.sent,console.log(h),Object(T.k)({message:"Claim succeeded",description:Object(R.jsx)(b.a,{href:Object(D.b)(h.txid,n),children:"View transaction on explorer"})}),Ue(null),e.prev=51,e.t3=Ve,e.next=55,J(n,P,we,F);case 55:e.t4=e.sent,(0,e.t3)(e.t4),e.next=61;break;case 59:e.prev=59,e.t5=e.catch(51);case 61:case"end":return e.stop()}}),e,null,[[18,24],[28,32],[36,42],[51,59]])})));return function(t,n){return e.apply(this,arguments)}}(),Qe=l.a.useState(!1),$e=Object(o.a)(Qe,2),et=$e[0],tt=$e[1],nt=function(){return Object(R.jsx)(h.a,{size:24,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})},rt=function(e){return"candy"===e?Object(R.jsxs)(l.a.Fragment,{children:[Object(R.jsx)(p.a,{style:{width:"60ch"},id:"config-text-field",label:"Candy Config",value:Q,onChange:function(e){return $(e.target.value)},disabled:!We}),Object(R.jsx)(p.a,{style:{width:"60ch"},id:"config-uuid-text-field",label:"Candy UUID",value:ne,onChange:function(e){return re(e.target.value)},disabled:!We})]}):"transfer"===e?Object(R.jsx)(l.a.Fragment,{children:Object(R.jsx)(p.a,{style:{width:"60ch"},id:"token-acc-text-field",label:"Source Token Account",value:V,onChange:function(e){return X(e.target.value)},disabled:!We})}):"edition"===e?Object(R.jsxs)(l.a.Fragment,{children:[Object(R.jsx)(p.a,{style:{width:"60ch"},id:"master-mint-text-field",label:"Master Mint",value:ce,onChange:function(e){return oe(e.target.value)},disabled:!We}),Object(R.jsx)(p.a,{style:{width:"60ch"},id:"edition-text-field",label:"Edition",value:le,onChange:function(e){return de(e.target.value)},disabled:!We})]}):void 0},at=[{name:"Populate Claim",inner:function(e){return Object(R.jsxs)(l.a.Fragment,{children:[Object(R.jsx)(p.a,{style:{width:"60ch"},id:"distributor-text-field",label:"Distributor",value:P,onChange:function(e){return M(e.target.value)},disabled:!We}),Object(R.jsxs)(j.a,{fullWidth:!0,children:[Object(R.jsx)(y.a,{id:"claim-method-label",disabled:!We,children:"Claim Method"}),Object(R.jsxs)(x.a,{labelId:"claim-method-label",id:"claim-method-select",value:F,label:"Claim Method",onChange:function(e){U(e.target.value)},style:{textAlign:"left"},disabled:!We,children:[Object(R.jsx)(v.a,{value:"transfer",children:"Token Transfer"}),Object(R.jsx)(v.a,{value:"candy",children:"Candy Machine"}),Object(R.jsx)(v.a,{value:"edition",children:"Limited Edition"})]})]}),""!==F&&rt(F),"edition"!==F&&Object(R.jsx)(p.a,{style:{width:"60ch"},id:"amount-text-field",label:"Amount",value:je,onChange:function(e){return ye(e.target.value)},disabled:!We}),Object(R.jsx)(p.a,{style:{width:"60ch"},id:"handle-text-field",label:"Handle",value:he,onChange:function(e){return pe(e.target.value)},disabled:!We}),Object(R.jsx)(p.a,{style:{width:"60ch"},id:"index-text-field",label:"Index",value:we,onChange:function(e){return Oe(e.target.value)},disabled:!We}),"NA"!==u.pin&&Object(R.jsx)(p.a,{style:{width:"60ch"},id:"pin-text-field",label:"Pin",value:Ce,onChange:function(e){return Ae(e.target.value)},disabled:!We}),Object(R.jsx)(p.a,{style:{width:"60ch"},id:"proof-text-field",label:"Proof",multiline:!0,value:Me,onChange:function(e){return Ie(e.target.value)},disabled:!We}),Object(R.jsx)(g.a,{color:"info",onClick:function(e){return De(!We)},children:We?"Stop Editing":"Edit Claim"}),Object(R.jsx)(m.a,{}),Object(R.jsxs)(m.a,{sx:{position:"relative"},children:[Object(R.jsx)(g.a,{disabled:!a.connected||!Be||et,variant:"contained",style:{width:"100%"},color:Je?"primary":"success",onClick:function(t){tt(!0);var r=function(){var r=Object(s.a)(i.a.mark((function r(){var a,c;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,J(n,P,we,F);case 3:return a=r.sent,r.next=6,Ye(t);case 6:if(c=r.sent,a){r.next=12;break}return r.next=10,Ze(t,c);case 10:r.next=13;break;case 12:Ue(c);case 13:tt(!1),e(),r.next=21;break;case 17:r.prev=17,r.t0=r.catch(0),Object(T.k)({message:"Claim failed",description:"".concat(r.t0)}),tt(!1);case 21:case"end":return r.stop()}}),r,null,[[0,17]])})));return function(){return r.apply(this,arguments)}}();r()},children:Je?"Next":"Claim Gumdrop"}),et&&nt()]})]})}}];Je&&at.push({name:"Verify OTP",inner:function(e){return Object(R.jsxs)(l.a.Fragment,{children:[Object(R.jsx)(p.a,{style:{width:"60ch"},id:"otp-text-field",label:"OTP",value:qe,onChange:function(e){return Ge(e.target.value)}}),Object(R.jsx)(m.a,{}),Object(R.jsxs)(m.a,{sx:{position:"relative"},children:[Object(R.jsx)(g.a,{disabled:!a.connected||!qe||et,variant:"contained",color:"success",style:{width:"100%"},onClick:function(t){tt(!0);var n=function(){var n=Object(s.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ze(t,Re);case 3:tt(!1),e(),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),Object(T.k)({message:"Claim failed",description:"".concat(n.t0)}),tt(!1);case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();n()},children:"Claim Gumdrop"}),et&&nt()]})]})}});var it=l.a.useState(0),ct=Object(o.a)(it,2),ot=ct[0],st=ct[1],ut=Math.min(ot,at.length-1),lt=Object(R.jsxs)(l.a.Fragment,{children:[Object(R.jsx)(w.a,{activeStep:ut,children:at.map((function(e,t){return Object(R.jsx)(O.a,{children:Object(R.jsx)(k.a,{children:e.name})},e.name)}))}),Object(R.jsx)(m.a,{})]});return Object(R.jsxs)(S.a,{spacing:2,children:[Je&&lt,at[ut].inner((function(){st((function(e){return e===at.length-1?0:e+1}))})),ut>0&&Object(R.jsx)(g.a,{color:"info",onClick:function(){st((function(e){return e-1}))},children:"Back"})]})}}).call(this,n(18).Buffer)},528:function(e,t){},529:function(e,t){},55:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return a.ENDPOINTS})),n.d(t,"d",(function(){return a.ConnectionProvider})),n.d(t,"i",(function(){return a.useConnection})),n.d(t,"j",(function(){return a.useConnectionConfig})),n.d(t,"l",(function(){return p})),n.d(t,"g",(function(){return y})),n.d(t,"f",(function(){return m})),n.d(t,"k",(function(){return v})),n.d(t,"b",(function(){return w.a})),n.d(t,"h",(function(){return w.b}));var r=n(232),a=n(125),i=n(9),c=n(81),o=n(148),s=n(221),u=n(1),l=n.n(u),d=n(36),f=n(211),b=(n(901),n(95),n(5)),h=(n(260),n.p,Object(u.createContext)({}));function p(){return Object(u.useContext)(h)}var m,g=function(){var e=Object(c.b)(),t=e.wallets,n=e.wallet,r=e.select,a=p(),o=a.visible,l=a.setVisible,d=Object(u.useState)(!1),h=Object(i.a)(d,2)[1],m=Object(u.useCallback)((function(){l(!1),h(!1)}),[l,h]);return Object(b.jsxs)(f.a,{visible:o,onCancel:m,children:[Object(b.jsx)("div",{style:{background:"linear-gradient(180deg, #D329FC 0%, #8F6DDE 49.48%, #19E6AD 100%)",borderRadius:36,width:50,height:50,textAlign:"center",verticalAlign:"middle",fontWeight:700,fontSize:"1.3rem",lineHeight:2.4,marginBottom:10}}),Object(b.jsx)("h2",{style:{color:"white",fontWeight:"bold",fontSize:20},children:n?"Change provider":""}),Object(b.jsx)("p",{style:{color:"white",fontSize:14},children:n?"Choose from the following options:":"Please sign into your wallet"}),Object(b.jsx)("br",{}),t.map((function(e){return Object(b.jsx)(s.a,{size:"large",type:e===n?"primary":"ghost",onClick:function(){r(e.name),m()},icon:Object(b.jsx)("img",{alt:"".concat(e.name),width:20,height:20,src:e.icon,style:{marginRight:30,float:"left"}}),style:{display:"block",width:"100%",textAlign:"left",marginBottom:8,color:"white"},children:e.name},e.name)}))]})},j=function(e){var t=e.children,n=Object(c.b)().publicKey,r=Object(u.useState)(!!n),a=Object(i.a)(r,2),o=a[0],s=a[1],l=Object(u.useState)(!1),f=Object(i.a)(l,2),p=f[0],m=f[1];return Object(u.useEffect)((function(){if(n){var e=n.toBase58(),t=e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e;Object(d.k)({message:"Wallet update",description:"Connected to wallet "+t})}}),[n]),Object(u.useEffect)((function(){!n&&o&&Object(d.k)({message:"Wallet update",description:"Disconnected from wallet"}),s(!!n)}),[n,o,s]),Object(b.jsxs)(h.Provider,{value:{visible:p,setVisible:m},children:[t,Object(b.jsx)(g,{})]})},y=function(e){var t=e.children,n=Object(u.useMemo)((function(){return[Object(o.c)(),Object(o.d)(),Object(o.g)({options:{clientId:"BEB_D44HovHuXH0Ace97QVqSu1ahCKndjpGhzhVcMy_9XmDTbHyqTbzQTufcyaN0kFwtlVbfPzJwpJXg94gWJqE",uxMode:"redirect",redirectUrl:"https://lwus.github.io/gumdrop"}}),Object(o.a)(),Object(o.f)(),Object(o.b)(),Object(o.e)()]}),[]),r=Object(u.useCallback)((function(e){console.error(e),Object(d.k)({message:"Wallet error",description:JSON.stringify(e,Object.getOwnPropertyNames(e))})}),[]);return Object(b.jsx)(c.a,{wallets:n,onError:r,autoConnect:!0,children:Object(b.jsx)(j,{children:t})})};!function(e){e.WALLET="wallet"}(m||(m={}));var x=l.a.createContext({setModal:function(){return null},removeModal:function(){return null}}),v=function(){var e=Object(u.useContext)(x);if(void 0===e)throw new Error("useModal must be used within a ModalProvider");return e},w=n(262)},550:function(e,t){},551:function(e,t){},610:function(e,t){},612:function(e,t){},626:function(e,t){},630:function(e,t){},632:function(e,t){},644:function(e,t){},646:function(e,t){},673:function(e,t){},675:function(e,t){},680:function(e,t){},682:function(e,t){},689:function(e,t){},701:function(e,t){},704:function(e,t){},715:function(e,t){},723:function(e,t,n){},800:function(e,t,n){},804:function(e){e.exports=JSON.parse('{"version":"0.0.0","name":"merkle_distributor","instructions":[{"name":"newDistributor","accounts":[{"name":"base","isMut":false,"isSigner":true},{"name":"distributor","isMut":true,"isSigner":false},{"name":"payer","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"root","type":{"array":["u8",32]}},{"name":"temporal","type":"publicKey"}]},{"name":"closeDistributor","accounts":[{"name":"base","isMut":false,"isSigner":true},{"name":"distributor","isMut":true,"isSigner":false},{"name":"distributorWallet","isMut":true,"isSigner":false},{"name":"receiver","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"walletBump","type":"u8"}]},{"name":"claim","accounts":[{"name":"distributor","isMut":true,"isSigner":false},{"name":"claimStatus","isMut":true,"isSigner":false},{"name":"from","isMut":true,"isSigner":false},{"name":"to","isMut":true,"isSigner":false},{"name":"temporal","isMut":false,"isSigner":true},{"name":"payer","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"index","type":"u64"},{"name":"amount","type":"u64"},{"name":"claimantSecret","type":"publicKey"},{"name":"proof","type":{"vec":{"array":["u8",32]}}}]},{"name":"claimCandy","accounts":[{"name":"distributor","isMut":true,"isSigner":false},{"name":"distributorWallet","isMut":true,"isSigner":false},{"name":"claimCount","isMut":true,"isSigner":false},{"name":"temporal","isMut":false,"isSigner":true},{"name":"payer","isMut":false,"isSigner":true},{"name":"candyMachineConfig","isMut":false,"isSigner":false},{"name":"candyMachine","isMut":true,"isSigner":false},{"name":"candyMachineWallet","isMut":true,"isSigner":false},{"name":"candyMachineMint","isMut":true,"isSigner":false},{"name":"candyMachineMetadata","isMut":true,"isSigner":false},{"name":"candyMachineMasterEdition","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"tokenMetadataProgram","isMut":false,"isSigner":false},{"name":"candyMachineProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"clock","isMut":false,"isSigner":false}],"args":[{"name":"walletBump","type":"u8"},{"name":"claimBump","type":"u8"},{"name":"index","type":"u64"},{"name":"amount","type":"u64"},{"name":"claimantSecret","type":"publicKey"},{"name":"proof","type":{"vec":{"array":["u8",32]}}}]}],"accounts":[{"name":"MerkleDistributor","type":{"kind":"struct","fields":[{"name":"base","type":"publicKey"},{"name":"bump","type":"u8"},{"name":"root","type":{"array":["u8",32]}},{"name":"temporal","type":"publicKey"}]}},{"name":"ClaimStatus","type":{"kind":"struct","fields":[{"name":"isClaimed","type":"bool"},{"name":"claimant","type":"publicKey"},{"name":"claimedAt","type":"i64"},{"name":"amount","type":"u64"}]}},{"name":"ClaimCount","type":{"kind":"struct","fields":[{"name":"count","type":"u64"},{"name":"claimant","type":"publicKey"}]}},{"name":"CandyMachine","type":{"kind":"struct","fields":[{"name":"authority","type":"publicKey"},{"name":"wallet","type":"publicKey"},{"name":"tokenMint","type":{"option":"publicKey"}},{"name":"config","type":"publicKey"},{"name":"data","type":{"defined":"CandyMachineData"}},{"name":"itemsRedeemed","type":"u64"},{"name":"bump","type":"u8"}]}}],"types":[{"name":"CandyMachineData","type":{"kind":"struct","fields":[{"name":"uuid","type":"string"},{"name":"price","type":"u64"},{"name":"itemsAvailable","type":"u64"},{"name":"goLiveDate","type":{"option":"i64"}}]}}],"events":[{"name":"ClaimedEvent","fields":[{"name":"index","type":"u64","index":false},{"name":"claimant","type":"publicKey","index":false},{"name":"amount","type":"u64","index":false}]}],"errors":[{"code":300,"name":"InvalidProof","msg":"Invalid Merkle proof."},{"code":301,"name":"DropAlreadyClaimed","msg":"Drop already claimed."},{"code":302,"name":"Unauthorized","msg":"Account is not authorized to execute this instruction"},{"code":303,"name":"OwnerMismatch","msg":"Token account owner did not match intended owner"},{"code":304,"name":"TemporalMismatch","msg":"Temporal signer did not match distributor"}]}')},837:function(e){e.exports=JSON.parse('[{"handle":"alice@solana.com","mint":"58iV1fAXFvXoPk28xpB2ihedEnM9HSRkiPHXXm1r4V8z","amount":1500000000},{"handle":"bob@solana.com","mint":"58iV1fAXFvXoPk28xpB2ihedEnM9HSRkiPHXXm1r4V8z","amount":1500000000}]')},838:function(e,t,n){},84:function(e,t,n){"use strict";(function(e){n.d(t,"h",(function(){return b})),n.d(t,"d",(function(){return h})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return j})),n.d(t,"g",(function(){return y})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return v}));var r=n(9),a=n(2),i=n.n(a),c=n(8),o=n(160),s=n(7),u=n(44),l=n(26),d=n.n(l),f=n(40),b=function(){var t=Object(c.a)(i.a.mark((function t(n,r){var a,c,o,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,a=new s.PublicKey(r),t.next=7;break;case 4:throw t.prev=4,t.t0=t.catch(0),new Error("Invalid mint key ".concat(t.t0));case 7:return t.next=9,n.getAccountInfo(a);case 9:if(null!==(c=t.sent)){t.next=12;break}throw new Error("Could not fetch mint");case 12:if(c.owner.equals(f.i)){t.next=15;break}throw o=c.owner.toBase58(),new Error("Invalid mint owner ".concat(o));case 15:if(c.data.length===u.b.span){t.next=17;break}throw new Error("Invalid mint size ".concat(c.data.length));case 17:return l=u.b.decode(e.from(c.data)),t.abrupt("return",{key:a,info:l});case 19:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e,n){return t.apply(this,arguments)}}(),h=function(){var t=Object(c.a)(i.a.mark((function t(n,a,c,o){var l,b,h,p,m;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.PublicKey.findProgramAddress([n.toBuffer(),f.i.toBuffer(),c.toBuffer()],f.f);case 2:return l=t.sent,b=Object(r.a)(l,1),h=b[0],t.next=7,a.getAccountInfo(h);case 7:if(null!==(p=t.sent)){t.next=10;break}throw new Error("Could not fetch creator token account");case 10:if(p.data.length===u.a.span){t.next=12;break}throw new Error("Invalid token account size ".concat(p.data.length));case 12:if(m=u.a.decode(e.from(p.data)),!(new d.a(m.amount,8,"le").toNumber()<o)){t.next=15;break}throw new Error("Creator token account does not have enough tokens");case 15:return t.abrupt("return",h);case 16:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o.a,e.next=3,o.b.fetchIdl(t,{connection:n});case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=new s.PublicKey(n),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new Error("Invalid config key ".concat(e.t0));case 7:return e.next=9,t.getAccountInfo(r);case 9:if(null!==(a=e.sent)){e.next=12;break}throw new Error("Could not fetch config");case 12:if(a.owner.equals(f.b)){e.next=14;break}throw new Error("Invalid config owner ".concat(a.owner.toBase58()));case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var t=Object(c.a)(i.a.mark((function t(n,r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.PublicKey.findProgramAddress([e.from("candy_machine"),n.toBuffer(),e.from(r)],f.b);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(f.b,t);case 2:if(null!==(r=e.sent)){e.next=5;break}throw new Error("Could not fetch candy machine IDL");case 5:return e.next=7,t.getAccountInfo(n);case 7:if(null!==(a=e.sent)){e.next=10;break}throw new Error("Could not fetch candy machine");case 10:return e.abrupt("return",r.accounts.decode("CandyMachine",a.data));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var t=Object(c.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.PublicKey.findProgramAddress([e.from("metadata"),f.h.toBuffer(),n.toBuffer()],f.h);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Object(c.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.PublicKey.findProgramAddress([e.from("metadata"),f.h.toBuffer(),n.toBuffer(),e.from("edition")],f.h);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(c.a)(i.a.mark((function t(n,r){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.div(new d.a(248)).toNumber(),t.next=3,s.PublicKey.findProgramAddress([e.from("metadata"),f.h.toBuffer(),n.toBuffer(),e.from("edition"),e.from(String(a))],f.h);case 3:return t.abrupt("return",t.sent[0]);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}).call(this,n(18).Buffer)},840:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(48),c=n.n(i),o=n(55),s=(n(796),n(797),n(798),n(799),n(9)),u=n(228),l=n(59),d=n(498),f=n(907),b=n(898),h=n(507),p=n(853),m=n(230),g=(n(800),n(149)),j=n(488),y=n.n(j),x=n(260),v=n(5),w=function(){return Object(v.jsxs)(m.a,{sx:{display:"flex",bgcolor:"action.disabledBackground",overflow:"auto"},minWidth:"60ch",children:[Object(v.jsxs)(h.a,{direction:"row",spacing:2,sx:{display:"flex",height:"62px",justifyContent:"flex-start",alignItems:"center",marginLeft:"36px"},children:[Object(v.jsx)(p.a,{href:"#/",underline:"none",children:Object(v.jsx)(g.a,{variant:"outlined",children:Object(v.jsx)(y.a,{})})}),Object(v.jsx)(p.a,{href:"#/create",underline:"none",children:Object(v.jsx)(g.a,{variant:"outlined",children:"Create"})}),Object(v.jsx)(p.a,{href:"#/claim",underline:"none",children:Object(v.jsx)(g.a,{variant:"outlined",children:"Claim"})}),Object(v.jsx)(p.a,{href:"#/close",underline:"none",children:Object(v.jsx)(g.a,{variant:"outlined",children:"Close"})})]}),Object(v.jsx)(m.a,{sx:{flexGrow:1,minWidth:"36px"}}),Object(v.jsx)(x.a,{})]})},O=n(489),k=n(2),S=n.n(k),C=n(8),A=n(98),E=n(510),P=n(854),M=n(850),I=n(359),B=n(81),K=n(7),T=n(36),W=n(97),D=n(105),N=function(){var e=Object(o.i)(),t=Object(B.b)(),n=a.a.useState(""),r=Object(s.a)(n,2),i=r[0],c=r[1],u=a.a.useState(localStorage.getItem("claimMethod")||"transfer"),l=Object(s.a)(u,2),d=l[0],f=l[1],b=a.a.useState(localStorage.getItem("candyConfig")||""),m=Object(s.a)(b,2),j=m[0],y=m[1],x=a.a.useState(localStorage.getItem("candyUUID")||""),w=Object(s.a)(x,2),O=w[0],k=w[1],N=a.a.useState(localStorage.getItem("masterMint")||""),F=Object(s.a)(N,2),R=F[0],U=F[1],L=function(){var n=Object(C.a)(S.a.mark((function n(r){var a,c,s;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),t.connected&&null!==t.publicKey){n.next=3;break}throw new Error("Wallet not connected");case 3:return a=K.Keypair.fromSecretKey(new Uint8Array(JSON.parse(i))),n.next=6,Object(W.c)(e,t.publicKey,a,d,j,O,R);case 6:return c=n.sent,n.next=9,o.c.sendTransactionWithRetry(e,t,c,[a]);case 9:s=n.sent,console.log(s),"string"===typeof s?Object(T.k)({message:"Close failed",description:s}):Object(T.k)({message:"Close succeeded",description:Object(v.jsx)(p.a,{href:Object(D.b)(s.txid,e),children:"View transaction on explorer"})});case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(v.jsxs)(h.a,{spacing:2,children:[Object(v.jsx)(A.a,{style:{width:"60ch"},id:"base-text-field",label:"Base Private Key",value:i,onChange:function(e){return c(e.target.value)}}),Object(v.jsxs)(E.a,{fullWidth:!0,children:[Object(v.jsx)(P.a,{id:"claim-method-label",children:"Claim Method"}),Object(v.jsxs)(M.a,{labelId:"claim-method-label",id:"claim-method-select",value:d,label:"Claim Method",onChange:function(e){localStorage.setItem("claimMethod",e.target.value),f(e.target.value)},style:{textAlign:"left"},children:[Object(v.jsx)(I.a,{value:"transfer",children:"Token Transfer"}),Object(v.jsx)(I.a,{value:"candy",children:"Candy Machine"}),Object(v.jsx)(I.a,{value:"edition",children:"Limited Edition"})]})]}),""!==d&&function(e){return"candy"===e?Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)(A.a,{style:{width:"60ch"},id:"config-text-field",label:"Candy Config",value:j,onChange:function(e){return y(e.target.value)}}),Object(v.jsx)(A.a,{style:{width:"60ch"},id:"config-uuid-text-field",label:"Candy UUID",value:O,onChange:function(e){return k(e.target.value)}})]}):"transfer"===e?null:"edition"===e?Object(v.jsx)(a.a.Fragment,{children:Object(v.jsx)(A.a,{style:{width:"60ch"},id:"master-mint-text-field",label:"Master Mint",value:R,onChange:function(e){return U(e.target.value)}})}):void 0}(d),Object(v.jsx)(g.a,{disabled:!t.connected||!i,variant:"contained",onClick:function(e){var t=function(){var t=Object(C.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(T.k)({message:"Close failed",description:"".concat(t.t0)});case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}();t()},children:"Close Gumdrop"})]})},F=n(35),R=n(909),U=n(910),L=n(911),z=n(912),q=n(913),G=n(914),H=n(858),_=n(495),J=n.n(_),V=n(26),X=n.n(V),Y=n(34),Z=n(66),Q=n.n(Z),$=n(900),ee=n(904),te=(n(899),n(903),function(e,t,n){var r=function(e,t){return n?'<a href="'.concat(e,'">').concat(t,"</a>"):"".concat(t," ").concat(e)};if("Token"===t.type)return{subject:"Gumdrop Token Drop",message:"You received ".concat(e.amount," token(s) ")+"(click ".concat(r(t.meta,"here")," to view more information about the token mint). ")+r(e.url,"Click here to claim them!")};if("Candy"===t.type)return{subject:"Gumdrop NFT Drop",message:"You received ".concat(e.amount," Candy Machine pre-sale mint(s) ")+"(click ".concat(r(t.meta,"here")," to view the candy machine configuration on explorer). ")+r(e.url,"Click here to claim them!")};if("Edition"===t.type)return{subject:"Gumdrop NFT Drop",message:"You received ".concat(e.amount," limited-edition print(s) ")+"(click ".concat(r(t.meta,"here")," to view the master edition mint on explorer). ")+r(e.url,"Click here to claim them!")};throw new Error("Internal Error: Unknown drop type ".concat(t.type))}),ne=function(){var e=Object(C.a)(S.a.mark((function e(t,n,r,a){var i,c,o,s,u,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.accessKeyId&&t.secretAccessKey){e.next=2;break}throw new Error("AWS SES auth keys not supplied");case 2:if(0!==r.length){e.next=4;break}return e.abrupt("return",[]);case 4:Q.a.debug("SES auth",t),i=new $.a({region:"us-east-2",credentials:{accessKeyId:t.accessKeyId,secretAccessKey:t.secretAccessKey}}),c=function(){var e=Object(C.a)(S.a.mark((function e(t,r){var a,c,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=te(t,r,!0),c={Destination:{ToAddresses:[t.handle]},Content:{Simple:{Subject:{Data:a.subject,Charset:"utf-8"},Body:{Html:{Data:a.message+"<br><br><div>If you would like to unsubscribe from new Gumdrops, change your subscription preferences here: <a href='{{amazonSESUnsubscribeUrl}}'>AWS subscription preferences</a></div>",Charset:"utf-8"}}}},FromEmailAddress:n,ListManagementOptions:{ContactListName:"Gumdrop",TopicName:r.type}},e.prev=2,e.next=5,i.send(new ee.a(c));case 5:return o=e.sent,e.abrupt("return",{status:"success",handle:t.handle,messageId:o.MessageId});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",{status:"error",handle:t.handle,error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}(),o=Array(),s=Object(Y.a)(r),e.prev=9,s.s();case 11:if((u=s.n()).done){e.next=20;break}return l=u.value,e.t0=o,e.next=16,c(l,a);case 16:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 18:e.next=11;break;case 20:e.next=25;break;case 22:e.prev=22,e.t2=e.catch(9),s.e(e.t2);case 25:return e.prev=25,s.f(),e.finish(25);case 28:return e.abrupt("return",o);case 29:case"end":return e.stop()}}),e,null,[[9,22,25,28]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),re=function(){var e=Object(C.a)(S.a.mark((function e(t,n,r,a){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Array());case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),ae=function(){var e=Object(C.a)(S.a.mark((function e(t,n,r,a){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Array());case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),ie=function(e){return e.map((function(e){return{handle:e.handle,amount:e.amount,url:e.url}}))},ce=n(262),oe=function(e){var t=a.a.useRef(null),n=a.a.useState(0),r=Object(s.a)(n,2),i=r[0],c=r[1],o=a.a.useState(!1),u=Object(s.a)(o,2),l=u[0],d=u[1],f=function(e){e.preventDefault(),e.stopPropagation()},b=function(e){e.preventDefault(),e.stopPropagation(),c(i+1),e.dataTransfer.items&&e.dataTransfer.items.length>0&&d(!0)},h=function(e){e.preventDefault(),e.stopPropagation();var t=i-1;c(t),0===t&&d(!1)},p=function(t){t.preventDefault(),t.stopPropagation(),d(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0&&(e.handleDrop(t.dataTransfer.files),t.dataTransfer.clearData(),c(0))};a.a.useEffect((function(){var e=t.current;if(null!==e)return e.addEventListener("dragenter",b),e.addEventListener("dragleave",h),e.addEventListener("dragover",f),e.addEventListener("drop",p),function(){e.removeEventListener("dragenter",b),e.removeEventListener("dragleave",h),e.removeEventListener("dragover",f),e.removeEventListener("drop",p)}}));var m="dark"===Object(ce.b)().mode?"rgba(255,255,255,.1)":"rgba(0, 0, 0,.1)";return Object(v.jsx)("div",{ref:t,style:l?{backgroundColor:m}:{},children:e.children})},se=n(211),ue=function(){var e=new Uint8Array(4);return window.crypto.getRandomValues(e),e},le="\xa0",de=function(e,t,n,r,a){if("AWS SES"===e)return ne(t,n,r,a);if("Manual"===e)return re(t,n,r,a);if("Wallets"===e)return ae(t,n,r,a);throw new Error("Unrecognized claim distribution method ".concat(e))},fe=function(e){var t=document.createElement("div");document.body.appendChild(t);var n=function(){c.a.unmountComponentAtNode(t),document.body.removeChild(t)};return new Promise((function(n){!function(n){var r=n.onSubmit,a=n.onDismiss;c.a.render(e({onSubmit:r,onDismiss:a,show:!0}),t)}({onSubmit:function(e){return n(e)},onDismiss:function(){return n(void 0)}})})).finally((function(){!function(n,r){var a=n.onSubmit,i=n.onDismiss;c.a.render(e({onSubmit:a,onDismiss:i,show:!1}),t,r)}({onSubmit:function(){},onDismiss:function(){}},n)}))},be=function(e){var t=e.show,n=e.onSubmit,r=e.onDismiss,a=[{click:function(){return n("create")},name:"Create and Send"},{click:function(){return n("send")},name:"Send only"}];return Object(v.jsxs)(se.a,{visible:t,onCancel:r,width:"70ch",children:[Object(v.jsx)("p",{style:{color:"white",fontSize:"1rem",width:"50ch",marginTop:8},children:"Uploaded distribution list has URLs for all claimants. Skip creation of airdrop and only re-send links?"}),Object(v.jsx)("br",{}),Object(v.jsx)(h.a,{direction:"row",spacing:2,children:a.map((function(e){return Object(v.jsx)(g.a,{style:{width:"30ch",color:"white",marginBottom:8},variant:"outlined",onClick:e.click,children:e.name},e.name)}))})]})},he=function(e){var t=encodeURIComponent(JSON.stringify(e));return"data:text/plain;charset=utf-8,".concat(t)},pe=function(e,t,n,r,a){var i=1e3;return function(c){var o=c.show,s=c.onSubmit,u=c.onDismiss;return Object(v.jsxs)(se.a,{visible:o,onCancel:u,width:"70ch",children:[Object(v.jsxs)("h2",{style:{color:"white",fontWeight:"bold",fontSize:20},children:["Claim Distribution Preview",e.length>i?" (First ".concat(i,")"):""]}),Object(v.jsx)("p",{style:{color:"white",fontSize:14,textAlign:"center"},children:"Approving will save the keypair authority generated for gumdrop state. This keypair is necessary to close the gumdrop later!"}),Object(v.jsx)(R.a,{sx:{"td, th":{color:"white"},backgroundColor:"#444444",borderRadius:"5px",maxHeight:"30ch"},children:Object(v.jsxs)(U.a,{size:"small",children:[Object(v.jsx)(L.a,{children:Object(v.jsxs)(z.a,{children:[Object(v.jsx)(q.a,{children:"Handle"}),Object(v.jsx)(q.a,{children:"edition"===n?"Edition":"Tokens"}),t&&Object(v.jsx)(q.a,{children:"Pin"})]})}),Object(v.jsx)(G.a,{children:e.slice(0,i).map((function(e,a){return Object(v.jsxs)(z.a,{sx:{"td, th":{border:0}},children:[Object(v.jsxs)(q.a,{component:"th",scope:"row",children:[e.handle," "]}),Object(v.jsx)(q.a,{children:"transfer"===n?(i=e.amount,c=r.mint.info,String(i/Math.pow(10,c.decimals))):"candy"===n?e.amount:e.edition}),t&&Object(v.jsx)(q.a,{children:e.pin.toNumber()})]},a);var i,c}))})]})}),Object(v.jsx)(m.a,{style:{height:"3ch"}}),Object(v.jsxs)(h.a,{direction:"row",spacing:2,children:[Object(v.jsx)(g.a,{style:{width:"30ch",color:"white",marginBottom:8},variant:"outlined",onClick:function(){return s(!1)},children:"Cancel"}),Object(v.jsx)(p.a,{href:he(Array.from(a.secretKey)),download:"".concat(a.publicKey.toBase58(),".json"),underline:"none",style:{width:"30ch"},children:Object(v.jsx)(g.a,{style:{width:"100%",color:"white",marginBottom:8},variant:"outlined",onClick:function(){return s(!0)},children:"Approve"})})]})]})}},me=function(e){var t,n=Object(o.i)(),r=Object(B.b)(),i=a.a.useState(localStorage.getItem("claimMethod")||""),c=Object(s.a)(i,2),u=c[0],l=c[1],d=a.a.useState(localStorage.getItem("candyConfig")||""),f=Object(s.a)(d,2),b=f[0],j=f[1],y=a.a.useState(localStorage.getItem("candyUUID")||""),x=Object(s.a)(y,2),w=x[0],O=x[1],k=a.a.useState(localStorage.getItem("mint")||""),N=Object(s.a)(k,2),R=N[0],U=N[1],L=a.a.useState(localStorage.getItem("masterMint")||""),z=Object(s.a)(L,2),q=z[0],G=z[1],_=a.a.useState(""),V=Object(s.a)(_,2),Y=V[0],Z=V[1],Q=a.a.useState(""),$=Object(s.a)(Q,2),ee=$[0],te=$[1],ne=a.a.useState([]),re=Object(s.a)(ne,2),ae=re[0],ce=re[1],se=a.a.useState([]),me=Object(s.a)(se,2),ge=me[0],je=me[1],ye=a.a.useState(localStorage.getItem("otpAuth")||"default"),xe=Object(s.a)(ye,2),ve=xe[0],we=xe[1],Oe=a.a.useState(localStorage.getItem("commMethod")||""),ke=Object(s.a)(Oe,2),Se=ke[0],Ce=ke[1],Ae=a.a.useState({}),Ee=Object(s.a)(Ae,2),Pe=Ee[0],Me=Ee[1],Ie=a.a.useState(localStorage.getItem("commSource")||""),Be=Object(s.a)(Ie,2),Ke=Be[0],Te=Be[1],We=a.a.useState(""),De=Object(s.a)(We,2),Ne=De[0],Fe=De[1],Re=a.a.useState(""),Ue=Object(s.a)(Re,2),Le=Ue[0],ze=Ue[1],qe=function(){var e=Object(C.a)(S.a.mark((function e(t,n){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(Se,Pe,Ke,t,n);case 2:r=e.sent,console.log("Responses",r),je(r),"AWS SES"===Se&&Object(T.k)({message:"Gumdrop email distribution completed"});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(C.a)(S.a.mark((function e(t){var a,i,c,s,l,d,f,h,m,g;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),ce([]),je([]),r.connected&&null!==r.publicKey){e.next=5;break}throw new Error("Wallet not connected");case 5:if(0!==(a=Object(W.e)(ee,Y,Se)).length){e.next=8;break}throw new Error("No claimants provided");case 8:return i=Object(W.d)(Object(D.a)(n),u,R,b,q),e.next=11,de(Se,Pe,Ke,[],i);case 11:if(c=function(e){return void 0!==e.url&&null!==e.url},!a.reduce((function(e,t){return e&&c(t)}),!0)){e.next=28;break}return e.next=15,fe(be);case 15:if(s=e.sent,console.log("Resend only",s),"send"!==s){e.next=24;break}return ce(ie(a)),e.next=21,qe(a,i);case 21:return e.abrupt("return");case 24:if("create"!==s){e.next=27;break}e.next=28;break;case 27:throw new Error("Dismissed");case 28:e.t0=u,e.next="transfer"===e.t0?31:"candy"===e.t0?35:"edition"===e.t0?39:43;break;case 31:return e.next=33,Object(W.h)(n,r.publicKey,a,R);case 33:return l=e.sent,e.abrupt("break",44);case 35:return e.next=37,Object(W.f)(n,r.publicKey,a,b,w);case 37:return l=e.sent,e.abrupt("break",44);case 39:return e.next=41,Object(W.g)(n,r.publicKey,a,q);case 41:return l=e.sent,e.abrupt("break",44);case 43:throw new Error("Unknown claim method ".concat(u));case 44:if(console.log("Claims info",l),a.forEach((function(e){e.pin=new X.a(ue()),e.seed="transfer"===u?l.mint.key:"candy"===u?l.config:l.masterMint.key})),"Wallets"!==Se){e.next=50;break}d=T.b,e.next=59;break;case 50:if("default"!==ve){e.next=54;break}d=T.c,e.next=59;break;case 54:if("none"!==ve){e.next=58;break}d=K.PublicKey.default,e.next=59;break;case 58:throw new Error("Unknown OTP authorization type ".concat(ve));case 59:return console.log("Temporal signer: ".concat(d.toBase58())),f=K.Keypair.generate(),console.log("Base ".concat(f.publicKey.toBase58())),h="Wallets"!==Se,e.next=65,Object(W.a)(n,r.publicKey,h,u,"".concat(window.location.origin).concat(window.location.pathname),f.publicKey,d,a,l);case 65:return m=e.sent,e.next=68,fe(pe(a,h,u,l,f));case 68:if(!0!==e.sent){e.next=72;break}e.next=73;break;case 72:throw new Error("Claim distribution preview not approved");case 73:return ce(ie(a)),e.next=76,o.c.sendTransactionWithRetry(n,r,m,[f]);case 76:if(g=e.sent,console.log(g),"string"!==typeof g){e.next=82;break}throw new Error(g);case 82:Object(T.k)({message:"Gumdrop creation succeeded",description:Object(v.jsx)(p.a,{href:Object(D.b)(g.txid,n),children:"View transaction on explorer"})});case 83:return console.log("Distributing claim URLs"),e.next=86,qe(a,i);case 86:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),He=function(e){if(1===e.length){var t=e[0],n=new FileReader;n.onload=function(e){if(null!==e&&null!==e.target)if("string"===typeof e.target.result){try{Object(W.e)(e.target.result,t.name,Se)}catch(n){return Object(T.k)({message:"File upload failed for: ".concat(t.name),description:Object(v.jsxs)("span",{children:["Could not parse uploaded file.",le,Object(v.jsx)(p.a,{href:"#/",children:"Does it follow the JSON scheme?"})]})}),Z(""),void te("")}Z(t.name),te(e.target.result)}else Object(T.k)({message:"File upload failed for: ".concat(t.name),description:"Could not read uploaded file"})},n.readAsText(t)}else Object(T.k)({message:"File upload failed",description:"Received ".concat(e.length," files")})},_e=Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)(oe,{handleDrop:He,children:Object(v.jsxs)(h.a,{direction:"row",style:{width:"60ch",height:"15ch"},sx:{border:"1px dashed grey",justifyContent:"center",alignContent:"center"},children:[Object(v.jsxs)(g.a,{variant:"text",component:"label",style:{padding:0,marginTop:"5ch",marginBottom:"5ch"},children:["Upload a ",""===Y?"distribution":"different"," list",Object(v.jsx)("input",{type:"file",onChange:function(e){He(e.target.files),e.target.value=""},hidden:!0})]}),le,Object(v.jsx)(g.a,{variant:"text",component:"label",disabled:!0,style:{padding:0,color:"#eee"},children:"or drag it here"})]})}),""!==Y?Object(v.jsxs)(g.a,{variant:"text",component:"label",disabled:!0,style:{padding:0,color:"#eee"},children:[Object(v.jsx)(J.a,{}),Object(v.jsxs)("span",{children:[le," Uploaded ",Y]})]}):Object(v.jsx)(m.a,{})]}),Je=a.a.useState(!1),Ve=Object(s.a)(Je,2),Xe=Ve[0],Ye=Ve[1],Ze=Object(v.jsxs)(m.a,{sx:{position:"relative"},children:[Object(v.jsxs)(g.a,{disabled:!r.connected||!Se||!Y||Xe,variant:"contained",style:{width:"100%"},onClick:function(e){Ye(!0);var t=function(){var t=Object(C.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ge(e);case 3:Ye(!1),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),Object(T.k)({message:"Create failed",description:"".concat(t.t0)}),Ye(!1);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}();t()},children:["Create",ae.length>0?" Another ":" ","Gumdrop"]}),Xe&&Object(v.jsx)(H.a,{size:24,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]}),Qe=Object(v.jsx)(a.a.Fragment,{children:Object(v.jsxs)(E.a,{fullWidth:!0,children:[Object(v.jsx)(P.a,{id:"otp-auth-label",children:"OTP Authorization"}),Object(v.jsxs)(M.a,{labelId:"otp-auth-label",id:"otp-auth-select",value:ve,label:"OTP Authorization",onChange:function(e){localStorage.setItem("otpAuth",e.target.value),we(e.target.value)},style:{textAlign:"left"},children:[Object(v.jsxs)(I.a,{value:"default",children:["Default",le,Object(v.jsxs)(p.a,{href:(t=T.c,"https://explorer.solana.com/address/".concat(t.toBase58(),"?cluster=").concat(Object(D.a)(n))),underline:"none",target:"_blank",rel:"noopener noreferrer",children:["(",Object(T.l)(T.c.toBase58()),")"]})]}),Object(v.jsx)(I.a,{value:"none",children:"None"})]})]})});return Object(v.jsxs)(h.a,{spacing:2,children:[Object(v.jsxs)(E.a,{fullWidth:!0,children:[Object(v.jsx)(P.a,{id:"claim-method-label",children:"Claim Method"}),Object(v.jsxs)(M.a,{labelId:"claim-method-label",id:"claim-method-select",value:u,label:"Claim Method",onChange:function(e){localStorage.setItem("claimMethod",e.target.value),l(e.target.value)},style:{textAlign:"left"},children:[Object(v.jsx)(I.a,{value:"transfer",children:"Token Transfer"}),Object(v.jsx)(I.a,{value:"candy",children:"Candy Machine"}),Object(v.jsx)(I.a,{value:"edition",children:"Limited Edition"})]})]}),""!==u&&function(e){return"candy"===e?Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)(A.a,{style:{width:"60ch"},id:"config-text-field",label:"Candy Config",value:b,onChange:function(e){j(e.target.value),localStorage.setItem("candyConfig",e.target.value)}}),Object(v.jsx)(A.a,{style:{width:"60ch"},id:"config-uuid-text-field",label:"Candy UUID",value:w,onChange:function(e){O(e.target.value),localStorage.setItem("candyUUID",e.target.value)}})]}):"transfer"===e?Object(v.jsx)(A.a,{style:{width:"60ch"},id:"mint-text-field",label:"Mint",value:R,onChange:function(e){localStorage.setItem("mint",e.target.value),U(e.target.value)}}):"edition"===e?Object(v.jsx)(A.a,{style:{width:"60ch"},id:"master-mint-text-field",label:"Master Mint",value:q,onChange:function(e){localStorage.setItem("masterMint",e.target.value),G(e.target.value)}}):void 0}(u),Object(v.jsxs)(E.a,{fullWidth:!0,children:[Object(v.jsx)(P.a,{id:"comm-method-label",children:"Distribution Method"}),Object(v.jsxs)(M.a,{labelId:"comm-method-label",id:"comm-method-select",value:Se,label:"Distribution Method",onChange:function(e){"Discord"!==e.target.value?(localStorage.setItem("commMethod",e.target.value),Ce(e.target.value)):Object(T.k)({message:"Discord distribution unavailable",description:"Please use the CLI for this. Discord does not support browser-connection requests"})},style:{textAlign:"left"},children:[Object(v.jsx)(I.a,{value:"AWS SES",children:"AWS SES"}),Object(v.jsx)(I.a,{value:"Discord",children:"Discord"}),Object(v.jsx)(I.a,{value:"Wallets",children:"Wallets"}),Object(v.jsx)(I.a,{value:"Manual",children:"Manual"})]})]}),""!==Se&&function(e){return"AWS SES"===e?Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)(A.a,{style:{width:"60ch"},id:"comm-access-key-id-field",label:"".concat(e," Access Key Id"),value:Ne,onChange:function(e){Me((function(t){return Object(F.a)(Object(F.a)({},t),{},{accessKeyId:e.target.value})})),Fe(e.target.value)}}),Object(v.jsx)(A.a,{style:{width:"60ch"},id:"comm-secret-access-key-field",label:"".concat(e," Secret Access Key"),value:Le,onChange:function(e){Me((function(t){return Object(F.a)(Object(F.a)({},t),{},{secretAccessKey:e.target.value})})),ze(e.target.value)}}),Object(v.jsx)(A.a,{style:{width:"60ch"},id:"comm-source-field",label:"".concat(e," Source"),value:Ke,onChange:function(e){localStorage.setItem("commSource",e.target.value),Te(e.target.value)}})]}):null}(Se),""!==Se&&"Wallets"!==Se&&Qe,""!==Se&&_e,Ze,ae.length>0&&Object(v.jsx)(p.a,{href:he(ae),download:"claimURLs.json",underline:"none",style:{width:"100%"},children:Object(v.jsx)(g.a,{variant:"contained",style:{width:"100%"},children:"Download claim URLs"})}),ge.length>0&&Object(v.jsx)(p.a,{href:he(ge),download:"responses.json",underline:"none",style:{width:"100%"},children:Object(v.jsx)(g.a,{variant:"contained",style:{width:"100%"},children:"Download distribution responses"})})]})},ge=function(e){var t=[{name:"summary",inner:Object(v.jsxs)(h.a,{spacing:1,children:[Object(v.jsx)("div",{children:"The Gumdrop program leverages the Solana blockchain and merkle trees to facilitate airdrops to a large number of whitelisted users at a low cost to creators."}),Object(v.jsxs)("div",{children:["In the Solana ecosystem, the cost of token airdrops is currently largely due to rent costs being","\xa0",Object(v.jsx)(p.a,{href:"https://docs.solana.com/implemented-proposals/rent",underline:"none",children:'"fixed at the genesis"'}),". With the large increase in SOLUSD since genesis, rent costs when creating accounts for thousands of users have duly skyrocketed."]}),Object(v.jsx)("div",{children:"Simultaneously, NFT projects often have a presale to early project followers and contributors. However, the candy-machine doesn't have the ability to grant early minting to a whitelisted subset of wallets while also using the same asset configuration for open launch."}),Object(v.jsxs)("div",{children:["Gumdrop (originally pioneered for token airdrops by"," ",Object(v.jsx)(p.a,{href:"https://github.com/Uniswap/merkle-distributor",underline:"none",children:"Uniswap"})," ","and ported to Solana by","\xa0",Object(v.jsx)(p.a,{href:"https://github.com/saber-hq/merkle-distributor",underline:"none",children:"Saber"}),") solves both these issues by building a space-efficient hash structure (the merkle tree) such that an on-chain program can validate whether the user is part of a whitelist. Moreover, Gumdrop allows creators to directly send whitelisted users an airdrop reclamation link by building the tree with off-chain handles (e.g email, discord, etc) and allowing the user to redeem into any wallet."]})]})},{name:"create",inner:Object(v.jsxs)(h.a,{spacing:1,children:[Object(v.jsx)(u.b,{to:"/create",children:"CREATION"}),Object(v.jsx)("div",{children:"Creation builds a whitelist of users that can claim either existing fungible tokens or directly mint from a pre-sale candy-machine."}),Object(v.jsxs)("div",{children:["Creators must choose a mint or a candy-machine config and UUID, an off-chain notification method (based on the handles supplied below, e.g email, discord, etc), and supply a list of recipients and balances with the following JSON schema","\xa0",Object(v.jsx)(p.a,{href:"data:text/plain;charset=utf-8,".concat(JSON.stringify(n(837))),download:"example.json",underline:"none",children:"(Click here for an example)"})]}),Object(v.jsx)("pre",{style:{fontSize:14},children:'\n[\n  {\n    "handle": "<DISTRIBUTION-SPECIFIC-HANDLE>"\n    "amount": <#-TOKENS-OR-CANDY-MINTS>\n  },\n  ...\n]'}),Object(v.jsx)("div",{children:"NB: When a candy-machine is supplied, update authority for the candy-machine will be transferred to the Gumdrop state. This can be reclaimed by closing the Gumdrop."})]})},{name:"claim",inner:Object(v.jsxs)(h.a,{spacing:1,children:[Object(v.jsx)(u.b,{to:"/claim",children:"CLAIMS"}),Object(v.jsx)("div",{children:"Claims are redeemed through a URL with query parameters holding claim-specific keys. Claimants will need to verify ownership of the specified handle by answering a OTP challenge and pay the rent and minting fees if applicable."})]})},{name:"close",inner:Object(v.jsxs)(h.a,{spacing:1,children:[Object(v.jsx)(u.b,{to:"/close",children:"CLOSING"}),Object(v.jsx)("div",{children:"Closing the Gumdrop cleans up the on-chain state and allows creators to recycle any lamports held for rent-exemption after the airdrop is complete."}),Object(v.jsx)("div",{children:"When closing a candy-machine-integrated distributor, update authority will be transferred back to the wallet owner."})]})}];return Object(v.jsx)(h.a,{alignContent:"left",textAlign:"left",spacing:2,children:t.map((function(e){return e.inner}))})},je=function(){var e=window;return{width:e.innerWidth,height:e.innerHeight}};var ye=function(){var e=Object(o.h)();a.a.useEffect((function(){}),[e.mode]);var t=a.a.useMemo((function(){var t;return t="dark"!==e.mode&&e.mode?"light":"dark",Object(d.a)({palette:{mode:t}})}),[e.mode]),n=function(){var e=a.a.useState(je()),t=Object(s.a)(e,2),n=t[0],r=t[1];return a.a.useEffect((function(){var e=function(){r(je())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}().height;return Object(v.jsx)("div",{className:"App",style:{backgroundColor:"transparent"},children:Object(v.jsxs)(f.a,{theme:t,children:[Object(v.jsx)(b.a,{}),Object(v.jsx)(w,{}),Object(v.jsxs)(m.a,{height:"".concat(.8*n,"px"),width:"60ch",style:{marginLeft:"auto",marginRight:"auto"},children:[Object(v.jsx)(m.a,{height:"60px"}),Object(v.jsx)(u.a,{children:Object(v.jsxs)(l.c,{children:[Object(v.jsx)(l.a,{path:"/create",component:me}),Object(v.jsx)(l.a,{path:"/claim",component:O.a}),Object(v.jsx)(l.a,{path:"/close",component:N}),Object(v.jsx)(l.a,{path:"/",component:ge})]})}),Object(v.jsx)(m.a,{height:"80px"})]})]})})},xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,915)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};n(838);c.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(o.d,{children:Object(v.jsx)(o.g,{children:Object(v.jsx)(o.a,{children:Object(v.jsx)(o.b,{children:Object(v.jsx)(ye,{})})})})})}),document.getElementById("root")),xe()},95:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d}));n(34),n(2),n(8);var r=n(9),a=n(1),i=(n(7),n(26)),c=n.n(i),o=new c.a(10);o.pow(new c.a(18)),o.pow(new c.a(18)),o.pow(new c.a(27)),new c.a(0),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:8});function s(e,t){var n=Object(a.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),i=Object(r.a)(n,2),c=i[0],o=i[1],s=Object(a.useCallback)((function(t){if(c!==t)if(o(t),null===t)localStorage.removeItem(e);else try{localStorage.setItem(e,JSON.stringify(t))}catch(n){}}),[c,e]);return[c,s]}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}new Set(["USDC","wUSDC","USDT"]);function l(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,r){return e.slice(r*t,(r+1)*t)}))}new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});function d(e){return new Promise((function(t){return setTimeout(t,e)}))}},97:function(e,t,n){"use strict";(function(e){n.d(t,"e",(function(){return g})),n.d(t,"d",(function(){return y})),n.d(t,"h",(function(){return x})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return A})),n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return P})),n.d(t,"c",(function(){return M}));var r=n(9),a=n(2),i=n.n(a),c=n(8),o=n(13),s=n(7),u=n(44),l=n(58),d=n(26),f=n.n(d),b=n(43),h=n(84),p=n(40),m=n(197),g=function(e,t,n){var r=t.match(/\.[0-9a-z]+$/i);if(null===r)throw new Error("Could not parse file extension from ".concat(t));switch(r[0]){case".csv":var a,i=function(e){for(var t=new RegExp('(\\,|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^\\,\\r\\n]*))',"gi"),n=null,r=[[]];n=t.exec(e);)n[1].length&&","!==n[1]&&r.push([]),r[r.length-1].push(n[2]?n[2].replace(new RegExp('""',"g"),'"'):n[3]);return r}(e);if("aws-sms"===n)a="phone number";else{if("aws-email"!==n)throw new Error("Cannot parse csv for ".concat(a));a="email"}var c=i[0].findIndex((function(e){return e.includes(a)}));if(-1===c)throw new Error("Could not find ".concat(a," index"));var s=new Set(i.slice(1).filter((function(e){return e[c].length>0})).map((function(e){return e[c]})));return Object(o.a)(s).map((function(e,t){return{handle:e,amount:1,edition:t}}));case".json":return JSON.parse(e).map((function(e){return{handle:e.handle,amount:e.amount,edition:e.edition,url:e.url}}));default:throw new Error("Cannot parse file format ".concat(r," from ").concat(t))}},j=function(e,t){return"https://explorer.solana.com/address/".concat(t,"?cluster=").concat(e)},y=function(e,t,n,r,a){switch(t){case"transfer":return{type:"Token",meta:j(e,n)};case"candy":return{type:"Candy",meta:j(e,r)};case"edition":return{type:"Edition",meta:j(e,a)};default:throw new Error("Unknown claim integration method ".concat(t))}},x=function(){var e=Object(c.a)(i.a.mark((function e(t,n,r,a){var c,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.forEach((function(e,t){if(!e.handle)throw new Error("Claimant ".concat(t," doesn't have handle"));if(!e.amount)throw new Error("Claimant ".concat(t," doesn't have amount"));if(0===e.amount)throw new Error("Claimant ".concat(t," amount is 0"))})),c=r.reduce((function(e,t){return e+t.amount}),0),e.next=4,Object(h.h)(t,a);case 4:return o=e.sent,e.next=7,Object(h.d)(n,t,o.key,c);case 7:return s=e.sent,e.abrupt("return",{total:c,mint:o,source:s});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(c.a)(i.a.mark((function e(t,n,a,c,o){var s,u,l,d,f,b,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.forEach((function(e,t){if(!e.handle)throw new Error("Claimant ".concat(t," doesn't have handle"));if(!e.amount)throw new Error("Claimant ".concat(t," doesn't have amount"));if(0===e.amount)throw new Error("Claimant ".concat(t," amount is 0"))})),s=a.reduce((function(e,t){return e+t.amount}),0),e.next=4,Object(h.a)(t,c);case 4:return u=e.sent,e.next=7,Object(h.c)(u,o);case 7:return l=e.sent,d=Object(r.a)(l,1),f=d[0],e.next=12,Object(h.b)(t,f);case 12:if(b=e.sent,p=b.data.itemsAvailable.toNumber()-b.itemsRedeemed.toNumber(),!isNaN(p)){e.next=16;break}throw new Error("Could not calculate how many candy machine items are remaining");case 16:if(!(p<s)){e.next=18;break}throw new Error("Distributor is allocated more mints (".concat(s,") ")+"than the candy machine has remaining (".concat(p,")"));case 18:if(b.authority.equals(n)){e.next=20;break}throw new Error("Candy machine authority does not match wallet public key");case 20:return e.abrupt("return",{total:s,config:u,uuid:o,candyMachineKey:f});case 21:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),w=function(e){return e.div(new f.a(8))},O=function(e){return new f.a(7).sub(e.mod(new f.a(8)))},k=function(e){var t=function(e){return e.mod(new f.a(248))}(e);return{index:w(t).toNumber(),mask:new f.a(1).shln(O(t).toNumber()).toNumber()}},S=function(e,t){var n=k(t);return 0!==(e[n.index]&n.mask)},C=function(e,t){var n=k(t);e[n.index]=e[n.index]|n.mask},A=function(){var e=Object(c.a)(i.a.mark((function e(t,n,r,a){var c,s,u,l,d,b,p,m,g,j,y;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.forEach((function(e,t){if(!e.handle)throw new Error("Claimant ".concat(t," doesn't have handle"));if(1!==e.amount)throw new Error("Claimant ".concat(t," has amount ").concat(e.amount,". Expected 1 for edition gumdrop"))})),c=r.reduce((function(e,t){return e+t.amount}),0),e.next=4,Object(h.h)(t,a);case 4:return s=e.sent,e.next=7,Object(h.d)(n,t,s.key,1);case 7:return u=e.sent,e.next=10,Object(h.e)(s.key);case 10:return l=e.sent,e.next=13,t.getAccountInfo(l);case 13:if(null!==(d=e.sent)){e.next=16;break}throw new Error("Could not fetch master edition");case 16:if(console.log("Master edition",d),b=new f.a(d.data.slice(1,9),8,"le").toNumber(),p=0===d.data[9]?null:new f.a(d.data.slice(10,18),8,"le").toNumber(),console.log("Max supply",p),console.log("Current supply",b),!(null!==p&&p<c)){e.next=23;break}throw new Error("Distributor is allocated more editions (".concat(c,") ")+"than the master has total (".concat(p,")"));case 23:m={},g=[],j=i.a.mark((function e(n){var a,c,u,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(a=r[n]).edition){e.next=3;break}throw new Error("Claimant ".concat(n," doesn't have edition"));case 3:if(!(a.edition<=0)){e.next=5;break}throw new Error("Claimant ".concat(n," assigned invalid edition ").concat(a.edition));case 5:if(!(a.edition>p)){e.next=7;break}throw new Error("Claimant ".concat(n," assigned edition ").concat(a.edition," which is beyond the max supply"));case 7:if(!(a.edition in m)){e.next=9;break}throw new Error("Claimant ".concat(n," and ").concat(m[a.edition]," are both assigned to edition ").concat(a.edition));case 9:return c=new f.a(a.edition),e.next=12,Object(h.f)(s.key,c);case 12:if(u=e.sent,void 0!==(l=g.find((function(e){return e[0].equals(u)})))){e.next=20;break}return e.next=17,t.getAccountInfo(u);case 17:null===(d=e.sent)?g.push([u,Array(31)]):g.push([u,Object(o.a)(d.data.slice(1,32))]),l=g[g.length-1];case 20:if(void 0!==l){e.next=22;break}throw new Error("Internal Error: Edition marker info still undefined ".concat(a.edition));case 22:if(!S(l[1],c)){e.next=24;break}throw new Error("Claimant ".concat(n," is assigned to edition ").concat(a.edition," which is already taken"));case 24:C(l[1],c),m[a.edition]=n;case 26:case"end":return e.stop()}}),e)})),y=0;case 27:if(!(y<r.length)){e.next=32;break}return e.delegateYield(j(y),"t0",29);case 29:++y,e.next=27;break;case 32:return e.abrupt("return",{total:c,masterMint:s,masterTokenAccount:u});case 33:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),E=function(e,t){for(var n=[],r=0,a=e.length;r<a;)n.push(e.slice(r,r+=t));return n},P=function(){var t=Object(c.a)(i.a.mark((function t(n,a,c,d,h,g,j,y,x){var v,w,O,k,S,C,A,P,M,I,B,K,T,W,D,N,F,R,U,L,z,q,G,H,_,J;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:v=[],w=0;case 2:if(!(w<y.length)){t.next=26;break}if(O=y[w],c){t.next=14;break}t.prev=5,O.secret=new s.PublicKey(O.handle),t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(5),new Error("Invalid claimant wallet handle ".concat(t.t0));case 12:t.next=21;break;case 14:return k=[O.seed.toBuffer()].concat(Object(o.a)(E(e.from(O.handle),32)),[e.from(O.pin.toArray("le",4))]),t.next=17,s.PublicKey.findProgramAddress(k.map((function(e){return e.slice(0,32)})),p.c);case 17:S=t.sent,C=Object(r.a)(S,1),A=C[0],O.secret=A;case 21:P="edition"===d?Object(o.a)(new f.a(O.edition).toArray("le",8)):[],v.push(e.from([].concat(Object(o.a)(new f.a(w).toArray("le",8)),Object(o.a)(O.secret.toBuffer()),Object(o.a)(O.seed.toBuffer()),Object(o.a)(new f.a(O.amount).toArray("le",8)),Object(o.a)(P))));case 23:++w,t.next=2;break;case 26:return M=new m.a(v),I=M.getRoot(),t.next=30,s.PublicKey.findProgramAddress([e.from("MerkleDistributor"),g.toBuffer()],p.c);case 30:B=t.sent,K=Object(r.a)(B,2),T=K[0],W=K[1],D=0;case 35:if(!(D<y.length)){t.next=49;break}if(N=M.getProof(D),M.verifyProof(D,N,I)){t.next=40;break}throw new Error("Gumdrop merkle tree verification failed");case 40:F=y[D],R=["distributor=".concat(T),"handle=".concat(encodeURIComponent(F.handle)),"amount=".concat(F.amount),"index=".concat(D),"proof=".concat(N.map((function(e){return b.encode(e)})))],c?R.push("pin=".concat(F.pin.toNumber())):R.push("pin=NA"),"transfer"===d?R.push("tokenAcc=".concat(x.source)):"candy"===d?(R.push("config=".concat(x.config)),R.push("uuid=".concat(x.uuid))):(R.push("master=".concat(x.masterMint.key)),R.push("edition=".concat(F.edition))),U=R.join("&"),F.url="".concat(h,"#/claim?").concat(U);case 46:++D,t.next=35;break;case 49:if((L=Array()).push(new s.TransactionInstruction({programId:p.c,keys:[{pubkey:g,isSigner:!0,isWritable:!1},{pubkey:T,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:s.SystemProgram.programId,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(o.a)(e.from(l.sha256.digest("global:new_distributor")).slice(0,8)),Object(o.a)(new f.a(W).toArray("le",1)),Object(o.a)(I),Object(o.a)(j.toBuffer())))})),"transfer"!==d){t.next=55;break}L.push(u.d.createApproveInstruction(p.i,x.source,T,a,[],x.total)),t.next=72;break;case 55:if("candy"!==d){t.next=64;break}return t.next=58,s.PublicKey.findProgramAddress([e.from("Wallet"),T.toBuffer()],p.c);case 58:z=t.sent,q=Object(r.a)(z,1),G=q[0],L.push(new s.TransactionInstruction({programId:p.b,keys:[{pubkey:x.candyMachineKey,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!0,isWritable:!1}],data:e.from([].concat(Object(o.a)(e.from(l.sha256.digest("global:update_authority")).slice(0,8)),Object(o.a)(new f.a(1).toArray("le",1)),Object(o.a)(G.toBuffer())))})),t.next=72;break;case 64:if("edition"!==d){t.next=72;break}return t.next=67,s.PublicKey.findProgramAddress([T.toBuffer(),p.i.toBuffer(),x.masterMint.key.toBuffer()],p.f);case 67:H=t.sent,_=Object(r.a)(H,1),J=_[0],L.push(u.d.createAssociatedTokenAccountInstruction(p.f,p.i,x.masterMint.key,J,T,a)),L.push(u.d.createTransferInstruction(p.i,x.masterTokenAccount,J,a,[],1));case 72:return t.abrupt("return",L);case 73:case"end":return t.stop()}}),t,null,[[5,9]])})));return function(e,n,r,a,i,c,o,s,u){return t.apply(this,arguments)}}(),M=function(){var t=Object(c.a)(i.a.mark((function t(n,a,c,u,d,b,m){var g,j,y,x,v,w,O,k,S,C,A,E,P,M,I,B,K,T,W,D,N;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.PublicKey.findProgramAddress([e.from("MerkleDistributor"),c.publicKey.toBuffer()],p.c);case 2:return g=t.sent,j=Object(r.a)(g,2),y=j[0],x=j[1],t.next=8,s.PublicKey.findProgramAddress([e.from("Wallet"),y.toBuffer()],p.c);case 8:if(v=t.sent,w=Object(r.a)(v,2),O=w[0],k=w[1],"candy"!==u){t.next=24;break}return t.next=15,Object(h.a)(n,d);case 15:return C=t.sent,t.next=18,Object(h.c)(C,b);case 18:A=t.sent,E=Object(r.a)(A,1),P=E[0],S=[{pubkey:P,isSigner:!1,isWritable:!0},{pubkey:p.b,isSigner:!1,isWritable:!1}],t.next=25;break;case 24:S=[];case 25:if(M=Array(),"edition"!==u){t.next=45;break}t.prev=27,I=new s.PublicKey(m),t.next=34;break;case 31:throw t.prev=31,t.t0=t.catch(27),new Error("Invalid mint key ".concat(t.t0));case 34:return t.next=36,s.PublicKey.findProgramAddress([y.toBuffer(),p.i.toBuffer(),I.toBuffer()],p.f);case 36:return B=t.sent,K=Object(r.a)(B,1),T=K[0],t.next=41,s.PublicKey.findProgramAddress([a.toBuffer(),p.i.toBuffer(),I.toBuffer()],p.f);case 41:W=t.sent,D=Object(r.a)(W,1),N=D[0],M.push(new s.TransactionInstruction({programId:p.c,keys:[{pubkey:c.publicKey,isSigner:!0,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:T,isSigner:!1,isWritable:!0},{pubkey:N,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:s.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:p.i,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(o.a)(e.from(l.sha256.digest("global:close_distributor_token_account")).slice(0,8)),Object(o.a)(new f.a(x).toArray("le",1))))}));case 45:return M.push(new s.TransactionInstruction({programId:p.c,keys:[{pubkey:c.publicKey,isSigner:!0,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:O,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:s.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:p.i,isSigner:!1,isWritable:!1}].concat(Object(o.a)(S)),data:e.from([].concat(Object(o.a)(e.from(l.sha256.digest("global:close_distributor")).slice(0,8)),Object(o.a)(new f.a(x).toArray("le",1)),Object(o.a)(new f.a(k).toArray("le",1))))})),t.abrupt("return",M);case 47:case"end":return t.stop()}}),t,null,[[27,31]])})));return function(e,n,r,a,i,c,o){return t.apply(this,arguments)}}()}).call(this,n(18).Buffer)}},[[840,1,2]]]);
//# sourceMappingURL=main.9ac1b997.chunk.js.map