{"version":3,"sources":["utils/ids.ts","contexts/ConnectionContext.tsx","utils/programIds.ts","utils/merkle-tree.ts","contexts/AccountContext.tsx","utils/notifications.tsx","components/ExplorerLink/index.tsx","utils/eventEmitter.ts","components/Settings/index.tsx","components/Claim.tsx","components/Create.tsx","components/DragAndDrop.tsx","components/DefaultModal/index.tsx","contexts/WalletContext/WalletContext.tsx","contexts/WalletContext/wallet.less","contexts/ModalContext.tsx","contexts/ColorModeContext.tsx","utils/borsh.ts","components/ConnectButton.tsx","components/Header/Header.tsx","App.tsx","reportWebVitals.ts","index.tsx","constants/math.ts","utils/utils.ts"],"names":["WRAPPED_SOL_MINT","Map","PublicKey","TOKEN_PROGRAM_ID","SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID","BPF_UPGRADE_LOADER_ID","MEMO_ID","SYSTEM","ENDPOINTS","name","endpoint","ChainId","MainnetBeta","Devnet","DEFAULT","ConnectionContext","React","createContext","setEndpoint","connection","Connection","env","tokens","tokenMap","ConnectionProvider","children","undefined","useLocalStorageState","useMemo","find","end","useState","setTokens","setTokenMap","useEffect","TokenListProvider","resolve","then","container","list","excludeByTag","filterByChainId","getList","knownMints","reduce","map","item","set","address","id","onAccountChange","Keypair","generate","publicKey","removeAccountChangeListener","onSlotChange","removeSlotChangeListener","Provider","value","useConnection","useContext","useConnectionConfig","context","SequenceType","getErrorForTransaction","txid","a","confirmTransaction","getParsedConfirmedTransaction","tx","errors","meta","logMessages","forEach","log","m","regex","exec","index","lastIndex","length","push","sendTransactionsWithManualRetry","wallet","instructions","signers","stopPoint","tries","lastInstructionsLength","toRemoveSigners","filter","instr","i","filteredSigners","_","slice","sendTransactionWithRetry","sendTransactions","StopOnFailure","console","error","instructionSet","signersSet","sequenceType","Parallel","commitment","successCallback","ind","failCallback","block","WalletNotConnectedError","unsignedTxns","getRecentBlockhash","transaction","Transaction","instruction","add","recentBlockhash","blockhash","setSigners","s","partialSign","signAllTransactions","signedTxns","pendingTxns","breakEarlyObject","breakEarly","signedTxnPromise","sendSignedTransaction","signedTransaction","slot","catch","reason","Promise","all","sendTransaction","awaitConfirmation","includesFeePayer","signTransaction","rawTransaction","serialize","options","skipPreflight","sendRawTransaction","awaitTransactionSignatureConfirmation","DEFAULT_TIMEOUT","confirmation","Error","err","notify","message","description","type","beforeSend","getUnixTs","Date","getTime","timeout","startTime","done","sleep","simulateResult","simulateTransaction","logs","line","startsWith","JSON","stringify","_recentBlockhash","_disableBlockhashCaching","signData","serializeMessage","wireTransaction","_serialize","encodedTransaction","toString","args","encoding","_rpcRequest","res","result","envFor","_rpcEndpoint","cfg","explorerLinkFor","queryStatus","status","confirmations","subId","reject","setTimeout","onSignature","e","getSignatureStatuses","signatureStatuses","_signatureSubscriptions","removeSignatureListener","programIds","token","associatedToken","bpf_upgrade_loader","system","memo","MerkleTree","leafs","layers","this","hashes","nodeHash","acc","cur","idx","arr","nxt","internalHash","Array","proof","layer","sibling","Math","floor","getRoot","getProof","el","root","pair","equals","data","Buffer","from","keccak_256","digest","first","second","sort","compare","fst","snd","leaf","AccountsContext","pendingCalls","genericCache","pendingMintCalls","mintCache","getMintInfo","pubKey","getAccountInfo","info","deserializeMint","TokenAccountParser","buffer","deserializeAccount","pubkey","account","keyToAccountParser","cache","emitter","EventEmitter","query","parser","toBase58","get","obj","isActive","deserialize","registerParser","delete","Function","isNew","has","raiseCacheUpdated","key","raiseCacheDeleted","byParser","keys","queryMint","mint","getMint","addMint","UseNativeAccount","useWallet","nativeAccount","setNativeAccount","updateCache","useCallback","wrapped","owner","amount","u64","lamports","delegate","delegatedAmount","isInitialized","isFrozen","isNative","rentExemptReserve","closeAuthority","wrapNativeAccount","updateAccount","PRECACHED_OWNERS","Set","precacheUserTokenAccounts","getTokenAccountsByOwner","programId","AccountsProvider","tokenAccounts","setTokenAccounts","userAccounts","setUserAccounts","walletKey","selectUserAccounts","accounts","subs","onCache","tokenSubID","onProgramAccountChange","accountId","accountInfo","AccountLayout","span","removeProgramAccountChangeListener","decode","fromBuffer","delegateOption","state","isNativeOption","closeAuthorityOption","MintLayout","mintInfo","mintAuthorityOption","mintAuthority","supply","freezeAuthorityOption","freezeAuthority","placement","notification","style","color","opacity","backgroundColor","ExplorerLink","props","code","href","target","rel","title","Text","shortenAddress","CacheUpdateEvent","CacheDeleteEvent","MarketUpdateEvent","ids","Emitter","callback","on","removeListener","emit","Settings","additionalSettings","connected","disconnect","setVisible","useWalletModal","open","setModal","useModal","theme","useTheme","colorModeCtx","useColorMode","handleConnect","ModalEnum","WALLET","sx","display","minWidth","marginBottom","onChange","variant","onClick","marginLeft","navigator","clipboard","writeText","ml","toggleColorMode","palette","mode","MERKLE_DISTRIBUTOR_ID","idl","require","coder","Coder","Claim","editable","setEditable","params","queryString","parse","location","search","distributor","setDistributor","handle","setHandle","amountStr","setAmount","indexStr","setIndex","pin","pinStr","setPin","proofStr","setProof","submit","preventDefault","Number","split","isNaN","distributorKey","distributorAccount","distributorInfo","b","ret","bs58","findProgramAddress","toBuffer","claimantPda","BN","toArray","verifyClaim","claimStatus","cbump","distributorTokenKey","walletTokenKey","setup","TransactionInstruction","isSigner","isWritable","SystemProgram","SYSVAR_RENT_PUBKEY","claimAirdrop","sha256","concat","claimResult","spacing","width","label","disabled","multiline","wrap","randomBytes","buf","Uint8Array","window","crypto","getRandomValues","setupSender","method","auth","source","mailchimp","Mailchimp","mintUrl","from_email","subject","text","url","to","email","messages","send","response","reject_reason","setupMailchimp","parseClaimants","input","bump","pda","Create","localStorage","getItem","setMint","commMethod","setMethod","commAuth","setCommAuth","commSource","setCommSource","filename","setFilename","setText","claimURLs","setClaimURLs","mintKey","mintAccount","claimants","mightHaveExisting","c","confirm","sender","totalClaim","creatorTokenKey","creatorTokenAccount","creatorTokenInfo","toNumber","claimant","seeds","tree","base","dbump","verifyProof","join","origin","pathname","createDistributorTokenAccount","initDistributor","transferToATA","Token","createTransferInstruction","createResult","handleFiles","files","file","reader","FileReader","onload","readAsText","fileUpload","Fragment","handleDrop","direction","height","border","justifyContent","alignContent","component","padding","marginTop","hidden","createAirdrop","marginRight","setItem","fullWidth","labelId","textAlign","commAuthorization","encoded","encodeURIComponent","encodedClaimURLs","download","underline","DragAndDrop","dropRef","useRef","dragCounter","setDragCounter","dragging","setDragging","handleDrag","stopPropagation","handleDragIn","dataTransfer","items","handleDragOut","remainingDrags","clearData","node","current","addEventListener","removeEventListener","ref","DefaultModal","bodyStyle","closeIcon","rest","background","borderRadius","flexDirection","alignItems","footer","WalletModalContext","WalletModal","wallets","selected","select","visible","setShowWallets","close","onCancel","verticalAlign","fontWeight","fontSize","lineHeight","size","icon","alt","src","float","WalletModalProvider","setConnected","base58","keyToDisplay","substring","WalletProvider","getPhantomWallet","getSolflareWallet","getTorusWallet","clientId","getLedgerWallet","getSolongWallet","getMathWallet","getSolletWallet","onError","autoConnect","ModalContext","removeModal","ColorModeContext","ColorModeContextProvider","setMode","prevMode","BinaryReader","prototype","readPubkey","array","readFixedArray","BinaryWriter","writePubkey","writeFixedArray","readPubkeyAsString","encode","writePubkeyAsString","ConnectButton","isConnected","onClickConnect","onClickChange","restProps","ButtonGroup","Header","handleChange","AppBar","Box","bgcolor","Stack","Link","Button","flexGrow","WHITESPACE","About","getWindowDimensions","innerWidth","innerHeight","App","windowDimensions","setWindowDimensions","handleResize","useWindowDimensions","disabledColor","createTheme","action","className","ThemeProvider","CssBaseline","pt","px","alignSelf","path","reportWebVitals","onPerfEntry","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","TEN","pow","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","defaultState","storedState","setState","setLocalStorageState","newState","removeItem","chars","chunks","apply","ceil","currency","ms"],"mappings":"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","file":"static/js/main.80c4f8f2.chunk.js","sourcesContent":["import { PublicKey, AccountInfo } from '@solana/web3.js';\n\nexport type StringPublicKey = string;\n\nexport class LazyAccountInfoProxy<T> {\n  executable: boolean = false;\n  owner: StringPublicKey = '';\n  lamports: number = 0;\n\n  get data() {\n    //\n    return undefined as unknown as T;\n  }\n}\n\nexport interface LazyAccountInfo {\n  executable: boolean;\n  owner: StringPublicKey;\n  lamports: number;\n  data: [string, string];\n}\n\nconst PubKeysInternedMap = new Map<string, PublicKey>();\n\nexport const toPublicKey = (key: string | PublicKey) => {\n  if (typeof key !== 'string') {\n    return key;\n  }\n\n  let result = PubKeysInternedMap.get(key);\n  if (!result) {\n    result = new PublicKey(key);\n    PubKeysInternedMap.set(key, result);\n  }\n\n  return result;\n};\n\nexport interface PublicKeyStringAndAccount<T> {\n  pubkey: string;\n  account: AccountInfo<T>;\n}\n\nexport const WRAPPED_SOL_MINT = new PublicKey('So11111111111111111111111111111111111111112');\n\nexport const TOKEN_PROGRAM_ID = new PublicKey('TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA');\n\nexport const SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID = new PublicKey('ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL');\n\nexport const BPF_UPGRADE_LOADER_ID = new PublicKey('BPFLoaderUpgradeab1e11111111111111111111111');\n\nexport const MEMO_ID = new PublicKey('MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr');\n\nexport const SYSTEM = new PublicKey('11111111111111111111111111111111');\n","import { sleep, useLocalStorageState } from \"../utils/utils\";\nimport {\n  Keypair,\n  Commitment,\n  Connection,\n  RpcResponseAndContext,\n  SignatureStatus,\n  SimulatedTransactionResponse,\n  Transaction,\n  TransactionInstruction,\n  TransactionSignature,\n  Blockhash,\n  FeeCalculator,\n} from \"@solana/web3.js\";\nimport React, { useContext, useEffect, useMemo, useState } from \"react\";\nimport { notify } from \"../utils/notifications\";\nimport { ExplorerLink } from \"../components/ExplorerLink\";\nimport {\n  TokenInfo,\n  TokenListProvider,\n  ENV as ChainId,\n} from \"@solana/spl-token-registry\";\nimport { WalletSigner } from \"./WalletContext/WalletContext\";\nimport { WalletNotConnectedError } from \"@solana/wallet-adapter-base\";\n\ninterface BlockhashAndFeeCalculator {\n  blockhash: Blockhash;\n  feeCalculator: FeeCalculator;\n}\n\nexport type ENV = \"mainnet-beta\" | \"testnet\" | \"devnet\" | \"localnet\";\n\nexport const ENDPOINTS = [\n  {\n    name: \"mainnet-beta\" as ENV,\n    endpoint: \"https://api.mainnet-beta.solana.com\",\n    ChainId: ChainId.MainnetBeta,\n  },\n  {\n    name: \"devnet\" as ENV,\n    endpoint: \"https://api.devnet.solana.com\",\n    ChainId: ChainId.Devnet,\n  },\n];\n\nconst DEFAULT = ENDPOINTS[0].endpoint;\n\ninterface ConnectionConfig {\n  connection: Connection;\n  endpoint: string;\n  env: ENV;\n  setEndpoint: (val: string) => void;\n  tokens: TokenInfo[];\n  tokenMap: Map<string, TokenInfo>;\n}\n\nconst ConnectionContext = React.createContext<ConnectionConfig>({\n  endpoint: DEFAULT,\n  setEndpoint: () => {},\n  connection: new Connection(DEFAULT, \"recent\"),\n  env: ENDPOINTS[0].name,\n  tokens: [],\n  tokenMap: new Map<string, TokenInfo>(),\n});\n\nexport function ConnectionProvider({ children = undefined as any }) {\n  const [endpoint, setEndpoint] = useLocalStorageState(\n    \"connectionEndpoint\",\n    ENDPOINTS[0].endpoint\n  );\n\n  const connection = useMemo(\n    () => new Connection(endpoint, \"recent\"),\n    [endpoint]\n  );\n\n  const env =\n    ENDPOINTS.find((end) => end.endpoint === endpoint)?.name ||\n    ENDPOINTS[0].name;\n\n  const [tokens, setTokens] = useState<TokenInfo[]>([]);\n  const [tokenMap, setTokenMap] = useState<Map<string, TokenInfo>>(new Map());\n  useEffect(() => {\n    // fetch token files\n    new TokenListProvider().resolve().then((container) => {\n      const list = container\n        .excludeByTag(\"nft\")\n        .filterByChainId(\n          ENDPOINTS.find((end) => end.endpoint === endpoint)?.ChainId ||\n            ChainId.MainnetBeta\n        )\n        .getList();\n\n      const knownMints = [...list].reduce((map, item) => {\n        map.set(item.address, item);\n        return map;\n      }, new Map<string, TokenInfo>());\n\n      setTokenMap(knownMints);\n      setTokens(list);\n    });\n  }, [env, endpoint]);\n\n  // The websocket library solana/web3.js uses closes its websocket connection when the subscription list\n  // is empty after opening its first time, preventing subsequent subscriptions from receiving responses.\n  // This is a hack to prevent the list from every getting empty\n  useEffect(() => {\n    const id = connection.onAccountChange(\n      Keypair.generate().publicKey,\n      () => {}\n    );\n    return () => {\n      connection.removeAccountChangeListener(id);\n    };\n  }, [connection]);\n\n  useEffect(() => {\n    const id = connection.onSlotChange(() => null);\n    return () => {\n      connection.removeSlotChangeListener(id);\n    };\n  }, [connection]);\n\n  return (\n    <ConnectionContext.Provider\n      value={{\n        endpoint,\n        setEndpoint,\n        connection,\n        tokens,\n        tokenMap,\n        env,\n      }}\n    >\n      {children}\n    </ConnectionContext.Provider>\n  );\n}\n\nexport function useConnection() {\n  return useContext(ConnectionContext).connection as Connection;\n}\n\nexport function useConnectionConfig() {\n  const context = useContext(ConnectionContext);\n  return {\n    endpoint: context.endpoint,\n    setEndpoint: context.setEndpoint,\n    env: context.env,\n    tokens: context.tokens,\n    tokenMap: context.tokenMap,\n  };\n}\n\nexport const getErrorForTransaction = async (\n  connection: Connection,\n  txid: string\n) => {\n  // wait for all confirmation before geting transaction\n  await connection.confirmTransaction(txid, \"max\");\n\n  const tx = await connection.getParsedConfirmedTransaction(txid);\n\n  const errors: string[] = [];\n  if (tx?.meta && tx.meta.logMessages) {\n    tx.meta.logMessages.forEach((log) => {\n      const regex = /Error: (.*)/gm;\n      let m;\n      while ((m = regex.exec(log)) !== null) {\n        // This is necessary to avoid infinite loops with zero-width matches\n        if (m.index === regex.lastIndex) {\n          regex.lastIndex++;\n        }\n\n        if (m.length > 1) {\n          errors.push(m[1]);\n        }\n      }\n    });\n  }\n\n  return errors;\n};\n\nexport enum SequenceType {\n  Sequential,\n  Parallel,\n  StopOnFailure,\n}\n\nexport async function sendTransactionsWithManualRetry(\n  connection: Connection,\n  wallet: WalletSigner,\n  instructions: TransactionInstruction[][],\n  signers: Keypair[][]\n) {\n  let stopPoint = 0;\n  let tries = 0;\n  let lastInstructionsLength: any = null;\n  let toRemoveSigners: Record<number, boolean> = {};\n\n \n  instructions = instructions.filter((instr, i) => {\n    if (instr.length > 0) {\n      return true;\n    } else {\n      toRemoveSigners[i] = true;\n      return false;\n    }\n  });\n  let filteredSigners = signers.filter((_, i) => !toRemoveSigners[i]);\n\n  while (stopPoint < instructions.length && tries < 3) {\n    instructions = instructions.slice(stopPoint, instructions.length);\n    filteredSigners = filteredSigners.slice(stopPoint, filteredSigners.length);\n\n    if (instructions.length === lastInstructionsLength) tries = tries + 1;\n    else tries = 0;\n\n    try {\n      if (instructions.length === 1) {\n        await sendTransactionWithRetry(\n          connection,\n          wallet,\n          instructions[0],\n          filteredSigners[0],\n          \"single\"\n        );\n        stopPoint = 1;\n      } else {\n        stopPoint = await sendTransactions(\n          connection,\n          wallet,\n          instructions,\n          filteredSigners,\n          SequenceType.StopOnFailure,\n          \"single\"\n        );\n      }\n    } catch (e) {\n      console.error(e);\n    }\n    console.log(\n      \"Died on \",\n      stopPoint,\n      \"retrying from instruction\",\n      instructions[stopPoint],\n      \"instructions length is\",\n      instructions.length\n    );\n    lastInstructionsLength = instructions.length;\n  }\n}\n\nexport const sendTransactions = async (\n  connection: Connection,\n  wallet: WalletSigner,\n  instructionSet: TransactionInstruction[][],\n  signersSet: Keypair[][],\n  sequenceType: SequenceType = SequenceType.Parallel,\n  commitment: Commitment = \"singleGossip\",\n  successCallback: (txid: string, ind: number) => void = (txid, ind) => {},\n  failCallback: (reason: string, ind: number) => boolean = (txid, ind) => false,\n  block?: BlockhashAndFeeCalculator\n): Promise<number> => {\n  if (!wallet.publicKey) throw new WalletNotConnectedError();\n\n  const unsignedTxns: Transaction[] = [];\n\n  if (!block) {\n    block = await connection.getRecentBlockhash(commitment);\n  }\n\n  for (let i = 0; i < instructionSet.length; i++) {\n    const instructions = instructionSet[i];\n    const signers = signersSet[i];\n\n    if (instructions.length === 0) {\n      continue;\n    }\n\n    let transaction = new Transaction();\n    instructions.forEach((instruction) => transaction.add(instruction));\n    transaction.recentBlockhash = block.blockhash;\n    transaction.setSigners(\n      // fee payed by the wallet owner\n      wallet.publicKey,\n      ...signers.map((s) => s.publicKey)\n    );\n\n    if (signers.length > 0) {\n      transaction.partialSign(...signers);\n    }\n\n    unsignedTxns.push(transaction);\n  }\n\n  const signedTxns = await wallet.signAllTransactions(unsignedTxns);\n\n  const pendingTxns: Promise<{ txid: string; slot: number }>[] = [];\n\n  let breakEarlyObject = { breakEarly: false, i: 0 };\n  console.log(\n    \"Signed txns length\",\n    signedTxns.length,\n    \"vs handed in length\",\n    instructionSet.length\n  );\n  for (let i = 0; i < signedTxns.length; i++) {\n    const signedTxnPromise = sendSignedTransaction({\n      connection,\n      signedTransaction: signedTxns[i],\n    });\n\n    signedTxnPromise\n      .then(({ txid, slot }) => {\n        successCallback(txid, i);\n      })\n      .catch((reason) => {\n        // @ts-ignore\n        failCallback(signedTxns[i], i);\n        if (sequenceType === SequenceType.StopOnFailure) {\n          breakEarlyObject.breakEarly = true;\n          breakEarlyObject.i = i;\n        }\n      });\n\n    if (sequenceType !== SequenceType.Parallel) {\n      try {\n        await signedTxnPromise;\n      } catch (e) {\n        console.log(\"Caught failure\", e);\n        if (breakEarlyObject.breakEarly) {\n          console.log(\"Died on \", breakEarlyObject.i);\n          return breakEarlyObject.i; // Return the txn we failed on by index\n        }\n      }\n    } else {\n      pendingTxns.push(signedTxnPromise);\n    }\n  }\n\n  if (sequenceType !== SequenceType.Parallel) {\n    await Promise.all(pendingTxns);\n  }\n\n  return signedTxns.length;\n};\n\nexport const sendTransaction = async (\n  connection: Connection,\n  wallet: WalletSigner,\n  instructions: TransactionInstruction[],\n  signers: Keypair[],\n  awaitConfirmation = true,\n  commitment: Commitment = \"singleGossip\",\n  includesFeePayer: boolean = false,\n  block?: BlockhashAndFeeCalculator\n) => {\n  if (!wallet.publicKey) throw new WalletNotConnectedError();\n\n  let transaction = new Transaction();\n  instructions.forEach((instruction) => transaction.add(instruction));\n  transaction.recentBlockhash = (\n    block || (await connection.getRecentBlockhash(commitment))\n  ).blockhash;\n\n  if (includesFeePayer) {\n    transaction.setSigners(...signers.map((s) => s.publicKey));\n  } else {\n    transaction.setSigners(\n      // fee payed by the wallet owner\n      wallet.publicKey,\n      ...signers.map((s) => s.publicKey)\n    );\n  }\n\n  if (signers.length > 0) {\n    transaction.partialSign(...signers);\n  }\n  if (!includesFeePayer) {\n    transaction = await wallet.signTransaction(transaction);\n  }\n\n  const rawTransaction = transaction.serialize();\n  let options = {\n    skipPreflight: true,\n    commitment,\n  };\n\n  const txid = await connection.sendRawTransaction(rawTransaction, options);\n  let slot = 0;\n\n  if (awaitConfirmation) {\n    const confirmation = await awaitTransactionSignatureConfirmation(\n      txid,\n      DEFAULT_TIMEOUT,\n      connection,\n      commitment\n    );\n\n    if (!confirmation)\n      throw new Error(\"Timed out awaiting confirmation on transaction\");\n    slot = confirmation?.slot || 0;\n\n    if (confirmation?.err) {\n      const errors = await getErrorForTransaction(connection, txid);\n      notify({\n        message: \"Transaction failed...\",\n        description: (\n          <>\n            {errors.map((err) => (\n              <div>{err}</div>\n            ))}\n            <ExplorerLink address={txid} type=\"transaction\" />\n          </>\n        ),\n        type: \"error\",\n      });\n\n      throw new Error(`Raw transaction ${txid} failed`);\n    }\n  }\n\n  return { txid, slot };\n};\n\nexport const sendTransactionWithRetry = async (\n  connection: Connection,\n  wallet: WalletSigner,\n  instructions: TransactionInstruction[],\n  signers: Keypair[],\n  commitment: Commitment = \"singleGossip\",\n  includesFeePayer: boolean = false,\n  block?: BlockhashAndFeeCalculator,\n  beforeSend?: () => void\n) : Promise<string| { txid: string; slot: number }> => {\n  if (!wallet.publicKey) throw new WalletNotConnectedError();\n\n  let transaction = new Transaction();\n  instructions.forEach((instruction) => transaction.add(instruction));\n  transaction.recentBlockhash = (\n    block || (await connection.getRecentBlockhash(commitment))\n  ).blockhash;\n\n  if (includesFeePayer) {\n    transaction.setSigners(...signers.map((s) => s.publicKey));\n  } else {\n    transaction.setSigners(\n      // fee payed by the wallet owner\n      wallet.publicKey,\n      ...signers.map((s) => s.publicKey)\n    );\n  }\n\n  if (signers.length > 0) {\n    transaction.partialSign(...signers);\n  }\n  if (!includesFeePayer) {\n    try {\n      transaction = await wallet.signTransaction(transaction);\n    } catch {\n      return \"Failed to sign transaction\";\n    }\n  }\n\n  if (beforeSend) {\n    beforeSend();\n  }\n  console.log(\"About to send\");\n  try {\n    const { txid, slot } = await sendSignedTransaction({\n      connection,\n      signedTransaction: transaction,\n    });\n\n    return { txid, slot };\n  } catch (error) {\n    console.error(error);\n    return \"See console logs\";\n  }\n};\n\nexport const getUnixTs = () => {\n  return new Date().getTime() / 1000;\n};\n\nconst DEFAULT_TIMEOUT = 15000;\n\nexport async function sendSignedTransaction({\n  signedTransaction,\n  connection,\n  timeout = DEFAULT_TIMEOUT,\n}: {\n  signedTransaction: Transaction;\n  connection: Connection;\n  sendingMessage?: string;\n  sentMessage?: string;\n  successMessage?: string;\n  timeout?: number;\n}): Promise<{ txid: string; slot: number }> {\n  const rawTransaction = signedTransaction.serialize();\n  const startTime = getUnixTs();\n  let slot = 0;\n  const txid: TransactionSignature = await connection.sendRawTransaction(\n    rawTransaction,\n    {\n      skipPreflight: true,\n    }\n  );\n\n  console.log(\"Started awaiting confirmation for\", txid);\n\n  let done = false;\n  (async () => {\n    while (!done && getUnixTs() - startTime < timeout) {\n      connection.sendRawTransaction(rawTransaction, {\n        skipPreflight: true,\n      });\n      await sleep(500);\n    }\n  })();\n  try {\n    const confirmation = await awaitTransactionSignatureConfirmation(\n      txid,\n      timeout,\n      connection,\n      \"recent\",\n      true\n    );\n\n    if (!confirmation)\n      throw new Error(\"Timed out awaiting confirmation on transaction\");\n\n    if (confirmation.err) {\n      console.error(confirmation.err);\n      throw new Error(\"Transaction failed: Custom instruction error\");\n    }\n\n    slot = confirmation?.slot || 0;\n  } catch (err) {\n    console.error(\"Timeout Error caught\", err);\n    if ((err as any).timeout) {\n      throw new Error(\"Timed out awaiting confirmation on transaction\");\n    }\n    let simulateResult: SimulatedTransactionResponse | null = null;\n    try {\n      simulateResult = (\n        await simulateTransaction(connection, signedTransaction, \"single\")\n      ).value;\n    } catch (e) {}\n    if (simulateResult && simulateResult.err) {\n      if (simulateResult.logs) {\n        for (let i = simulateResult.logs.length - 1; i >= 0; --i) {\n          const line = simulateResult.logs[i];\n          if (line.startsWith(\"Program log: \")) {\n            throw new Error(\n              \"Transaction failed: \" + line.slice(\"Program log: \".length)\n            );\n          }\n        }\n      }\n      throw new Error(JSON.stringify(simulateResult.err));\n    }\n    // throw new Error('Transaction failed');\n  } finally {\n    done = true;\n  }\n\n  console.log(\"Latency\", txid, getUnixTs() - startTime);\n  return { txid, slot };\n}\n\nasync function simulateTransaction(\n  connection: Connection,\n  transaction: Transaction,\n  commitment: Commitment\n): Promise<RpcResponseAndContext<SimulatedTransactionResponse>> {\n  // @ts-ignore\n  transaction.recentBlockhash = await connection._recentBlockhash(\n    // @ts-ignore\n    connection._disableBlockhashCaching\n  );\n\n  const signData = transaction.serializeMessage();\n  // @ts-ignore\n  const wireTransaction = transaction._serialize(signData);\n  const encodedTransaction = wireTransaction.toString(\"base64\");\n  const config: any = { encoding: \"base64\", commitment };\n  const args = [encodedTransaction, config];\n\n  // @ts-ignore\n  const res = await connection._rpcRequest(\"simulateTransaction\", args);\n  if (res.error) {\n    throw new Error(\"failed to simulate transaction: \" + res.error.message);\n  }\n  return res.result;\n}\n\nexport const envFor = (\n  connection: Connection\n) : string => {\n  let endpoint = (connection as any)._rpcEndpoint;\n  let env = \"mainnet-beta\";\n  for (const cfg of ENDPOINTS) {\n    if (cfg.endpoint === endpoint) {\n      env = cfg.name;\n      break;\n    }\n  }\n  return env;\n}\n\nexport const explorerLinkFor = (\n  txid: TransactionSignature,\n  connection: Connection\n) : string => {\n  return `https://explorer.solana.com/tx/${txid}?cluster=${envFor(connection)}`;\n}\n\nasync function awaitTransactionSignatureConfirmation(\n  txid: TransactionSignature,\n  timeout: number,\n  connection: Connection,\n  commitment: Commitment = \"recent\",\n  queryStatus = false\n): Promise<SignatureStatus | null | void> {\n\n  let done = false;\n  let status: SignatureStatus | null | void = {\n    slot: 0,\n    confirmations: 0,\n    err: null,\n  };\n  let subId = 0;\n  status = await new Promise(async (resolve, reject) => {\n    setTimeout(() => {\n      if (done) {\n        return;\n      }\n      done = true;\n      console.log(\"Rejecting for timeout...\");\n      reject({ timeout: true });\n    }, timeout);\n    try {\n      subId = connection.onSignature(\n        txid,\n        (result, context) => {\n          done = true;\n          status = {\n            err: result.err,\n            slot: context.slot,\n            confirmations: 0,\n          };\n          if (result.err) {\n            console.log(\"Rejected via websocket\", result.err);\n            reject(status);\n          } else {\n            console.log(\"Resolved via websocket\", result);\n            resolve(status);\n          }\n        },\n        commitment\n      );\n    } catch (e) {\n      done = true;\n      console.error(\"WS error in setup\", txid, e);\n    }\n    while (!done && queryStatus) {\n      // eslint-disable-next-line no-loop-func\n      (async () => {\n        try {\n          const signatureStatuses = await connection.getSignatureStatuses([\n            txid,\n          ]);\n          status = signatureStatuses && signatureStatuses.value[0];\n          console.log(explorerLinkFor(txid, connection));\n          if (!done) {\n            if (!status) {\n              console.log(\"REST null result for\", txid, status);\n            } else if (status.err) {\n              console.log(\"REST error for\", txid, status);\n              done = true;\n              reject(status.err);\n            } else if (!status.confirmations) {\n              console.log(\"REST no confirmations for\", txid, status);\n            } else {\n              console.log(\"REST confirmation for\", txid, status);\n              done = true;\n              resolve(status);\n            }\n          }\n        } catch (e) {\n          if (!done) {\n            console.log(\"REST connection error: txid\", txid, e);\n          }\n        }\n      })();\n      await sleep(2000);\n    }\n  });\n\n  //@ts-ignore\n  if (connection._signatureSubscriptions[subId])\n    connection.removeSignatureListener(subId);\n  done = true;\n  console.log(\"Returning status\", status);\n  return status;\n}\n","import {\n  TOKEN_PROGRAM_ID,\n  SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n  BPF_UPGRADE_LOADER_ID,\n  SYSTEM,\n  MEMO_ID,\n} from './ids';\n\nexport const setProgramIds = async () => {};\n\nexport const programIds = () => {\n  return {\n    token: TOKEN_PROGRAM_ID,\n    associatedToken: SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n    bpf_upgrade_loader: BPF_UPGRADE_LOADER_ID,\n    system: SYSTEM,\n    memo: MEMO_ID,\n    // store: STORE,\n  };\n};\n","import { keccak_256 } from \"js-sha3\";\n\nexport class MerkleTree {\n  leafs: Array<Buffer>;\n  layers: Array<Array<Buffer>>;\n\n  constructor(leafs : Array<Buffer>) {\n    this.leafs = leafs.slice();\n    this.layers = [];\n\n    let hashes = this.leafs.map(MerkleTree.nodeHash);\n    while (hashes.length > 0) {\n      console.log(\"Hashes\", this.layers.length, hashes);\n      this.layers.push(hashes.slice());\n      if (hashes.length === 1) break;\n      hashes = hashes.reduce((acc, cur, idx, arr) => {\n        if (idx % 2 === 0) {\n          const nxt = arr[idx + 1];\n          acc.push(MerkleTree.internalHash(cur, nxt));\n        }\n        return acc;\n      }, Array<Buffer>());\n    }\n  }\n\n  static nodeHash(\n    data : Buffer,\n  ) : Buffer {\n    return Buffer.from(keccak_256.digest([0x00, ...data]));\n  }\n\n\n  static internalHash(\n    first : Buffer,\n    second : Buffer | undefined,\n  ) : Buffer {\n    if (!second) return first;\n    const [fst, snd] = [first, second].sort(Buffer.compare)\n    return Buffer.from(\n      keccak_256.digest([0x01, ...fst, ...snd])\n    );\n  }\n\n  getRoot() : Buffer {\n    return this.layers[this.layers.length - 1][0];\n  }\n\n  getProof(idx : number) : Buffer[] {\n    return this.layers.reduce((proof, layer) => {\n      const sibling = idx ^ 1;\n      if (sibling < layer.length) {\n        proof.push(layer[sibling]);\n      }\n\n      idx = Math.floor(idx / 2);\n\n      return proof;\n    }, []);\n  }\n\n  getHexRoot(): string {\n    return this.getRoot().toString(\"hex\");\n  }\n\n  getHexProof(idx : number) : string[] {\n    return this.getProof(idx).map((el) => el.toString(\"hex\"));\n  }\n\n  verifyProof(\n    idx : number,\n    proof : Buffer[],\n    root : Buffer\n  ): boolean {\n    let pair = MerkleTree.nodeHash(this.leafs[idx]);\n    for (const item of proof) {\n      pair = MerkleTree.internalHash(pair, item);\n    }\n\n    return pair.equals(root);\n  }\n\n  static verifyClaim(\n    leaf : Buffer,\n    proof : Buffer[],\n    root : Buffer\n  ): boolean {\n    let pair = MerkleTree.nodeHash(leaf);\n    for (const item of proof) {\n      pair = MerkleTree.internalHash(pair, item);\n    }\n\n    return pair.equals(root);\n  }\n\n}\n","import React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useState,\n} from 'react';\nimport { useConnection } from './ConnectionContext';\nimport { useWallet } from '@solana/wallet-adapter-react';\nimport { AccountInfo, Connection, PublicKey } from '@solana/web3.js';\nimport { AccountLayout, MintInfo, MintLayout, u64 } from '@solana/spl-token';\nimport { TokenAccount } from '../models';\nimport { chunks } from '../utils/utils';\nimport { EventEmitter } from '../utils/eventEmitter';\nimport { StringPublicKey, WRAPPED_SOL_MINT } from '../utils/ids';\nimport { programIds } from '../utils/programIds';\n\nconst AccountsContext = React.createContext<any>(null);\n\nconst pendingCalls = new Map<string, Promise<ParsedAccountBase>>();\nconst genericCache = new Map<string, ParsedAccountBase>();\nconst pendingMintCalls = new Map<string, Promise<MintInfo>>();\nconst mintCache = new Map<string, MintInfo>();\n\nexport interface ParsedAccountBase {\n  pubkey: StringPublicKey;\n  account: AccountInfo<Buffer>;\n  info: any; // TODO: change to unknown\n}\n\nexport type AccountParser = (\n  pubkey: StringPublicKey,\n  data: AccountInfo<Buffer>,\n) => ParsedAccountBase | undefined;\n\nexport interface ParsedAccount<T> extends ParsedAccountBase {\n  info: T;\n}\n\nconst getMintInfo = async (connection: Connection, pubKey: PublicKey) => {\n  const info = await connection.getAccountInfo(pubKey);\n  if (info === null) {\n    throw new Error('Failed to find mint account');\n  }\n\n  const data = Buffer.from(info.data);\n\n  return deserializeMint(data);\n};\n\nexport const MintParser = (pubKey: string, info: AccountInfo<Buffer>) => {\n  const buffer = Buffer.from(info.data);\n\n  const data = deserializeMint(buffer);\n\n  const details = {\n    pubkey: pubKey,\n    account: {\n      ...info,\n    },\n    info: data,\n  } as ParsedAccountBase;\n\n  return details;\n};\n\nexport const TokenAccountParser = (\n  pubKey: string,\n  info: AccountInfo<Buffer>,\n) => {\n  // Sometimes a wrapped sol account gets closed, goes to 0 length,\n  // triggers an update over wss which triggers this guy to get called\n  // since your UI already logged that pubkey as a token account. Check for length.\n  if (info.data.length > 0) {\n    const buffer = Buffer.from(info.data);\n    const data = deserializeAccount(buffer);\n\n    const details = {\n      pubkey: pubKey,\n      account: {\n        ...info,\n      },\n      info: data,\n    } as TokenAccount;\n\n    return details;\n  }\n};\n\nexport const GenericAccountParser = (\n  pubKey: string,\n  info: AccountInfo<Buffer>,\n) => {\n  const buffer = Buffer.from(info.data);\n\n  const details = {\n    pubkey: pubKey,\n    account: {\n      ...info,\n    },\n    info: buffer,\n  } as ParsedAccountBase;\n\n  return details;\n};\n\nexport const keyToAccountParser = new Map<string, AccountParser>();\n\nexport const cache = {\n  emitter: new EventEmitter(),\n  query: async (\n    connection: Connection,\n    pubKey: string | PublicKey,\n    parser?: AccountParser,\n  ) => {\n    let id: PublicKey;\n    if (typeof pubKey === 'string') {\n      id = new PublicKey(pubKey);\n    } else {\n      id = pubKey;\n    }\n\n    const address = id.toBase58();\n\n    let account = genericCache.get(address);\n    if (account) {\n      return account;\n    }\n\n    let query = pendingCalls.get(address);\n    if (query) {\n      return query;\n    }\n\n    // TODO: refactor to use multiple accounts query with flush like behavior\n    query = connection.getAccountInfo(id).then(data => {\n      if (!data) {\n        throw new Error('Account not found');\n      }\n\n      return cache.add(id, data, parser);\n    }) as Promise<TokenAccount>;\n    pendingCalls.set(address, query as any);\n\n    return query;\n  },\n  add: (\n    id: PublicKey | string,\n    obj: AccountInfo<Buffer>,\n    parser?: AccountParser,\n    isActive?: boolean | undefined | ((parsed: any) => boolean),\n  ) => {\n    const address = typeof id === 'string' ? id : id?.toBase58();\n    const deserialize = parser ? parser : keyToAccountParser.get(address);\n    if (!deserialize) {\n      throw new Error(\n        'Deserializer needs to be registered or passed as a parameter',\n      );\n    }\n\n    cache.registerParser(id, deserialize);\n    pendingCalls.delete(address);\n    const account = deserialize(address, obj);\n    if (!account) {\n      return;\n    }\n\n    if (isActive === undefined) isActive = true;\n    else if (isActive instanceof Function) isActive = isActive(account);\n\n    const isNew = !genericCache.has(address);\n\n    genericCache.set(address, account);\n    cache.emitter.raiseCacheUpdated(address, isNew, deserialize, isActive);\n    return account;\n  },\n  get: (pubKey: string | PublicKey) => {\n    let key: string;\n    if (typeof pubKey !== 'string') {\n      key = pubKey.toBase58();\n    } else {\n      key = pubKey;\n    }\n\n    return genericCache.get(key);\n  },\n  delete: (pubKey: string | PublicKey) => {\n    let key: string;\n    if (typeof pubKey !== 'string') {\n      key = pubKey.toBase58();\n    } else {\n      key = pubKey;\n    }\n\n    if (genericCache.get(key)) {\n      genericCache.delete(key);\n      cache.emitter.raiseCacheDeleted(key);\n      return true;\n    }\n    return false;\n  },\n\n  byParser: (parser: AccountParser) => {\n    const result: string[] = [];\n    for (const id of keyToAccountParser.keys()) {\n      if (keyToAccountParser.get(id) === parser) {\n        result.push(id);\n      }\n    }\n\n    return result;\n  },\n  registerParser: (pubkey: PublicKey | string, parser: AccountParser) => {\n    if (pubkey) {\n      const address = typeof pubkey === 'string' ? pubkey : pubkey?.toBase58();\n      keyToAccountParser.set(address, parser);\n    }\n\n    return pubkey;\n  },\n  queryMint: async (connection: Connection, pubKey: string | PublicKey) => {\n    let id: PublicKey;\n    if (typeof pubKey === 'string') {\n      id = new PublicKey(pubKey);\n    } else {\n      id = pubKey;\n    }\n\n    const address = id.toBase58();\n    let mint = mintCache.get(address);\n    if (mint) {\n      return mint;\n    }\n\n    let query = pendingMintCalls.get(address);\n    if (query) {\n      return query;\n    }\n\n    query = getMintInfo(connection, id).then(data => {\n      pendingMintCalls.delete(address);\n\n      mintCache.set(address, data);\n      return data;\n    }) as Promise<MintInfo>;\n    pendingMintCalls.set(address, query as any);\n\n    return query;\n  },\n  getMint: (pubKey: string | PublicKey) => {\n    let key: string;\n    if (typeof pubKey !== 'string') {\n      key = pubKey.toBase58();\n    } else {\n      key = pubKey;\n    }\n\n    return mintCache.get(key);\n  },\n  addMint: (pubKey: PublicKey, obj: AccountInfo<Buffer>) => {\n    const mint = deserializeMint(obj.data);\n    const id = pubKey.toBase58();\n    mintCache.set(id, mint);\n    return mint;\n  },\n};\n\nexport const useAccountsContext = () => {\n  const context = useContext(AccountsContext);\n\n  return context;\n};\n\nfunction wrapNativeAccount(\n  pubkey: string,\n  account?: AccountInfo<Buffer>,\n): TokenAccount | undefined {\n  if (!account) {\n    return undefined;\n  }\n\n  const key = new PublicKey(pubkey);\n\n  return {\n    pubkey: pubkey,\n    account,\n    info: {\n      address: key,\n      mint: WRAPPED_SOL_MINT,\n      owner: key,\n      amount: new u64(account.lamports),\n      delegate: null,\n      delegatedAmount: new u64(0),\n      isInitialized: true,\n      isFrozen: false,\n      isNative: true,\n      rentExemptReserve: null,\n      closeAuthority: null,\n    },\n  };\n}\n\nexport const getCachedAccount = (\n  predicate: (account: TokenAccount) => boolean,\n) => {\n  for (const account of genericCache.values()) {\n    if (predicate(account)) {\n      return account as TokenAccount;\n    }\n  }\n};\n\nconst UseNativeAccount = () => {\n  const connection = useConnection();\n  const { publicKey } = useWallet();\n\n  const [nativeAccount, setNativeAccount] = useState<AccountInfo<Buffer>>();\n\n  const updateCache = useCallback(\n    account => {\n      if (publicKey) {\n        const wrapped = wrapNativeAccount(publicKey.toBase58(), account);\n        if (wrapped !== undefined) {\n          const id = publicKey.toBase58();\n          cache.registerParser(id, TokenAccountParser);\n          genericCache.set(id, wrapped as TokenAccount);\n          cache.emitter.raiseCacheUpdated(id, false, TokenAccountParser, true);\n        }\n      }\n    },\n    [publicKey],\n  );\n\n  useEffect(() => {\n    let subId = 0;\n    const updateAccount = (account: AccountInfo<Buffer> | null) => {\n      if (account) {\n        updateCache(account);\n        setNativeAccount(account);\n      }\n    };\n\n    (async () => {\n      if (!connection || !publicKey) {\n        return;\n      }\n\n      try {\n        const account = await connection.getAccountInfo(publicKey);\n        updateAccount(account);\n      } catch {\n        return;\n      }\n\n      subId = connection.onAccountChange(publicKey, updateAccount);\n    })();\n\n    return () => {\n      if (subId) {\n        connection.removeAccountChangeListener(subId);\n      }\n    };\n  }, [setNativeAccount, publicKey, connection, updateCache]);\n\n  return { nativeAccount };\n};\n\nconst PRECACHED_OWNERS = new Set<string>();\nconst precacheUserTokenAccounts = async (\n  connection: Connection,\n  owner?: PublicKey,\n) => {\n  if (!owner) {\n    return;\n  }\n\n  // used for filtering account updates over websocket\n  PRECACHED_OWNERS.add(owner.toBase58());\n\n  // user accounts are updated via ws subscription\n  const accounts = await connection.getTokenAccountsByOwner(owner, {\n    programId: programIds().token,\n  });\n\n  accounts.value.forEach(info => {\n    cache.add(info.pubkey.toBase58(), info.account, TokenAccountParser);\n  });\n};\n\nexport function AccountsProvider({ children = null as any }) {\n  const connection = useConnection();\n  const { publicKey } = useWallet();\n  const [tokenAccounts, setTokenAccounts] = useState<TokenAccount[]>([]);\n  const [userAccounts, setUserAccounts] = useState<TokenAccount[]>([]);\n  const { nativeAccount } = UseNativeAccount();\n  const walletKey = publicKey?.toBase58();\n\n  const selectUserAccounts = useCallback(() => {\n    return cache\n      .byParser(TokenAccountParser)\n      .map(id => cache.get(id))\n      .filter(a => a && a.info.owner.toBase58() === walletKey)\n      .map(a => a as TokenAccount);\n  }, [walletKey]);\n\n  useEffect(() => {\n    const accounts = selectUserAccounts().filter(\n      a => a !== undefined,\n    ) as TokenAccount[];\n    setUserAccounts(accounts);\n  }, [nativeAccount, tokenAccounts, selectUserAccounts]);\n\n  useEffect(() => {\n    const subs: number[] = [];\n    cache.emitter.onCache(args => {\n      if (args.isNew && args.isActive) {\n        let id = args.id;\n        let deserialize = args.parser;\n        connection.onAccountChange(new PublicKey(id), info => {\n          cache.add(id, info, deserialize);\n        });\n      }\n    });\n\n    return () => {\n      subs.forEach(id => connection.removeAccountChangeListener(id));\n    };\n  }, [connection]);\n\n  useEffect(() => {\n    if (!connection || !publicKey) {\n      setTokenAccounts([]);\n    } else {\n      precacheUserTokenAccounts(connection, publicKey).then(() => {\n        setTokenAccounts(selectUserAccounts());\n      });\n\n      // This can return different types of accounts: token-account, mint, multisig\n      // TODO: web3.js expose ability to filter.\n      // this should use only filter syntax to only get accounts that are owned by user\n      const tokenSubID = connection.onProgramAccountChange(\n        programIds().token,\n        info => {\n          // TODO: fix type in web3.js\n          const id = info.accountId as unknown as string;\n          // TODO: do we need a better way to identify layout (maybe a enum identifing type?)\n          if (info.accountInfo.data.length === AccountLayout.span) {\n            const data = deserializeAccount(info.accountInfo.data);\n\n            if (PRECACHED_OWNERS.has(data.owner.toBase58())) {\n              cache.add(id, info.accountInfo, TokenAccountParser);\n              setTokenAccounts(selectUserAccounts());\n            }\n          }\n        },\n        'singleGossip',\n      );\n\n      return () => {\n        connection.removeProgramAccountChangeListener(tokenSubID);\n      };\n    }\n  }, [connection, publicKey, selectUserAccounts]);\n\n  return (\n    <AccountsContext.Provider\n      value={{\n        userAccounts,\n        nativeAccount,\n      }}\n    >\n      {children}\n    </AccountsContext.Provider>\n  );\n}\n\nexport function useNativeAccount() {\n  const context = useContext(AccountsContext);\n  return {\n    account: context.nativeAccount as AccountInfo<Buffer>,\n  };\n}\n\nexport const getMultipleAccounts = async (\n  connection: any,\n  keys: string[],\n  commitment: string,\n) => {\n  const result = await Promise.all(\n    chunks(keys, 99).map(chunk =>\n      getMultipleAccountsCore(connection, chunk, commitment),\n    ),\n  );\n\n  const array = result\n    .map(\n      a =>\n        a.array.map(acc => {\n          if (!acc) {\n            return undefined;\n          }\n\n          const { data, ...rest } = acc;\n          const obj = {\n            ...rest,\n            data: Buffer.from(data[0], 'base64'),\n          } as AccountInfo<Buffer>;\n          return obj;\n        }) as AccountInfo<Buffer>[],\n    )\n    .flat();\n  return { keys, array };\n};\n\nconst getMultipleAccountsCore = async (\n  connection: any,\n  keys: string[],\n  commitment: string,\n) => {\n  const args = connection._buildArgs([keys], commitment, 'base64');\n\n  const unsafeRes = await connection._rpcRequest('getMultipleAccounts', args);\n  if (unsafeRes.error) {\n    throw new Error(\n      'failed to get info about account ' + unsafeRes.error.message,\n    );\n  }\n\n  if (unsafeRes.result.value) {\n    const array = unsafeRes.result.value as AccountInfo<string[]>[];\n    return { keys, array };\n  }\n\n  // TODO: fix\n  throw new Error();\n};\n\nexport function useMint(key?: string | PublicKey) {\n  const connection = useConnection();\n  const [mint, setMint] = useState<MintInfo>();\n\n  const id = typeof key === 'string' ? key : key?.toBase58();\n\n  useEffect(() => {\n    if (!id) {\n      return;\n    }\n\n    cache\n      .query(connection, id, MintParser)\n      .then(acc => setMint(acc.info as any))\n      .catch(err => console.log(err));\n\n    const dispose = cache.emitter.onCache(e => {\n      const event = e;\n      if (event.id === id) {\n        cache\n          .query(connection, id, MintParser)\n          .then(mint => setMint(mint.info as any));\n      }\n    });\n    return () => {\n      dispose();\n    };\n  }, [connection, id]);\n\n  return mint;\n}\n\nexport function useAccount(pubKey?: PublicKey) {\n  const connection = useConnection();\n  const [account, setAccount] = useState<TokenAccount>();\n\n  const key = pubKey?.toBase58();\n  useEffect(() => {\n    const query = async () => {\n      try {\n        if (!key) {\n          return;\n        }\n\n        const acc = await cache\n          .query(connection, key, TokenAccountParser)\n          .catch(err => console.log(err));\n        if (acc) {\n          setAccount(acc);\n        }\n      } catch (err) {\n        console.error(err);\n      }\n    };\n\n    query();\n\n    const dispose = cache.emitter.onCache(e => {\n      const event = e;\n      if (event.id === key) {\n        query();\n      }\n    });\n    return () => {\n      dispose();\n    };\n  }, [connection, key]);\n\n  return account;\n}\n\n// TODO: expose in spl package\nexport const deserializeAccount = (data: Buffer) => {\n  const accountInfo = AccountLayout.decode(data);\n  accountInfo.mint = new PublicKey(accountInfo.mint);\n  accountInfo.owner = new PublicKey(accountInfo.owner);\n  accountInfo.amount = u64.fromBuffer(accountInfo.amount);\n\n  if (accountInfo.delegateOption === 0) {\n    accountInfo.delegate = null;\n    accountInfo.delegatedAmount = new u64(0);\n  } else {\n    accountInfo.delegate = new PublicKey(accountInfo.delegate);\n    accountInfo.delegatedAmount = u64.fromBuffer(accountInfo.delegatedAmount);\n  }\n\n  accountInfo.isInitialized = accountInfo.state !== 0;\n  accountInfo.isFrozen = accountInfo.state === 2;\n\n  if (accountInfo.isNativeOption === 1) {\n    accountInfo.rentExemptReserve = u64.fromBuffer(accountInfo.isNative);\n    accountInfo.isNative = true;\n  } else {\n    accountInfo.rentExemptReserve = null;\n    accountInfo.isNative = false;\n  }\n\n  if (accountInfo.closeAuthorityOption === 0) {\n    accountInfo.closeAuthority = null;\n  } else {\n    accountInfo.closeAuthority = new PublicKey(accountInfo.closeAuthority);\n  }\n\n  return accountInfo;\n};\n\n// TODO: expose in spl package\nexport const deserializeMint = (data: Buffer) => {\n  if (data.length !== MintLayout.span) {\n    throw new Error('Not a valid Mint');\n  }\n\n  const mintInfo = MintLayout.decode(data);\n\n  if (mintInfo.mintAuthorityOption === 0) {\n    mintInfo.mintAuthority = null;\n  } else {\n    mintInfo.mintAuthority = new PublicKey(mintInfo.mintAuthority);\n  }\n\n  mintInfo.supply = u64.fromBuffer(mintInfo.supply);\n  mintInfo.isInitialized = mintInfo.isInitialized !== 0;\n\n  if (mintInfo.freezeAuthorityOption === 0) {\n    mintInfo.freezeAuthority = null;\n  } else {\n    mintInfo.freezeAuthority = new PublicKey(mintInfo.freezeAuthority);\n  }\n\n  return mintInfo as MintInfo;\n};\n","import React from 'react';\nimport { notification } from 'antd';\n// import Link from '../components/Link';\n\nexport function notify({\n  message = '',\n  description = undefined as any,\n  txid = '',\n  type = 'info',\n  placement = 'bottomLeft',\n}) {\n  if (txid) {\n    //   <Link\n    //     external\n    //     to={'https://explorer.solana.com/tx/' + txid}\n    //     style={{ color: '#0000ff' }}\n    //   >\n    //     View transaction {txid.slice(0, 8)}...{txid.slice(txid.length - 8)}\n    //   </Link>\n\n    description = <></>;\n  }\n  (notification as any)[type]({\n    message: <span style={{ color: 'black' }}>{message}</span>,\n    description: (\n      <span style={{ color: 'black', opacity: 0.5 }}>{description}</span>\n    ),\n    placement,\n    style: {\n      backgroundColor: 'white',\n    },\n  });\n}\n","import React from 'react';\nimport { Typography } from 'antd';\nimport { shortenAddress } from '../../utils/utils';\nimport { PublicKey } from '@solana/web3.js';\n\nexport const ExplorerLink = (props: {\n  address: string | PublicKey;\n  type: string;\n  code?: boolean;\n  style?: React.CSSProperties;\n  length?: number;\n}) => {\n  const { type, code } = props;\n\n  const address =\n    typeof props.address === 'string'\n      ? props.address\n      : props.address?.toBase58();\n\n  if (!address) {\n    return null;\n  }\n\n  const length = props.length ?? 9;\n\n  return (\n    <a\n      href={`https://explorer.solana.com/${type}/${address}`}\n      target=\"_blank\"\n      rel=\"noreferrer\"\n      title={address}\n      style={props.style}\n    >\n      {code ? (\n        <Typography.Text style={props.style} code>\n          {shortenAddress(address, length)}\n        </Typography.Text>\n      ) : (\n        shortenAddress(address, length)\n      )}\n    </a>\n  );\n};\n","import { EventEmitter as Emitter } from 'eventemitter3';\n\nexport class CacheUpdateEvent {\n  static type = 'CacheUpdate';\n  id: string;\n  parser: any;\n  isNew: boolean;\n  isActive: boolean;\n  constructor(id: string, isNew: boolean, parser: any, isActive: boolean) {\n    this.id = id;\n    this.parser = parser;\n    this.isNew = isNew;\n    this.isActive = isActive;\n  }\n}\n\nexport class CacheDeleteEvent {\n  static type = 'CacheUpdate';\n  id: string;\n  constructor(id: string) {\n    this.id = id;\n  }\n}\n\nexport class MarketUpdateEvent {\n  static type = 'MarketUpdate';\n  ids: Set<string>;\n  constructor(ids: Set<string>) {\n    this.ids = ids;\n  }\n}\n\nexport class EventEmitter {\n  private emitter = new Emitter();\n\n  onMarket(callback: (args: MarketUpdateEvent) => void) {\n    this.emitter.on(MarketUpdateEvent.type, callback);\n\n    return () => this.emitter.removeListener(MarketUpdateEvent.type, callback);\n  }\n\n  onCache(callback: (args: CacheUpdateEvent) => void) {\n    this.emitter.on(CacheUpdateEvent.type, callback);\n\n    return () => this.emitter.removeListener(CacheUpdateEvent.type, callback);\n  }\n\n  raiseMarketUpdated(ids: Set<string>) {\n    this.emitter.emit(MarketUpdateEvent.type, new MarketUpdateEvent(ids));\n  }\n\n  raiseCacheUpdated(\n    id: string,\n    isNew: boolean,\n    parser: any,\n    isActive: boolean,\n  ) {\n    this.emitter.emit(\n      CacheUpdateEvent.type,\n      new CacheUpdateEvent(id, isNew, parser, isActive),\n    );\n  }\n\n  raiseCacheDeleted(id: string) {\n    this.emitter.emit(CacheDeleteEvent.type, new CacheDeleteEvent(id));\n  }\n}\n","import { useCallback } from \"react\";\nimport { useWallet } from \"@solana/wallet-adapter-react\";\nimport { ENDPOINTS, useColorMode, useConnectionConfig } from \"../../contexts\";\nimport { notify, shortenAddress } from \"../../utils\";\nimport { CopyOutlined } from \"@ant-design/icons\";\nimport { ModalEnum, useModal, useWalletModal } from \"../../contexts\";\nimport { Box } from \"@mui/system\";\nimport { Button, FormControl, NativeSelect } from \"@mui/material\";\nimport { useTheme } from \"@mui/material/styles\";\nimport IconButton from \"@mui/material/IconButton\";\nimport Brightness4Icon from \"@mui/icons-material/Brightness4\";\nimport Brightness7Icon from \"@mui/icons-material/Brightness7\";\n\nexport const Settings = ({\n  additionalSettings,\n}: {\n  additionalSettings?: JSX.Element;\n}) => {\n  const { connected, disconnect, publicKey } = useWallet();\n  const { setEndpoint, env, endpoint } = useConnectionConfig();\n  const { setVisible } = useWalletModal();\n  const open = useCallback(() => setVisible(true), [setVisible]);\n  const { setModal } = useModal();\n  const theme = useTheme();\n  const colorModeCtx = useColorMode();\n\n  const handleConnect = useCallback(() => {\n    setModal(ModalEnum.WALLET);\n    setVisible(true);\n  }, [setModal, setVisible]);\n\n  return (\n    <>\n      <Box sx={{ display: \"flex\", minWidth: \"100%\" }}>\n        {!connected && (\n          <>\n            <FormControl>\n              <NativeSelect\n                style={{ marginBottom: 5 }}\n                onChange={(e) => {\n                  setEndpoint(e.target.value);\n                }}\n                value={endpoint}\n              >\n                {ENDPOINTS.map(({ name, endpoint }) => (\n                  <option key={name} value={endpoint}>{name}</option>\n                ))}\n              </NativeSelect>\n            </FormControl>\n            <Button\n              variant=\"contained\"\n              onClick={handleConnect}\n              sx={{ marginLeft: \"10px\" }}\n            >\n              Connect\n            </Button>\n          </>\n        )}\n        {connected && (\n          <>\n            {publicKey && (\n              <Button\n                variant=\"outlined\"\n                onClick={async () => {\n                  if (publicKey) {\n                    await navigator.clipboard.writeText(publicKey.toBase58());\n                    notify({\n                      message: \"Wallet update\",\n                      description: \"Address copied to clipboard\",\n                    });\n                  }\n                }}\n              >\n                <CopyOutlined />\n                {shortenAddress(publicKey.toBase58())}\n              </Button>\n            )}\n            <Button\n              variant=\"outlined\"\n              onClick={open}\n              sx={{ marginLeft: \"10px\" }}\n            >\n              Change Wallet\n            </Button>\n            <Button\n              variant=\"contained\"\n              color=\"error\"\n              onClick={() => disconnect().catch()}\n              sx={{ marginLeft: \"10px\" }}\n            >\n              Disconnect ({env})\n            </Button>\n          </>\n        )}\n        <IconButton\n          sx={{ ml: 1 }}\n          onClick={colorModeCtx.toggleColorMode}\n          color=\"inherit\"\n        >\n          {theme.palette.mode === \"dark\" ? (\n            <Brightness7Icon />\n          ) : (\n            <Brightness4Icon />\n          )}\n        </IconButton>\n        {additionalSettings}\n      </Box>\n    </>\n  );\n};\n","import React from \"react\";\nimport { RouteComponentProps, } from \"react-router-dom\";\nimport queryString from 'query-string';\n\nimport {\n  Box,\n  Button,\n  Link as HyperLink,\n  Stack,\n  TextField,\n} from \"@mui/material\";\n\nimport {\n  useWallet,\n} from \"@solana/wallet-adapter-react\";\nimport {\n  PublicKey,\n  SystemProgram,\n  TransactionInstruction,\n  SYSVAR_RENT_PUBKEY,\n} from \"@solana/web3.js\";\nimport {\n  TOKEN_PROGRAM_ID,\n} from \"@solana/spl-token\";\nimport {\n  Coder,\n} from \"@project-serum/anchor\"\nimport { keccak_256 } from \"js-sha3\";\nimport { sha256 } from \"js-sha256\";\nimport BN from 'bn.js';\nimport * as bs58 from \"bs58\";\n\nimport {\n  useConnection,\n  Connection,\n} from \"../contexts\";\nimport { SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID, notify } from \"../utils\";\nimport { MerkleTree } from \"../utils/merkle-tree\";\n\nconst MERKLE_DISTRIBUTOR_ID = new PublicKey(\"2BXKBuQPRVjV9e9qC2wAVJgFLWDH8MULRQ5W5ABmJj45\");\n\nconst idl = require(\"../utils/merkle_distributor.json\");\nconst coder = new Coder(idl);\n\nexport type ClaimProps = {};\n\nexport const Claim = (\n  props : RouteComponentProps<ClaimProps>,\n) => {\n  const connection = useConnection();\n  const wallet = useWallet();\n  const [editable, setEditable] = React.useState(false);\n\n  let params = queryString.parse(props.location.search);\n  const [distributor, setDistributor] = React.useState(params.distributor as string);\n  const [handle, setHandle] = React.useState(params.handle as string);\n  const [amountStr, setAmount] = React.useState(params.amount as string);\n  const [indexStr, setIndex] = React.useState(params.index as string);\n  const [pinStr, setPin] = React.useState(params.pin as string);\n  const [proofStr, setProof] = React.useState(params.proof as string);\n\n  const submit = async (e : React.SyntheticEvent) => {\n    e.preventDefault();\n\n    if (!wallet.connected || wallet.publicKey === null) {\n      throw new Error(`Wallet not connected`);\n    }\n\n    const amount = Number(amountStr);\n    const index = Number(indexStr);\n    const pin = pinStr.split(\",\").map(Number);\n\n    if (isNaN(amount)) {\n      throw new Error(`Could not parse amount ${amountStr}`);\n    }\n    if (isNaN(index)) {\n      throw new Error(`Could not parse index ${indexStr}`);\n    }\n\n    let distributorKey : PublicKey;\n    try {\n      distributorKey = new PublicKey(distributor);\n    } catch (err) {\n      throw new Error(`Invalid distributor key ${err}`);\n    }\n    const distributorAccount = await connection.getAccountInfo(distributorKey);\n    if (distributorAccount === null) {\n      throw new Error(`Could not fetch distributor`);\n    }\n\n    const distributorInfo = coder.accounts.decode(\n      \"MerkleDistributor\", distributorAccount.data);\n\n    const proof = proofStr === \"\" ? [] : proofStr.split(\",\").map(b => {\n      const ret = Buffer.from(bs58.decode(b))\n      if (ret.length !== 32)\n        throw new Error(`Invalid proof hash length`);\n      return ret;\n    });\n\n    console.log(\"Proof\", proof);\n\n    console.log(distributorInfo.mint.toBase58(), handle, pin);\n\n    const [claimantPda, ] = await PublicKey.findProgramAddress(\n      [\n        distributorInfo.mint.toBuffer(),\n        Buffer.from(handle),\n        Buffer.from(pin),\n      ],\n      MERKLE_DISTRIBUTOR_ID\n    );\n\n    const leaf = Buffer.from(keccak_256.digest(\n      [...new BN(index).toArray(\"le\", 8),\n       ...claimantPda.toBuffer(),\n       ...new BN(amount).toArray(\"le\", 8),\n      ]\n    ));\n\n    console.log(leaf, claimantPda.toBase58(), MerkleTree.nodeHash(leaf));\n\n    const matches = MerkleTree.verifyClaim(\n      Buffer.from(keccak_256.digest(\n        [...new BN(index).toArray(\"le\", 8),\n         ...claimantPda.toBuffer(),\n         ...new BN(amount).toArray(\"le\", 8),\n        ]\n      )),\n      proof,\n      Buffer.from(distributorInfo.root)\n    );\n\n    if (!matches) {\n      throw new Error(\"Merkle proof does not match\");\n    }\n\n    const [claimStatus, cbump] = await PublicKey.findProgramAddress(\n      [\n        Buffer.from(\"ClaimStatus\"),\n        Buffer.from(new BN(index).toArray(\"le\", 8)),\n        distributorKey.toBuffer(),\n      ],\n      MERKLE_DISTRIBUTOR_ID\n    );\n\n    const [distributorTokenKey, ] = await PublicKey.findProgramAddress(\n      [\n        distributorKey.toBuffer(),\n        TOKEN_PROGRAM_ID.toBuffer(),\n        distributorInfo.mint.toBuffer(),\n      ],\n      SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID\n    );\n\n    const [walletTokenKey, ] = await PublicKey.findProgramAddress(\n      [\n        wallet.publicKey.toBuffer(),\n        TOKEN_PROGRAM_ID.toBuffer(),\n        distributorInfo.mint.toBuffer(),\n      ],\n      SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID\n    );\n\n    const setup : Array<TransactionInstruction> = [];\n\n    if (await connection.getAccountInfo(walletTokenKey) === null) {\n      setup.push(new TransactionInstruction({\n          programId: SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n          keys: [\n              { pubkey: wallet.publicKey        , isSigner: true  , isWritable: true  } ,\n              { pubkey: walletTokenKey          , isSigner: false , isWritable: true  } ,\n              { pubkey: wallet.publicKey        , isSigner: false , isWritable: false } ,\n              { pubkey: distributorInfo.mint    , isSigner: false , isWritable: false } ,\n              { pubkey: SystemProgram.programId , isSigner: false , isWritable: false } ,\n              { pubkey: TOKEN_PROGRAM_ID        , isSigner: false , isWritable: false } ,\n              { pubkey: SYSVAR_RENT_PUBKEY      , isSigner: false , isWritable: false } ,\n          ],\n          data: Buffer.from([])\n      }));\n    }\n\n    const claimAirdrop = new TransactionInstruction({\n        programId: MERKLE_DISTRIBUTOR_ID,\n        keys: [\n            { pubkey: distributorKey          , isSigner: false , isWritable: true  } ,\n            { pubkey: claimStatus             , isSigner: false , isWritable: true  } ,\n            { pubkey: distributorTokenKey     , isSigner: false , isWritable: true  } ,\n            { pubkey: walletTokenKey          , isSigner: false , isWritable: true  } ,\n            { pubkey: wallet.publicKey        , isSigner: true  , isWritable: false } ,  // payer\n            { pubkey: SystemProgram.programId , isSigner: false , isWritable: false } ,\n            { pubkey: TOKEN_PROGRAM_ID        , isSigner: false , isWritable: false } ,\n        ],\n        data: Buffer.from([\n          ...Buffer.from(sha256.digest(\"global:claim\")).slice(0, 8),\n          ...new BN(cbump).toArray(\"le\", 1),\n          ...new BN(index).toArray(\"le\", 8),\n          ...new BN(amount).toArray(\"le\", 8),\n          ...claimantPda.toBuffer(),\n          ...new BN(proof.length).toArray(\"le\", 4),\n          ...Buffer.concat(proof),\n        ])\n    })\n\n    const claimResult = await Connection.sendTransactionWithRetry(\n      connection,\n      wallet,\n      [\n        ...setup,\n        claimAirdrop\n      ],\n      []\n    );\n\n    console.log(claimResult);\n    if (typeof claimResult === \"string\") {\n      notify({\n        message: \"Claim failed\",\n        description: claimResult,\n      });\n    } else {\n      notify({\n        message: \"Claim succeeded\",\n        description: (\n          <HyperLink href={Connection.explorerLinkFor(claimResult.txid, connection)}>\n            View transaction on explorer\n          </HyperLink>\n        ),\n      });\n    }\n  };\n\n  return (\n    <Stack spacing={2}>\n      <TextField\n        style={{width: \"60ch\"}}\n        id=\"distributor-text-field\"\n        label=\"Distributor\"\n        value={distributor}\n        onChange={(e) => setDistributor(e.target.value)}\n        disabled={!editable}\n      />\n      <TextField\n        style={{width: \"60ch\"}}\n        id=\"handle-text-field\"\n        label=\"Handle\"\n        value={handle}\n        onChange={(e) => setHandle(e.target.value)}\n        disabled={!editable}\n      />\n      <TextField\n        style={{width: \"60ch\"}}\n        id=\"amount-text-field\"\n        label=\"Amount\"\n        value={amountStr}\n        onChange={(e) => setAmount(e.target.value)}\n        disabled={!editable}\n      />\n      <TextField\n        style={{width: \"60ch\"}}\n        id=\"index-text-field\"\n        label=\"Index\"\n        value={indexStr}\n        onChange={(e) => setIndex(e.target.value)}\n        disabled={!editable}\n      />\n      <TextField\n        style={{width: \"60ch\"}}\n        id=\"pin-text-field\"\n        label=\"Pin\"\n        value={pinStr}\n        onChange={(e) => setPin(e.target.value)}\n        disabled={!editable}\n      />\n      <TextField\n        style={{width: \"60ch\"}}\n        id=\"proof-text-field\"\n        label=\"Proof\"\n        multiline\n        value={proofStr}\n        onChange={(e) => setProof(e.target.value)}\n        disabled={!editable}\n      />\n      <Box />\n      <div>\n        <Button\n          style={{width: \"15ch\"}}\n          color=\"info\"\n          onClick={(e) => setEditable(!editable)}\n        >\n          {!editable ? \"Edit Claim\" : \"Stop Editing\"}\n        </Button>\n        <Button\n          style={{width: \"45ch\"}}\n          disabled={!wallet.connected}\n          variant=\"contained\"\n          color=\"success\"\n          onClick={(e) => {\n            const wrap = async () => {\n              try {\n                await submit(e);\n              } catch (err) {\n                notify({\n                  message: \"Claim failed\",\n                  description: `${err}`,\n                });\n              }\n            };\n            wrap();\n          }}\n        >\n          Claim Merkle Airdrop\n        </Button>\n      </div>\n    </Stack>\n  );\n};\n\n","import React from \"react\";\n\nimport {\n  Box,\n  Button,\n  FormControl,\n  Link as HyperLink,\n  InputLabel,\n  MenuItem,\n  Stack,\n  Select,\n  TextField,\n} from \"@mui/material\";\nimport FilePresentIcon from '@mui/icons-material/FilePresent';\n\nimport {\n  useWallet,\n} from \"@solana/wallet-adapter-react\";\nimport {\n  Keypair,\n  PublicKey,\n  SystemProgram,\n  TransactionInstruction,\n  SYSVAR_RENT_PUBKEY,\n} from \"@solana/web3.js\";\nimport {\n  AccountLayout,\n  MintLayout,\n  Token,\n  TOKEN_PROGRAM_ID,\n} from \"@solana/spl-token\";\nimport { keccak_256 } from \"js-sha3\";\nimport { sha256 } from \"js-sha256\";\nimport BN from 'bn.js';\nimport * as bs58 from \"bs58\";\n\n// claim distribution\nimport Mailchimp from \"@mailchimp/mailchimp_transactional\"\n\nimport {\n  useConnection,\n  Connection,\n} from \"../contexts\";\nimport { SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID, notify } from \"../utils\";\nimport { MerkleTree } from \"../utils/merkle-tree\";\nimport { DragAndDrop } from \"./DragAndDrop\";\n\n// NB: assumes no overflow\nconst randomBytes = () : Uint8Array => {\n  // TODO: some predictable seed? sha256?\n  const buf = new Uint8Array(4);\n  window.crypto.getRandomValues(buf);\n  return buf;\n}\n\nconst MERKLE_DISTRIBUTOR_ID = new PublicKey(\"2BXKBuQPRVjV9e9qC2wAVJgFLWDH8MULRQ5W5ABmJj45\");\nconst WHITESPACE = \"\\u00A0\";\n\nexport type ClaimantInfo = {\n  handle : string,\n  amount : number,\n  pin    : Uint8Array,\n  bump   : number,\n  pda    : PublicKey,\n  url    : string,\n};\n\nconst setupMailchimp = (auth : string, source : string) => {\n  const mailchimp = Mailchimp(auth);\n\n  return async (\n    info : ClaimantInfo,\n    mintUrl: string,\n  ) => {\n    const message = {\n      from_email: source,\n      subject: \"Merkle Airdrop\",\n      text: `You received ${info.amount} airdropped token(s) (${mintUrl}). `\n          + `Claim them at ${info.url}`,\n      to: [\n        {\n          email: info.handle,\n          type: \"to\"\n        }\n      ]\n    };\n\n    const response = await mailchimp.messages.send({ message });\n\n    console.log(response);\n    if (!response[0] || response[0].status !== \"sent\") {\n      throw new Error(`Mailchimp failed to send email: ${response[0].reject_reason}`);\n    }\n  };\n}\n\nconst setupManual = (auth : string, source : string) => {\n  return async (\n    info : ClaimantInfo,\n    mintUrl: string,\n  ) => {\n    // TODO duplicated work since claim URLs are available for download\n    // regardless...\n    console.log({\n      \"handle\": info.handle,\n      \"url\": info.url,\n    });\n  };\n}\n\nconst setupSender = (\n  method : string,\n  auth : string,\n  source : string,\n) => {\n  if (method === \"Mailchimp\") {\n    return setupMailchimp(auth, source);\n  } else if (method === \"Manual\") {\n    return setupManual(auth, source);\n  } else {\n    throw new Error(`Unrecognized claim distribution method ${method}`);\n  }\n}\n\nconst parseClaimants = (\n  input : string\n) : Array<ClaimantInfo> => {\n  const json = JSON.parse(input);\n  return json.map(obj => {\n    return {\n      handle : obj.handle,\n      amount : obj.amount,\n      pin    : obj.pin,\n      bump   : obj.bump,\n      pda    : obj.pda,\n      url    : obj.url,\n    };\n  });\n};\n\nexport type CreateProps = {};\n\nexport const Create = (\n  props : CreateProps,\n) => {\n  const connection = useConnection();\n  const wallet = useWallet();\n  const [mint, setMint] = React.useState(localStorage.getItem(\"mint\") || \"\");\n  const [commMethod, setMethod] = React.useState(localStorage.getItem(\"commMethod\") || \"\");\n  const [commAuth, setCommAuth] = React.useState(\"\");\n  const [commSource, setCommSource] = React.useState(\"\");\n  const [filename, setFilename] = React.useState(\"\");\n  const [text, setText] = React.useState(\"\");\n  const [claimURLs, setClaimURLs] = React.useState<Array<ClaimantInfo>>([]);\n\n  const submit = async (e : React.SyntheticEvent) => {\n    e.preventDefault();\n\n    if (!wallet.connected || wallet.publicKey === null) {\n      throw new Error(`Wallet not connected`);\n    }\n\n    let mintKey : PublicKey;\n    try {\n      mintKey = new PublicKey(mint);\n    } catch (err) {\n      throw new Error(`Invalid mint key ${err}`);\n    }\n    const mintAccount = await connection.getAccountInfo(mintKey);\n    if (mintAccount === null) {\n      throw new Error(`Could not fetch mint`);\n    }\n    if (!mintAccount.owner.equals(TOKEN_PROGRAM_ID)) {\n      throw new Error(`Invalid mint owner ${mintAccount.owner.toBase58()}`);\n    }\n    if (mintAccount.data.length !== MintLayout.span) {\n      throw new Error(`Invalid mint size ${mintAccount.data.length}`);\n    }\n    // const mintInfo = MintLayout.decode(Buffer.from(mintAccount.data));\n\n    const mintUrl = `https://explorer.solana.com/address/${mintKey.toBase58()}?cluster=${Connection.envFor(connection)}`;\n    console.log(mintUrl);\n\n\n    const claimants = parseClaimants(text);\n    if (claimants.length === 0) {\n      throw new Error(`No claimants provided`);\n    }\n\n    const mightHaveExisting = (info : ClaimantInfo) => {\n      // TODO: others?\n      return info.url !== undefined && info.url !== null;\n    };\n    if (claimants.reduce((acc, c) => acc && mightHaveExisting(c), true)) {\n      // TODO: more validation of URLs? The creator is using they're own\n      // credentials to re-send so if they're malicious it's not that bad\n      // right?...\n      const resendOnly = window.confirm(\"Uploaded distribution list has URLs \"\n          + \"for all claimants. Skip creation of airdrop and only re-send links?\");\n      if (resendOnly) {\n        const sender = setupSender(commMethod, commAuth, commSource);\n        for (let idx = 0; idx < claimants.length; ++idx) {\n          await sender(claimants[idx], mintUrl);\n        }\n        return;\n      } else {\n        // Bail? another confirm to continue with creation?\n      }\n    }\n    const totalClaim = claimants.reduce((acc, c) => acc + c.amount, 0);\n    claimants.forEach(c => {\n      c.pin = randomBytes();\n    });\n\n    const [creatorTokenKey, ] = await PublicKey.findProgramAddress(\n      [\n        wallet.publicKey.toBuffer(),\n        TOKEN_PROGRAM_ID.toBuffer(),\n        mintKey.toBuffer(),\n      ],\n      SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID\n    );\n    const creatorTokenAccount = await connection.getAccountInfo(creatorTokenKey);\n    if (creatorTokenAccount === null) {\n      throw new Error(`Could not fetch creator token account`);\n    }\n    if (creatorTokenAccount.data.length !== AccountLayout.span) {\n      throw new Error(`Invalid token account size ${creatorTokenAccount.data.length}`);\n    }\n    const creatorTokenInfo = AccountLayout.decode(Buffer.from(creatorTokenAccount.data));\n    if (new BN(creatorTokenInfo.amount, 8, \"le\").toNumber() < totalClaim) {\n      throw new Error(`Creator token account does not have enough tokens`);\n    }\n\n\n    const leafs : Array<Buffer> = [];\n    for (let idx = 0; idx < claimants.length; ++idx ) {\n      const claimant = claimants[idx];\n      const seeds = [\n        mintKey.toBuffer(),\n        Buffer.from(claimant.handle),\n        Buffer.from(claimant.pin),\n      ];\n      const [claimantPda, bump] = await PublicKey.findProgramAddress(seeds, MERKLE_DISTRIBUTOR_ID);\n      claimant.bump = bump;\n      claimant.pda = claimantPda;\n      leafs.push(Buffer.from(\n        keccak_256.digest(\n          [...new BN(idx).toArray(\"le\", 8),\n           ...claimantPda.toBuffer(),\n           ...new BN(claimant.amount).toArray(\"le\", 8),\n          ]\n        )\n      ));\n    }\n\n    const tree = new MerkleTree(leafs);\n    const root = tree.getRoot();\n\n\n    const base = new Keypair();\n    const [distributor, dbump] = await PublicKey.findProgramAddress(\n      [\n        Buffer.from(\"MerkleDistributor\"),\n        base.publicKey.toBuffer(),\n      ],\n      MERKLE_DISTRIBUTOR_ID);\n\n    const [distributorTokenKey, ] = await PublicKey.findProgramAddress(\n      [\n        distributor.toBuffer(),\n        TOKEN_PROGRAM_ID.toBuffer(),\n        mintKey.toBuffer(),\n      ],\n      SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID\n    );\n\n    for (let idx = 0; idx < claimants.length; ++idx) {\n      const proof = tree.getProof(idx);\n      const verified = tree.verifyProof(idx, proof, root);\n\n      if (!verified) {\n        throw new Error(\"Merkle tree verification failed\");\n      }\n\n      const claimant = claimants[idx];\n      const params = [\n        `distributor=${distributor}`,\n        `handle=${claimant.handle}`,\n        `amount=${claimant.amount}`,\n        `index=${idx}`,\n        `pin=${claimant.pin}`,\n        `proof=${proof.map(b => bs58.encode(b))}`,\n      ];\n      const query = params.join(\"&\");\n\n      claimant.url = `${window.location.origin}${window.location.pathname}#/claim?${query}`;\n    }\n\n    // TODO: defer until success?\n    setClaimURLs(claimants);\n\n    const createDistributorTokenAccount = new TransactionInstruction({\n        programId: SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID,\n        keys: [\n            { pubkey: wallet.publicKey        , isSigner: true  , isWritable: true  } ,\n            { pubkey: distributorTokenKey     , isSigner: false , isWritable: true  } ,\n            { pubkey: distributor             , isSigner: false , isWritable: false } ,\n            { pubkey: mintKey                 , isSigner: false , isWritable: false } ,\n            { pubkey: SystemProgram.programId , isSigner: false , isWritable: false } ,\n            { pubkey: TOKEN_PROGRAM_ID        , isSigner: false , isWritable: false } ,\n            { pubkey: SYSVAR_RENT_PUBKEY      , isSigner: false , isWritable: false } ,\n        ],\n        data: Buffer.from([])\n    });\n\n    // initial merkle-distributor state\n    const initDistributor = new TransactionInstruction({\n        programId: MERKLE_DISTRIBUTOR_ID,\n        keys: [\n            { pubkey: base.publicKey          , isSigner: true  , isWritable: false } ,\n            { pubkey: distributor             , isSigner: false , isWritable: true  } ,\n            { pubkey: mintKey                 , isSigner: false , isWritable: false } ,\n            { pubkey: wallet.publicKey        , isSigner: true  , isWritable: false } ,\n            { pubkey: SystemProgram.programId , isSigner: false , isWritable: false } ,\n        ],\n        data: Buffer.from([\n          ...Buffer.from(sha256.digest(\"global:new_distributor\")).slice(0, 8),\n          ...new BN(dbump).toArray(\"le\", 1),\n          ...root,\n          ...new BN(totalClaim).toArray(\"le\", 8),\n          ...new BN(claimants.length).toArray(\"le\", 8),\n        ])\n    })\n\n    const transferToATA = Token.createTransferInstruction(\n        TOKEN_PROGRAM_ID,\n        creatorTokenKey,\n        distributorTokenKey,\n        wallet.publicKey,\n        [],\n        totalClaim\n      );\n\n\n    const createResult = await Connection.sendTransactionWithRetry(\n      connection,\n      wallet,\n      [\n        createDistributorTokenAccount,\n        initDistributor,\n        transferToATA,\n      ],\n      [base]\n    );\n\n    console.log(createResult);\n    if (typeof createResult === \"string\") {\n      throw new Error(createResult);\n    } else {\n      notify({\n        message: \"Create succeeded\",\n        description: (\n          <HyperLink href={Connection.explorerLinkFor(createResult.txid, connection)}>\n            View transaction on explorer\n          </HyperLink>\n        ),\n      });\n    }\n\n    console.log(\"Distributing claim URLs\");\n    const sender = setupSender(commMethod, commAuth, commSource);\n    for (let idx = 0; idx < claimants.length; ++idx) {\n      await sender(claimants[idx], mintUrl);\n    }\n  };\n\n  const handleFiles = (files) => {\n    if (files.length !== 1) {\n      notify({\n        message: \"File upload failed\",\n        description: \"Expecting exactly one handle-file upload\",\n      });\n      return;\n    }\n\n    const file = files[0];\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      if (e !== null && e.target !== null) {\n        if (typeof e.target.result === \"string\") {\n          try {\n            parseClaimants(e.target.result);\n          } catch {\n            notify({\n              message: `File upload failed for: ${file.name}`,\n              description: (\n                <span>\n                  Could not parse uploaded file.{WHITESPACE}\n                  <HyperLink href=\"#/\">\n                    Does it follow the JSON scheme?\n                  </HyperLink>\n                </span>\n              ),\n            });\n            setFilename(\"\");\n            setText(\"\");\n            return;\n          }\n          setFilename(file.name);\n          setText(e.target.result);\n        } else {\n          notify({\n            message: `File upload failed for: ${file.name}`,\n            description: \"Could not read uploaded file\",\n          });\n        }\n      }\n    };\n    reader.readAsText(file);\n  };\n\n  const commAuthorization = (commMethod) => {\n    if (commMethod === \"Manual\") {\n      return null;\n    }\n    return (\n      <React.Fragment>\n        <TextField\n          style={{width: \"60ch\"}}\n          id=\"comm-auth-field\"\n          label={`${commMethod} API key`}\n          value={commAuth}\n          onChange={(e) => setCommAuth(e.target.value)}\n        />\n        <TextField\n          style={{width: \"60ch\"}}\n          id=\"comm-source-field\"\n          label={`${commMethod} Source`}\n          value={commSource}\n          onChange={(e) => setCommSource(e.target.value)}\n        />\n      </React.Fragment>\n    );\n  };\n\n  const fileUpload = (\n    <React.Fragment>\n      <DragAndDrop handleDrop={handleFiles} >\n        <Stack\n          direction=\"row\"\n          style={{\n            width: \"60ch\",\n            height: \"15ch\",\n          }}\n          sx={{\n            border: '1px dashed grey',\n            justifyContent: \"center\",\n            alignContent: \"center\",\n          }}\n        >\n          <Button\n            variant=\"text\"\n            component=\"label\"\n            style={{\n              padding: 0,\n              // don't make the button click field too large...\n              marginTop: \"5ch\",\n              marginBottom: \"5ch\",\n            }}\n          >\n            Upload a distribution list\n            <input\n              type=\"file\"\n              onChange={(e) => handleFiles(e.target.files)}\n              hidden\n            />\n          </Button>\n          {WHITESPACE}\n          {/*For display alignment...*/}\n          <Button\n            variant=\"text\"\n            component=\"label\"\n            disabled={true}\n            color=\"secondary\"\n            style={{padding: 0}}\n          >\n            or drag it here\n          </Button>\n        </Stack>\n      </DragAndDrop>\n      {filename !== \"\"\n      ? (<Box style={{\n            display: 'flex',\n            justifyContent: 'center',\n            width: \"60ch\",\n            color: \"rgba(255,255,255,.8)\",\n          }}>\n            <FilePresentIcon />\n            <span>{WHITESPACE} Uploaded {filename}</span>\n          </Box>\n        )\n      : (<Box/>)}\n    </React.Fragment>\n  );\n\n  const createAirdrop = (\n    <Button\n      disabled={!wallet.connected}\n      variant=\"contained\"\n      color=\"success\"\n      onClick={(e) => {\n        const wrap = async () => {\n          try {\n            await submit(e);\n          } catch (err) {\n            // setClaimURLs([]);\n            notify({\n              message: \"Create failed\",\n              description: `${err}`,\n            });\n          }\n        };\n        wrap();\n      }}\n      sx={{ marginRight: \"4px\" }}\n    >\n      Create Merkle Airdrop\n    </Button>\n  );\n\n  const encodedClaimURLs = () => {\n    const encoded = encodeURIComponent(JSON.stringify(claimURLs));\n    return `data:text/plain;charset=utf-8,${encoded}`;\n  };\n\n  return (\n    <Stack spacing={2}>\n      <TextField\n        style={{width: \"60ch\"}}\n        id=\"mint-text-field\"\n        label=\"Mint\"\n        value={mint}\n        onChange={(e) => {\n          localStorage.setItem(\"mint\", e.target.value);\n          setMint(e.target.value);\n        }}\n      />\n      <FormControl fullWidth>\n        <InputLabel id=\"comm-method-label\">Claim Distribution Method</InputLabel>\n        <Select\n          labelId=\"comm-method-label\"\n          id=\"comm-method-select\"\n          value={commMethod}\n          label=\"Claim Distribution Method\"\n          onChange={(e) => {\n            localStorage.setItem(\"commMethod\", e.target.value);\n            setMethod(e.target.value);\n          }}\n          style={{textAlign: \"left\"}}\n        >\n          <MenuItem value={\"Mailchimp\"}>Mailchimp</MenuItem>\n          <MenuItem value={\"Manual\"}>Manual</MenuItem>\n        </Select>\n      </FormControl>\n      {commMethod !== \"\" && commAuthorization(commMethod)}\n      {commMethod !== \"\" && mint !== \"\" && fileUpload}\n      {filename !== \"\" && createAirdrop}\n      {claimURLs.length > 0 && (\n        <HyperLink\n          href={encodedClaimURLs()}\n          download=\"claimURLs.json\"\n          underline=\"none\"\n          style={{width: \"100%\"}}\n        >\n          <Button\n            variant=\"contained\"\n            style={{width: \"100%\"}}\n          >\n            Download claim URLs\n          </Button>\n        </HyperLink>\n      )}\n    </Stack>\n  );\n};\n","import React from \"react\"\n\nexport const DragAndDrop = (props) => {\n  const dropRef = React.useRef<HTMLDivElement>(null);\n  const [dragCounter, setDragCounter] = React.useState(0);\n  const [dragging, setDragging] = React.useState(false);\n\n  const handleDrag = (e) => {\n    e.preventDefault()\n    e.stopPropagation()\n  };\n\n  const handleDragIn = (e) => {\n    e.preventDefault()\n    e.stopPropagation()\n\n    setDragCounter(dragCounter + 1);\n    if (e.dataTransfer.items && e.dataTransfer.items.length > 0) {\n      setDragging(true);\n    }\n  };\n\n  const handleDragOut = (e) => {\n    e.preventDefault()\n    e.stopPropagation()\n\n    const remainingDrags = dragCounter - 1;\n    setDragCounter(remainingDrags);\n    if (remainingDrags === 0) {\n      setDragging(false);\n    }\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault()\n    e.stopPropagation()\n\n    setDragging(false);\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n      props.handleDrop(e.dataTransfer.files);\n      e.dataTransfer.clearData();\n      setDragCounter(0);\n    }\n  };\n\n  React.useEffect(() => {\n    const node = dropRef.current;\n    if (node === null) return;\n    node.addEventListener(\"dragenter\" , handleDragIn);\n    node.addEventListener(\"dragleave\" , handleDragOut);\n    node.addEventListener(\"dragover\"  , handleDrag);\n    node.addEventListener(\"drop\"      , handleDrop);\n\n    return () => {\n      node.removeEventListener(\"dragenter\" , handleDragIn);\n      node.removeEventListener(\"dragleave\" , handleDragOut);\n      node.removeEventListener(\"dragover\"  , handleDrag);\n      node.removeEventListener(\"drop\"      , handleDrop);\n    };\n  });\n\n  return (\n    <div\n      ref={dropRef}\n      style={dragging ? { backgroundColor: \"rgba(255,255,255,.3)\"} : {}}\n    >\n      {props.children}\n    </div>\n  );\n};\n\n\nexport default DragAndDrop;\n","import React from \"react\";\nimport { Modal } from \"antd\";\n\nimport \"./index.css\";\n\nexport const DefaultModal = (props: any) => {\n  const { children, closeIcon, bodyStyle, style, ...rest } = props;\n\n  return (\n    <Modal\n      style={{ background: \"transparent\", borderRadius: 16 }}\n      bodyStyle={{\n        background: \"#333333\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        ...bodyStyle,\n      }}\n      footer={null}\n      width={400}\n      {...rest}\n    >\n      {children}\n    </Modal>\n  );\n};\n","import { WalletAdapter, WalletError } from \"@solana/wallet-adapter-base\";\nimport {\n  useWallet,\n  WalletProvider as BaseWalletProvider,\n} from \"@solana/wallet-adapter-react\";\nimport {\n  getLedgerWallet,\n  getMathWallet,\n  getPhantomWallet,\n  getSolflareWallet,\n  getSolletWallet,\n  getSolongWallet,\n  getTorusWallet,\n} from \"@solana/wallet-adapter-wallets\";\nimport { Button } from \"antd\";\nimport React, {\n  createContext,\n  FC,\n  ReactNode,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\";\nimport { notify } from \"../../utils\";\nimport { DefaultModal } from \"../../components\";\n\nimport \"./wallet.less\";\n\nexport interface WalletModalContextState {\n  visible: boolean;\n  setVisible: (open: boolean) => void;\n}\n\nexport const WalletModalContext = createContext<WalletModalContextState>(\n  {} as WalletModalContextState\n);\n\nexport function useWalletModal(): WalletModalContextState {\n  return useContext(WalletModalContext);\n}\n\nexport const WalletModal: FC = () => {\n  const { wallets, wallet: selected, select } = useWallet();\n  const { visible, setVisible } = useWalletModal();\n  const [ , setShowWallets] = useState(false);\n  const close = useCallback(() => {\n    setVisible(false);\n    setShowWallets(false);\n  }, [setVisible, setShowWallets]);\n\n  return (\n    <DefaultModal visible={visible} onCancel={close}>\n      <div\n        style={{\n          background:\n            \"linear-gradient(180deg, #D329FC 0%, #8F6DDE 49.48%, #19E6AD 100%)\",\n          borderRadius: 36,\n          width: 50,\n          height: 50,\n          textAlign: \"center\",\n          verticalAlign: \"middle\",\n          fontWeight: 700,\n          fontSize: \"1.3rem\",\n          lineHeight: 2.4,\n          marginBottom: 10,\n        }}\n      ></div>\n      <h2\n        style={{\n          color: \"white\",\n          fontWeight: \"bold\",\n          fontSize: 20,\n        }}\n      >\n        {selected ? \"Change provider\" : \"\"}\n      </h2>\n      <p style={{ color: \"white\", fontSize: 14 }}>\n        {selected\n          ? \"Choose from the following options:\"\n          : \"Please sign into your wallet\"}\n      </p>\n\n      <br />\n      {wallets.map((wallet) => {\n        return (\n          <Button\n            key={wallet.name}\n            size=\"large\"\n            type={wallet === selected ? \"primary\" : \"ghost\"}\n            onClick={() => {\n              select(wallet.name);\n              close();\n            }}\n            icon={\n              <img\n                alt={`${wallet.name}`}\n                width={20}\n                height={20}\n                src={wallet.icon}\n                style={{ marginRight: 30, float: \"left\" }}\n              />\n            }\n            style={{\n              display: \"block\",\n              width: \"100%\",\n              textAlign: \"left\",\n              marginBottom: 8,\n              color: \"white\",\n            }}\n          >\n            {wallet.name}\n          </Button>\n        );\n      })}\n    </DefaultModal>\n  );\n};\n\nexport const WalletModalProvider: FC<{ children: ReactNode }> = ({\n  children,\n}) => {\n  const { publicKey } = useWallet();\n  const [connected, setConnected] = useState(!!publicKey);\n  const [visible, setVisible] = useState(false);\n\n  useEffect(() => {\n    if (publicKey) {\n      const base58 = publicKey.toBase58();\n      const keyToDisplay =\n        base58.length > 20\n          ? `${base58.substring(0, 7)}.....${base58.substring(\n              base58.length - 7,\n              base58.length\n            )}`\n          : base58;\n\n      notify({\n        message: \"Wallet update\",\n        description: \"Connected to wallet \" + keyToDisplay,\n      });\n    }\n  }, [publicKey]);\n\n  useEffect(() => {\n    if (!publicKey && connected) {\n      notify({\n        message: \"Wallet update\",\n        description: \"Disconnected from wallet\",\n      });\n    }\n    setConnected(!!publicKey);\n  }, [publicKey, connected, setConnected]);\n\n  return (\n    <WalletModalContext.Provider\n      value={{\n        visible,\n        setVisible,\n      }}\n    >\n      {children}\n      <WalletModal />\n    </WalletModalContext.Provider>\n  );\n};\n\nexport const WalletProvider: FC<{ children: ReactNode }> = ({ children }) => {\n  const wallets = useMemo(\n    () => [\n      getPhantomWallet(),\n      getSolflareWallet(),\n      getTorusWallet({\n        options: {\n          // @FIXME: this should be changed for Default, and by each Default storefront\n          clientId:\n            \"BOM5Cl7PXgE9Ylq1Z1tqzhpydY0RVr8k90QQ85N7AKI5QGSrr9iDC-3rvmy0K_hF0JfpLMiXoDhta68JwcxS1LQ\",\n        },\n      }),\n      getLedgerWallet(),\n      getSolongWallet(),\n      getMathWallet(),\n      getSolletWallet(),\n    ],\n    []\n  );\n\n  const onError = useCallback((error: WalletError) => {\n    console.error(error);\n    notify({\n      message: \"Wallet error\",\n      description: error.message,\n    });\n  }, []);\n\n  return (\n    <BaseWalletProvider wallets={wallets} onError={onError} autoConnect>\n      <WalletModalProvider>{children}</WalletModalProvider>\n    </BaseWalletProvider>\n  );\n};\n\nexport type WalletSigner = Pick<\n  WalletAdapter,\n  \"publicKey\" | \"signTransaction\" | \"signAllTransactions\"\n>;\n","export default __webpack_public_path__ + \"static/media/wallet.c746d144.less\";","import React, { useState, useContext, useCallback } from 'react';\n\nimport { WalletModal } from './WalletContext/WalletContext';\n\nexport enum ModalEnum {\n  WALLET = 'wallet',\n}\n\ntype ModalContextProps = {\n  setModal: (modal: ModalEnum | undefined) => void;\n  removeModal: () => void;\n};\n\nexport const ModalContext = React.createContext<ModalContextProps>({\n  setModal: () => null,\n  removeModal: () => null,\n});\n\nexport const ModalProvider: React.FC = ({ children }) => {\n  const [modal, setModal] = useState<ModalEnum | undefined>(undefined);\n\n  const removeModal = useCallback(() => {\n    setModal(undefined);\n  }, [setModal]);\n\n  return (\n    <ModalContext.Provider\n      value={{\n        setModal,\n        removeModal,\n      }}\n    >\n      {children}\n      {modal === ModalEnum.WALLET && <WalletModal />}\n    </ModalContext.Provider>\n  );\n};\n\nexport const useModal = (): ModalContextProps => {\n  const context = useContext(ModalContext);\n  if (context === undefined) {\n    throw new Error('useModal must be used within a ModalProvider');\n  }\n  return context;\n};\n","import { useTheme } from \"@mui/material\";\nimport React, { useContext } from \"react\";\n\nexport const ColorModeContext = React.createContext({});\n\nexport const ColorModeContextProvider = ({children=null as any }) => {\n  const [mode, setMode] = React.useState<'light' | 'dark'>('dark'); \n  const theme = useTheme();\n  const toggleColorMode = () => {\n    setMode((prevMode) => (prevMode === 'light' ? 'dark' : 'light'));\n  }\n  return (\n    <ColorModeContext.Provider\n      value={{\n        toggleColorMode,\n        mode,\n        theme,\n      }}\n    >\n      {children}\n    </ColorModeContext.Provider>\n  );\n};\n\nexport const useColorMode = (): any => {\n  const context = useContext(ColorModeContext);\n  return context;\n};\n","import { PublicKey } from '@solana/web3.js';\nimport { BinaryReader, BinaryWriter } from 'borsh';\nimport base58 from 'bs58';\nimport { StringPublicKey } from './ids';\n\nexport const extendBorsh = () => {\n  (BinaryReader.prototype as any).readPubkey = function () {\n    const reader = this as unknown as BinaryReader;\n    const array = reader.readFixedArray(32);\n    return new PublicKey(array);\n  };\n\n  (BinaryWriter.prototype as any).writePubkey = function (value: PublicKey) {\n    const writer = this as unknown as BinaryWriter;\n    writer.writeFixedArray(value.toBuffer());\n  };\n\n  (BinaryReader.prototype as any).readPubkeyAsString = function () {\n    const reader = this as unknown as BinaryReader;\n    const array = reader.readFixedArray(32);\n    return base58.encode(array) as StringPublicKey;\n  };\n\n  (BinaryWriter.prototype as any).writePubkeyAsString = function (\n    value: StringPublicKey,\n  ) {\n    const writer = this as unknown as BinaryWriter;\n    writer.writeFixedArray(base58.decode(value));\n  };\n};\n\nextendBorsh();\n","import { ButtonGroup, ButtonGroupProps } from \"@mui/material\";\nimport { Settings } from \"./Settings\";\n\nexport type ConnectButtonProps = ButtonGroupProps & {\n  isConnected: boolean;\n  onClickConnect: () => void;\n  onClickChange: () => void;\n};\n\nexport const ConnectButton: React.FC<ConnectButtonProps> = ({\n  isConnected,\n  onClickConnect,\n  onClickChange,\n  ...restProps\n}) => {\n  return (\n    <ButtonGroup   {...restProps}>\n      <Settings/>\n    </ButtonGroup>\n  );\n};\n\nexport default ConnectButton;\n","import React, { useCallback } from \"react\";\nimport {\n  Box,\n  Button,\n  Link,\n  Stack,\n} from \"@mui/material\";\n\nimport ConnectButton from \"../ConnectButton\";\nimport { ModalEnum, useModal, useWalletModal } from \"../../contexts\";\nimport { useWallet } from \"@solana/wallet-adapter-react\";\nimport { AppBar } from \"@mui/material\";\n\nexport const Header: React.FC = () => {\n  const { setModal } = useModal();\n  const { setVisible } = useWalletModal();\n  const wallet = useWallet();\n  const connected = wallet.connected;\n\n  const handleChange = useCallback(() => setVisible(true), [setVisible]);\n\n  const handleConnect = useCallback(() => {\n    setModal(ModalEnum.WALLET);\n    setVisible(true);\n  }, [setModal, setVisible]);\n  return (\n    <AppBar color=\"transparent\">\n    <Box\n      sx={{\n        display: \"flex\",\n        bgcolor: \"action.disabledBackground\",\n      }}\n      minWidth=\"100%\"\n    >\n      <Stack\n        direction=\"row\"\n        spacing={2}\n        sx={{\n          display: \"flex\",\n          height: \"62px\",\n          justifyContent: \"flex-start\",\n          alignItems: \"center\",\n          marginLeft: \"36px\",\n        }}\n      >\n        <Link href=\"#/\">\n          <Button variant=\"outlined\">\n            About\n          </Button>\n        </Link>\n        <Link href=\"#/create\">\n          <Button variant=\"outlined\">\n            Create\n          </Button>\n        </Link>\n        <Link href=\"#/claim\">\n          <Button variant=\"outlined\">\n            Claim\n          </Button>\n        </Link>\n      </Stack>\n      <Box sx={{flexGrow: 1}}></Box>\n      <Box\n        sx={{\n          display: \"flex\",\n          height: \"62px\",\n          justifyContent: \"flex-end\",\n          alignItems: \"center\",\n        }}\n      >\n        <ConnectButton\n          isConnected={connected}\n          sx={{ marginRight: \"36px\" }}\n          onClickConnect={handleConnect}\n          onClickChange={handleChange}\n        />\n      </Box>\n    </Box>\n</AppBar>\n  );\n};\n\nexport default Header;\n","import React, { useEffect, useState } from \"react\";\nimport {\n  HashRouter,\n  Link,\n  Route,\n  Switch,\n} from \"react-router-dom\";\n\nimport { createTheme, ThemeProvider } from \"@mui/material/styles\";\nimport CssBaseline from \"@mui/material/CssBaseline\";\nimport {\n  Box,\n  Button,\n  Link as HyperLink,\n  Stack,\n} from \"@mui/material\";\n\nimport \"./App.css\";\nimport {\n  useColorMode,\n} from \"./contexts\";\nimport Header from \"./components/Header/Header\";\nimport { Claim } from \"./components/Claim\";\nimport { Create } from \"./components/Create\";\n\nconst WHITESPACE = \"\\u00A0\";\n\ntype AboutProps = {};\n\nconst About = (\n  props : AboutProps,\n) => {\n  return (\n    <Stack spacing={3}>\n    <Stack\n      alignContent=\"left\"\n      textAlign=\"left\"\n      spacing={1}\n    >\n      <div>\n      Merkle Airdrop leverages the Solana blackhain and merkle trees to\n      facilitate airdrops by removing the prohibitive costs to the creators.\n      </div>\n\n\n      <div>\n      In the Solana ecosystem, the cost to creators for airdropped tokens is\n      currently largely due to rent costs being{WHITESPACE}\n      <HyperLink\n        href=\"https://docs.solana.com/implemented-proposals/rent\"\n        underline=\"none\"\n      >\n        \"fixed at the genesis\"\n      </HyperLink>\n      {WHITESPACE}(although there is a{WHITESPACE}\n      <HyperLink\n        href=\"https://forums.solana.com/t/proposal-for-a-temporary-one-off-code-change-to-reduce-the-skyrocketing-costs-of-rent/1572\"\n        underline=\"none\"\n      >\n        proposal\n      </HyperLink>\n      {WHITESPACE}to temporarily reduce these costs until a dynamic solution is\n      built). With the large increase in SOLUSD since genesis, rent costs have\n      duly skyrocketed.\n      </div>\n\n\n      <div>\n      The merkle distributor, pioneered by{WHITESPACE}\n      <HyperLink\n        href=\"https://github.com/Uniswap/merkle-distributor\"\n        underline=\"none\"\n      >\n        Uniswap\n      </HyperLink>\n      {WHITESPACE}and ported to Solana by{WHITESPACE}\n      <HyperLink\n        href=\"https://github.com/saber-hq/merkle-distributor\"\n        underline=\"none\"\n      >\n        Saber\n      </HyperLink>, solves this issue by building a 256-bit \"root hash\" from a\n      list of recipients and balances. This moves the rent costs and (nominal)\n      transaction fee to the claimer if they so choose to redeem the airdrop.\n      </div>\n\n      <div>\n      This website exposes a web-friendly way to access the on-chain\n      distributor. Creation is done by choosing a Mint, an off-chain\n      notification method, and supplying a list of recipients and balances with\n      the following JSON schema.\n      <pre>{`\n[\n  {\n    \"handle\": \"<DISTRIBUTION-SPECIFIC-HANDLE>\"\n    \"amount\": <#-TOKENS>\n  },\n  ...\n]\n      `}</pre>\n      Claims are redeemed through a URL with query params holding\n      claim-specific keys. These should be kept secret! Anyone can redeem a\n      claim once they have the URL.\n      </div>\n    </Stack>\n    <Stack\n      direction=\"row\"\n      spacing={2}\n    >\n      <Link to=\"/create\">\n        <Button\n          style={{width: \"30ch\"}}\n          variant=\"contained\"\n          color=\"info\"\n        >\n          Create\n        </Button>\n      </Link>\n      <Link to=\"/claim\">\n        <Button\n          style={{width: \"30ch\"}}\n          variant=\"contained\"\n          color=\"info\"\n        >\n          claim\n        </Button>\n      </Link>\n    </Stack>\n    </Stack>\n  );\n};\n\nconst getWindowDimensions = () => {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height,\n  };\n};\n\nconst useWindowDimensions = () => {\n  const [windowDimensions, setWindowDimensions] = useState(\n    getWindowDimensions()\n  );\n\n  useEffect(() => {\n    const handleResize = () => {\n      setWindowDimensions(getWindowDimensions());\n    }\n\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return windowDimensions;\n};\n\nfunction App() {\n  const colorModeCtx = useColorMode();\n\n  useEffect(() => {}, [colorModeCtx.mode]);\n\n  const { height } = useWindowDimensions();\n\n  const theme = React.useMemo(\n    () => {\n      let mode, disabledColor;\n      if (colorModeCtx.mode === \"dark\" || !colorModeCtx.mode) {\n        mode = \"dark\";\n        disabledColor = \"#eee\";\n      } else {\n        mode = \"light\";\n        disabledColor = \"#111\";\n      }\n\n      return createTheme({\n        palette: {\n          mode,\n          action: {\n            disabled: disabledColor,\n          },\n        },\n      })\n    },\n    [colorModeCtx.mode]\n  );\n\n  return (\n    <div className=\"App\" style={{ backgroundColor: \"transparent\" }}>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <Header />\n        <Box\n          sx={{\n            width: 600,\n            height: \"100%\",\n            flexGrow: 1,\n            pt: `${Math.floor(0.2 * height)}px`,\n            px: \"50%\",\n            display: \"flex\",\n            alignSelf: \"center\",\n            justifyContent: \"center\",\n            alignContent: \"center\",\n          }}\n        >\n          <HashRouter>\n            <Switch>\n              <Route path=\"/create\" component={Create} />\n              <Route path=\"/claim\" component={Claim} />\n              <Route path=\"/\" component={About} />\n            </Switch>\n          </HashRouter>\n        </Box>\n      </ThemeProvider>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport {\n  AccountsProvider,\n  WalletProvider,\n  ConnectionProvider,\n  ColorModeContextProvider,\n} from \"./contexts\";\n\nimport \"antd/dist/antd.css\";\nimport \"@fontsource/open-sans\";\nimport \"@fontsource/roboto\";\nimport \"@fontsource/sora\";\n\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <ConnectionProvider>\n      <WalletProvider>\n        <AccountsProvider>\n          <ColorModeContextProvider>\n            <App />\n          </ColorModeContextProvider>\n        </AccountsProvider>\n      </WalletProvider>\n    </ConnectionProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nreportWebVitals();\n","import BN from 'bn.js';\n\nexport const TEN = new BN(10);\nexport const HALF_WAD = TEN.pow(new BN(18));\nexport const WAD = TEN.pow(new BN(18));\nexport const RAY = TEN.pow(new BN(27));\nexport const ZERO = new BN(0);\n","import { useCallback, useState } from 'react';\nimport { MintInfo } from '@solana/spl-token';\n\nimport { TokenAccount } from './../models';\nimport { PublicKey } from '@solana/web3.js';\nimport BN from 'bn.js';\nimport { WAD, ZERO } from '../constants';\nimport { TokenInfo } from '@solana/spl-token-registry';\n\nexport type KnownTokenMap = Map<string, TokenInfo>;\n\nexport const formatPriceNumber = new Intl.NumberFormat('en-US', {\n  style: 'decimal',\n  minimumFractionDigits: 2,\n  maximumFractionDigits: 8,\n});\n\nexport function useLocalStorageState(key: string, defaultState?: string) {\n  const [state, setState] = useState(() => {\n    // NOTE: Not sure if this is ok\n    const storedState = localStorage.getItem(key);\n    if (storedState) {\n      return JSON.parse(storedState);\n    }\n    return defaultState;\n  });\n\n  const setLocalStorageState = useCallback(\n    newState => {\n      const changed = state !== newState;\n      if (!changed) {\n        return;\n      }\n      setState(newState);\n      if (newState === null) {\n        localStorage.removeItem(key);\n      } else {\n        try {\n          localStorage.setItem(key, JSON.stringify(newState));\n        } catch {\n          // ignore\n        }\n      }\n    },\n    [state, key],\n  );\n\n  return [state, setLocalStorageState];\n}\n\nexport const findProgramAddress = async (\n  seeds: (Buffer | Uint8Array)[],\n  programId: PublicKey,\n) => {\n  const key =\n    'pda-' +\n    seeds.reduce((agg, item) => agg + item.toString('hex'), '') +\n    programId.toString();\n  let cached = localStorage.getItem(key);\n  if (cached) {\n    const value = JSON.parse(cached);\n\n    return [value.key, parseInt(value.nonce)] as [string, number];\n  }\n\n  const result = await PublicKey.findProgramAddress(seeds, programId);\n\n  try {\n    localStorage.setItem(\n      key,\n      JSON.stringify({\n        key: result[0].toBase58(),\n        nonce: result[1],\n      }),\n    );\n  } catch {\n    // ignore\n  }\n\n  return [result[0].toBase58(), result[1]] as [string, number];\n};\n\n// shorten the checksummed version of the input address to have 4 characters at start and end\nexport function shortenAddress(address: string, chars = 4): string {\n  return `${address.slice(0, chars)}...${address.slice(-chars)}`;\n}\n\nexport function getTokenName(\n  map: KnownTokenMap,\n  mint?: string | PublicKey,\n  shorten = true,\n): string {\n  const mintAddress = typeof mint === 'string' ? mint : mint?.toBase58();\n\n  if (!mintAddress) {\n    return 'N/A';\n  }\n\n  const knownSymbol = map.get(mintAddress)?.symbol;\n  if (knownSymbol) {\n    return knownSymbol;\n  }\n\n  return shorten ? `${mintAddress.substring(0, 5)}...` : mintAddress;\n}\nexport function getVerboseTokenName(\n  map: KnownTokenMap,\n  mint?: string | PublicKey,\n  shorten = true,\n): string {\n  const mintAddress = typeof mint === 'string' ? mint : mint?.toBase58();\n\n  if (!mintAddress) {\n    return 'N/A';\n  }\n\n  const knownName = map.get(mintAddress)?.name;\n  if (knownName) {\n    return knownName;\n  }\n\n  return shorten ? `${mintAddress.substring(0, 5)}...` : mintAddress;\n}\n\nexport function getTokenByName(tokenMap: KnownTokenMap, name: string) {\n  let token: TokenInfo | null = null;\n  for (const val of tokenMap.values()) {\n    if (val.symbol === name) {\n      token = val;\n      break;\n    }\n  }\n  return token;\n}\n\nexport function getTokenIcon(\n  map: KnownTokenMap,\n  mintAddress?: string | PublicKey,\n): string | undefined {\n  const address =\n    typeof mintAddress === 'string' ? mintAddress : mintAddress?.toBase58();\n  if (!address) {\n    return;\n  }\n\n  return map.get(address)?.logoURI;\n}\n\nexport function isKnownMint(map: KnownTokenMap, mintAddress: string) {\n  return !!map.get(mintAddress);\n}\n\nexport const STABLE_COINS = new Set(['USDC', 'wUSDC', 'USDT']);\n\nexport function chunks<T>(array: T[], size: number): T[][] {\n  return Array.apply<number, T[], T[][]>(\n    0,\n    new Array(Math.ceil(array.length / size)),\n  ).map((_, index) => array.slice(index * size, (index + 1) * size));\n}\n\nexport function toLamports(\n  account?: TokenAccount | number,\n  mint?: MintInfo,\n): number {\n  if (!account) {\n    return 0;\n  }\n\n  const amount =\n    typeof account === 'number' ? account : account.info.amount?.toNumber();\n\n  const precision = Math.pow(10, mint?.decimals || 0);\n  return Math.floor(amount * precision);\n}\n\nexport function wadToLamports(amount?: BN): BN {\n  return amount?.div(WAD) || ZERO;\n}\n\nexport function fromLamports(\n  account?: TokenAccount | number | BN,\n  mint?: MintInfo,\n  rate: number = 1.0,\n): number {\n  if (!account) {\n    return 0;\n  }\n\n  const amount = Math.floor(\n    typeof account === 'number'\n      ? account\n      : BN.isBN(account)\n      ? account.toNumber()\n      : account.info.amount.toNumber(),\n  );\n\n  const precision = Math.pow(10, mint?.decimals || 9);\n  return (amount / precision) * rate;\n}\n\nexport const tryParseKey = (key: string): PublicKey | null => {\n  try {\n    return new PublicKey(key);\n  } catch (error) {\n    return null;\n  }\n};\n\nvar SI_SYMBOL = ['', 'k', 'M', 'G', 'T', 'P', 'E'];\n\nconst abbreviateNumber = (number: number, precision: number) => {\n  let tier = (Math.log10(number) / 3) | 0;\n  let scaled = number;\n  let suffix = SI_SYMBOL[tier];\n  if (tier !== 0) {\n    let scale = Math.pow(10, tier * 3);\n    scaled = number / scale;\n  }\n\n  return scaled.toFixed(precision) + suffix;\n};\n\nexport const formatAmount = (\n  val: number,\n  precision: number = 2,\n  abbr: boolean = true,\n) => (abbr ? abbreviateNumber(val, precision) : val.toFixed(precision));\n\nexport function formatTokenAmount(\n  account?: TokenAccount | number | BN,\n  mint?: MintInfo,\n  rate: number = 1.0,\n  prefix = '',\n  suffix = '',\n  precision = 2,\n  abbr = false,\n): string {\n  if (!account) {\n    return '';\n  }\n\n  return `${[prefix]}${formatAmount(\n    fromLamports(account, mint, rate),\n    precision,\n    abbr,\n  )}${suffix}`;\n}\n\nexport const formatUSD = new Intl.NumberFormat('en-US', {\n  style: 'currency',\n  currency: 'USD',\n});\n\nconst numberFormater = new Intl.NumberFormat('en-US', {\n  style: 'decimal',\n  minimumFractionDigits: 2,\n  maximumFractionDigits: 2,\n});\n\nexport const formatNumber = {\n  format: (val?: number) => {\n    if (!val) {\n      return '--';\n    }\n\n    return numberFormater.format(val);\n  },\n};\n\nexport const formatPct = new Intl.NumberFormat('en-US', {\n  style: 'percent',\n  minimumFractionDigits: 2,\n  maximumFractionDigits: 2,\n});\n\nexport function convert(\n  account?: TokenAccount | number,\n  mint?: MintInfo,\n  rate: number = 1.0,\n): number {\n  if (!account) {\n    return 0;\n  }\n\n  const amount =\n    typeof account === 'number' ? account : account.info.amount?.toNumber();\n\n  const precision = Math.pow(10, mint?.decimals || 0);\n  let result = (amount / precision) * rate;\n\n  return result;\n}\n\nexport function sleep(ms: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n"],"sourceRoot":""}