(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[0],{106:function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return l}));n(8),n(12);var r=n(5),a=(new Map,new r.PublicKey("So11111111111111111111111111111111111111112")),i=new r.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),c=new r.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),o=new r.PublicKey("BPFLoaderUpgradeab1e11111111111111111111111"),s=new r.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),u=new r.PublicKey("11111111111111111111111111111111"),l=new r.PublicKey("2BXKBuQPRVjV9e9qC2wAVJgFLWDH8MULRQ5W5ABmJj45")},114:function(e,t,n){"use strict";n.r(t),n.d(t,"ENDPOINTS",(function(){return j})),n.d(t,"ConnectionProvider",(function(){return y})),n.d(t,"useConnection",(function(){return O})),n.d(t,"useConnectionConfig",(function(){return w})),n.d(t,"getErrorForTransaction",(function(){return C})),n.d(t,"SequenceType",(function(){return k})),n.d(t,"sendTransactionsWithManualRetry",(function(){return S})),n.d(t,"sendTransactions",(function(){return P})),n.d(t,"sendTransaction",(function(){return E})),n.d(t,"sendTransactionWithRetry",(function(){return B})),n.d(t,"getUnixTs",(function(){return M})),n.d(t,"sendSignedTransaction",(function(){return K})),n.d(t,"envFor",(function(){return L})),n.d(t,"explorerLinkFor",(function(){return R}));var r=n(30),a=n(2),i=n.n(a),c=n(6),o=n(16),s=n(10),u=n(95),l=n(5),d=n(0),f=n.n(d),b=n(241),h=n(242),p=n(216),m=n(17),g=n(4),j=[{name:"mainnet-beta",endpoint:"https://api.mainnet-beta.solana.com",ChainId:p.a.MainnetBeta},{name:"devnet",endpoint:"https://api.devnet.solana.com",ChainId:p.a.Devnet}],v=j[0].endpoint,x=f.a.createContext({endpoint:v,setEndpoint:function(){},connection:new l.Connection(v,"recent"),env:j[0].name,tokens:[],tokenMap:new Map});function y(e){var t,n=e.children,r=void 0===n?void 0:n,a=Object(u.d)("connectionEndpoint",j[0].endpoint),i=Object(s.a)(a,2),c=i[0],f=i[1],b=Object(d.useMemo)((function(){return new l.Connection(c,"recent")}),[c]),h=(null===(t=j.find((function(e){return e.endpoint===c})))||void 0===t?void 0:t.name)||j[0].name,m=Object(d.useState)([]),v=Object(s.a)(m,2),y=v[0],O=v[1],w=Object(d.useState)(new Map),k=Object(s.a)(w,2),C=k[0],S=k[1];return Object(d.useEffect)((function(){(new p.b).resolve().then((function(e){var t,n=e.excludeByTag("nft").filterByChainId((null===(t=j.find((function(e){return e.endpoint===c})))||void 0===t?void 0:t.ChainId)||p.a.MainnetBeta).getList(),r=Object(o.a)(n).reduce((function(e,t){return e.set(t.address,t),e}),new Map);S(r),O(n)}))}),[h,c]),Object(d.useEffect)((function(){var e=b.onAccountChange(l.Keypair.generate().publicKey,(function(){}));return function(){b.removeAccountChangeListener(e)}}),[b]),Object(d.useEffect)((function(){var e=b.onSlotChange((function(){return null}));return function(){b.removeSlotChangeListener(e)}}),[b]),Object(g.jsx)(x.Provider,{value:{endpoint:c,setEndpoint:f,connection:b,tokens:y,tokenMap:C,env:h},children:r})}function O(){return Object(d.useContext)(x).connection}function w(){var e=Object(d.useContext)(x);return{endpoint:e.endpoint,setEndpoint:e.setEndpoint,env:e.env,tokens:e.tokens,tokenMap:e.tokenMap}}var k,C=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"max");case 2:return e.next=4,t.getParsedConfirmedTransaction(n);case 4:return r=e.sent,a=[],(null===r||void 0===r?void 0:r.meta)&&r.meta.logMessages&&r.meta.logMessages.forEach((function(e){for(var t,n=/Error: (.*)/gm;null!==(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,t.length>1&&a.push(t[1])})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function S(e,t,n,r){return A.apply(this,arguments)}function A(){return(A=Object(c.a)(i.a.mark((function e(t,n,r,a){var c,o,s,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=0,o=0,s=null,u={},r=r.filter((function(e,t){return e.length>0||(u[t]=!0,!1)})),l=a.filter((function(e,t){return!u[t]}));case 6:if(!(c<r.length&&o<3)){e.next=29;break}if(r=r.slice(c,r.length),l=l.slice(c,l.length),r.length===s?o+=1:o=0,e.prev=10,1!==r.length){e.next=17;break}return e.next=14,B(t,n,r[0],l[0],"single");case 14:c=1,e.next=20;break;case 17:return e.next=19,P(t,n,r,l,k.StopOnFailure,"single");case 19:c=e.sent;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(10),console.error(e.t0);case 25:console.log("Died on ",c,"retrying from instruction",r[c],"instructions length is",r.length),s=r.length,e.next=6;break;case 29:case"end":return e.stop()}}),e,null,[[10,22]])})))).apply(this,arguments)}!function(e){e[e.Sequential=0]="Sequential",e[e.Parallel=1]="Parallel",e[e.StopOnFailure=2]="StopOnFailure"}(k||(k={}));var P=function(){var e=Object(c.a)(i.a.mark((function e(t,n,r,a){var c,s,u,d,f,b,h,p,g,j,v,x,y,O,w=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=w.length>4&&void 0!==w[4]?w[4]:k.Parallel,s=w.length>5&&void 0!==w[5]?w[5]:"singleGossip",u=w.length>6&&void 0!==w[6]?w[6]:function(e,t){},d=w.length>7&&void 0!==w[7]?w[7]:function(e,t){return!1},f=w.length>8?w[8]:void 0,n.publicKey){e.next=7;break}throw new m.i;case 7:if(b=[],f){e.next=12;break}return e.next=11,t.getRecentBlockhash(s);case 11:f=e.sent;case 12:h=function(e){var t=r[e],i=a[e];if(0===t.length)return"continue";var c=new l.Transaction;t.forEach((function(e){return c.add(e)})),c.recentBlockhash=f.blockhash,c.setSigners.apply(c,[n.publicKey].concat(Object(o.a)(i.map((function(e){return e.publicKey}))))),i.length>0&&c.partialSign.apply(c,Object(o.a)(i)),b.push(c)},p=0;case 14:if(!(p<r.length)){e.next=21;break}if("continue"!==h(p)){e.next=18;break}return e.abrupt("continue",18);case 18:p++,e.next=14;break;case 21:return e.next=23,n.signAllTransactions(b);case 23:g=e.sent,j=[],v={breakEarly:!1,i:0},console.log("Signed txns length",g.length,"vs handed in length",r.length),x=i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=K({connection:t,signedTransaction:g[n]})).then((function(e){var t=e.txid;e.slot;u(t,n)})).catch((function(e){d(g[n],n),c===k.StopOnFailure&&(v.breakEarly=!0,v.i=n)})),c===k.Parallel){e.next=16;break}return e.prev=3,e.next=6,r;case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),console.log("Caught failure",e.t0),!v.breakEarly){e.next=14;break}return console.log("Died on ",v.i),e.abrupt("return",{v:v.i});case 14:e.next=17;break;case 16:j.push(r);case 17:case"end":return e.stop()}}),e,null,[[3,8]])})),y=0;case 29:if(!(y<g.length)){e.next=37;break}return e.delegateYield(x(y),"t0",31);case 31:if("object"!==typeof(O=e.t0)){e.next=34;break}return e.abrupt("return",O.v);case 34:y++,e.next=29;break;case 37:if(c===k.Parallel){e.next=40;break}return e.next=40,Promise.all(j);case 40:return e.abrupt("return",g.length);case 41:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),E=function(){var e=Object(c.a)(i.a.mark((function e(t,n,r,a){var c,s,u,d,f,p,j,v,x,y,O,w,k,S,A=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=!(A.length>4&&void 0!==A[4])||A[4],s=A.length>5&&void 0!==A[5]?A[5]:"singleGossip",u=A.length>6&&void 0!==A[6]&&A[6],d=A.length>7?A[7]:void 0,n.publicKey){e.next=6;break}throw new m.i;case 6:if(f=new l.Transaction,r.forEach((function(e){return f.add(e)})),e.t0=d,e.t0){e.next=13;break}return e.next=12,t.getRecentBlockhash(s);case 12:e.t0=e.sent;case 13:if(f.recentBlockhash=e.t0.blockhash,u?(p=f).setSigners.apply(p,Object(o.a)(a.map((function(e){return e.publicKey})))):(j=f).setSigners.apply(j,[n.publicKey].concat(Object(o.a)(a.map((function(e){return e.publicKey}))))),a.length>0&&(v=f).partialSign.apply(v,Object(o.a)(a)),u){e.next=20;break}return e.next=19,n.signTransaction(f);case 19:f=e.sent;case 20:return x=f.serialize(),y={skipPreflight:!0,commitment:s},e.next=24,t.sendRawTransaction(x,y);case 24:if(O=e.sent,w=0,!c){e.next=39;break}return e.next=29,W(O,T,t,s);case 29:if(k=e.sent){e.next=32;break}throw new Error("Timed out awaiting confirmation on transaction");case 32:if(w=(null===k||void 0===k?void 0:k.slot)||0,!(null===k||void 0===k?void 0:k.err)){e.next=39;break}return e.next=36,C(t,O);case 36:throw S=e.sent,Object(b.a)({message:"Transaction failed...",description:Object(g.jsxs)(g.Fragment,{children:[S.map((function(e){return Object(g.jsx)("div",{children:e})})),Object(g.jsx)(h.a,{address:O,type:"transaction"})]}),type:"error"}),new Error("Raw transaction ".concat(O," failed"));case 39:return e.abrupt("return",{txid:O,slot:w});case 40:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),B=function(){var e=Object(c.a)(i.a.mark((function e(t,n,r,a){var c,s,u,d,f,b,h,p,g,j,v,x=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=x.length>4&&void 0!==x[4]?x[4]:"singleGossip",s=x.length>5&&void 0!==x[5]&&x[5],u=x.length>6?x[6]:void 0,d=x.length>7?x[7]:void 0,n.publicKey){e.next=6;break}throw new m.i;case 6:if(f=new l.Transaction,r.forEach((function(e){return f.add(e)})),e.t0=u,e.t0){e.next=13;break}return e.next=12,t.getRecentBlockhash(c);case 12:e.t0=e.sent;case 13:if(f.recentBlockhash=e.t0.blockhash,s?(b=f).setSigners.apply(b,Object(o.a)(a.map((function(e){return e.publicKey})))):(h=f).setSigners.apply(h,[n.publicKey].concat(Object(o.a)(a.map((function(e){return e.publicKey}))))),a.length>0&&(p=f).partialSign.apply(p,Object(o.a)(a)),s){e.next=26;break}return e.prev=17,e.next=20,n.signTransaction(f);case 20:f=e.sent,e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(17),e.abrupt("return","Failed to sign transaction");case 26:return d&&d(),console.log("About to send"),e.prev=28,e.next=31,K({connection:t,signedTransaction:f});case 31:return g=e.sent,j=g.txid,v=g.slot,e.abrupt("return",{txid:j,slot:v});case 37:return e.prev=37,e.t2=e.catch(28),console.error(e.t2),e.abrupt("return","See console logs");case 41:case"end":return e.stop()}}),e,null,[[17,23],[28,37]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),M=function(){return(new Date).getTime()/1e3},T=15e3;function K(e){return I.apply(this,arguments)}function I(){return(I=Object(c.a)(i.a.mark((function e(t){var n,r,a,o,s,l,d,f,b,h,p,m,g;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,r=t.connection,a=t.timeout,o=void 0===a?T:a,s=n.serialize(),l=M(),d=0,e.next=6,r.sendRawTransaction(s,{skipPreflight:!0});case 6:return f=e.sent,console.log("Started awaiting confirmation for",f),b=!1,Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b||!(M()-l<o)){e.next=6;break}return r.sendRawTransaction(s,{skipPreflight:!0}),e.next=4,Object(u.c)(500);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=10,e.next=13,W(f,o,r,"recent",!0);case 13:if(h=e.sent){e.next=16;break}throw new Error("Timed out awaiting confirmation on transaction");case 16:if(!h.err){e.next=19;break}throw console.error(h.err),new Error("Transaction failed: Custom instruction error");case 19:d=(null===h||void 0===h?void 0:h.slot)||0,e.next=47;break;case 22:if(e.prev=22,e.t0=e.catch(10),console.error("Timeout Error caught",e.t0),!e.t0.timeout){e.next=27;break}throw new Error("Timed out awaiting confirmation on transaction");case 27:return p=null,e.prev=28,e.next=31,D(r,n,"single");case 31:p=e.sent.value,e.next=36;break;case 34:e.prev=34,e.t1=e.catch(28);case 36:if(!p||!p.err){e.next=47;break}if(!p.logs){e.next=46;break}m=p.logs.length-1;case 39:if(!(m>=0)){e.next=46;break}if(!(g=p.logs[m]).startsWith("Program log: ")){e.next=43;break}throw new Error("Transaction failed: "+g.slice("Program log: ".length));case 43:--m,e.next=39;break;case 46:throw new Error(JSON.stringify(p.err));case 47:return e.prev=47,b=!0,e.finish(47);case 50:return console.log("Latency",f,M()-l),e.abrupt("return",{txid:f,slot:d});case 52:case"end":return e.stop()}}),e,null,[[10,22,47,50],[28,34]])})))).apply(this,arguments)}function D(e,t,n){return N.apply(this,arguments)}function N(){return(N=Object(c.a)(i.a.mark((function e(t,n,r){var a,c,o,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._recentBlockhash(t._disableBlockhashCaching);case 2:return n.recentBlockhash=e.sent,a=n.serializeMessage(),c=n._serialize(a),o=c.toString("base64"),s=[o,{encoding:"base64",commitment:r}],e.next=10,t._rpcRequest("simulateTransaction",s);case 10:if(!(u=e.sent).error){e.next=13;break}throw new Error("failed to simulate transaction: "+u.error.message);case 13:return e.abrupt("return",u.result);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=function(e){var t,n=e._rpcEndpoint,a="mainnet-beta",i=Object(r.a)(j);try{for(i.s();!(t=i.n()).done;){var c=t.value;if(c.endpoint===n){a=c.name;break}}}catch(o){i.e(o)}finally{i.f()}return a},R=function(e,t){return"https://explorer.solana.com/tx/".concat(e,"?cluster=").concat(L(t))};function W(e,t,n){return F.apply(this,arguments)}function F(){return F=Object(c.a)(i.a.mark((function e(t,n,r){var a,o,s,l,d,f=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>3&&void 0!==f[3]?f[3]:"recent",o=f.length>4&&void 0!==f[4]&&f[4],s=!1,l={slot:0,confirmations:0,err:null},d=0,e.next=7,new Promise(function(){var e=Object(c.a)(i.a.mark((function e(f,b){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){s||(s=!0,console.log("Rejecting for timeout..."),b({timeout:!0}))}),n);try{d=r.onSignature(t,(function(e,t){s=!0,l={err:e.err,slot:t.slot,confirmations:0},e.err?(console.log("Rejected via websocket",e.err),b(l)):(console.log("Resolved via websocket",e),f(l))}),a)}catch(h){s=!0,console.error("WS error in setup",t,h)}case 2:if(s||!o){e.next=8;break}return Object(c.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getSignatureStatuses([t]);case 3:n=e.sent,l=n&&n.value[0],console.log(R(t,r)),s||(l?l.err?(console.log("REST error for",t,l),s=!0,b(l.err)):l.confirmations?(console.log("REST confirmation for",t,l),s=!0,f(l)):console.log("REST no confirmations for",t,l):console.log("REST null result for",t,l)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),s||console.log("REST connection error: txid",t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))(),e.next=6,Object(u.c)(2e3);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return l=e.sent,r._signatureSubscriptions[d]&&r.removeSignatureListener(d),s=!0,console.log("Returning status",l),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}},197:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(2),n(6);var r=n(106),a=function(){return{token:r.f,associatedToken:r.d,bpf_upgrade_loader:r.a,system:r.e,memo:r.b}}},198:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(31),a=n(133),i=(n(0),n(831)),c=(n(763),n(4)),o=["children","closeIcon","bodyStyle","style"],s=function(e){var t=e.children,n=(e.closeIcon,e.bodyStyle),s=(e.style,Object(a.a)(e,o));return Object(c.jsx)(i.a,Object(r.a)(Object(r.a)({style:{background:"transparent",borderRadius:16},bodyStyle:Object(r.a)({background:"#333333",display:"flex",flexDirection:"column",alignItems:"center"},n),footer:null,width:400},s),{},{children:t}))}},210:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var r=n(10),a=n(16),i=n(30),c=n(8),o=n(12),s=n(96),u=function(){function t(e){Object(c.a)(this,t),this.leafs=void 0,this.layers=void 0,this.leafs=e.slice(),this.layers=[];for(var n=this.leafs.map(t.nodeHash);n.length>0&&(console.log("Hashes",this.layers.length,n),this.layers.push(n.slice()),1!==n.length);)n=n.reduce((function(e,n,r,a){if(r%2===0){var i=a[r+1];e.push(t.internalHash(n,i))}return e}),Array())}return Object(o.a)(t,[{key:"getRoot",value:function(){return this.layers[this.layers.length-1][0]}},{key:"getProof",value:function(e){return this.layers.reduce((function(t,n){var r=1^e;return r<n.length&&t.push(n[r]),e=Math.floor(e/2),t}),[])}},{key:"getHexRoot",value:function(){return this.getRoot().toString("hex")}},{key:"getHexProof",value:function(e){return this.getProof(e).map((function(e){return e.toString("hex")}))}},{key:"verifyProof",value:function(e,n,r){var a,c=t.nodeHash(this.leafs[e]),o=Object(i.a)(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;c=t.internalHash(c,s)}}catch(u){o.e(u)}finally{o.f()}return c.equals(r)}}],[{key:"nodeHash",value:function(t){return e.from(s.keccak_256.digest([0].concat(Object(a.a)(t))))}},{key:"internalHash",value:function(t,n){if(!n)return t;var i=[t,n].sort(e.compare),c=Object(r.a)(i,2),o=c[0],u=c[1];return e.from(s.keccak_256.digest([1].concat(Object(a.a)(o),Object(a.a)(u))))}},{key:"verifyClaim",value:function(e,n,r){var a,c=t.nodeHash(e),o=Object(i.a)(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;c=t.internalHash(c,s)}}catch(u){o.e(u)}finally{o.f()}return c.equals(r)}}]),t}()}).call(this,n(13).Buffer)},218:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return M}));n(133);var r=n(10),a=n(30),i=n(31),c=n(2),o=n.n(c),s=n(6),u=n(0),l=n.n(u),d=n(114),f=n(66),b=n(5),h=n(43),p=(n(95),n(243)),m=n(106),g=n(197),j=n(4),v=l.a.createContext(null),x=new Map,y=new Map,O=new Map,w=new Map,k=function(){var t=Object(s.a)(o.a.mark((function t(n,r){var a,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getAccountInfo(r);case 2:if(null!==(a=t.sent)){t.next=5;break}throw new Error("Failed to find mint account");case 5:return i=e.from(a.data),t.abrupt("return",K(i));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),C=function(t,n){if(n.data.length>0){var r=e.from(n.data),a=T(r);return{pubkey:t,account:Object(i.a)({},n),info:a}}},S=new Map,A={emitter:new p.a,query:function(){var e=Object(s.a)(o.a.mark((function e(t,n,r){var a,i,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="string"===typeof n?new b.PublicKey(n):n,i=a.toBase58(),!(c=y.get(i))){e.next=5;break}return e.abrupt("return",c);case 5:if(!(s=x.get(i))){e.next=8;break}return e.abrupt("return",s);case 8:return s=t.getAccountInfo(a).then((function(e){if(!e)throw new Error("Account not found");return A.add(a,e,r)})),x.set(i,s),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),add:function(e,t,n,r){var a="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),i=n||S.get(a);if(!i)throw new Error("Deserializer needs to be registered or passed as a parameter");A.registerParser(e,i),x.delete(a);var c=i(a,t);if(c){void 0===r?r=!0:r instanceof Function&&(r=r(c));var o=!y.has(a);return y.set(a,c),A.emitter.raiseCacheUpdated(a,o,i,r),c}},get:function(e){var t;return t="string"!==typeof e?e.toBase58():e,y.get(t)},delete:function(e){var t;return t="string"!==typeof e?e.toBase58():e,!!y.get(t)&&(y.delete(t),A.emitter.raiseCacheDeleted(t),!0)},byParser:function(e){var t,n=[],r=Object(a.a)(S.keys());try{for(r.s();!(t=r.n()).done;){var i=t.value;S.get(i)===e&&n.push(i)}}catch(c){r.e(c)}finally{r.f()}return n},registerParser:function(e,t){if(e){var n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();S.set(n,t)}return e},queryMint:function(){var e=Object(s.a)(o.a.mark((function e(t,n){var r,a,i,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"===typeof n?new b.PublicKey(n):n,a=r.toBase58(),!(i=w.get(a))){e.next=5;break}return e.abrupt("return",i);case 5:if(!(c=O.get(a))){e.next=8;break}return e.abrupt("return",c);case 8:return c=k(t,r).then((function(e){return O.delete(a),w.set(a,e),e})),O.set(a,c),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getMint:function(e){var t;return t="string"!==typeof e?e.toBase58():e,w.get(t)},addMint:function(e,t){var n=K(t.data),r=e.toBase58();return w.set(r,n),n}};var P=function(){var e=Object(d.useConnection)(),t=Object(f.b)().publicKey,n=Object(u.useState)(),a=Object(r.a)(n,2),i=a[0],c=a[1],l=Object(u.useCallback)((function(e){if(t){var n=function(e,t){if(t){var n=new b.PublicKey(e);return{pubkey:e,account:t,info:{address:n,mint:m.g,owner:n,amount:new h.e(t.lamports),delegate:null,delegatedAmount:new h.e(0),isInitialized:!0,isFrozen:!1,isNative:!0,rentExemptReserve:null,closeAuthority:null}}}}(t.toBase58(),e);if(void 0!==n){var r=t.toBase58();A.registerParser(r,C),y.set(r,n),A.emitter.raiseCacheUpdated(r,!1,C,!0)}}}),[t]);return Object(u.useEffect)((function(){var n=0,r=function(e){e&&(l(e),c(e))};return Object(s.a)(o.a.mark((function a(){var i;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&t){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,a.next=5,e.getAccountInfo(t);case 5:i=a.sent,r(i),a.next=12;break;case 9:return a.prev=9,a.t0=a.catch(2),a.abrupt("return");case 12:n=e.onAccountChange(t,r);case 13:case"end":return a.stop()}}),a,null,[[2,9]])})))(),function(){n&&e.removeAccountChangeListener(n)}}),[c,t,e,l]),{nativeAccount:i}},E=new Set,B=function(){var e=Object(s.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return E.add(n.toBase58()),e.next=5,t.getTokenAccountsByOwner(n,{programId:Object(g.a)().token});case 5:e.sent.value.forEach((function(e){A.add(e.pubkey.toBase58(),e.account,C)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function M(e){var t=e.children,n=void 0===t?null:t,a=Object(d.useConnection)(),i=Object(f.b)().publicKey,c=Object(u.useState)([]),o=Object(r.a)(c,2),s=o[0],l=o[1],p=Object(u.useState)([]),m=Object(r.a)(p,2),x=m[0],y=m[1],O=P().nativeAccount,w=null===i||void 0===i?void 0:i.toBase58(),k=Object(u.useCallback)((function(){return A.byParser(C).map((function(e){return A.get(e)})).filter((function(e){return e&&e.info.owner.toBase58()===w})).map((function(e){return e}))}),[w]);return Object(u.useEffect)((function(){var e=k().filter((function(e){return void 0!==e}));y(e)}),[O,s,k]),Object(u.useEffect)((function(){var e=[];return A.emitter.onCache((function(e){if(e.isNew&&e.isActive){var t=e.id,n=e.parser;a.onAccountChange(new b.PublicKey(t),(function(e){A.add(t,e,n)}))}})),function(){e.forEach((function(e){return a.removeAccountChangeListener(e)}))}}),[a]),Object(u.useEffect)((function(){if(a&&i){B(a,i).then((function(){l(k())}));var e=a.onProgramAccountChange(Object(g.a)().token,(function(e){var t=e.accountId;if(e.accountInfo.data.length===h.a.span){var n=T(e.accountInfo.data);E.has(n.owner.toBase58())&&(A.add(t,e.accountInfo,C),l(k()))}}),"singleGossip");return function(){a.removeProgramAccountChangeListener(e)}}l([])}),[a,i,k]),Object(j.jsx)(v.Provider,{value:{userAccounts:x,nativeAccount:O},children:n})}var T=function(e){var t=h.a.decode(e);return t.mint=new b.PublicKey(t.mint),t.owner=new b.PublicKey(t.owner),t.amount=h.e.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new h.e(0)):(t.delegate=new b.PublicKey(t.delegate),t.delegatedAmount=h.e.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=h.e.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new b.PublicKey(t.closeAuthority),t},K=function(e){if(e.length!==h.b.span)throw new Error("Not a valid Mint");var t=h.b.decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new b.PublicKey(t.mintAuthority),t.supply=h.e.fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new b.PublicKey(t.freezeAuthority),t}}).call(this,n(13).Buffer)},241:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(0);var r=n(339),a=n(4);function i(e){var t=e.message,n=void 0===t?"":t,i=e.description,c=void 0===i?void 0:i,o=e.txid,s=void 0===o?"":o,u=e.type,l=void 0===u?"info":u,d=e.placement,f=void 0===d?"bottomLeft":d;s&&(c=Object(a.jsx)(a.Fragment,{})),r.a[l]({message:Object(a.jsx)("span",{style:{color:"black"},children:n}),description:Object(a.jsx)("span",{style:{color:"black",opacity:.5},children:c}),placement:f,style:{backgroundColor:"white"}})}},242:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(0);var r=n(830),a=n(95),i=n(4),c=function(e){var t,n,c=e.type,o=e.code,s="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58();if(!s)return null;var u=null!==(n=e.length)&&void 0!==n?n:9;return Object(i.jsx)("a",{href:"https://explorer.solana.com/".concat(c,"/").concat(s),target:"_blank",rel:"noreferrer",title:s,style:e.style,children:o?Object(i.jsx)(r.a.Text,{style:e.style,code:!0,children:Object(a.b)(s,u)}):Object(a.b)(s,u)})}},243:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(12),a=n(8),i=n(85),c=function e(t,n,r,i){Object(a.a)(this,e),this.id=void 0,this.parser=void 0,this.isNew=void 0,this.isActive=void 0,this.id=t,this.parser=r,this.isNew=n,this.isActive=i};c.type="CacheUpdate";var o=function e(t){Object(a.a)(this,e),this.id=void 0,this.id=t};o.type="CacheUpdate";var s=function e(t){Object(a.a)(this,e),this.ids=void 0,this.ids=t};s.type="MarketUpdate";var u=function(){function e(){Object(a.a)(this,e),this.emitter=new i.EventEmitter}return Object(r.a)(e,[{key:"onMarket",value:function(e){var t=this;return this.emitter.on(s.type,e),function(){return t.emitter.removeListener(s.type,e)}}},{key:"onCache",value:function(e){var t=this;return this.emitter.on(c.type,e),function(){return t.emitter.removeListener(c.type,e)}}},{key:"raiseMarketUpdated",value:function(e){this.emitter.emit(s.type,new s(e))}},{key:"raiseCacheUpdated",value:function(e,t,n,r){this.emitter.emit(c.type,new c(e,t,n,r))}},{key:"raiseCacheDeleted",value:function(e){this.emitter.emit(o.type,new o(e))}}]),e}()},244:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(2),a=n.n(r),i=n(6),c=n(0),o=n(66),s=n(47),u=n(40),l=n(340),d=n(820),f=n(489),b=n(823),h=n(79),p=n(103),m=n(834),g=n(466),j=n.n(g),v=n(465),x=n.n(v),y=n(4),O=function(e){var t=e.additionalSettings,n=Object(o.b)(),r=n.connected,g=n.disconnect,v=n.publicKey,O=Object(s.j)(),w=O.setEndpoint,k=O.env,C=O.endpoint,S=Object(s.l)().setVisible,A=Object(c.useCallback)((function(){return S(!0)}),[S]),P=Object(s.k)().setModal,E=Object(p.a)(),B=Object(s.h)(),M=Object(c.useCallback)((function(){P(s.f.WALLET),S(!0)}),[P,S]);return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(d.a,{sx:{display:"flex",minWidth:"100%"},children:[!r&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(f.a,{children:Object(y.jsx)(b.a,{style:{marginBottom:5},onChange:function(e){w(e.target.value)},value:C,children:s.e.map((function(e){var t=e.name,n=e.endpoint;return Object(y.jsx)("option",{value:n,children:t},t)}))})}),Object(y.jsx)(h.a,{variant:"contained",onClick:M,sx:{marginLeft:"10px"},children:"Connect"})]}),r&&Object(y.jsxs)(y.Fragment,{children:[v&&Object(y.jsxs)(h.a,{variant:"outlined",onClick:Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=4;break}return e.next=3,navigator.clipboard.writeText(v.toBase58());case 3:Object(u.c)({message:"Wallet update",description:"Address copied to clipboard"});case 4:case"end":return e.stop()}}),e)}))),children:[Object(y.jsx)(l.a,{}),Object(u.d)(v.toBase58())]}),Object(y.jsx)(h.a,{variant:"outlined",onClick:A,sx:{marginLeft:"10px"},children:"Change Wallet"}),Object(y.jsxs)(h.a,{variant:"contained",color:"error",onClick:function(){return g().catch()},sx:{marginLeft:"10px"},children:["Disconnect (",k,")"]})]}),Object(y.jsx)(m.a,{sx:{ml:1},onClick:B.toggleColorMode,color:"inherit",children:"dark"===E.palette.mode?Object(y.jsx)(x.a,{}):Object(y.jsx)(j.a,{})}),t]})})}},40:function(e,t,n){"use strict";n.d(t,"b",(function(){return r.d})),n.d(t,"a",(function(){return r.c})),n.d(t,"c",(function(){return a.a})),n.d(t,"d",(function(){return i.b}));n(243);var r=n(106),a=(n(197),n(437),n(241)),i=n(95);var c=n(5),o=n(124),s=n(39),u=n.n(s);o.BinaryReader.prototype.readPubkey=function(){var e=this.readFixedArray(32);return new c.PublicKey(e)},o.BinaryWriter.prototype.writePubkey=function(e){this.writeFixedArray(e.toBuffer())},o.BinaryReader.prototype.readPubkeyAsString=function(){var e=this.readFixedArray(32);return u.a.encode(e)},o.BinaryWriter.prototype.writePubkeyAsString=function(e){this.writeFixedArray(u.a.decode(e))}},437:function(e,t,n){"use strict";(function(e){n(16),n(5),n(35),n(89)}).call(this,n(13).Buffer)},442:function(e){e.exports=JSON.parse('{"version":"0.0.0","name":"merkle_distributor","instructions":[{"name":"newDistributor","accounts":[{"name":"base","isMut":false,"isSigner":true},{"name":"distributor","isMut":true,"isSigner":false},{"name":"mint","isMut":false,"isSigner":false},{"name":"payer","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"root","type":{"array":["u8",32]}},{"name":"maxTotalClaim","type":"u64"},{"name":"maxNumNodes","type":"u64"}]},{"name":"claim","accounts":[{"name":"distributor","isMut":true,"isSigner":false},{"name":"claimStatus","isMut":true,"isSigner":false},{"name":"from","isMut":true,"isSigner":false},{"name":"to","isMut":true,"isSigner":false},{"name":"payer","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"claimantAccount","type":"publicKey"},{"name":"index","type":"u64"},{"name":"amount","type":"u64"},{"name":"proof","type":{"vec":{"array":["u8",32]}}}]}],"accounts":[{"name":"MerkleDistributor","type":{"kind":"struct","fields":[{"name":"base","type":"publicKey"},{"name":"bump","type":"u8"},{"name":"root","type":{"array":["u8",32]}},{"name":"mint","type":"publicKey"},{"name":"maxTotalClaim","type":"u64"},{"name":"maxNumNodes","type":"u64"},{"name":"totalAmountClaimed","type":"u64"},{"name":"numNodesClaimed","type":"u64"}]}},{"name":"ClaimStatus","type":{"kind":"struct","fields":[{"name":"isClaimed","type":"bool"},{"name":"claimant","type":"publicKey"},{"name":"claimedAt","type":"i64"},{"name":"amount","type":"u64"}]}}],"events":[{"name":"ClaimedEvent","fields":[{"name":"index","type":"u64","index":false},{"name":"claimant","type":"publicKey","index":false},{"name":"amount","type":"u64","index":false}]}],"errors":[{"code":300,"name":"InvalidProof","msg":"Invalid Merkle proof."},{"code":301,"name":"DropAlreadyClaimed","msg":"Drop already claimed."},{"code":302,"name":"ExceededMaxClaim","msg":"Exceeded maximum claim amount."},{"code":303,"name":"ExceededMaxNumNodes","msg":"Exceeded maximum number of claimed nodes."},{"code":304,"name":"Unauthorized","msg":"Account is not authorized to execute this instruction"},{"code":305,"name":"OwnerMismatch","msg":"Token account owner did not match intended owner"}]}')},468:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return T}));var r=n(2),a=n.n(r),i=n(16),c=n(6),o=n(10),s=n(0),u=n.n(s),l=n(469),d=n.n(l),f=n(152),b=n(280),h=n(79),p=n(108),m=n(342),g=n(66),j=n(5),v=n(43),x=n(177),y=n(96),O=n(60),w=n(35),k=n.n(w),C=n(39),S=n(47),A=n(40),P=n(210),E=n(4),B=n(442),M=new x.a(B),T=function(t){var n=Object(S.i)(),r=Object(g.b)(),s=d.a.parse(t.location.search),l=u.a.useState(s.distributor||""),x=Object(o.a)(l,2),w=x[0],B=x[1],T=u.a.useState(s.handle||""),K=Object(o.a)(T,2),I=K[0],D=K[1],N=u.a.useState(s.amount||""),L=Object(o.a)(N,2),R=L[0],W=L[1],F=u.a.useState(s.index||""),U=Object(o.a)(F,2),z=U[0],H=U[1],_=u.a.useState(s.pin||""),q=Object(o.a)(_,2),J=q[0],V=q[1],G=u.a.useState(s.proof||""),Q=Object(o.a)(G,2),X=Q[0],Y=Q[1],Z=w.length>0&&I.length>0&&R.length>0&&z.length>0&&J.length>0,$=u.a.useState(!Z),ee=Object(o.a)($,2),te=ee[0],ne=ee[1],re=function(){var t=Object(c.a)(a.a.mark((function t(c){var s,u,l,d,b,h,p,m,g,x,B,T,K,D,N,L,W,F,U,H,_,q,V,G;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.preventDefault(),r.connected&&null!==r.publicKey){t.next=3;break}throw new Error("Wallet not connected");case 3:if(s=Number(R),u=Number(z),l=J.split(",").map(Number),!isNaN(s)){t.next=8;break}throw new Error("Could not parse amount ".concat(R));case 8:if(!isNaN(u)){t.next=10;break}throw new Error("Could not parse index ".concat(z));case 10:t.prev=10,d=new j.PublicKey(w),t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(10),new Error("Invalid distributor key ".concat(t.t0));case 17:return t.next=19,n.getAccountInfo(d);case 19:if(null!==(b=t.sent)){t.next=22;break}throw new Error("Could not fetch distributor");case 22:return h=M.accounts.decode("MerkleDistributor",b.data),p=""===X?[]:X.split(",").map((function(t){var n=e.from(C.decode(t));if(32!==n.length)throw new Error("Invalid proof hash length");return n})),console.log("Proof",p),console.log(h.mint.toBase58(),I,l),t.next=28,j.PublicKey.findProgramAddress([h.mint.toBuffer(),e.from(I),e.from(l)],A.a);case 28:if(m=t.sent,g=Object(o.a)(m,1),x=g[0],B=e.from(y.keccak_256.digest([].concat(Object(i.a)(new k.a(u).toArray("le",8)),Object(i.a)(x.toBuffer()),Object(i.a)(new k.a(s).toArray("le",8))))),console.log(B,x.toBase58(),P.a.nodeHash(B)),P.a.verifyClaim(e.from(y.keccak_256.digest([].concat(Object(i.a)(new k.a(u).toArray("le",8)),Object(i.a)(x.toBuffer()),Object(i.a)(new k.a(s).toArray("le",8))))),p,e.from(h.root))){t.next=36;break}throw new Error("Merkle proof does not match");case 36:return t.next=38,j.PublicKey.findProgramAddress([e.from("ClaimStatus"),e.from(new k.a(u).toArray("le",8)),d.toBuffer()],A.a);case 38:return T=t.sent,K=Object(o.a)(T,2),D=K[0],N=K[1],t.next=44,j.PublicKey.findProgramAddress([d.toBuffer(),v.c.toBuffer(),h.mint.toBuffer()],A.b);case 44:return L=t.sent,W=Object(o.a)(L,1),F=W[0],t.next=49,j.PublicKey.findProgramAddress([r.publicKey.toBuffer(),v.c.toBuffer(),h.mint.toBuffer()],A.b);case 49:return U=t.sent,H=Object(o.a)(U,1),_=H[0],q=[],t.next=55,n.getAccountInfo(_);case 55:if(t.t1=t.sent,null!==t.t1){t.next=58;break}q.push(v.d.createAssociatedTokenAccountInstruction(A.b,v.c,h.mint,_,r.publicKey,r.publicKey));case 58:return V=new j.TransactionInstruction({programId:A.a,keys:[{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:D,isSigner:!1,isWritable:!0},{pubkey:F,isSigner:!1,isWritable:!0},{pubkey:_,isSigner:!1,isWritable:!0},{pubkey:r.publicKey,isSigner:!0,isWritable:!1},{pubkey:j.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:v.c,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(i.a)(e.from(O.sha256.digest("global:claim")).slice(0,8)),Object(i.a)(new k.a(N).toArray("le",1)),Object(i.a)(new k.a(u).toArray("le",8)),Object(i.a)(new k.a(s).toArray("le",8)),Object(i.a)(x.toBuffer()),Object(i.a)(new k.a(p.length).toArray("le",4)),Object(i.a)(e.concat(p))))}),t.next=61,S.c.sendTransactionWithRetry(n,r,[].concat(q,[V]),[]);case 61:G=t.sent,console.log(G),"string"===typeof G?Object(A.c)({message:"Claim failed",description:G}):Object(A.c)({message:"Claim succeeded",description:Object(E.jsx)(f.a,{href:S.c.explorerLinkFor(G.txid,n),children:"View transaction on explorer"})});case 64:case"end":return t.stop()}}),t,null,[[10,14]])})));return function(e){return t.apply(this,arguments)}}();return Object(E.jsxs)(b.a,{spacing:2,children:[Object(E.jsx)(h.a,{color:"info",onClick:function(e){return ne(!te)},children:te?"Stop Editing":"Edit Claim"}),Object(E.jsx)(p.a,{style:{width:"60ch"},id:"distributor-text-field",label:"Distributor",value:w,onChange:function(e){return B(e.target.value)},disabled:!te}),Object(E.jsx)(p.a,{style:{width:"60ch"},id:"handle-text-field",label:"Handle",value:I,onChange:function(e){return D(e.target.value)},disabled:!te}),Object(E.jsx)(p.a,{style:{width:"60ch"},id:"amount-text-field",label:"Amount",value:R,onChange:function(e){return W(e.target.value)},disabled:!te}),Object(E.jsx)(p.a,{style:{width:"60ch"},id:"index-text-field",label:"Index",value:z,onChange:function(e){return H(e.target.value)},disabled:!te}),Object(E.jsx)(p.a,{style:{width:"60ch"},id:"pin-text-field",label:"Pin",value:J,onChange:function(e){return V(e.target.value)},disabled:!te}),Object(E.jsx)(p.a,{style:{width:"60ch"},id:"proof-text-field",label:"Proof",multiline:!0,value:X,onChange:function(e){return Y(e.target.value)},disabled:!te}),Object(E.jsx)(m.a,{}),Object(E.jsx)(h.a,{disabled:!r.connected||!Z,variant:"contained",color:"success",onClick:function(e){var t=function(){var t=Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,re(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(A.c)({message:"Claim failed",description:"".concat(t.t0)});case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}();t()},children:"Claim Merkle Airdrop"})]})}}).call(this,n(13).Buffer)},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return a.ENDPOINTS})),n.d(t,"d",(function(){return a.ConnectionProvider})),n.d(t,"i",(function(){return a.useConnection})),n.d(t,"j",(function(){return a.useConnectionConfig})),n.d(t,"l",(function(){return p})),n.d(t,"g",(function(){return v})),n.d(t,"f",(function(){return m})),n.d(t,"k",(function(){return y})),n.d(t,"b",(function(){return k})),n.d(t,"h",(function(){return C}));var r=n(218),a=n(114),i=n(10),c=n(66),o=n(137),s=n(208),u=n(0),l=n.n(u),d=n(40),f=n(198),b=(n(242),n(244),n.p,n(4)),h=Object(u.createContext)({});function p(){return Object(u.useContext)(h)}var m,g=function(){var e=Object(c.b)(),t=e.wallets,n=e.wallet,r=e.select,a=p(),o=a.visible,l=a.setVisible,d=Object(u.useState)(!1),h=Object(i.a)(d,2)[1],m=Object(u.useCallback)((function(){l(!1),h(!1)}),[l,h]);return Object(b.jsxs)(f.a,{visible:o,onCancel:m,children:[Object(b.jsx)("div",{style:{background:"linear-gradient(180deg, #D329FC 0%, #8F6DDE 49.48%, #19E6AD 100%)",borderRadius:36,width:50,height:50,textAlign:"center",verticalAlign:"middle",fontWeight:700,fontSize:"1.3rem",lineHeight:2.4,marginBottom:10}}),Object(b.jsx)("h2",{style:{color:"white",fontWeight:"bold",fontSize:20},children:n?"Change provider":""}),Object(b.jsx)("p",{style:{color:"white",fontSize:14},children:n?"Choose from the following options:":"Please sign into your wallet"}),Object(b.jsx)("br",{}),t.map((function(e){return Object(b.jsx)(s.a,{size:"large",type:e===n?"primary":"ghost",onClick:function(){r(e.name),m()},icon:Object(b.jsx)("img",{alt:"".concat(e.name),width:20,height:20,src:e.icon,style:{marginRight:30,float:"left"}}),style:{display:"block",width:"100%",textAlign:"left",marginBottom:8,color:"white"},children:e.name},e.name)}))]})},j=function(e){var t=e.children,n=Object(c.b)().publicKey,r=Object(u.useState)(!!n),a=Object(i.a)(r,2),o=a[0],s=a[1],l=Object(u.useState)(!1),f=Object(i.a)(l,2),p=f[0],m=f[1];return Object(u.useEffect)((function(){if(n){var e=n.toBase58(),t=e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e;Object(d.c)({message:"Wallet update",description:"Connected to wallet "+t})}}),[n]),Object(u.useEffect)((function(){!n&&o&&Object(d.c)({message:"Wallet update",description:"Disconnected from wallet"}),s(!!n)}),[n,o,s]),Object(b.jsxs)(h.Provider,{value:{visible:p,setVisible:m},children:[t,Object(b.jsx)(g,{})]})},v=function(e){var t=e.children,n=Object(u.useMemo)((function(){return[Object(o.c)(),Object(o.d)(),Object(o.g)({options:{clientId:"BOM5Cl7PXgE9Ylq1Z1tqzhpydY0RVr8k90QQ85N7AKI5QGSrr9iDC-3rvmy0K_hF0JfpLMiXoDhta68JwcxS1LQ"}}),Object(o.a)(),Object(o.f)(),Object(o.b)(),Object(o.e)()]}),[]),r=Object(u.useCallback)((function(e){console.error(e),Object(d.c)({message:"Wallet error",description:e.message})}),[]);return Object(b.jsx)(c.a,{wallets:n,onError:r,autoConnect:!0,children:Object(b.jsx)(j,{children:t})})};!function(e){e.WALLET="wallet"}(m||(m={}));var x=l.a.createContext({setModal:function(){return null},removeModal:function(){return null}}),y=function(){var e=Object(u.useContext)(x);if(void 0===e)throw new Error("useModal must be used within a ModalProvider");return e},O=n(103),w=l.a.createContext({}),k=function(e){var t=e.children,n=void 0===t?null:t,r=l.a.useState("dark"),a=Object(i.a)(r,2),c=a[0],o=a[1],s=Object(O.a)();return Object(b.jsx)(w.Provider,{value:{toggleColorMode:function(){o((function(e){return"light"===e?"dark":"light"}))},mode:c,theme:s},children:n})},C=function(){return Object(u.useContext)(w)}},471:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return S}));var r=n(2),a=n.n(r),i=n(16),c=n(6),o=n(10),s=n(0),u=n.n(s),l=n(152),d=n(280),f=n(108),b=n(79),h=n(66),p=n(5),m=n(43),g=n(177),j=n(35),v=n.n(j),x=n(60),y=n(47),O=n(40),w=n(4),k=n(442),C=new g.a(k),S=function(){var t=Object(y.i)(),n=Object(h.b)(),r=u.a.useState(""),s=Object(o.a)(r,2),g=s[0],j=s[1],k=function(){var r=Object(c.a)(a.a.mark((function r(c){var s,u,d,f,b,h,j,k,S,A,P,E,B,M,T;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c.preventDefault(),n.connected&&null!==n.publicKey){r.next=3;break}throw new Error("Wallet not connected");case 3:return s=p.Keypair.fromSecretKey(new Uint8Array(JSON.parse(g))),r.next=6,p.PublicKey.findProgramAddress([e.from("MerkleDistributor"),s.publicKey.toBuffer()],O.a);case 6:return u=r.sent,d=Object(o.a)(u,2),f=d[0],b=d[1],r.next=12,t.getAccountInfo(f);case 12:if(null!==(h=r.sent)){r.next=15;break}throw new Error("Could not fetch distributor");case 15:return j=C.accounts.decode("MerkleDistributor",h.data),r.next=18,p.PublicKey.findProgramAddress([f.toBuffer(),m.c.toBuffer(),j.mint.toBuffer()],O.b);case 18:return k=r.sent,S=Object(o.a)(k,1),A=S[0],r.next=23,p.PublicKey.findProgramAddress([n.publicKey.toBuffer(),m.c.toBuffer(),j.mint.toBuffer()],O.b);case 23:return P=r.sent,E=Object(o.a)(P,1),B=E[0],M=new p.TransactionInstruction({programId:O.a,keys:[{pubkey:s.publicKey,isSigner:!0,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:B,isSigner:!1,isWritable:!0},{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:p.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:m.c,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(i.a)(e.from(x.sha256.digest("global:close_distributor")).slice(0,8)),Object(i.a)(new v.a(b).toArray("le",1))))}),r.next=29,y.c.sendTransactionWithRetry(t,n,[M],[s]);case 29:T=r.sent,console.log(T),"string"===typeof T?Object(O.c)({message:"Close failed",description:T}):Object(O.c)({message:"Close succeeded",description:Object(w.jsx)(l.a,{href:y.c.explorerLinkFor(T.txid,t),children:"View transaction on explorer"})});case 32:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return Object(w.jsxs)(d.a,{spacing:2,children:[Object(w.jsx)(f.a,{style:{width:"60ch"},id:"base-text-field",label:"Base Private Key",value:g,onChange:function(e){return j(e.target.value)}}),Object(w.jsx)(b.a,{disabled:!n.connected,variant:"contained",color:"success",onClick:function(e){var t=function(){var t=Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(O.c)({message:"Close failed",description:"".concat(t.t0)});case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}();t()},children:"Close Merkle Airdrop"})]})}}).call(this,n(13).Buffer)},472:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return X}));var r=n(16),a=n(10),i=n(2),c=n.n(i),o=n(6),s=n(0),u=n.n(s),l=n(44),d=n.n(l),f=n(79),b=n(152),h=n(835),p=n(836),m=n(837),g=n(490),j=n(185),v=n(838),x=n(108),y=n(280),O=n(342),w=n(489),k=n(832),C=n(829),S=n(488),A=n(475),P=n.n(A),E=n(66),B=n(5),M=n(43),T=n(96),K=n(60),I=n(35),D=n.n(I),N=n(39),L=n(473),R=n.n(L),W=n(47),F=n(40),U=n(210),z=n(474),H=n(198),_=n(4),q=function(){var e=new Uint8Array(4);return window.crypto.getRandomValues(e),e},J="\xa0",V=function(e,t,n){if("Mailchimp"===e)return function(e,t){var n=R()(e);return function(){var e=Object(o.a)(c.a.mark((function e(r,a){var i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={from_email:t,subject:"Merkle Airdrop",text:"You received ".concat(r.amount," airdropped token(s) (").concat(a,"). ")+"Claim them at ".concat(r.url),to:[{email:r.handle,type:"to"}]},e.next=3,n.messages.send({message:i});case 3:if(o=e.sent,console.log(o),o[0]&&"sent"===o[0].status){e.next=7;break}throw new Error("Mailchimp failed to send email: ".concat(o[0].reject_reason));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}(t,n);if("Manual"===e)return function(){var e=Object(o.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log({handle:t.handle,url:t.url});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();throw new Error("Unrecognized claim distribution method ".concat(e))},G=function(e){return JSON.parse(e).map((function(e){return{handle:e.handle,amount:e.amount,pin:e.pin,bump:e.bump,pda:e.pda,url:e.url}}))},Q=function(e){var t=document.createElement("div");document.body.appendChild(t);var n=function(){d.a.unmountComponentAtNode(t),document.body.removeChild(t)};return new Promise((function(n){!function(n){var r=n.onSubmit,a=n.onDismiss;d.a.render(e({onSubmit:r,onDismiss:a,show:!0}),t)}({onSubmit:function(e){return n(e)},onDismiss:function(){return n(void 0)}})})).finally((function(){!function(n,r){var a=n.onSubmit,i=n.onDismiss;d.a.render(e({onSubmit:a,onDismiss:i,show:!1}),t,r)}({onSubmit:function(){},onDismiss:function(){}},n)}))},X=function(t){var n=Object(W.i)(),i=Object(E.b)(),s=u.a.useState(localStorage.getItem("mint")||""),l=Object(a.a)(s,2),d=l[0],A=l[1],I=u.a.useState(localStorage.getItem("commMethod")||""),L=Object(a.a)(I,2),R=L[0],X=L[1],Y=u.a.useState(""),Z=Object(a.a)(Y,2),$=Z[0],ee=Z[1],te=u.a.useState(""),ne=Object(a.a)(te,2),re=ne[0],ae=ne[1],ie=u.a.useState(""),ce=Object(a.a)(ie,2),oe=ce[0],se=ce[1],ue=u.a.useState(""),le=Object(a.a)(ue,2),de=le[0],fe=le[1],be=u.a.useState(void 0),he=Object(a.a)(be,2),pe=he[0],me=he[1],ge=u.a.useState([]),je=Object(a.a)(ge,2),ve=je[0],xe=je[1],ye=function(){var t=Object(o.a)(c.a.mark((function t(o){var s,u,l,x,y,O,w,k,C,S,A,P,E,I,L,z,X,Y,Z,ee,te,ne,ae,ie,ce,oe,se,ue,le,fe,be,he,pe,ge,je,ve,ye,Oe,we,ke,Ce,Se,Ae,Pe,Ee,Be;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.preventDefault(),me(void 0),xe([]),i.connected&&null!==i.publicKey){t.next=5;break}throw new Error("Wallet not connected");case 5:t.prev=5,s=new B.PublicKey(d),t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(5),new Error("Invalid mint key ".concat(t.t0));case 12:return t.next=14,n.getAccountInfo(s);case 14:if(null!==(u=t.sent)){t.next=17;break}throw new Error("Could not fetch mint");case 17:if(u.owner.equals(M.c)){t.next=19;break}throw new Error("Invalid mint owner ".concat(u.owner.toBase58()));case 19:if(u.data.length===M.b.span){t.next=21;break}throw new Error("Invalid mint size ".concat(u.data.length));case 21:if(l=M.b.decode(e.from(u.data)),x=function(e){return(e/Math.pow(10,l.decimals)).toString()},y="https://explorer.solana.com/address/".concat(s.toBase58(),"?cluster=").concat(W.c.envFor(n)),console.log(y),0!==(O=G(de)).length){t.next=28;break}throw new Error("No claimants provided");case 28:if(w=function(e){return void 0!==e.url&&null!==e.url},!O.reduce((function(e,t){return e&&w(t)}),!0)){t.next=51;break}return t.next=32,Q((function(e){var t=e.show,n=e.onSubmit,r=e.onDismiss,a=[{click:function(){return n("create")},name:"Create and Send"},{click:function(){return n("send")},name:"Send only"}];return Object(_.jsxs)(H.a,{visible:t,onCancel:r,children:[Object(_.jsx)("p",{style:{color:"white",fontSize:14},children:"Uploaded distribution list has URLs for all claimants. Skip creation of airdrop and only re-send links?"}),Object(_.jsx)("br",{}),a.map((function(e){return Object(_.jsx)(f.a,{style:{width:"100%",color:"white",marginBottom:8},variant:"outlined",onClick:e.click,children:e.name},e.name)}))]})}));case 32:if(k=t.sent,console.log(k),"send"!==k){t.next=47;break}xe(O),C=V(R,$,re),S=0;case 38:if(!(S<O.length)){t.next=44;break}return t.next=41,C(O[S],y);case 41:++S,t.next=38;break;case 44:return t.abrupt("return");case 47:if("create"!==k){t.next=50;break}t.next=51;break;case 50:throw new Error("Dismissed");case 51:return A=O.reduce((function(e,t){return e+t.amount}),0),O.forEach((function(e){e.pin=q()})),t.next=55,B.PublicKey.findProgramAddress([i.publicKey.toBuffer(),M.c.toBuffer(),s.toBuffer()],F.b);case 55:return P=t.sent,E=Object(a.a)(P,1),I=E[0],t.next=60,n.getAccountInfo(I);case 60:if(null!==(L=t.sent)){t.next=63;break}throw new Error("Could not fetch creator token account");case 63:if(L.data.length===M.a.span){t.next=65;break}throw new Error("Invalid token account size ".concat(L.data.length));case 65:if(z=M.a.decode(e.from(L.data)),!(new D.a(z.amount,8,"le").toNumber()<A)){t.next=68;break}throw new Error("Creator token account does not have enough tokens");case 68:X=[],Y=0;case 70:if(!(Y<O.length)){t.next=85;break}return Z=O[Y],ee=[s.toBuffer(),e.from(Z.handle),e.from(Z.pin)],t.next=75,B.PublicKey.findProgramAddress(ee,F.a);case 75:te=t.sent,ne=Object(a.a)(te,2),ae=ne[0],ie=ne[1],Z.bump=ie,Z.pda=ae,X.push(e.from(T.keccak_256.digest([].concat(Object(r.a)(new D.a(Y).toArray("le",8)),Object(r.a)(ae.toBuffer()),Object(r.a)(new D.a(Z.amount).toArray("le",8))))));case 82:++Y,t.next=70;break;case 85:return ce=new U.a(X),oe=ce.getRoot(),se=new B.Keypair,console.log("Base ".concat(se.publicKey.toBase58())),t.next=91,B.PublicKey.findProgramAddress([e.from("MerkleDistributor"),se.publicKey.toBuffer()],F.a);case 91:return ue=t.sent,le=Object(a.a)(ue,2),fe=le[0],be=le[1],t.next=97,B.PublicKey.findProgramAddress([fe.toBuffer(),M.c.toBuffer(),s.toBuffer()],F.b);case 97:he=t.sent,pe=Object(a.a)(he,1),ge=pe[0],je=0;case 101:if(!(je<O.length)){t.next=113;break}if(ve=ce.getProof(je),ce.verifyProof(je,ve,oe)){t.next=106;break}throw new Error("Merkle tree verification failed");case 106:ye=O[je],Oe=["distributor=".concat(fe),"handle=".concat(ye.handle),"amount=".concat(ye.amount),"index=".concat(je),"pin=".concat(ye.pin),"proof=".concat(ve.map((function(e){return N.encode(e)})))],we=Oe.join("&"),ye.url="".concat(window.location.origin).concat(window.location.pathname,"#/claim?").concat(we);case 110:++je,t.next=101;break;case 113:return t.next=115,Q((function(e){var t=e.show,n=e.onSubmit,r=e.onDismiss,a=[{click:function(){return n(!0)},name:"Approve"},{click:function(){return n(!1)},name:"Cancel"}];return Object(_.jsxs)(H.a,{visible:t,onCancel:r,children:[Object(_.jsx)("h2",{style:{color:"white",fontWeight:"bold",fontSize:20},children:"Claim Distribution Preview"}),Object(_.jsxs)("p",{style:{color:"white",fontSize:14},children:["Distributing a total of ",x(A),J,Object(_.jsx)(b.a,{href:y,children:Object(F.d)(s.toBase58())}),J,"token(s)"]}),Object(_.jsx)(h.a,{sx:{"td, th":{color:"white"},backgroundColor:"#444444",borderRadius:"5px",maxHeight:"30ch"},children:Object(_.jsxs)(p.a,{size:"small",children:[Object(_.jsx)(m.a,{children:Object(_.jsxs)(g.a,{children:[Object(_.jsx)(j.a,{children:"Handle"}),Object(_.jsx)(j.a,{children:"Tokens"}),Object(_.jsx)(j.a,{children:"Pin"})]})}),Object(_.jsx)(v.a,{children:O.map((function(e){return Object(_.jsxs)(g.a,{sx:{"td, th":{border:0}},children:[Object(_.jsxs)(j.a,{component:"th",scope:"row",children:[e.handle," "]}),Object(_.jsx)(j.a,{children:x(e.amount)}),Object(_.jsx)(j.a,{children:e.pin.join(",")})]},e.pda.toBase58())}))})]})}),Object(_.jsx)("br",{}),a.map((function(e){return Object(_.jsx)(f.a,{style:{width:"100%",color:"white",marginBottom:8},variant:"outlined",onClick:e.click,children:e.name},e.name)}))]})}));case 115:if(ke=t.sent,console.log(ke),!0!==ke){t.next=120;break}t.next=121;break;case 120:throw new Error("Claim distribution preview not approved");case 121:return me(se),xe(O),Ce=new B.TransactionInstruction({programId:F.a,keys:[{pubkey:se.publicKey,isSigner:!0,isWritable:!1},{pubkey:fe,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:i.publicKey,isSigner:!0,isWritable:!1},{pubkey:B.SystemProgram.programId,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(r.a)(e.from(K.sha256.digest("global:new_distributor")).slice(0,8)),Object(r.a)(new D.a(be).toArray("le",1)),Object(r.a)(oe),Object(r.a)(new D.a(A).toArray("le",8)),Object(r.a)(new D.a(O.length).toArray("le",8))))}),Se=M.d.createAssociatedTokenAccountInstruction(F.b,M.c,s,ge,fe,i.publicKey),Ae=M.d.createTransferInstruction(M.c,I,ge,i.publicKey,[],A),t.next=128,W.c.sendTransactionWithRetry(n,i,[Ce,Se,Ae],[se]);case 128:if(Pe=t.sent,console.log(Pe),"string"!==typeof Pe){t.next=134;break}throw new Error(Pe);case 134:Object(F.c)({message:"Create succeeded",description:Object(_.jsx)(b.a,{href:W.c.explorerLinkFor(Pe.txid,n),children:"View transaction on explorer"})});case 135:console.log("Distributing claim URLs"),Ee=V(R,$,re),Be=0;case 138:if(!(Be<O.length)){t.next=144;break}return t.next=141,Ee(O[Be],y);case 141:++Be,t.next=138;break;case 144:case"end":return t.stop()}}),t,null,[[5,9]])})));return function(e){return t.apply(this,arguments)}}(),Oe=function(e){if(1===e.length){var t=e[0],n=new FileReader;n.onload=function(e){if(null!==e&&null!==e.target)if("string"===typeof e.target.result){try{G(e.target.result)}catch(n){return Object(F.c)({message:"File upload failed for: ".concat(t.name),description:Object(_.jsxs)("span",{children:["Could not parse uploaded file.",J,Object(_.jsx)(b.a,{href:"#/",children:"Does it follow the JSON scheme?"})]})}),se(""),void fe("")}se(t.name),fe(e.target.result)}else Object(F.c)({message:"File upload failed for: ".concat(t.name),description:"Could not read uploaded file"})},n.readAsText(t)}else Object(F.c)({message:"File upload failed",description:"Received ".concat(e.length," files")})},we=Object(_.jsxs)(u.a.Fragment,{children:[Object(_.jsx)(z.a,{handleDrop:Oe,children:Object(_.jsxs)(y.a,{direction:"row",style:{width:"60ch",height:"15ch"},sx:{border:"1px dashed grey",justifyContent:"center",alignContent:"center"},children:[Object(_.jsxs)(f.a,{variant:"text",component:"label",style:{padding:0,marginTop:"5ch",marginBottom:"5ch"},children:["Upload a distribution list",Object(_.jsx)("input",{type:"file",onChange:function(e){return Oe(e.target.files)},hidden:!0})]}),J,Object(_.jsx)(f.a,{variant:"text",component:"label",disabled:!0,color:"secondary",style:{padding:0},children:"or drag it here"})]})}),""!==oe?Object(_.jsxs)(O.a,{style:{display:"flex",justifyContent:"center",width:"60ch",color:"rgba(255,255,255,.8)"},children:[Object(_.jsx)(P.a,{}),Object(_.jsxs)("span",{children:[J," Uploaded ",oe]})]}):Object(_.jsx)(O.a,{})]}),ke=Object(_.jsx)(f.a,{disabled:!i.connected,variant:"contained",color:"success",onClick:function(e){var t=function(){var t=Object(o.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ye(e);case 3:t.next=10;break;case 5:t.prev=5,t.t0=t.catch(0),me(void 0),xe([]),Object(F.c)({message:"Create failed",description:"".concat(t.t0)});case 10:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}();t()},sx:{marginRight:"4px"},children:"Create Merkle Airdrop"}),Ce=function(e){var t=encodeURIComponent(JSON.stringify(e));return"data:text/plain;charset=utf-8,".concat(t)};return Object(_.jsxs)(y.a,{spacing:2,children:[Object(_.jsx)(x.a,{style:{width:"60ch"},id:"mint-text-field",label:"Mint",value:d,onChange:function(e){localStorage.setItem("mint",e.target.value),A(e.target.value)}}),Object(_.jsxs)(w.a,{fullWidth:!0,children:[Object(_.jsx)(k.a,{id:"comm-method-label",children:"Claim Distribution Method"}),Object(_.jsxs)(C.a,{labelId:"comm-method-label",id:"comm-method-select",value:R,label:"Claim Distribution Method",onChange:function(e){localStorage.setItem("commMethod",e.target.value),X(e.target.value)},style:{textAlign:"left"},children:[Object(_.jsx)(S.a,{value:"Mailchimp",children:"Mailchimp"}),Object(_.jsx)(S.a,{value:"Manual",children:"Manual"})]})]}),""!==R&&function(e){return"Manual"===e?null:Object(_.jsxs)(u.a.Fragment,{children:[Object(_.jsx)(x.a,{style:{width:"60ch"},id:"comm-auth-field",label:"".concat(e," API key"),value:$,onChange:function(e){return ee(e.target.value)}}),Object(_.jsx)(x.a,{style:{width:"60ch"},id:"comm-source-field",label:"".concat(e," Source"),value:re,onChange:function(e){return ae(e.target.value)}})]})}(R),""!==R&&""!==d&&we,""!==oe&&ke,void 0!==pe&&Object(_.jsx)(b.a,{href:Ce(Array.from(pe.secretKey)),download:"basekey.json",underline:"none",style:{width:"100%"},children:Object(_.jsx)(f.a,{variant:"contained",style:{width:"100%"},children:"Download Distributor Base Secret Key"})}),ve.length>0&&Object(_.jsx)(b.a,{href:Ce(ve),download:"claimURLs.json",underline:"none",style:{width:"100%"},children:Object(_.jsx)(f.a,{variant:"contained",style:{width:"100%"},children:"Download claim URLs"})})]})}}).call(this,n(13).Buffer)},474:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(10),a=n(0),i=n.n(a),c=n(4),o=function(e){var t=i.a.useRef(null),n=i.a.useState(0),a=Object(r.a)(n,2),o=a[0],s=a[1],u=i.a.useState(!1),l=Object(r.a)(u,2),d=l[0],f=l[1],b=function(e){e.preventDefault(),e.stopPropagation()},h=function(e){e.preventDefault(),e.stopPropagation(),s(o+1),e.dataTransfer.items&&e.dataTransfer.items.length>0&&f(!0)},p=function(e){e.preventDefault(),e.stopPropagation();var t=o-1;s(t),0===t&&f(!1)},m=function(t){t.preventDefault(),t.stopPropagation(),f(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0&&(e.handleDrop(t.dataTransfer.files),t.dataTransfer.clearData(),s(0))};return i.a.useEffect((function(){var e=t.current;if(null!==e)return e.addEventListener("dragenter",h),e.addEventListener("dragleave",p),e.addEventListener("dragover",b),e.addEventListener("drop",m),function(){e.removeEventListener("dragenter",h),e.removeEventListener("dragleave",p),e.removeEventListener("dragover",b),e.removeEventListener("drop",m)}})),Object(c.jsx)("div",{ref:t,style:d?{backgroundColor:"rgba(255,255,255,.3)"}:{},children:e.children})}},505:function(e,t){},506:function(e,t){},528:function(e,t){},529:function(e,t){},657:function(e,t){},659:function(e,t){},673:function(e,t){},677:function(e,t){},679:function(e,t){},691:function(e,t){},693:function(e,t){},720:function(e,t){},722:function(e,t){},727:function(e,t){},729:function(e,t){},736:function(e,t){},748:function(e,t){},751:function(e,t){},762:function(e,t){},763:function(e,t,n){},770:function(e,t,n){},816:function(e){e.exports=JSON.parse('[{"handle":"alice@solana.com","amount":1500000000},{"handle":"bob@solana.com","amount":1500000000}]')},817:function(e,t,n){},819:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(44),c=n.n(i),o=n(47),s=(n(766),n(767),n(768),n(769),n(10),n(215)),u=n(54),l=n(338),d=n(876),f=n(872),b=n(280),h=n(152),p=n(342),m=(n(770),n(4)),g=function(e){return Object(m.jsx)("div",{style:{display:"table",position:"absolute",top:0,left:0,height:"100%",width:"100%"},children:Object(m.jsx)("div",{style:{display:"table-cell",verticalAlign:"middle"},children:Object(m.jsx)("div",{style:{marginLeft:"auto",marginRight:"auto",height:e.height,width:e.width},children:e.children})})})},j=n(79),v=n(467),x=n.n(v),y=n(31),O=n(133),w=n(877),k=n(244),C=["isConnected","onClickConnect","onClickChange"],S=function(e){e.isConnected,e.onClickConnect,e.onClickChange;var t=Object(O.a)(e,C);return Object(m.jsx)(w.a,Object(y.a)(Object(y.a)({},t),{},{children:Object(m.jsx)(k.a,{})}))},A=n(66),P=n(878),E=function(){var e=Object(o.k)().setModal,t=Object(o.l)().setVisible,n=Object(A.b)().connected,a=Object(r.useCallback)((function(){return t(!0)}),[t]),i=Object(r.useCallback)((function(){e(o.f.WALLET),t(!0)}),[e,t]);return Object(m.jsx)(P.a,{color:"transparent",children:Object(m.jsxs)(p.a,{sx:{display:"flex",bgcolor:"action.disabledBackground"},minWidth:"100%",children:[Object(m.jsxs)(b.a,{direction:"row",spacing:2,sx:{display:"flex",height:"62px",justifyContent:"flex-start",alignItems:"center",marginLeft:"36px"},children:[Object(m.jsx)(h.a,{href:"#/",underline:"none",children:Object(m.jsx)(j.a,{variant:"outlined",children:Object(m.jsx)(x.a,{})})}),Object(m.jsx)(h.a,{href:"#/create",underline:"none",children:Object(m.jsx)(j.a,{variant:"outlined",children:"Create"})}),Object(m.jsx)(h.a,{href:"#/claim",underline:"none",children:Object(m.jsx)(j.a,{variant:"outlined",children:"Claim"})}),Object(m.jsx)(h.a,{href:"#/close",underline:"none",children:Object(m.jsx)(j.a,{variant:"outlined",children:"Close"})})]}),Object(m.jsx)(p.a,{sx:{flexGrow:1}}),Object(m.jsx)(p.a,{sx:{display:"flex",height:"62px",justifyContent:"flex-end",alignItems:"center"},children:Object(m.jsx)(S,{isConnected:n,sx:{marginRight:"36px"},onClickConnect:i,onClickChange:a})})]})})},B=n(468),M=n(471),T=n(472),K="\xa0",I=function(e){return Object(m.jsxs)(b.a,{alignContent:"left",textAlign:"left",spacing:1,children:[Object(m.jsx)("div",{children:"Merkle Airdrop leverages the Solana blockchain and merkle trees to facilitate airdrops by removing the prohibitive costs to the creators."}),Object(m.jsxs)("div",{children:["In the Solana ecosystem, the cost to creators for airdropped tokens is currently largely due to rent costs being",K,Object(m.jsx)(h.a,{href:"https://docs.solana.com/implemented-proposals/rent",underline:"none",children:'"fixed at the genesis"'}),K,"(although there is a",K,Object(m.jsx)(h.a,{href:"https://forums.solana.com/t/proposal-for-a-temporary-one-off-code-change-to-reduce-the-skyrocketing-costs-of-rent/1572",underline:"none",children:"proposal"}),K,"to temporarily reduce these costs until a dynamic solution is built). With the large increase in SOLUSD since genesis, rent costs have duly skyrocketed."]}),Object(m.jsxs)("div",{children:["The merkle distributor, pioneered by",K,Object(m.jsx)(h.a,{href:"https://github.com/Uniswap/merkle-distributor",underline:"none",children:"Uniswap"}),K,"and ported to Solana by",K,Object(m.jsx)(h.a,{href:"https://github.com/saber-hq/merkle-distributor",underline:"none",children:"Saber"}),', solves this issue by building a 256-bit "root hash" from a list of recipients and balances. This moves the rent costs and (nominal) transaction fee to the claimer if they so choose to redeem the airdrop.']}),Object(m.jsx)("div",{children:"This website exposes a web-friendly way to access the on-chain distributor."}),Object(m.jsxs)("div",{children:[Object(m.jsx)(s.b,{to:"/create",children:"CREATION"}),K,"is done by choosing a Mint, an off-chain notification method, and supplying a list of recipients and balances with the following JSON schema",K,Object(m.jsx)(h.a,{href:"data:text/plain;charset=utf-8,".concat(JSON.stringify(n(816))),download:"example.json",underline:"none",children:"(Click here for an example)"}),Object(m.jsx)("pre",{style:{fontSize:14},children:'\n[\n  {\n    "handle": "<DISTRIBUTION-SPECIFIC-HANDLE>"\n    "amount": <#-TOKENS>\n  },\n  ...\n]'})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)(s.b,{to:"/claim",children:"CLAIMS"}),K,"are redeemed through a URL with query parameters holding claim-specific keys. These should be kept secret! Anyone can redeem a claim once they have the URL."]}),Object(m.jsxs)("div",{children:[Object(m.jsx)(s.b,{to:"/close",children:"CLOSING"}),K,"the Merkle Distributor accounts cleans up the on-chain state and allows creators to recycle any remaining tokens and lamports held for rent-exemption after the airdrop is complete."]})]})};var D=function(){var e=Object(o.h)();a.a.useEffect((function(){}),[e.mode]);var t=a.a.useMemo((function(){var t,n;return"dark"!==e.mode&&e.mode?(t="light",n="#111"):(t="dark",n="#eee"),Object(l.a)({palette:{mode:t,action:{disabled:n}}})}),[e.mode]);return Object(m.jsx)("div",{className:"App",style:{backgroundColor:"transparent"},children:Object(m.jsxs)(d.a,{theme:t,children:[Object(m.jsx)(f.a,{}),Object(m.jsx)(E,{}),Object(m.jsxs)(g,{height:"100ch",width:"60ch",children:[Object(m.jsx)(p.a,{sx:{height:"10ch"}}),Object(m.jsx)(s.a,{children:Object(m.jsxs)(u.c,{children:[Object(m.jsx)(u.a,{path:"/create",component:T.a}),Object(m.jsx)(u.a,{path:"/claim",component:B.a}),Object(m.jsx)(u.a,{path:"/close",component:M.a}),Object(m.jsx)(u.a,{path:"/",component:I})]})})]})]})})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,881)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};n(817);c.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(o.d,{children:Object(m.jsx)(o.g,{children:Object(m.jsx)(o.a,{children:Object(m.jsx)(o.b,{children:Object(m.jsx)(D,{})})})})})}),document.getElementById("root")),N()},95:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d}));n(30),n(2),n(6);var r=n(10),a=n(0),i=(n(5),n(35)),c=n.n(i),o=new c.a(10);o.pow(new c.a(18)),o.pow(new c.a(18)),o.pow(new c.a(27)),new c.a(0),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:8});function s(e,t){var n=Object(a.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),i=Object(r.a)(n,2),c=i[0],o=i[1],s=Object(a.useCallback)((function(t){if(c!==t)if(o(t),null===t)localStorage.removeItem(e);else try{localStorage.setItem(e,JSON.stringify(t))}catch(n){}}),[c,e]);return[c,s]}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}new Set(["USDC","wUSDC","USDT"]);function l(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,r){return e.slice(r*t,(r+1)*t)}))}new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});function d(e){return new Promise((function(t){return setTimeout(t,e)}))}}},[[819,1,2]]]);
//# sourceMappingURL=main.10c3578a.chunk.js.map