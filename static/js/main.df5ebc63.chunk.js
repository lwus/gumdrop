(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[0],{120:function(e,t,n){"use strict";n.r(t),n.d(t,"ENDPOINTS",(function(){return m})),n.d(t,"ConnectionProvider",(function(){return y})),n.d(t,"useConnection",(function(){return x})),n.d(t,"useConnectionConfig",(function(){return v})),n.d(t,"getErrorForTransaction",(function(){return w})),n.d(t,"SequenceType",(function(){return O})),n.d(t,"sendTransactionWithRetry",(function(){return k}));var r=n(2),a=n.n(r),i=n(7),c=n(14),o=n(9),s=n(93),u=n(6),l=n(1),d=n.n(l),f=n(85),b=n(225),h=n(20),p=n(5),m=[{name:"mainnet-beta",endpoint:"https://api.mainnet-beta.solana.com",ChainId:b.a.MainnetBeta},{name:"devnet",endpoint:"https://api.devnet.solana.com",ChainId:b.a.Devnet}],j=m[0].endpoint,g=d.a.createContext({endpoint:j,setEndpoint:function(){},connection:new u.Connection(j,"recent"),env:m[0].name,tokens:[],tokenMap:new Map});function y(e){var t,n=e.children,r=void 0===n?void 0:n,a=Object(s.d)("connectionEndpoint",m[0].endpoint),i=Object(o.a)(a,2),d=i[0],f=i[1],h=Object(l.useMemo)((function(){return new u.Connection(d,"recent")}),[d]),j=(null===(t=m.find((function(e){return e.endpoint===d})))||void 0===t?void 0:t.name)||m[0].name,y=Object(l.useState)([]),x=Object(o.a)(y,2),v=x[0],O=x[1],w=Object(l.useState)(new Map),k=Object(o.a)(w,2),S=k[0],C=k[1];return Object(l.useEffect)((function(){(new b.b).resolve().then((function(e){var t,n=e.excludeByTag("nft").filterByChainId((null===(t=m.find((function(e){return e.endpoint===d})))||void 0===t?void 0:t.ChainId)||b.a.MainnetBeta).getList(),r=Object(c.a)(n).reduce((function(e,t){return e.set(t.address,t),e}),new Map);C(r),O(n)}))}),[j,d]),Object(l.useEffect)((function(){var e=h.onAccountChange(u.Keypair.generate().publicKey,(function(){}));return function(){h.removeAccountChangeListener(e)}}),[h]),Object(l.useEffect)((function(){var e=h.onSlotChange((function(){return null}));return function(){h.removeSlotChangeListener(e)}}),[h]),Object(p.jsx)(g.Provider,{value:{endpoint:d,setEndpoint:f,connection:h,tokens:v,tokenMap:S,env:j},children:r})}function x(){return Object(l.useContext)(g).connection}function v(){var e=Object(l.useContext)(g);return{endpoint:e.endpoint,setEndpoint:e.setEndpoint,env:e.env,tokens:e.tokens,tokenMap:e.tokenMap}}var O,w=function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"max");case 2:return e.next=4,t.getParsedConfirmedTransaction(n);case 4:return r=e.sent,i=[],(null===r||void 0===r?void 0:r.meta)&&r.meta.logMessages&&r.meta.logMessages.forEach((function(e){for(var t,n=/Error: (.*)/gm;null!==(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,t.length>1&&i.push(t[1])})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();!function(e){e[e.Sequential=0]="Sequential",e[e.Parallel=1]="Parallel",e[e.StopOnFailure=2]="StopOnFailure"}(O||(O={}));var k=function(){var e=Object(i.a)(a.a.mark((function e(t,n,r,i){var o,s,l,d,b,p,m,j,g,y,x,v=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=v.length>4&&void 0!==v[4]?v[4]:"singleGossip",s=v.length>5&&void 0!==v[5]&&v[5],l=v.length>6?v[6]:void 0,d=v.length>7?v[7]:void 0,n.publicKey){e.next=6;break}throw new h.i;case 6:if(b=new u.Transaction,r.forEach((function(e){return b.add(e)})),e.t0=l,e.t0){e.next=13;break}return e.next=12,t.getRecentBlockhash(o);case 12:e.t0=e.sent;case 13:if(b.recentBlockhash=e.t0.blockhash,s?(p=b).setSigners.apply(p,Object(c.a)(i.map((function(e){return e.publicKey})))):(m=b).setSigners.apply(m,[n.publicKey].concat(Object(c.a)(i.map((function(e){return e.publicKey}))))),i.length>0&&(j=b).partialSign.apply(j,Object(c.a)(i)),s){e.next=26;break}return e.prev=17,e.next=20,n.signTransaction(b);case 20:b=e.sent,e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(17),e.abrupt("return","Failed to sign transaction");case 26:return d&&d(),console.log("About to send"),e.prev=28,e.next=31,Object(f.c)({connection:t,signedTransaction:b});case 31:return g=e.sent,y=g.txid,x=g.slot,e.abrupt("return",{txid:y,slot:x});case 37:return e.prev=37,e.t2=e.catch(28),console.error(e.t2),e.abrupt("return","See console logs");case 41:case"end":return e.stop()}}),e,null,[[17,23],[28,37]])})));return function(t,n,r,a){return e.apply(this,arguments)}}()},129:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return j})),n.d(t,"f",(function(){return y})),n.d(t,"d",(function(){return x})),n.d(t,"e",(function(){return C})),n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return P}));var r=n(14),a=n(9),i=n(2),c=n.n(i),o=n(7),s=n(6),u=n(43),l=n(57),d=n(26),f=n.n(d),b=n(42),h=n(81),p=n(39),m=n(193),j=function(e){return JSON.parse(e).map((function(e){return{handle:e.handle,amount:e.amount,edition:e.edition,url:e.url}}))},g=function(e,t){return"https://explorer.solana.com/address/".concat(t.toBase58(),"?cluster=").concat(e)},y=function(){var e=Object(o.a)(c.a.mark((function e(t,n,r,a,i){var o,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.forEach((function(e,t){if(!e.handle)throw new Error("Claimant ".concat(t," doesn't have handle"));if(!e.amount)throw new Error("Claimant ".concat(t," doesn't have amount"));if(0===e.amount)throw new Error("Claimant ".concat(t," amount is 0"))})),o=a.reduce((function(e,t){return e+t.amount}),0),e.next=4,Object(h.h)(t,i);case 4:return s=e.sent,e.next=7,Object(h.d)(r,t,s.key,o);case 7:return u=e.sent,e.abrupt("return",{total:o,mint:s,source:u,info:{type:"Token",meta:g(n,s.key)}});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),x=function(){var e=Object(o.a)(c.a.mark((function e(t,n,r,i,o,s){var u,l,d,f,b,p,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.forEach((function(e,t){if(!e.handle)throw new Error("Claimant ".concat(t," doesn't have handle"));if(!e.amount)throw new Error("Claimant ".concat(t," doesn't have amount"));if(0===e.amount)throw new Error("Claimant ".concat(t," amount is 0"))})),u=i.reduce((function(e,t){return e+t.amount}),0),e.next=4,Object(h.a)(t,o);case 4:return l=e.sent,e.next=7,Object(h.c)(l,s);case 7:return d=e.sent,f=Object(a.a)(d,1),b=f[0],e.next=12,Object(h.b)(t,b);case 12:if(p=e.sent,m=p.data.itemsAvailable.toNumber()-p.itemsRedeemed.toNumber(),!isNaN(m)){e.next=16;break}throw new Error("Could not calculate how many candy machine items are remaining");case 16:if(!(m<u)){e.next=18;break}throw new Error("Distributor is allocated more mints (".concat(u,") ")+"than the candy machine has remaining (".concat(m,")"));case 18:if(p.authority.equals(r)){e.next=20;break}throw new Error("Candy machine authority does not match wallet public key");case 20:return e.abrupt("return",{total:u,config:l,uuid:s,candyMachineKey:b,info:{type:"Candy",meta:g(n,l)}});case 21:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i,c){return e.apply(this,arguments)}}(),v=function(e){return e.div(new f.a(8))},O=function(e){return new f.a(7).sub(e.mod(new f.a(8)))},w=function(e){var t=function(e){return e.mod(new f.a(248))}(e);return{index:v(t).toNumber(),mask:new f.a(1).shln(O(t).toNumber()).toNumber()}},k=function(e,t){var n=w(t);return 0!==(e[n.index]&n.mask)},S=function(e,t){var n=w(t);e[n.index]=e[n.index]|n.mask},C=function(){var e=Object(o.a)(c.a.mark((function e(t,n,a,i,o){var s,u,l,d,b,p,m,j,y,x,v;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.forEach((function(e,t){if(!e.handle)throw new Error("Claimant ".concat(t," doesn't have handle"));if(1!==e.amount)throw new Error("Claimant ".concat(t," has amount ").concat(e.amount,". Expected 1 for edition gumdrop"))})),s=i.reduce((function(e,t){return e+t.amount}),0),e.next=4,Object(h.h)(t,o);case 4:return u=e.sent,e.next=7,Object(h.d)(a,t,u.key,1);case 7:return l=e.sent,e.next=10,Object(h.e)(u.key);case 10:return d=e.sent,e.next=13,t.getAccountInfo(d);case 13:if(null!==(b=e.sent)){e.next=16;break}throw new Error("Could not fetch master edition");case 16:if(console.log("Master edition",b),p=new f.a(b.data.slice(1,9),8,"le").toNumber(),m=0===b.data[9]?null:new f.a(b.data.slice(10,18),8,"le").toNumber(),console.log("Max supply",m),console.log("Current supply",p),!(null!==m&&m<s)){e.next=23;break}throw new Error("Distributor is allocated more editions (".concat(s,") ")+"than the master has total (".concat(m,")"));case 23:j={},y=[],x=c.a.mark((function e(n){var a,o,s,l,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(a=i[n]).edition){e.next=3;break}throw new Error("Claimant ".concat(n," doesn't have edition"));case 3:if(!(a.edition>=m)){e.next=5;break}throw new Error("Claimant ".concat(n," assigned edition ").concat(a.edition," which is beyond the max supply"));case 5:if(!(a.edition in j)){e.next=7;break}throw new Error("Claimant ".concat(n," and ").concat(j[a.edition]," are both assigned to edition ").concat(a.edition));case 7:return o=new f.a(a.edition),e.next=10,Object(h.f)(u.key,o);case 10:if(s=e.sent,void 0!==(l=y.find((function(e){return e[0].equals(s)})))){e.next=18;break}return e.next=15,t.getAccountInfo(s);case 15:null===(d=e.sent)?y.push([s,Array(31)]):y.push([s,Object(r.a)(d.data.slice(1,32))]),l=y[y.length-1];case 18:if(void 0!==l){e.next=20;break}throw new Error("Internal Error: Edition marker info still undefined ".concat(a.edition));case 20:if(!k(l[1],o)){e.next=22;break}throw new Error("Claimant ".concat(n," is assigned to edition ").concat(a.edition," which is already taken"));case 22:S(l[1],o),j[a.edition]=n;case 24:case"end":return e.stop()}}),e)})),v=0;case 27:if(!(v<i.length)){e.next=32;break}return e.delegateYield(x(v),"t0",29);case 29:++v,e.next=27;break;case 32:return e.abrupt("return",{total:s,masterMint:u,masterTokenAccount:l,info:{type:"Edition",meta:g(n,u.key)}});case 33:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),A=function(){var t=Object(o.a)(c.a.mark((function t(n,i,o,d,h,j,g,y,x){var v,O,w,k,S,C,A,P,E,M,I,B,K,W,T,D,N,F,L,R,U,z,q,G,H,_;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:v=[],O=0;case 2:if(!(O<y.length)){t.next=26;break}if(w=y[O],o){t.next=14;break}t.prev=5,w.secret=new s.PublicKey(w.handle),t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(5),new Error("Invalid claimant wallet handle ".concat(t.t0));case 12:t.next=21;break;case 14:return k=[w.seed.toBuffer(),e.from(w.handle),e.from(w.pin.toArray("le",4))],t.next=17,s.PublicKey.findProgramAddress(k,p.c);case 17:S=t.sent,C=Object(a.a)(S,1),A=C[0],w.secret=A;case 21:P="edition"===d?Object(r.a)(new f.a(w.edition).toArray("le",8)):[],v.push(e.from([].concat(Object(r.a)(new f.a(O).toArray("le",8)),Object(r.a)(w.secret.toBuffer()),Object(r.a)(w.seed.toBuffer()),Object(r.a)(new f.a(w.amount).toArray("le",8)),Object(r.a)(P))));case 23:++O,t.next=2;break;case 26:return E=new m.a(v),M=E.getRoot(),t.next=30,s.PublicKey.findProgramAddress([e.from("MerkleDistributor"),j.toBuffer()],p.c);case 30:I=t.sent,B=Object(a.a)(I,2),K=B[0],W=B[1],T=0;case 35:if(!(T<y.length)){t.next=49;break}if(D=E.getProof(T),E.verifyProof(T,D,M)){t.next=40;break}throw new Error("Gumdrop merkle tree verification failed");case 40:N=y[T],F=["distributor=".concat(K),"handle=".concat(N.handle),"amount=".concat(N.amount),"index=".concat(T),"proof=".concat(D.map((function(e){return b.encode(e)})))],o&&F.push("pin=".concat(N.pin.toNumber())),"transfer"===d?F.push("tokenAcc=".concat(x.source)):"candy"===d?(F.push("config=".concat(x.config)),F.push("uuid=".concat(x.uuid))):(F.push("master=".concat(x.masterMint.key)),F.push("edition=".concat(N.edition))),L=F.join("&"),N.url="".concat(h,"#/claim?").concat(L);case 46:++T,t.next=35;break;case 49:if((R=Array()).push(new s.TransactionInstruction({programId:p.c,keys:[{pubkey:j,isSigner:!0,isWritable:!1},{pubkey:K,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:s.SystemProgram.programId,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(r.a)(e.from(l.sha256.digest("global:new_distributor")).slice(0,8)),Object(r.a)(new f.a(W).toArray("le",1)),Object(r.a)(M),Object(r.a)(g.toBuffer())))})),"transfer"!==d){t.next=55;break}R.push(u.d.createApproveInstruction(p.i,x.source,K,i,[],x.total)),t.next=72;break;case 55:if("candy"!==d){t.next=64;break}return t.next=58,s.PublicKey.findProgramAddress([e.from("Wallet"),K.toBuffer()],p.c);case 58:U=t.sent,z=Object(a.a)(U,1),q=z[0],R.push(new s.TransactionInstruction({programId:p.b,keys:[{pubkey:x.candyMachineKey,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1}],data:e.from([].concat(Object(r.a)(e.from(l.sha256.digest("global:update_authority")).slice(0,8)),Object(r.a)(new f.a(1).toArray("le",1)),Object(r.a)(q.toBuffer())))})),t.next=72;break;case 64:if("edition"!==d){t.next=72;break}return t.next=67,s.PublicKey.findProgramAddress([K.toBuffer(),p.i.toBuffer(),x.masterMint.key.toBuffer()],p.f);case 67:G=t.sent,H=Object(a.a)(G,1),_=H[0],R.push(u.d.createAssociatedTokenAccountInstruction(p.f,p.i,x.masterMint.key,_,K,i)),R.push(u.d.createTransferInstruction(p.i,x.masterTokenAccount,_,i,[],1));case 72:return t.abrupt("return",R);case 73:case"end":return t.stop()}}),t,null,[[5,9]])})));return function(e,n,r,a,i,c,o,s,u){return t.apply(this,arguments)}}(),P=function(){var t=Object(o.a)(c.a.mark((function t(n,i,o,u,d,b,m){var j,g,y,x,v,O,w,k,S,C,A,P,E,M,I,B,K,W,T,D,N;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.PublicKey.findProgramAddress([e.from("MerkleDistributor"),o.publicKey.toBuffer()],p.c);case 2:return j=t.sent,g=Object(a.a)(j,2),y=g[0],x=g[1],t.next=8,s.PublicKey.findProgramAddress([e.from("Wallet"),y.toBuffer()],p.c);case 8:if(v=t.sent,O=Object(a.a)(v,2),w=O[0],k=O[1],"candy"!==u){t.next=24;break}return t.next=15,Object(h.a)(n,d);case 15:return C=t.sent,t.next=18,Object(h.c)(C,b);case 18:A=t.sent,P=Object(a.a)(A,1),E=P[0],S=[{pubkey:E,isSigner:!1,isWritable:!0},{pubkey:p.b,isSigner:!1,isWritable:!1}],t.next=25;break;case 24:S=[];case 25:if(M=Array(),"edition"!==u){t.next=45;break}t.prev=27,I=new s.PublicKey(m),t.next=34;break;case 31:throw t.prev=31,t.t0=t.catch(27),new Error("Invalid mint key ".concat(t.t0));case 34:return t.next=36,s.PublicKey.findProgramAddress([y.toBuffer(),p.i.toBuffer(),I.toBuffer()],p.f);case 36:return B=t.sent,K=Object(a.a)(B,1),W=K[0],t.next=41,s.PublicKey.findProgramAddress([i.toBuffer(),p.i.toBuffer(),I.toBuffer()],p.f);case 41:T=t.sent,D=Object(a.a)(T,1),N=D[0],M.push(new s.TransactionInstruction({programId:p.c,keys:[{pubkey:o.publicKey,isSigner:!0,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:W,isSigner:!1,isWritable:!0},{pubkey:N,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:s.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:p.i,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(r.a)(e.from(l.sha256.digest("global:close_distributor_token_account")).slice(0,8)),Object(r.a)(new f.a(x).toArray("le",1))))}));case 45:return M.push(new s.TransactionInstruction({programId:p.c,keys:[{pubkey:o.publicKey,isSigner:!0,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:w,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!0},{pubkey:s.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:p.i,isSigner:!1,isWritable:!1}].concat(Object(r.a)(S)),data:e.from([].concat(Object(r.a)(e.from(l.sha256.digest("global:close_distributor")).slice(0,8)),Object(r.a)(new f.a(x).toArray("le",1)),Object(r.a)(new f.a(k).toArray("le",1))))})),t.abrupt("return",M);case 47:case"end":return t.stop()}}),t,null,[[27,31]])})));return function(e,n,r,a,i,c,o){return t.apply(this,arguments)}}()}).call(this,n(18).Buffer)},193:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var r=n(9),a=n(14),i=n(33),c=n(11),o=n(15),s=n(189),u=function(){function t(e){Object(c.a)(this,t),this.leafs=void 0,this.layers=void 0,this.leafs=e.slice(),this.layers=[];for(var n=this.leafs.map(t.nodeHash);n.length>0&&(console.log("Hashes",this.layers.length,n),this.layers.push(n.slice()),1!==n.length);)n=n.reduce((function(e,n,r,a){if(r%2===0){var i=a[r+1];e.push(t.internalHash(n,i))}return e}),Array())}return Object(o.a)(t,[{key:"getRoot",value:function(){return this.layers[this.layers.length-1][0]}},{key:"getProof",value:function(e){return this.layers.reduce((function(t,n){var r=1^e;return r<n.length&&t.push(n[r]),e=Math.floor(e/2),t}),[])}},{key:"getHexRoot",value:function(){return this.getRoot().toString("hex")}},{key:"getHexProof",value:function(e){return this.getProof(e).map((function(e){return e.toString("hex")}))}},{key:"verifyProof",value:function(e,n,r){var a,c=t.nodeHash(this.leafs[e]),o=Object(i.a)(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;c=t.internalHash(c,s)}}catch(u){o.e(u)}finally{o.f()}return c.equals(r)}}],[{key:"nodeHash",value:function(t){return e.from(s.keccak_256.digest([0].concat(Object(a.a)(t))))}},{key:"internalHash",value:function(t,n){if(!n)return t;var i=[t,n].sort(e.compare),c=Object(r.a)(i,2),o=c[0],u=c[1];return e.from(s.keccak_256.digest([1].concat(Object(a.a)(o),Object(a.a)(u))))}},{key:"verifyClaim",value:function(e,n,r){var a,c=t.nodeHash(e),o=Object(i.a)(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;c=t.internalHash(c,s)}}catch(u){o.e(u)}finally{o.f()}return c.equals(r)}}]),t}()}).call(this,n(18).Buffer)},206:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(2),n(7);var r=n(39),a=function(){return{token:r.i,associatedToken:r.f,bpf_upgrade_loader:r.a,system:r.g,memo:r.e}}},207:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(34),a=n(140),i=(n(1),n(841)),c=(n(716),n(5)),o=["children","closeIcon","bodyStyle","width","style"],s=function(e){var t=e.children,n=(e.closeIcon,e.bodyStyle),s=e.width,u=(e.style,Object(a.a)(e,o));return Object(c.jsx)(i.a,Object(r.a)(Object(r.a)({style:{background:"transparent",borderRadius:16},bodyStyle:Object(r.a)({background:"#333333",display:"flex",flexDirection:"column",alignItems:"center"},n),footer:null,width:s||400},u),{},{children:t}))}},228:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return I}));n(140);var r=n(9),a=n(33),i=n(34),c=n(2),o=n.n(c),s=n(7),u=n(1),l=n.n(u),d=n(120),f=n(71),b=n(6),h=n(43),p=(n(93),n(252)),m=n(39),j=n(206),g=n(5),y=l.a.createContext(null),x=new Map,v=new Map,O=new Map,w=new Map,k=function(){var t=Object(s.a)(o.a.mark((function t(n,r){var a,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getAccountInfo(r);case 2:if(null!==(a=t.sent)){t.next=5;break}throw new Error("Failed to find mint account");case 5:return i=e.from(a.data),t.abrupt("return",K(i));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),S=function(t,n){if(n.data.length>0){var r=e.from(n.data),a=B(r);return{pubkey:t,account:Object(i.a)({},n),info:a}}},C=new Map,A={emitter:new p.a,query:function(){var e=Object(s.a)(o.a.mark((function e(t,n,r){var a,i,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="string"===typeof n?new b.PublicKey(n):n,i=a.toBase58(),!(c=v.get(i))){e.next=5;break}return e.abrupt("return",c);case 5:if(!(s=x.get(i))){e.next=8;break}return e.abrupt("return",s);case 8:return s=t.getAccountInfo(a).then((function(e){if(!e)throw new Error("Account not found");return A.add(a,e,r)})),x.set(i,s),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),add:function(e,t,n,r){var a="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),i=n||C.get(a);if(!i)throw new Error("Deserializer needs to be registered or passed as a parameter");A.registerParser(e,i),x.delete(a);var c=i(a,t);if(c){void 0===r?r=!0:r instanceof Function&&(r=r(c));var o=!v.has(a);return v.set(a,c),A.emitter.raiseCacheUpdated(a,o,i,r),c}},get:function(e){var t;return t="string"!==typeof e?e.toBase58():e,v.get(t)},delete:function(e){var t;return t="string"!==typeof e?e.toBase58():e,!!v.get(t)&&(v.delete(t),A.emitter.raiseCacheDeleted(t),!0)},byParser:function(e){var t,n=[],r=Object(a.a)(C.keys());try{for(r.s();!(t=r.n()).done;){var i=t.value;C.get(i)===e&&n.push(i)}}catch(c){r.e(c)}finally{r.f()}return n},registerParser:function(e,t){if(e){var n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();C.set(n,t)}return e},queryMint:function(){var e=Object(s.a)(o.a.mark((function e(t,n){var r,a,i,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"===typeof n?new b.PublicKey(n):n,a=r.toBase58(),!(i=w.get(a))){e.next=5;break}return e.abrupt("return",i);case 5:if(!(c=O.get(a))){e.next=8;break}return e.abrupt("return",c);case 8:return c=k(t,r).then((function(e){return O.delete(a),w.set(a,e),e})),O.set(a,c),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getMint:function(e){var t;return t="string"!==typeof e?e.toBase58():e,w.get(t)},addMint:function(e,t){var n=K(t.data),r=e.toBase58();return w.set(r,n),n}};var P=function(){var e=Object(d.useConnection)(),t=Object(f.b)().publicKey,n=Object(u.useState)(),a=Object(r.a)(n,2),i=a[0],c=a[1],l=Object(u.useCallback)((function(e){if(t){var n=function(e,t){if(t){var n=new b.PublicKey(e);return{pubkey:e,account:t,info:{address:n,mint:m.j,owner:n,amount:new h.e(t.lamports),delegate:null,delegatedAmount:new h.e(0),isInitialized:!0,isFrozen:!1,isNative:!0,rentExemptReserve:null,closeAuthority:null}}}}(t.toBase58(),e);if(void 0!==n){var r=t.toBase58();A.registerParser(r,S),v.set(r,n),A.emitter.raiseCacheUpdated(r,!1,S,!0)}}}),[t]);return Object(u.useEffect)((function(){var n=0,r=function(e){e&&(l(e),c(e))};return Object(s.a)(o.a.mark((function a(){var i;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&t){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,a.next=5,e.getAccountInfo(t);case 5:i=a.sent,r(i),a.next=12;break;case 9:return a.prev=9,a.t0=a.catch(2),a.abrupt("return");case 12:n=e.onAccountChange(t,r);case 13:case"end":return a.stop()}}),a,null,[[2,9]])})))(),function(){n&&e.removeAccountChangeListener(n)}}),[c,t,e,l]),{nativeAccount:i}},E=new Set,M=function(){var e=Object(s.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return E.add(n.toBase58()),e.next=5,t.getTokenAccountsByOwner(n,{programId:Object(j.a)().token});case 5:e.sent.value.forEach((function(e){A.add(e.pubkey.toBase58(),e.account,S)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function I(e){var t=e.children,n=void 0===t?null:t,a=Object(d.useConnection)(),i=Object(f.b)().publicKey,c=Object(u.useState)([]),o=Object(r.a)(c,2),s=o[0],l=o[1],p=Object(u.useState)([]),m=Object(r.a)(p,2),x=m[0],v=m[1],O=P().nativeAccount,w=null===i||void 0===i?void 0:i.toBase58(),k=Object(u.useCallback)((function(){return A.byParser(S).map((function(e){return A.get(e)})).filter((function(e){return e&&e.info.owner.toBase58()===w})).map((function(e){return e}))}),[w]);return Object(u.useEffect)((function(){var e=k().filter((function(e){return void 0!==e}));v(e)}),[O,s,k]),Object(u.useEffect)((function(){var e=[];return A.emitter.onCache((function(e){if(e.isNew&&e.isActive){var t=e.id,n=e.parser;a.onAccountChange(new b.PublicKey(t),(function(e){A.add(t,e,n)}))}})),function(){e.forEach((function(e){return a.removeAccountChangeListener(e)}))}}),[a]),Object(u.useEffect)((function(){if(a&&i){M(a,i).then((function(){l(k())}));var e=a.onProgramAccountChange(Object(j.a)().token,(function(e){var t=e.accountId;if(e.accountInfo.data.length===h.a.span){var n=B(e.accountInfo.data);E.has(n.owner.toBase58())&&(A.add(t,e.accountInfo,S),l(k()))}}),"singleGossip");return function(){a.removeProgramAccountChangeListener(e)}}l([])}),[a,i,k]),Object(g.jsx)(y.Provider,{value:{userAccounts:x,nativeAccount:O},children:n})}var B=function(e){var t=h.a.decode(e);return t.mint=new b.PublicKey(t.mint),t.owner=new b.PublicKey(t.owner),t.amount=h.e.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new h.e(0)):(t.delegate=new b.PublicKey(t.delegate),t.delegatedAmount=h.e.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=h.e.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new b.PublicKey(t.closeAuthority),t},K=function(e){if(e.length!==h.b.span)throw new Error("Not a valid Mint");var t=h.b.decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new b.PublicKey(t.mintAuthority),t.supply=h.e.fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new b.PublicKey(t.freezeAuthority),t}}).call(this,n(18).Buffer)},252:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(15),a=n(11),i=n(89),c=function e(t,n,r,i){Object(a.a)(this,e),this.id=void 0,this.parser=void 0,this.isNew=void 0,this.isActive=void 0,this.id=t,this.parser=r,this.isNew=n,this.isActive=i};c.type="CacheUpdate";var o=function e(t){Object(a.a)(this,e),this.id=void 0,this.id=t};o.type="CacheUpdate";var s=function e(t){Object(a.a)(this,e),this.ids=void 0,this.ids=t};s.type="MarketUpdate";var u=function(){function e(){Object(a.a)(this,e),this.emitter=new i.EventEmitter}return Object(r.a)(e,[{key:"onMarket",value:function(e){var t=this;return this.emitter.on(s.type,e),function(){return t.emitter.removeListener(s.type,e)}}},{key:"onCache",value:function(e){var t=this;return this.emitter.on(c.type,e),function(){return t.emitter.removeListener(c.type,e)}}},{key:"raiseMarketUpdated",value:function(e){this.emitter.emit(s.type,new s(e))}},{key:"raiseCacheUpdated",value:function(e,t,n,r){this.emitter.emit(c.type,new c(e,t,n,r))}},{key:"raiseCacheDeleted",value:function(e){this.emitter.emit(o.type,new o(e))}}]),e}()},257:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(2),a=n.n(r),i=n(7),c=n(1),o=n(71),s=n(54),u=n(35),l=n(350),d=n(830),f=n(503),b=n(833),h=n(145),p=n(101),m=n(847),j=n(480),g=n.n(j),y=n(479),x=n.n(y),v=n(5),O=function(e){var t=e.additionalSettings,n=Object(o.b)(),r=n.connected,j=n.disconnect,y=n.publicKey,O=Object(s.j)(),w=O.setEndpoint,k=O.env,S=O.endpoint,C=Object(s.l)().setVisible,A=Object(c.useCallback)((function(){return C(!0)}),[C]),P=Object(s.k)().setModal,E=Object(p.a)(),M=Object(s.h)(),I=Object(c.useCallback)((function(){P(s.f.WALLET),C(!0)}),[P,C]);return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(d.a,{sx:{display:"flex",minWidth:"100%"},children:[!r&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(f.a,{children:Object(v.jsx)(b.a,{style:{marginBottom:5},onChange:function(e){w(e.target.value)},value:S,children:s.e.map((function(e){var t=e.name,n=e.endpoint;return Object(v.jsx)("option",{value:n,children:t},t)}))})}),Object(v.jsx)(h.a,{variant:"contained",onClick:I,sx:{marginLeft:"10px"},children:"Connect"})]}),r&&Object(v.jsxs)(v.Fragment,{children:[y&&Object(v.jsxs)(h.a,{variant:"outlined",onClick:Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=4;break}return e.next=3,navigator.clipboard.writeText(y.toBase58());case 3:Object(u.k)({message:"Wallet update",description:"Address copied to clipboard"});case 4:case"end":return e.stop()}}),e)}))),children:[Object(v.jsx)(l.a,{}),Object(u.l)(y.toBase58())]}),Object(v.jsx)(h.a,{variant:"outlined",onClick:A,sx:{marginLeft:"10px"},children:"Change Wallet"}),Object(v.jsxs)(h.a,{variant:"contained",color:"error",onClick:function(){return j().catch()},sx:{marginLeft:"10px"},children:["Disconnect (",k,")"]})]}),Object(v.jsx)(m.a,{sx:{ml:1},onClick:M.toggleColorMode,color:"inherit",children:"dark"===E.palette.mode?Object(v.jsx)(x.a,{}):Object(v.jsx)(g.a,{})}),t]})})}},258:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var r=n(9),a=n(101),i=n(1),c=n.n(i),o=n(5),s=c.a.createContext({}),u=function(e){var t=e.children,n=void 0===t?null:t,i=c.a.useState("dark"),u=Object(r.a)(i,2),l=u[0],d=u[1],f=Object(a.a)();return Object(o.jsx)(s.Provider,{value:{toggleColorMode:function(){d((function(e){return"light"===e?"dark":"light"}))},mode:l,theme:f},children:n})},l=function(){return Object(i.useContext)(s)}},347:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(156),a=n(796),i=new r.a(a)},35:function(e,t,n){"use strict";n.d(t,"d",(function(){return r.f})),n.d(t,"e",(function(){return r.h})),n.d(t,"a",(function(){return r.b})),n.d(t,"b",(function(){return r.c})),n.d(t,"c",(function(){return r.d})),n.d(t,"k",(function(){return c})),n.d(t,"l",(function(){return o.b})),n.d(t,"g",(function(){return f.c})),n.d(t,"f",(function(){return f.b})),n.d(t,"j",(function(){return f.g})),n.d(t,"h",(function(){return f.e})),n.d(t,"i",(function(){return f.f}));n(252);var r=n(39),a=(n(206),n(437),n(1),n(498)),i=n(5);function c(e){var t=e.message,n=void 0===t?"":t,r=e.description,c=void 0===r?void 0:r,o=e.txid,s=void 0===o?"":o,u=e.type,l=void 0===u?"info":u,d=e.placement,f=void 0===d?"bottomLeft":d;s&&(c=Object(i.jsx)(i.Fragment,{})),a.a[l]({message:Object(i.jsx)("span",{style:{color:"black"},children:n}),description:Object(i.jsx)("span",{style:{color:"black",opacity:.5},children:c}),placement:f,style:{backgroundColor:"white"}})}var o=n(93);var s=n(6),u=n(128),l=n(42),d=n.n(l);u.BinaryReader.prototype.readPubkey=function(){var e=this.readFixedArray(32);return new s.PublicKey(e)},u.BinaryWriter.prototype.writePubkey=function(e){this.writeFixedArray(e.toBuffer())},u.BinaryReader.prototype.readPubkeyAsString=function(){var e=this.readFixedArray(32);return d.a.encode(e)},u.BinaryWriter.prototype.writePubkeyAsString=function(e){this.writeFixedArray(d.a.decode(e))};var f=n(81)},39:function(e,t,n){"use strict";n.d(t,"j",(function(){return a})),n.d(t,"i",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return b}));n(11),n(15);var r=n(6),a=(new Map,new r.PublicKey("So11111111111111111111111111111111111111112")),i=new r.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),c=new r.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),o=new r.PublicKey("BPFLoaderUpgradeab1e11111111111111111111111"),s=new r.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),u=new r.PublicKey("11111111111111111111111111111111"),l=new r.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),d=new r.PublicKey("cndyAnrLdpjq1Ssp1z8xxDsB8dxe7u4HL5Nxi2K5WXZ"),f=new r.PublicKey("561gX85SDR4hYF2L7P4LcvdXsWSxWuY7Z1yGgznPwSXG"),b=new r.PublicKey("MSv9H2sMceAzccBganUXwGq3GXgqYAstmZAbFDZYbAV")},437:function(e,t,n){"use strict";(function(e){n(14),n(6),n(26),n(94)}).call(this,n(18).Buffer)},482:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return J}));var r=n(33),a=n(14),i=n(2),c=n.n(i),o=n(9),s=n(7),u=n(1),l=n.n(u),d=n(483),f=n.n(d),b=n(843),h=n(848),p=n(95),m=n(226),j=n(145),g=n(503),y=n(844),x=n(840),v=n(352),O=n(845),w=n(849),k=n(842),S=n(839),C=n(71),A=n(6),P=n(43),E=n(57),M=n(26),I=n.n(M),B=n(42),K=n(54),W=n(35),T=n(193),D=n(85),N=n(347),F=n(5),L=function(){var t=Object(s.a)(c.a.mark((function t(n,r,a,i){var s,u,l,d,f;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a){t.next=13;break}if(t.prev=1,(s=new A.PublicKey(r)).equals(n)){t.next=5;break}throw new Error("Claimant wallet handle does not match connected wallet");case 5:return t.abrupt("return",[s,[]]);case 8:throw t.prev=8,t.t0=t.catch(1),new Error("Invalid claimant wallet handle ".concat(t.t0));case 11:t.next=20;break;case 13:return u=[i.toBuffer(),e.from(r),e.from(a.toArray("le",4))],t.next=16,A.PublicKey.findProgramAddress(u,W.b);case 16:return l=t.sent,d=Object(o.a)(l,1),f=d[0],t.abrupt("return",[f,u]);case 20:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),R=function(){var t=Object(s.a)(c.a.mark((function t(n,r,i,s,u,l,d,f,b,h){var p,m,j,g,y,x,v,O,w,k,S,C,M,B,K,D,N,F,R;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,p=new A.PublicKey(u),t.next=7;break;case 4:throw t.prev=4,t.t0=t.catch(0),new Error("Invalid tokenAcc key ".concat(t.t0));case 7:return t.next=9,n.getAccountInfo(p);case 9:if(null!==(m=t.sent)){t.next=12;break}throw new Error("Could not fetch distributor token account");case 12:return j=P.a.decode(m.data),g=new A.PublicKey(j.mint),console.log(g.toBase58()),t.next=17,L(r,d,h,g);case 17:if(y=t.sent,x=Object(o.a)(y,2),v=x[0],O=x[1],w=e.from([].concat(Object(a.a)(new I.a(b).toArray("le",8)),Object(a.a)(v.toBuffer()),Object(a.a)(g.toBuffer()),Object(a.a)(new I.a(f).toArray("le",8)))),T.a.verifyClaim(w,l,e.from(s.root))){t.next=25;break}throw new Error("Gumdrop merkle proof does not match");case 25:return t.next=27,A.PublicKey.findProgramAddress([e.from("ClaimStatus"),e.from(new I.a(b).toArray("le",8)),i.toBuffer()],W.b);case 27:return k=t.sent,S=Object(o.a)(k,2),C=S[0],M=S[1],t.next=33,A.PublicKey.findProgramAddress([r.toBuffer(),P.c.toBuffer(),g.toBuffer()],W.d);case 33:return B=t.sent,K=Object(o.a)(B,1),D=K[0],N=[],t.next=39,n.getAccountInfo(D);case 39:if(t.t1=t.sent,null!==t.t1){t.next=42;break}N.push(P.d.createAssociatedTokenAccountInstruction(W.d,P.c,g,D,r,r));case 42:return F=s.temporal.equals(A.PublicKey.default)||v.equals(r)?r:s.temporal,R=new A.TransactionInstruction({programId:W.b,keys:[{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:C,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:D,isSigner:!1,isWritable:!0},{pubkey:F,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:A.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:P.c,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(a.a)(e.from(E.sha256.digest("global:claim")).slice(0,8)),Object(a.a)(new I.a(M).toArray("le",1)),Object(a.a)(new I.a(b).toArray("le",8)),Object(a.a)(new I.a(f).toArray("le",8)),Object(a.a)(v.toBuffer()),Object(a.a)(new I.a(l.length).toArray("le",4)),Object(a.a)(e.concat(l))))}),t.abrupt("return",[[].concat(N,[R]),O,[]]);case 45:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e,n,r,a,i,c,o,s,u,l){return t.apply(this,arguments)}}(),U=function(){var t=Object(s.a)(c.a.mark((function t(n,r,i,s,u,l,d,f,b,h,p){var m,j,g,y,x,v,O,w,k,S,C,P,E,M,B,K,D,F,R,U,q,G,H,_,J,V,X,Y,Q,Z;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,m=new A.PublicKey(u),t.next=7;break;case 4:throw t.prev=4,t.t0=t.catch(0),new Error("Invalid candy config key ".concat(t.t0));case 7:return t.next=9,L(r,f,p,m);case 9:if(j=t.sent,g=Object(o.a)(j,2),y=g[0],x=g[1],v=e.from([].concat(Object(a.a)(new I.a(h).toArray("le",8)),Object(a.a)(y.toBuffer()),Object(a.a)(m.toBuffer()),Object(a.a)(new I.a(b).toArray("le",8)))),T.a.verifyClaim(v,d,e.from(s.root))){t.next=17;break}throw new Error("Gumdrop merkle proof does not match");case 17:return t.next=19,A.PublicKey.findProgramAddress([e.from("ClaimCount"),e.from(new I.a(h).toArray("le",8)),i.toBuffer()],W.b);case 19:return O=t.sent,w=Object(o.a)(O,2),k=w[0],S=w[1],t.next=25,A.PublicKey.findProgramAddress([e.from("Wallet"),i.toBuffer()],W.b);case 25:return C=t.sent,P=Object(o.a)(C,2),E=P[0],M=P[1],B=s.temporal.equals(A.PublicKey.default)||y.equals(r)?r:s.temporal,K=[],t.next=33,n.getAccountInfo(k);case 33:if(D=t.sent,F=0,null!==D){t.next=38;break}t.next=46;break;case 38:if(R=N.a.accounts.decode("ClaimCount",D.data),F=R.count,!R.claimant.equals(r)){t.next=44;break}B=r,t.next=46;break;case 44:throw U=R.claimant.toBase58(),new Error("This wallet does not match existing claimant ".concat(U));case 46:if(!(F>=(q=b))){t.next=49;break}throw new Error("Cannot mint another NFT. ".concat(q," NFT(s) were originally allocated")+(F>0?" and ".concat(F," NFT(s) were already minted"):""));case 49:return t.next=51,Object(W.g)(m,l);case 51:return G=t.sent,H=Object(o.a)(G,1),_=H[0],t.next=56,Object(W.f)(n,_);case 56:return J=t.sent,console.log("Candy Machine",J),V=[],t.next=61,z(n,r,i,E,k,B,m,_,J.wallet,e.from([].concat(Object(a.a)(new I.a(M).toArray("le",1)),Object(a.a)(new I.a(S).toArray("le",1)),Object(a.a)(new I.a(h).toArray("le",8)),Object(a.a)(new I.a(b).toArray("le",8)),Object(a.a)(y.toBuffer()),Object(a.a)(new I.a(d.length).toArray("le",4)),Object(a.a)(e.concat(d)))));case 61:return X=t.sent,Y=Object(o.a)(X,2),Q=Y[0],Z=Y[1],V.push(Z),K.push.apply(K,Object(a.a)(Q)),t.abrupt("return",[K,x,V]);case 68:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e,n,r,a,i,c,o,s,u,l,d){return t.apply(this,arguments)}}(),z=function(){var t=Object(s.a)(c.a.mark((function t(n,r,i,o,s,u,l,d,f,b){var h,p,m,j;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h=A.Keypair.generate(),t.next=3,Object(W.j)(h.publicKey);case 3:return p=t.sent,t.next=6,Object(W.h)(h.publicKey);case 6:return m=t.sent,j=[],t.next=10,q(n,r,h.publicKey,j);case 10:return j.push(new A.TransactionInstruction({programId:W.b,keys:[{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:h.publicKey,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:A.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:P.c,isSigner:!1,isWritable:!1},{pubkey:W.e,isSigner:!1,isWritable:!1},{pubkey:W.a,isSigner:!1,isWritable:!1},{pubkey:A.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:A.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(a.a)(e.from(E.sha256.digest("global:claim_candy")).slice(0,8)),Object(a.a)(b)))})),t.abrupt("return",[j,h]);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r,a,i,c,o,s,u,l){return t.apply(this,arguments)}}(),q=function(){var e=Object(s.a)(c.a.mark((function e(t,n,r,a){var i,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.PublicKey.findProgramAddress([n.toBuffer(),P.c.toBuffer(),r.toBuffer()],W.d);case 2:return i=e.sent,s=Object(o.a)(i,1),u=s[0],e.t0=a,e.t1=A.SystemProgram,e.t2=n,e.t3=r,e.t4=P.b.span,e.next=12,t.getMinimumBalanceForRentExemption(P.b.span);case 12:e.t5=e.sent,e.t6=P.c,e.t7={fromPubkey:e.t2,newAccountPubkey:e.t3,space:e.t4,lamports:e.t5,programId:e.t6},e.t8=e.t1.createAccount.call(e.t1,e.t7),e.t0.push.call(e.t0,e.t8),a.push(P.d.createInitMintInstruction(P.c,r,0,n,n)),a.push(P.d.createAssociatedTokenAccountInstruction(W.d,P.c,r,u,n,n)),a.push(P.d.createMintToInstruction(P.c,r,u,n,[],1));case 20:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),G=function(){var t=Object(s.a)(c.a.mark((function t(n,r,i,s,u,l,d,f,b,h,p){var m,j,g,y,x,v,O,w,k,S,C,M,B,K,D,N,F,R,U,z,G;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,m=new A.PublicKey(u),t.next=7;break;case 4:throw t.prev=4,t.t0=t.catch(0),new Error("Invalid master mint key ".concat(t.t0));case 7:return t.next=9,L(r,f,p,m);case 9:if(j=t.sent,g=Object(o.a)(j,2),y=g[0],x=g[1],v=e.from([].concat(Object(a.a)(new I.a(h).toArray("le",8)),Object(a.a)(y.toBuffer()),Object(a.a)(m.toBuffer()),Object(a.a)(new I.a(b).toArray("le",8)),Object(a.a)(new I.a(l).toArray("le",8)))),T.a.verifyClaim(v,d,e.from(s.root))){t.next=17;break}throw new Error("Gumdrop merkle proof does not match");case 17:return t.next=19,A.PublicKey.findProgramAddress([e.from("ClaimCount"),e.from(new I.a(h).toArray("le",8)),i.toBuffer()],W.b);case 19:return O=t.sent,w=Object(o.a)(O,2),k=w[0],S=w[1],C=s.temporal.equals(A.PublicKey.default)||y.equals(r)?r:s.temporal,t.next=26,n.getAccountInfo(k);case 26:if(null===t.sent){t.next=29;break}throw new Error("This edition was already claimed");case 29:return M=[],B=A.Keypair.generate(),t.next=33,Object(W.j)(B.publicKey);case 33:return K=t.sent,t.next=36,Object(W.j)(m);case 36:return D=t.sent,t.next=39,Object(W.h)(B.publicKey);case 39:return N=t.sent,t.next=42,Object(W.h)(m);case 42:return F=t.sent,t.next=45,q(n,r,B.publicKey,M);case 45:return t.next=47,A.PublicKey.findProgramAddress([i.toBuffer(),P.c.toBuffer(),m.toBuffer()],W.d);case 47:return R=t.sent,U=Object(o.a)(R,1),z=U[0],t.next=52,Object(W.i)(m,new I.a(l));case 52:return G=t.sent,M.push(new A.TransactionInstruction({programId:W.b,keys:[{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:C,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:K,isSigner:!1,isWritable:!0},{pubkey:N,isSigner:!1,isWritable:!0},{pubkey:F,isSigner:!1,isWritable:!0},{pubkey:B.publicKey,isSigner:!1,isWritable:!0},{pubkey:G,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:z,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:D,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:A.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:P.c,isSigner:!1,isWritable:!1},{pubkey:W.e,isSigner:!1,isWritable:!1},{pubkey:A.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(a.a)(e.from(E.sha256.digest("global:claim_edition")).slice(0,8)),Object(a.a)(new I.a(S).toArray("le",1)),Object(a.a)(new I.a(h).toArray("le",8)),Object(a.a)(new I.a(b).toArray("le",8)),Object(a.a)(new I.a(l).toArray("le",8)),Object(a.a)(y.toBuffer()),Object(a.a)(new I.a(d.length).toArray("le",4)),Object(a.a)(e.concat(d))))})),t.abrupt("return",[M,x,[B]]);case 55:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e,n,r,a,i,c,o,s,u,l,d){return t.apply(this,arguments)}}(),H=function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r,a,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=new A.PublicKey(n),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new Error("Invalid distributor key ".concat(e.t0));case 7:return e.next=9,t.getAccountInfo(r);case 9:if(null!==(a=e.sent)){e.next=12;break}throw new Error("Could not fetch distributor ".concat(n));case 12:if(a.owner.equals(W.b)){e.next=15;break}throw i=a.owner.toBase58(),new Error("Invalid distributor owner ".concat(i));case 15:return o=N.a.accounts.decode("MerkleDistributor",a.data),e.abrupt("return",[r,o]);case 17:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var t=Object(s.a)(c.a.mark((function t(n,r,a,i){var s,u,l,d,f,b,h;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H(n,r);case 2:if(s=t.sent,u=Object(o.a)(s,2),l=u[0],u[1].temporal.equals(W.c)){t.next=10;break}return t.abrupt("return",!1);case 10:if("candy"!==i){t.next=22;break}return t.next=13,A.PublicKey.findProgramAddress([e.from("ClaimCount"),e.from(new I.a(Number(a)).toArray("le",8)),l.toBuffer()],W.b);case 13:return d=t.sent,f=Object(o.a)(d,1),b=f[0],t.next=18,n.getAccountInfo(b);case 18:return h=t.sent,t.abrupt("return",null===h);case 22:return t.abrupt("return",!0);case 23:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),J=function(t){var n=Object(K.i)(),i=Object(C.b)(),u=f.a.parse(t.location.search),d=l.a.useState(u.distributor||""),P=Object(o.a)(d,2),E=P[0],M=P[1],T=l.a.useState(u.tokenAcc?"transfer":u.config?"candy":u.master?"edition":""),N=Object(o.a)(T,2),L=N[0],z=N[1],q=l.a.useState(u.tokenAcc||""),J=Object(o.a)(q,2),V=J[0],X=J[1],Y=l.a.useState(u.config||""),Q=Object(o.a)(Y,2),Z=Q[0],$=Q[1],ee=l.a.useState(u.uuid||""),te=Object(o.a)(ee,2),ne=te[0],re=te[1],ae=l.a.useState(u.master||""),ie=Object(o.a)(ae,2),ce=ie[0],oe=ie[1],se=l.a.useState(u.edition||""),ue=Object(o.a)(se,2),le=ue[0],de=ue[1],fe=l.a.useState(u.handle||""),be=Object(o.a)(fe,2),he=be[0],pe=be[1],me=l.a.useState(u.amount||""),je=Object(o.a)(me,2),ge=je[0],ye=je[1],xe=l.a.useState(u.index||""),ve=Object(o.a)(xe,2),Oe=ve[0],we=ve[1],ke=l.a.useState(u.pin||""),Se=Object(o.a)(ke,2),Ce=Se[0],Ae=Se[1],Pe=l.a.useState(u.proof||""),Ee=Object(o.a)(Pe,2),Me=Ee[0],Ie=Ee[1],Be=E.length>0&&("transfer"===L?V.length>0:"candy"===L?Z.length>0&&ne.length>0:"edition"===L&&(ce.length>0&&le.length>0))&&he.length>0&&ge.length>0&&Oe.length>0,Ke=l.a.useState(!Be),We=Object(o.a)(Ke,2),Te=We[0],De=We[1],Ne=l.a.useState(null),Fe=Object(o.a)(Ne,2),Le=Fe[0],Re=Fe[1],Ue=l.a.useState(""),ze=Object(o.a)(Ue,2),qe=ze[0],Ge=ze[1],He=l.a.useState(!0),_e=Object(o.a)(He,2),Je=_e[0],Ve=_e[1];l.a.useEffect((function(){var e=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=Ve,e.next=4,_(n,E,Oe,L);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=10;break;case 8:e.prev=8,e.t2=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[n,E,Oe,L]);var Xe="https://n82bm4ts81.execute-api.us-east-2.amazonaws.com/send-OTP",Ye=function(){var t=Object(s.a)(c.a.mark((function t(s){var u,l,d,f,b,h,p,m,j,g,y,x,v,O,w,k,S,C,P,M,K,T,D,N,F,z,q,_,J;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.preventDefault(),i.connected&&null!==i.publicKey){t.next=3;break}throw new Error("Wallet not connected");case 3:if(u=Number(Oe),l=Number(ge),d=null,!isNaN(l)){t.next=8;break}throw new Error("Could not parse amount ".concat(ge));case 8:if(!isNaN(u)){t.next=10;break}throw new Error("Could not parse index ".concat(Oe));case 10:if(!(Ce.length>0)){t.next=18;break}t.prev=11,d=new I.a(Ce),t.next=18;break;case 15:throw t.prev=15,t.t0=t.catch(11),new Error("Could not parse pin ".concat(Ce,": ").concat(t.t0));case 18:return t.next=20,H(n,E);case 20:if(f=t.sent,b=Object(o.a)(f,2),h=b[0],p=b[1],console.log("Distributor",p),m=""===Me?[]:Me.split(",").map((function(t){var n=e.from(B.decode(t));if(32!==n.length)throw new Error("Invalid proof hash length");return n})),"candy"!==L){t.next=37;break}return console.log("Building candy claim"),t.next=30,U(n,i.publicKey,h,p,Z,ne,m,he,l,u,d);case 30:x=t.sent,v=Object(o.a)(x,3),j=v[0],g=v[1],y=v[2],t.next=61;break;case 37:if("transfer"!==L){t.next=47;break}return t.next=40,R(n,i.publicKey,h,p,V,m,he,l,u,d);case 40:O=t.sent,w=Object(o.a)(O,3),j=w[0],g=w[1],y=w[2],t.next=61;break;case 47:if("edition"!==L){t.next=60;break}if(k=Number(le),!isNaN(k)){t.next=51;break}throw new Error("Could not parse edition ".concat(le));case 51:return t.next=53,G(n,i.publicKey,h,p,ce,k,m,he,l,u,d);case 53:S=t.sent,C=Object(o.a)(S,3),j=C[0],g=C[1],y=C[2],t.next=61;break;case 60:throw new Error("Unknown claim method ".concat(L));case 61:if(!(null===d&&g.length>0)){t.next=63;break}throw new Error("Internal error: PDA generated when distributing to wallet directly");case 63:return t.t1=A.Transaction,t.t2=i.publicKey,t.next=67,n.getRecentBlockhash("singleGossip");case 67:t.t3=t.sent.blockhash,t.t4={feePayer:t.t2,recentBlockhash:t.t3},P=new t.t1(t.t4),M=new Set,K=Object(r.a)(j);try{for(K.s();!(T=K.n()).done;){D=T.value,P.add(D),N=Object(r.a)(D.keys);try{for(N.s();!(F=N.n()).done;)(z=F.value).isSigner&&M.add(z.pubkey)}catch(c){N.e(c)}finally{N.f()}}}catch(c){K.e(c)}finally{K.f()}if(console.log("Expecting the following signers: ".concat(Object(a.a)(M).map((function(e){return e.toBase58()})))),P.setSigners.apply(P,Object(a.a)(M)),y.length>0&&P.partialSign.apply(P,Object(a.a)(y)),!P.signatures.some((function(e){return e.publicKey.equals(W.c)}))){t.next=98;break}return q={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:"send",transaction:B.encode(P.serializeMessage()),seeds:g})},t.next=81,fetch(Xe,q);case 81:if(_=t.sent,console.log(_),200===_.status){t.next=85;break}throw new Error("Failed to send AWS OTP");case 85:return t.prev=85,t.next=88,_.json();case 88:J=t.sent,t.next=94;break;case 91:throw t.prev=91,t.t5=t.catch(85),new Error("Could not parse AWS OTP response");case 94:if(console.log("AWS OTP response data:",J),J.MessageId){t.next=97;break}throw new Error("Failed to send AWS OTP");case 97:Object(W.k)({message:"OTP sent",description:"Please check ".concat(he," for a OTP")});case 98:return t.abrupt("return",P);case 99:case"end":return t.stop()}}),t,null,[[11,15],[85,91]])})));return function(e){return t.apply(this,arguments)}}(),Qe=function(){var e=Object(s.a)(c.a.mark((function e(t,r){var a,o,s,u,l,d,f,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r){e.next=3;break}throw new Error("Transaction not available for OTP verification");case 3:if(i.connected&&null!==i.publicKey){e.next=5;break}throw new Error("Wallet not connected");case 5:if(!r.signatures.some((function(e){return e.publicKey.equals(W.c)}))){e.next=36;break}if(a=Number(qe),!isNaN(a)&&0!==qe.length){e.next=10;break}throw new Error("Could not parse OTP ".concat(qe));case 10:return o={method:"POST",headers:{"Content-Type":"application/json"},FunctionName:"send-OTP",body:JSON.stringify({method:"verify",otp:a,handle:he})},e.next=13,fetch(Xe,o);case 13:if(s=e.sent,console.log(s),200===s.status){e.next=18;break}throw u=JSON.stringify(s),new Error("Failed to verify AWS OTP. ".concat(u));case 18:return e.prev=18,e.next=21,s.json();case 21:l=e.sent,e.next=27;break;case 24:throw e.prev=24,e.t0=e.catch(18),new Error("Could not parse AWS OTP verification response");case 27:console.log("AWS verify response data:",l),e.prev=28,d=B.decode(l),e.next=35;break;case 32:throw e.prev=32,e.t1=e.catch(28),new Error("Could not decode transaction signature ".concat(l.body));case 35:r.addSignature(W.c,d);case 36:return e.prev=36,e.next=39,i.signTransaction(r);case 39:f=e.sent,e.next=45;break;case 42:throw e.prev=42,e.t2=e.catch(36),new Error("Failed to sign transaction");case 45:return e.next=47,Object(D.c)({connection:n,signedTransaction:f});case 47:return h=e.sent,console.log(h),Object(W.k)({message:"Claim succeeded",description:Object(F.jsx)(b.a,{href:Object(D.b)(h.txid,n),children:"View transaction on explorer"})}),Re(null),e.prev=51,e.t3=Ve,e.next=55,_(n,E,Oe,L);case 55:e.t4=e.sent,(0,e.t3)(e.t4),e.next=61;break;case 59:e.prev=59,e.t5=e.catch(51);case 61:case"end":return e.stop()}}),e,null,[[18,24],[28,32],[36,42],[51,59]])})));return function(t,n){return e.apply(this,arguments)}}(),Ze=l.a.useState(!1),$e=Object(o.a)(Ze,2),et=$e[0],tt=$e[1],nt=function(){return Object(F.jsx)(h.a,{size:24,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})},rt=function(e){return"candy"===e?Object(F.jsxs)(l.a.Fragment,{children:[Object(F.jsx)(p.a,{style:{width:"60ch"},id:"config-text-field",label:"Candy Config",value:Z,onChange:function(e){return $(e.target.value)},disabled:!Te}),Object(F.jsx)(p.a,{style:{width:"60ch"},id:"config-uuid-text-field",label:"Candy UUID",value:ne,onChange:function(e){return re(e.target.value)},disabled:!Te})]}):"transfer"===e?Object(F.jsx)(l.a.Fragment,{children:Object(F.jsx)(p.a,{style:{width:"60ch"},id:"token-acc-text-field",label:"Source Token Account",value:V,onChange:function(e){return X(e.target.value)},disabled:!Te})}):"edition"===e?Object(F.jsxs)(l.a.Fragment,{children:[Object(F.jsx)(p.a,{style:{width:"60ch"},id:"master-mint-text-field",label:"Master Mint",value:ce,onChange:function(e){return oe(e.target.value)},disabled:!Te}),Object(F.jsx)(p.a,{style:{width:"60ch"},id:"edition-text-field",label:"Edition",value:le,onChange:function(e){return de(e.target.value)},disabled:!Te})]}):void 0},at=[{name:"Populate Claim",inner:function(e){return Object(F.jsxs)(l.a.Fragment,{children:[Object(F.jsx)(p.a,{style:{width:"60ch"},id:"distributor-text-field",label:"Distributor",value:E,onChange:function(e){return M(e.target.value)},disabled:!Te}),Object(F.jsxs)(g.a,{fullWidth:!0,children:[Object(F.jsx)(y.a,{id:"claim-method-label",children:"Claim Method"}),Object(F.jsxs)(x.a,{labelId:"claim-method-label",id:"claim-method-select",value:L,label:"Claim Method",onChange:function(e){z(e.target.value)},style:{textAlign:"left"},disabled:!Te,children:[Object(F.jsx)(v.a,{value:"transfer",children:"Token Transfer"}),Object(F.jsx)(v.a,{value:"candy",children:"Candy Machine"}),Object(F.jsx)(v.a,{value:"edition",children:"Limited Edition"})]})]}),""!==L&&rt(L),"edition"!==L&&Object(F.jsx)(p.a,{style:{width:"60ch"},id:"amount-text-field",label:"Amount",value:ge,onChange:function(e){return ye(e.target.value)},disabled:!Te}),Object(F.jsx)(p.a,{style:{width:"60ch"},id:"handle-text-field",label:"Handle",value:he,onChange:function(e){return pe(e.target.value)},disabled:!Te}),Object(F.jsx)(p.a,{style:{width:"60ch"},id:"index-text-field",label:"Index",value:Oe,onChange:function(e){return we(e.target.value)},disabled:!Te}),Object(F.jsx)(p.a,{style:{width:"60ch"},id:"pin-text-field",label:"Pin",value:Ce,onChange:function(e){return Ae(e.target.value)},disabled:!Te}),Object(F.jsx)(p.a,{style:{width:"60ch"},id:"proof-text-field",label:"Proof",multiline:!0,value:Me,onChange:function(e){return Ie(e.target.value)},disabled:!Te}),Object(F.jsx)(j.a,{color:"info",onClick:function(e){return De(!Te)},children:Te?"Stop Editing":"Edit Claim"}),Object(F.jsx)(m.a,{}),Object(F.jsxs)(m.a,{sx:{position:"relative"},children:[Object(F.jsx)(j.a,{disabled:!i.connected||!Be||et,variant:"contained",style:{width:"100%"},color:Je?"primary":"success",onClick:function(t){tt(!0);var r=function(){var r=Object(s.a)(c.a.mark((function r(){var a,i;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,_(n,E,Oe,L);case 3:return a=r.sent,r.next=6,Ye(t);case 6:if(i=r.sent,a){r.next=12;break}return r.next=10,Qe(t,i);case 10:r.next=13;break;case 12:Re(i);case 13:tt(!1),e(),r.next=21;break;case 17:r.prev=17,r.t0=r.catch(0),Object(W.k)({message:"Claim failed",description:"".concat(r.t0)}),tt(!1);case 21:case"end":return r.stop()}}),r,null,[[0,17]])})));return function(){return r.apply(this,arguments)}}();r()},children:Je?"Next":"Claim Gumdrop"}),et&&nt()]})]})}}];Je&&at.push({name:"Verify OTP",inner:function(e){return Object(F.jsxs)(l.a.Fragment,{children:[Object(F.jsx)(p.a,{style:{width:"60ch"},id:"otp-text-field",label:"OTP",value:qe,onChange:function(e){return Ge(e.target.value)}}),Object(F.jsx)(m.a,{}),Object(F.jsxs)(m.a,{sx:{position:"relative"},children:[Object(F.jsx)(j.a,{disabled:!i.connected||!qe||et,variant:"contained",color:"success",style:{width:"100%"},onClick:function(t){tt(!0);var n=function(){var n=Object(s.a)(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Qe(t,Le);case 3:tt(!1),e(),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),Object(W.k)({message:"Claim failed",description:"".concat(n.t0)}),tt(!1);case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();n()},children:"Claim Gumdrop"}),et&&nt()]})]})}});var it=l.a.useState(0),ct=Object(o.a)(it,2),ot=ct[0],st=ct[1],ut=Math.min(ot,at.length-1),lt=Object(F.jsxs)(l.a.Fragment,{children:[Object(F.jsx)(O.a,{activeStep:ut,children:at.map((function(e,t){return Object(F.jsx)(w.a,{children:Object(F.jsx)(k.a,{children:e.name})},e.name)}))}),Object(F.jsx)(m.a,{})]});return Object(F.jsxs)(S.a,{spacing:2,children:[Je&&lt,at[ut].inner((function(){st((function(e){return e===at.length-1?0:e+1}))})),ut>0&&Object(F.jsx)(j.a,{color:"info",onClick:function(){st((function(e){return e-1}))},children:"Back"})]})}}).call(this,n(18).Buffer)},520:function(e,t){},521:function(e,t){},54:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return a.ENDPOINTS})),n.d(t,"d",(function(){return a.ConnectionProvider})),n.d(t,"i",(function(){return a.useConnection})),n.d(t,"j",(function(){return a.useConnectionConfig})),n.d(t,"l",(function(){return p})),n.d(t,"g",(function(){return y})),n.d(t,"f",(function(){return m})),n.d(t,"k",(function(){return v})),n.d(t,"b",(function(){return O.a})),n.d(t,"h",(function(){return O.b}));var r=n(228),a=n(120),i=n(9),c=n(71),o=n(144),s=n(217),u=n(1),l=n.n(u),d=n(35),f=n(207),b=(n(888),n(93),n(5)),h=(n(257),n.p,Object(u.createContext)({}));function p(){return Object(u.useContext)(h)}var m,j=function(){var e=Object(c.b)(),t=e.wallets,n=e.wallet,r=e.select,a=p(),o=a.visible,l=a.setVisible,d=Object(u.useState)(!1),h=Object(i.a)(d,2)[1],m=Object(u.useCallback)((function(){l(!1),h(!1)}),[l,h]);return Object(b.jsxs)(f.a,{visible:o,onCancel:m,children:[Object(b.jsx)("div",{style:{background:"linear-gradient(180deg, #D329FC 0%, #8F6DDE 49.48%, #19E6AD 100%)",borderRadius:36,width:50,height:50,textAlign:"center",verticalAlign:"middle",fontWeight:700,fontSize:"1.3rem",lineHeight:2.4,marginBottom:10}}),Object(b.jsx)("h2",{style:{color:"white",fontWeight:"bold",fontSize:20},children:n?"Change provider":""}),Object(b.jsx)("p",{style:{color:"white",fontSize:14},children:n?"Choose from the following options:":"Please sign into your wallet"}),Object(b.jsx)("br",{}),t.map((function(e){return Object(b.jsx)(s.a,{size:"large",type:e===n?"primary":"ghost",onClick:function(){r(e.name),m()},icon:Object(b.jsx)("img",{alt:"".concat(e.name),width:20,height:20,src:e.icon,style:{marginRight:30,float:"left"}}),style:{display:"block",width:"100%",textAlign:"left",marginBottom:8,color:"white"},children:e.name},e.name)}))]})},g=function(e){var t=e.children,n=Object(c.b)().publicKey,r=Object(u.useState)(!!n),a=Object(i.a)(r,2),o=a[0],s=a[1],l=Object(u.useState)(!1),f=Object(i.a)(l,2),p=f[0],m=f[1];return Object(u.useEffect)((function(){if(n){var e=n.toBase58(),t=e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e;Object(d.k)({message:"Wallet update",description:"Connected to wallet "+t})}}),[n]),Object(u.useEffect)((function(){!n&&o&&Object(d.k)({message:"Wallet update",description:"Disconnected from wallet"}),s(!!n)}),[n,o,s]),Object(b.jsxs)(h.Provider,{value:{visible:p,setVisible:m},children:[t,Object(b.jsx)(j,{})]})},y=function(e){var t=e.children,n=Object(u.useMemo)((function(){return[Object(o.c)(),Object(o.d)(),Object(o.g)({options:{clientId:"BOM5Cl7PXgE9Ylq1Z1tqzhpydY0RVr8k90QQ85N7AKI5QGSrr9iDC-3rvmy0K_hF0JfpLMiXoDhta68JwcxS1LQ"}}),Object(o.a)(),Object(o.f)(),Object(o.b)(),Object(o.e)()]}),[]),r=Object(u.useCallback)((function(e){console.error(e),Object(d.k)({message:"Wallet error",description:e.message})}),[]);return Object(b.jsx)(c.a,{wallets:n,onError:r,autoConnect:!0,children:Object(b.jsx)(g,{children:t})})};!function(e){e.WALLET="wallet"}(m||(m={}));var x=l.a.createContext({setModal:function(){return null},removeModal:function(){return null}}),v=function(){var e=Object(u.useContext)(x);if(void 0===e)throw new Error("useModal must be used within a ModalProvider");return e},O=n(258)},543:function(e,t){},544:function(e,t){},603:function(e,t){},605:function(e,t){},619:function(e,t){},623:function(e,t){},625:function(e,t){},637:function(e,t){},639:function(e,t){},666:function(e,t){},668:function(e,t){},673:function(e,t){},675:function(e,t){},682:function(e,t){},694:function(e,t){},697:function(e,t){},708:function(e,t){},716:function(e,t,n){},791:function(e,t,n){},796:function(e){e.exports=JSON.parse('{"version":"0.0.0","name":"merkle_distributor","instructions":[{"name":"newDistributor","accounts":[{"name":"base","isMut":false,"isSigner":true},{"name":"distributor","isMut":true,"isSigner":false},{"name":"payer","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"root","type":{"array":["u8",32]}},{"name":"temporal","type":"publicKey"}]},{"name":"closeDistributor","accounts":[{"name":"base","isMut":false,"isSigner":true},{"name":"distributor","isMut":true,"isSigner":false},{"name":"distributorWallet","isMut":true,"isSigner":false},{"name":"receiver","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"walletBump","type":"u8"}]},{"name":"claim","accounts":[{"name":"distributor","isMut":true,"isSigner":false},{"name":"claimStatus","isMut":true,"isSigner":false},{"name":"from","isMut":true,"isSigner":false},{"name":"to","isMut":true,"isSigner":false},{"name":"temporal","isMut":false,"isSigner":true},{"name":"payer","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"index","type":"u64"},{"name":"amount","type":"u64"},{"name":"claimantSecret","type":"publicKey"},{"name":"proof","type":{"vec":{"array":["u8",32]}}}]},{"name":"claimCandy","accounts":[{"name":"distributor","isMut":true,"isSigner":false},{"name":"distributorWallet","isMut":true,"isSigner":false},{"name":"claimCount","isMut":true,"isSigner":false},{"name":"temporal","isMut":false,"isSigner":true},{"name":"payer","isMut":false,"isSigner":true},{"name":"candyMachineConfig","isMut":false,"isSigner":false},{"name":"candyMachine","isMut":true,"isSigner":false},{"name":"candyMachineWallet","isMut":true,"isSigner":false},{"name":"candyMachineMint","isMut":true,"isSigner":false},{"name":"candyMachineMetadata","isMut":true,"isSigner":false},{"name":"candyMachineMasterEdition","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"tokenMetadataProgram","isMut":false,"isSigner":false},{"name":"candyMachineProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"clock","isMut":false,"isSigner":false}],"args":[{"name":"walletBump","type":"u8"},{"name":"claimBump","type":"u8"},{"name":"index","type":"u64"},{"name":"amount","type":"u64"},{"name":"claimantSecret","type":"publicKey"},{"name":"proof","type":{"vec":{"array":["u8",32]}}}]}],"accounts":[{"name":"MerkleDistributor","type":{"kind":"struct","fields":[{"name":"base","type":"publicKey"},{"name":"bump","type":"u8"},{"name":"root","type":{"array":["u8",32]}},{"name":"temporal","type":"publicKey"}]}},{"name":"ClaimStatus","type":{"kind":"struct","fields":[{"name":"isClaimed","type":"bool"},{"name":"claimant","type":"publicKey"},{"name":"claimedAt","type":"i64"},{"name":"amount","type":"u64"}]}},{"name":"ClaimCount","type":{"kind":"struct","fields":[{"name":"count","type":"u64"},{"name":"claimant","type":"publicKey"}]}},{"name":"CandyMachine","type":{"kind":"struct","fields":[{"name":"authority","type":"publicKey"},{"name":"wallet","type":"publicKey"},{"name":"tokenMint","type":{"option":"publicKey"}},{"name":"config","type":"publicKey"},{"name":"data","type":{"defined":"CandyMachineData"}},{"name":"itemsRedeemed","type":"u64"},{"name":"bump","type":"u8"}]}}],"types":[{"name":"CandyMachineData","type":{"kind":"struct","fields":[{"name":"uuid","type":"string"},{"name":"price","type":"u64"},{"name":"itemsAvailable","type":"u64"},{"name":"goLiveDate","type":{"option":"i64"}}]}}],"events":[{"name":"ClaimedEvent","fields":[{"name":"index","type":"u64","index":false},{"name":"claimant","type":"publicKey","index":false},{"name":"amount","type":"u64","index":false}]}],"errors":[{"code":300,"name":"InvalidProof","msg":"Invalid Merkle proof."},{"code":301,"name":"DropAlreadyClaimed","msg":"Drop already claimed."},{"code":302,"name":"Unauthorized","msg":"Account is not authorized to execute this instruction"},{"code":303,"name":"OwnerMismatch","msg":"Token account owner did not match intended owner"},{"code":304,"name":"TemporalMismatch","msg":"Temporal signer did not match distributor"}]}')},81:function(e,t,n){"use strict";(function(e){n.d(t,"h",(function(){return b})),n.d(t,"d",(function(){return h})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return g})),n.d(t,"g",(function(){return y})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return v}));var r=n(9),a=n(2),i=n.n(a),c=n(7),o=n(156),s=n(6),u=n(43),l=n(26),d=n.n(l),f=n(39),b=function(){var t=Object(c.a)(i.a.mark((function t(n,r){var a,c,o,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,a=new s.PublicKey(r),t.next=7;break;case 4:throw t.prev=4,t.t0=t.catch(0),new Error("Invalid mint key ".concat(t.t0));case 7:return t.next=9,n.getAccountInfo(a);case 9:if(null!==(c=t.sent)){t.next=12;break}throw new Error("Could not fetch mint");case 12:if(c.owner.equals(f.i)){t.next=15;break}throw o=c.owner.toBase58(),new Error("Invalid mint owner ".concat(o));case 15:if(c.data.length===u.b.span){t.next=17;break}throw new Error("Invalid mint size ".concat(c.data.length));case 17:return l=u.b.decode(e.from(c.data)),t.abrupt("return",{key:a,info:l});case 19:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e,n){return t.apply(this,arguments)}}(),h=function(){var t=Object(c.a)(i.a.mark((function t(n,a,c,o){var l,b,h,p,m;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.PublicKey.findProgramAddress([n.toBuffer(),f.i.toBuffer(),c.toBuffer()],f.f);case 2:return l=t.sent,b=Object(r.a)(l,1),h=b[0],t.next=7,a.getAccountInfo(h);case 7:if(null!==(p=t.sent)){t.next=10;break}throw new Error("Could not fetch creator token account");case 10:if(p.data.length===u.a.span){t.next=12;break}throw new Error("Invalid token account size ".concat(p.data.length));case 12:if(m=u.a.decode(e.from(p.data)),!(new d.a(m.amount,8,"le").toNumber()<o)){t.next=15;break}throw new Error("Creator token account does not have enough tokens");case 15:return t.abrupt("return",h);case 16:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o.a,e.next=3,o.b.fetchIdl(t,{connection:n});case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=new s.PublicKey(n),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new Error("Invalid config key ".concat(e.t0));case 7:return e.next=9,t.getAccountInfo(r);case 9:if(null!==(a=e.sent)){e.next=12;break}throw new Error("Could not fetch config");case 12:if(a.owner.equals(f.b)){e.next=14;break}throw new Error("Invalid config owner ".concat(a.owner.toBase58()));case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var t=Object(c.a)(i.a.mark((function t(n,r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.PublicKey.findProgramAddress([e.from("candy_machine"),n.toBuffer(),e.from(r)],f.b);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),g=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(f.b,t);case 2:if(null!==(r=e.sent)){e.next=5;break}throw new Error("Could not fetch candy machine IDL");case 5:return e.next=7,t.getAccountInfo(n);case 7:if(null!==(a=e.sent)){e.next=10;break}throw new Error("Could not fetch candy machine");case 10:return e.abrupt("return",r.accounts.decode("CandyMachine",a.data));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var t=Object(c.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.PublicKey.findProgramAddress([e.from("metadata"),f.h.toBuffer(),n.toBuffer()],f.h);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Object(c.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.PublicKey.findProgramAddress([e.from("metadata"),f.h.toBuffer(),n.toBuffer(),e.from("edition")],f.h);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(c.a)(i.a.mark((function t(n,r){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.div(new d.a(248)).toNumber(),t.next=3,s.PublicKey.findProgramAddress([e.from("metadata"),f.h.toBuffer(),n.toBuffer(),e.from("edition"),e.from(String(a))],f.h);case 3:return t.abrupt("return",t.sent[0]);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}).call(this,n(18).Buffer)},826:function(e){e.exports=JSON.parse('[{"handle":"alice@solana.com","mint":"58iV1fAXFvXoPk28xpB2ihedEnM9HSRkiPHXXm1r4V8z","amount":1500000000},{"handle":"bob@solana.com","mint":"58iV1fAXFvXoPk28xpB2ihedEnM9HSRkiPHXXm1r4V8z","amount":1500000000}]')},827:function(e,t,n){},829:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(47),c=n.n(i),o=n(54),s=(n(787),n(788),n(789),n(790),n(9)),u=n(224),l=n(58),d=n(349),f=n(893),b=n(886),h=n(839),p=n(843),m=n(226),j=(n(791),n(5)),g=function(e){return Object(j.jsx)("div",{style:{display:"table",position:"absolute",top:0,left:0,height:"100%",width:"100%"},children:Object(j.jsx)("div",{style:{display:"table-cell",verticalAlign:"middle"},children:Object(j.jsx)("div",{style:{marginLeft:"auto",marginRight:"auto",height:e.height,width:e.width},children:e.children})})})},y=n(145),x=n(481),v=n.n(x),O=n(34),w=n(140),k=n(894),S=n(257),C=["isConnected","onClickConnect","onClickChange"],A=function(e){e.isConnected,e.onClickConnect,e.onClickChange;var t=Object(w.a)(e,C);return Object(j.jsx)(k.a,Object(O.a)(Object(O.a)({},t),{},{children:Object(j.jsx)(S.a,{})}))},P=n(71),E=n(895),M=function(){var e=Object(o.k)().setModal,t=Object(o.l)().setVisible,n=Object(P.b)().connected,a=Object(r.useCallback)((function(){return t(!0)}),[t]),i=Object(r.useCallback)((function(){e(o.f.WALLET),t(!0)}),[e,t]);return Object(j.jsx)(E.a,{color:"default",children:Object(j.jsxs)(m.a,{sx:{display:"flex",bgcolor:"action.disabledBackground"},minWidth:"100%",children:[Object(j.jsxs)(h.a,{direction:"row",spacing:2,sx:{display:"flex",height:"62px",justifyContent:"flex-start",alignItems:"center",marginLeft:"36px"},children:[Object(j.jsx)(p.a,{href:"#/",underline:"none",children:Object(j.jsx)(y.a,{variant:"outlined",children:Object(j.jsx)(v.a,{})})}),Object(j.jsx)(p.a,{href:"#/create",underline:"none",children:Object(j.jsx)(y.a,{variant:"outlined",children:"Create"})}),Object(j.jsx)(p.a,{href:"#/claim",underline:"none",children:Object(j.jsx)(y.a,{variant:"outlined",children:"Claim"})}),Object(j.jsx)(p.a,{href:"#/close",underline:"none",children:Object(j.jsx)(y.a,{variant:"outlined",children:"Close"})})]}),Object(j.jsx)(m.a,{sx:{flexGrow:1}}),Object(j.jsx)(m.a,{sx:{display:"flex",height:"62px",justifyContent:"flex-end",alignItems:"center"},children:Object(j.jsx)(A,{isConnected:n,sx:{marginRight:"36px"},onClickConnect:i,onClickChange:a})})]})})},I=n(482),B=n(2),K=n.n(B),W=n(7),T=n(95),D=n(503),N=n(844),F=n(840),L=n(352),R=n(6),U=n(35),z=n(129),q=n(85),G=function(){var e=Object(o.i)(),t=Object(P.b)(),n=a.a.useState(""),r=Object(s.a)(n,2),i=r[0],c=r[1],u=a.a.useState(localStorage.getItem("claimMethod")||"transfer"),l=Object(s.a)(u,2),d=l[0],f=l[1],b=a.a.useState(localStorage.getItem("candyConfig")||""),m=Object(s.a)(b,2),g=m[0],x=m[1],v=a.a.useState(localStorage.getItem("candyUUID")||""),O=Object(s.a)(v,2),w=O[0],k=O[1],S=a.a.useState(localStorage.getItem("masterMint")||""),C=Object(s.a)(S,2),A=C[0],E=C[1],M=function(){var n=Object(W.a)(K.a.mark((function n(r){var a,c,s;return K.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),t.connected&&null!==t.publicKey){n.next=3;break}throw new Error("Wallet not connected");case 3:return a=R.Keypair.fromSecretKey(new Uint8Array(JSON.parse(i))),n.next=6,Object(z.b)(e,t.publicKey,a,d,g,w,A);case 6:return c=n.sent,n.next=9,o.c.sendTransactionWithRetry(e,t,c,[a]);case 9:s=n.sent,console.log(s),"string"===typeof s?Object(U.k)({message:"Close failed",description:s}):Object(U.k)({message:"Close succeeded",description:Object(j.jsx)(p.a,{href:Object(q.b)(s.txid,e),children:"View transaction on explorer"})});case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(j.jsxs)(h.a,{spacing:2,children:[Object(j.jsx)(T.a,{style:{width:"60ch"},id:"base-text-field",label:"Base Private Key",value:i,onChange:function(e){return c(e.target.value)}}),Object(j.jsxs)(D.a,{fullWidth:!0,children:[Object(j.jsx)(N.a,{id:"claim-method-label",children:"Claim Method"}),Object(j.jsxs)(F.a,{labelId:"claim-method-label",id:"claim-method-select",value:d,label:"Claim Method",onChange:function(e){localStorage.setItem("claimMethod",e.target.value),f(e.target.value)},style:{textAlign:"left"},children:[Object(j.jsx)(L.a,{value:"transfer",children:"Token Transfer"}),Object(j.jsx)(L.a,{value:"candy",children:"Candy Machine"}),Object(j.jsx)(L.a,{value:"edition",children:"Limited Edition"})]})]}),""!==d&&function(e){return"candy"===e?Object(j.jsxs)(a.a.Fragment,{children:[Object(j.jsx)(T.a,{style:{width:"60ch"},id:"config-text-field",label:"Candy Config",value:g,onChange:function(e){return x(e.target.value)}}),Object(j.jsx)(T.a,{style:{width:"60ch"},id:"config-uuid-text-field",label:"Candy UUID",value:w,onChange:function(e){return k(e.target.value)}})]}):"transfer"===e?null:"edition"===e?Object(j.jsx)(a.a.Fragment,{children:Object(j.jsx)(T.a,{style:{width:"60ch"},id:"master-mint-text-field",label:"Master Mint",value:A,onChange:function(e){return E(e.target.value)}})}):void 0}(d),Object(j.jsx)(y.a,{disabled:!t.connected||!i,variant:"contained",onClick:function(e){var t=function(){var t=Object(W.a)(K.a.mark((function t(){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),Object(U.k)({message:"Close failed",description:"".concat(t.t0)});case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}();t()},children:"Close Gumdrop"})]})},H=n(33),_=n(898),J=n(899),V=n(900),X=n(901),Y=n(902),Q=n(903),Z=n(848),$=n(489),ee=n.n($),te=n(26),ne=n.n(te),re=n(63),ae=n.n(re),ie=n(887),ce=n(890),oe=function(e,t){if("Token"===t.type)return{subject:"Gumdrop Token Drop",message:"You received ".concat(e.amount," token(s) ")+'(click <a href="'.concat(t.meta,'">here</a> to view the mint on explorer). ')+'<a href="'.concat(e.url,'">Click here to claim them!</a>')};if("Candy"===t.type)return{subject:"Gumdrop NFT Drop",message:"You received ".concat(e.amount," Candy Machine pre-sale mint ")+'(click <a href="'.concat(t.meta,'">here</a> to view the config on explorer). ')+'<a href="'.concat(e.url,'">Click here to claim it!</a>')};if("Edition"===t.type)return{subject:"Gumdrop NFT Drop",message:"You received ".concat(e.amount," limited-edition print ")+'(click <a href="'.concat(t.meta,'">here</a> to view the master on explorer). ')+'<a href="'.concat(e.url,'">Click here to claim it!</a>')};throw new Error("Internal Error: Unknown drop type ".concat(t.type))},se=n(258),ue=function(e){var t=a.a.useRef(null),n=a.a.useState(0),r=Object(s.a)(n,2),i=r[0],c=r[1],o=a.a.useState(!1),u=Object(s.a)(o,2),l=u[0],d=u[1],f=function(e){e.preventDefault(),e.stopPropagation()},b=function(e){e.preventDefault(),e.stopPropagation(),c(i+1),e.dataTransfer.items&&e.dataTransfer.items.length>0&&d(!0)},h=function(e){e.preventDefault(),e.stopPropagation();var t=i-1;c(t),0===t&&d(!1)},p=function(t){t.preventDefault(),t.stopPropagation(),d(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0&&(e.handleDrop(t.dataTransfer.files),t.dataTransfer.clearData(),c(0))};a.a.useEffect((function(){var e=t.current;if(null!==e)return e.addEventListener("dragenter",b),e.addEventListener("dragleave",h),e.addEventListener("dragover",f),e.addEventListener("drop",p),function(){e.removeEventListener("dragenter",b),e.removeEventListener("dragleave",h),e.removeEventListener("dragover",f),e.removeEventListener("drop",p)}}));var m="dark"===Object(se.b)().mode?"rgba(255,255,255,.1)":"rgba(0, 0, 0,.1)";return Object(j.jsx)("div",{ref:t,style:l?{backgroundColor:m}:{},children:e.children})},le=n(207),de=function(){var e=new Uint8Array(4);return window.crypto.getRandomValues(e),e},fe="\xa0",be=function(e,t,n){if("AWS SES"===e)return function(e,t){ae.a.debug("SES auth",e);var n=new ie.a({region:"us-east-2",credentials:{accessKeyId:e.accessKeyId,secretAccessKey:e.secretAccessKey}});return function(){var e=Object(W.a)(K.a.mark((function e(r,a){var i,c,o;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=oe(r,a),c={Destination:{ToAddresses:[r.handle]},Message:{Subject:{Data:i.subject,Charset:"utf-8"},Body:{Html:{Data:i.message,Charset:"utf-8"}}},Source:t},e.prev=2,e.next=5,n.send(new ce.a(c));case 5:o=e.sent,ae.a.debug(o),o.$metadata.httpStatusCode,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}()}(t,n);if("Manual"===e)return function(){var e=Object(W.a)(K.a.mark((function e(t,n){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ae.a.debug({handle:t.handle,url:t.url});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();if("Wallets"===e)return function(e,t){var n=Array();return function(){var e=Object(W.a)(K.a.mark((function e(t,r){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.push({handle:t.handle,url:t.url});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}();throw new Error("Unrecognized claim distribution method ".concat(e))},he=function(e){var t=document.createElement("div");document.body.appendChild(t);var n=function(){c.a.unmountComponentAtNode(t),document.body.removeChild(t)};return new Promise((function(n){!function(n){var r=n.onSubmit,a=n.onDismiss;c.a.render(e({onSubmit:r,onDismiss:a,show:!0}),t)}({onSubmit:function(e){return n(e)},onDismiss:function(){return n(void 0)}})})).finally((function(){!function(n,r){var a=n.onSubmit,i=n.onDismiss;c.a.render(e({onSubmit:a,onDismiss:i,show:!1}),t,r)}({onSubmit:function(){},onDismiss:function(){}},n)}))},pe=function(e){var t=e.show,n=e.onSubmit,r=e.onDismiss,a=[{click:function(){return n("create")},name:"Create and Send"},{click:function(){return n("send")},name:"Send only"}];return Object(j.jsxs)(le.a,{visible:t,onCancel:r,width:"70ch",children:[Object(j.jsx)("p",{style:{color:"white",fontSize:"1rem",width:"50ch",marginTop:8},children:"Uploaded distribution list has URLs for all claimants. Skip creation of airdrop and only re-send links?"}),Object(j.jsx)("br",{}),Object(j.jsx)(h.a,{direction:"row",spacing:2,children:a.map((function(e){return Object(j.jsx)(y.a,{style:{width:"30ch",color:"white",marginBottom:8},variant:"outlined",onClick:e.click,children:e.name},e.name)}))})]})},me=function(e){var t=encodeURIComponent(JSON.stringify(e));return"data:text/plain;charset=utf-8,".concat(t)},je=function(e,t,n,r,a){return function(i){var c=i.show,o=i.onSubmit,s=i.onDismiss;return Object(j.jsxs)(le.a,{visible:c,onCancel:s,width:"70ch",children:[Object(j.jsx)("h2",{style:{color:"white",fontWeight:"bold",fontSize:20},children:"Claim Distribution Preview"}),Object(j.jsx)("p",{style:{color:"white",fontSize:14,textAlign:"center"},children:"Approving will save the keypair authority generated for gumdrop state. This keypair is necessary to close the gumdrop later!"}),Object(j.jsx)(_.a,{sx:{"td, th":{color:"white"},backgroundColor:"#444444",borderRadius:"5px",maxHeight:"30ch"},children:Object(j.jsxs)(J.a,{size:"small",children:[Object(j.jsx)(V.a,{children:Object(j.jsxs)(X.a,{children:[Object(j.jsx)(Y.a,{children:"Handle"}),Object(j.jsx)(Y.a,{children:"edition"===n?"Edition":"Tokens"}),t&&Object(j.jsx)(Y.a,{children:"Pin"})]})}),Object(j.jsx)(Q.a,{children:e.map((function(e,a){return Object(j.jsxs)(X.a,{sx:{"td, th":{border:0}},children:[Object(j.jsxs)(Y.a,{component:"th",scope:"row",children:[e.handle," "]}),Object(j.jsx)(Y.a,{children:"transfer"===n?(i=e.amount,c=r.mint.info,String(i/Math.pow(10,c.decimals))):"candy"===n?e.amount:e.edition}),t&&Object(j.jsx)(Y.a,{children:e.pin.toNumber()})]},a);var i,c}))})]})}),Object(j.jsx)(m.a,{style:{height:"3ch"}}),Object(j.jsxs)(h.a,{direction:"row",spacing:2,children:[Object(j.jsx)(y.a,{style:{width:"30ch",color:"white",marginBottom:8},variant:"outlined",onClick:function(){return o(!1)},children:"Cancel"}),Object(j.jsx)(p.a,{href:me(Array.from(a.secretKey)),download:"".concat(a.publicKey.toBase58(),".json"),underline:"none",style:{width:"30ch"},children:Object(j.jsx)(y.a,{style:{width:"100%",color:"white",marginBottom:8},variant:"outlined",onClick:function(){return o(!0)},children:"Approve"})})]})]})}},ge=function(e){var t,n=Object(o.i)(),r=Object(P.b)(),i=a.a.useState(localStorage.getItem("claimMethod")||""),c=Object(s.a)(i,2),u=c[0],l=c[1],d=a.a.useState(localStorage.getItem("candyConfig")||""),f=Object(s.a)(d,2),b=f[0],g=f[1],x=a.a.useState(localStorage.getItem("candyUUID")||""),v=Object(s.a)(x,2),w=v[0],k=v[1],S=a.a.useState(localStorage.getItem("mint")||""),C=Object(s.a)(S,2),A=C[0],E=C[1],M=a.a.useState(localStorage.getItem("masterMint")||""),I=Object(s.a)(M,2),B=I[0],G=I[1],_=a.a.useState(""),J=Object(s.a)(_,2),V=J[0],X=J[1],Y=a.a.useState(""),Q=Object(s.a)(Y,2),$=Q[0],te=Q[1],re=a.a.useState([]),ae=Object(s.a)(re,2),ie=ae[0],ce=ae[1],oe=a.a.useState(localStorage.getItem("otpAuth")||"default"),se=Object(s.a)(oe,2),le=se[0],ge=se[1],ye=a.a.useState(localStorage.getItem("commMethod")||""),xe=Object(s.a)(ye,2),ve=xe[0],Oe=xe[1],we=a.a.useState({}),ke=Object(s.a)(we,2),Se=ke[0],Ce=ke[1],Ae=a.a.useState(localStorage.getItem("commSource")||""),Pe=Object(s.a)(Ae,2),Ee=Pe[0],Me=Pe[1],Ie=a.a.useState(""),Be=Object(s.a)(Ie,2),Ke=Be[0],We=Be[1],Te=a.a.useState(""),De=Object(s.a)(Te,2),Ne=De[0],Fe=De[1],Le=a.a.useState(""),Re=Object(s.a)(Le,2),Ue=Re[0],ze=Re[1],qe=function(){var e=Object(W.a)(K.a.mark((function e(t){var a,i,c,s,l,d,f,h,m,g,y,x,v,O,k,S,C;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),ce([]),r.connected&&null!==r.publicKey){e.next=4;break}throw new Error("Wallet not connected");case 4:if(0!==(a=Object(z.c)($)).length){e.next=7;break}throw new Error("No claimants provided");case 7:e.t0=u,e.next="transfer"===e.t0?10:"candy"===e.t0?14:"edition"===e.t0?18:22;break;case 10:return e.next=12,Object(z.f)(n,Object(q.a)(n),r.publicKey,a,A);case 12:return i=e.sent,e.abrupt("break",23);case 14:return e.next=16,Object(z.d)(n,Object(q.a)(n),r.publicKey,a,b,w);case 16:return i=e.sent,e.abrupt("break",23);case 18:return e.next=20,Object(z.e)(n,Object(q.a)(n),r.publicKey,a,B);case 20:return i=e.sent,e.abrupt("break",23);case 22:throw new Error("Unknown claim method ".concat(u));case 23:if(console.log("Claims info",i),c=function(e){return void 0!==e.url&&null!==e.url},!a.reduce((function(e,t){return e&&c(t)}),!0)){e.next=57;break}return e.next=28,he(pe);case 28:if(s=e.sent,console.log("Resend only",s),"send"!==s){e.next=53;break}ce(a),l=be(ve,Se,Ee),d=Object(H.a)(a),e.prev=34,d.s();case 36:if((f=d.n()).done){e.next=42;break}return h=f.value,e.next=40,l(h,i.info);case 40:e.next=36;break;case 42:e.next=47;break;case 44:e.prev=44,e.t1=e.catch(34),d.e(e.t1);case 47:return e.prev=47,d.f(),e.finish(47);case 50:return e.abrupt("return");case 53:if("create"!==s){e.next=56;break}e.next=57;break;case 56:throw new Error("Dismissed");case 57:if(a.forEach((function(e){e.pin=new ne.a(de()),e.seed="transfer"===u?i.mint.key:"candy"===u?i.config:i.masterMint.key})),"Wallets"!==ve){e.next=62;break}m=U.b,e.next=71;break;case 62:if("default"!==le){e.next=66;break}m=U.c,e.next=71;break;case 66:if("none"!==le){e.next=70;break}m=R.PublicKey.default,e.next=71;break;case 70:throw new Error("Unknown OTP authorization type ".concat(le));case 71:return console.log("Temporal signer: ".concat(m.toBase58())),g=R.Keypair.generate(),console.log("Base ".concat(g.publicKey.toBase58())),y="Wallets"!==ve,e.next=77,Object(z.a)(n,r.publicKey,y,u,"".concat(window.location.origin).concat(window.location.pathname),g.publicKey,m,a,i);case 77:return x=e.sent,e.next=80,he(je(a,y,u,i,g));case 80:if(!0!==e.sent){e.next=84;break}e.next=85;break;case 84:throw new Error("Claim distribution preview not approved");case 85:return ce(a),e.next=88,o.c.sendTransactionWithRetry(n,r,x,[g]);case 88:if(v=e.sent,console.log(v),"string"!==typeof v){e.next=94;break}throw new Error(v);case 94:Object(U.k)({message:"Gumdrop creation succeeded",description:Object(j.jsx)(p.a,{href:Object(q.b)(v.txid,n),children:"View transaction on explorer"})});case 95:console.log("Distributing claim URLs"),O=be(ve,Se,Ee),k=Object(H.a)(a),e.prev=98,k.s();case 100:if((S=k.n()).done){e.next=106;break}return C=S.value,e.next=104,O(C,i.info);case 104:e.next=100;break;case 106:e.next=111;break;case 108:e.prev=108,e.t2=e.catch(98),k.e(e.t2);case 111:return e.prev=111,k.f(),e.finish(111);case 114:case"end":return e.stop()}}),e,null,[[34,44,47,50],[98,108,111,114]])})));return function(t){return e.apply(this,arguments)}}(),Ge=function(e){if(1===e.length){var t=e[0],n=new FileReader;n.onload=function(e){if(null!==e&&null!==e.target)if("string"===typeof e.target.result){try{Object(z.c)(e.target.result)}catch(n){return Object(U.k)({message:"File upload failed for: ".concat(t.name),description:Object(j.jsxs)("span",{children:["Could not parse uploaded file.",fe,Object(j.jsx)(p.a,{href:"#/",children:"Does it follow the JSON scheme?"})]})}),X(""),void te("")}X(t.name),te(e.target.result)}else Object(U.k)({message:"File upload failed for: ".concat(t.name),description:"Could not read uploaded file"})},n.readAsText(t)}else Object(U.k)({message:"File upload failed",description:"Received ".concat(e.length," files")})},He=Object(j.jsxs)(a.a.Fragment,{children:[Object(j.jsx)(ue,{handleDrop:Ge,children:Object(j.jsxs)(h.a,{direction:"row",style:{width:"60ch",height:"15ch"},sx:{border:"1px dashed grey",justifyContent:"center",alignContent:"center"},children:[Object(j.jsxs)(y.a,{variant:"text",component:"label",style:{padding:0,marginTop:"5ch",marginBottom:"5ch"},children:["Upload a ",""===V?"distribution":"different"," list",Object(j.jsx)("input",{type:"file",onChange:function(e){Ge(e.target.files),e.target.value=""},hidden:!0})]}),fe,Object(j.jsx)(y.a,{variant:"text",component:"label",disabled:!0,style:{padding:0},children:"or drag it here"})]})}),""!==V?Object(j.jsxs)(y.a,{variant:"text",component:"label",disabled:!0,style:{padding:0},children:[Object(j.jsx)(ee.a,{}),Object(j.jsxs)("span",{children:[fe," Uploaded ",V]})]}):Object(j.jsx)(m.a,{})]}),_e=a.a.useState(!1),Je=Object(s.a)(_e,2),Ve=Je[0],Xe=Je[1],Ye=Object(j.jsxs)(m.a,{sx:{position:"relative"},children:[Object(j.jsxs)(y.a,{disabled:!r.connected||!ve||!V||Ve,variant:"contained",style:{width:"100%"},onClick:function(e){Xe(!0);var t=function(){var t=Object(W.a)(K.a.mark((function t(){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe(e);case 3:Xe(!1),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),Object(U.k)({message:"Create failed",description:"".concat(t.t0)}),Xe(!1);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}();t()},children:["Create",ie.length>0?" Another ":" ","Gumdrop"]}),Ve&&Object(j.jsx)(Z.a,{size:24,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]}),Qe=Object(j.jsx)(a.a.Fragment,{children:Object(j.jsxs)(D.a,{fullWidth:!0,children:[Object(j.jsx)(N.a,{id:"otp-auth-label",children:"OTP Authorization"}),Object(j.jsxs)(F.a,{labelId:"otp-auth-label",id:"otp-auth-select",value:le,label:"OTP Authorization",onChange:function(e){localStorage.setItem("otpAuth",e.target.value),ge(e.target.value)},style:{textAlign:"left"},children:[Object(j.jsxs)(L.a,{value:"default",children:["Default",fe,Object(j.jsxs)(p.a,{href:(t=U.c,"https://explorer.solana.com/address/".concat(t.toBase58(),"?cluster=").concat(Object(q.a)(n))),underline:"none",target:"_blank",rel:"noopener noreferrer",children:["(",Object(U.l)(U.c.toBase58()),")"]})]}),Object(j.jsx)(L.a,{value:"none",children:"None"})]})]})});return Object(j.jsxs)(h.a,{spacing:2,children:[Object(j.jsxs)(D.a,{fullWidth:!0,children:[Object(j.jsx)(N.a,{id:"claim-method-label",children:"Claim Method"}),Object(j.jsxs)(F.a,{labelId:"claim-method-label",id:"claim-method-select",value:u,label:"Claim Method",onChange:function(e){localStorage.setItem("claimMethod",e.target.value),l(e.target.value)},style:{textAlign:"left"},children:[Object(j.jsx)(L.a,{value:"transfer",children:"Token Transfer"}),Object(j.jsx)(L.a,{value:"candy",children:"Candy Machine"}),Object(j.jsx)(L.a,{value:"edition",children:"Limited Edition"})]})]}),""!==u&&function(e){return"candy"===e?Object(j.jsxs)(a.a.Fragment,{children:[Object(j.jsx)(T.a,{style:{width:"60ch"},id:"config-text-field",label:"Candy Config",value:b,onChange:function(e){g(e.target.value),localStorage.setItem("candyConfig",e.target.value)}}),Object(j.jsx)(T.a,{style:{width:"60ch"},id:"config-uuid-text-field",label:"Candy UUID",value:w,onChange:function(e){k(e.target.value),localStorage.setItem("candyUUID",e.target.value)}})]}):"transfer"===e?Object(j.jsx)(T.a,{style:{width:"60ch"},id:"mint-text-field",label:"Mint",value:A,onChange:function(e){localStorage.setItem("mint",e.target.value),E(e.target.value)}}):"edition"===e?Object(j.jsx)(T.a,{style:{width:"60ch"},id:"master-mint-text-field",label:"Master Mint",value:B,onChange:function(e){localStorage.setItem("masterMint",e.target.value),G(e.target.value)}}):void 0}(u),Object(j.jsxs)(D.a,{fullWidth:!0,children:[Object(j.jsx)(N.a,{id:"comm-method-label",children:"Distribution Method"}),Object(j.jsxs)(F.a,{labelId:"comm-method-label",id:"comm-method-select",value:ve,label:"Distribution Method",onChange:function(e){localStorage.setItem("commMethod",e.target.value),Oe(e.target.value)},style:{textAlign:"left"},children:[Object(j.jsx)(L.a,{value:"AWS SES",children:"AWS SES"}),Object(j.jsx)(L.a,{value:"Manual",children:"Manual"}),Object(j.jsx)(L.a,{value:"Wallets",children:"Wallets"})]})]}),""!==ve&&function(e){return"Manual"===e||"Wallets"===e?null:"AWS SES"===e?Object(j.jsxs)(a.a.Fragment,{children:[Object(j.jsx)(T.a,{style:{width:"60ch"},id:"comm-access-key-id-field",label:"".concat(e," Access Key Id"),value:Ke,onChange:function(e){Ce((function(t){return Object(O.a)(Object(O.a)({},t),{},{accessKeyId:e.target.value})})),We(e.target.value)}}),Object(j.jsx)(T.a,{style:{width:"60ch"},id:"comm-secret-access-key-field",label:"".concat(e," Secret Access Key"),value:Ne,onChange:function(e){Ce((function(t){return Object(O.a)(Object(O.a)({},t),{},{secretAccessKey:e.target.value})})),Fe(e.target.value)}}),Object(j.jsx)(T.a,{style:{width:"60ch"},id:"comm-source-field",label:"".concat(e," Source"),value:Ee,onChange:function(e){localStorage.setItem("commSource",e.target.value),Me(e.target.value)}})]}):Object(j.jsxs)(a.a.Fragment,{children:[Object(j.jsx)(T.a,{style:{width:"60ch"},id:"comm-auth-field",label:"".concat(e," API key"),value:Ue,onChange:function(e){Ce((function(t){return Object(O.a)(Object(O.a)({},t),{},{apiKey:e.target.value})})),ze(e.target.value)}}),Object(j.jsx)(T.a,{style:{width:"60ch"},id:"comm-source-field",label:"".concat(e," Source"),value:Ee,onChange:function(e){localStorage.setItem("commSource",e.target.value),Me(e.target.value)}})]})}(ve),""!==ve&&"Wallets"!==ve&&Qe,He,Ye,ie.length>0&&Object(j.jsx)(p.a,{href:me(ie),download:"claimURLs.json",underline:"none",style:{width:"100%"},children:Object(j.jsx)(y.a,{variant:"contained",style:{width:"100%"},children:"Download claim URLs"})})]})},ye=function(e){var t=[{name:"summary",inner:Object(j.jsxs)(h.a,{spacing:1,children:[Object(j.jsx)("div",{children:"The Gumdrop program leverages the Solana blockchain and merkle trees to facilitate airdrops to a large number of whitelisted users at a low cost to creators."}),Object(j.jsxs)("div",{children:["In the Solana ecosystem, the cost of token airdrops is currently largely due to rent costs being","\xa0",Object(j.jsx)(p.a,{href:"https://docs.solana.com/implemented-proposals/rent",underline:"none",children:'"fixed at the genesis"'}),". With the large increase in SOLUSD since genesis, rent costs when creating accounts for thousands of users have duly skyrocketed."]}),Object(j.jsx)("div",{children:"Simultaneously, NFT projects often have a presale to early project followers and contributors. However, the candy-machine doesn't have the ability to grant early minting to a whitelisted subset of wallets while also using the same asset configuration for open launch."}),Object(j.jsxs)("div",{children:["Gumdrop (originally pioneered for token airdrops by"," ",Object(j.jsx)(p.a,{href:"https://github.com/Uniswap/merkle-distributor",underline:"none",children:"Uniswap"})," ","and ported to Solana by","\xa0",Object(j.jsx)(p.a,{href:"https://github.com/saber-hq/merkle-distributor",underline:"none",children:"Saber"}),") solves both these issues by building a space-efficient hash structure (the merkle tree) such that an on-chain program can validate whether the user is part of a whitelist. Moreover, Gumdrop allows creators to directly send whitelisted users an airdrop reclamation link by building the tree with off-chain handles (e.g email, twitter, etc) and allowing the user to redeem into any wallet."]})]})},{name:"create",inner:Object(j.jsxs)(h.a,{spacing:1,children:[Object(j.jsx)(u.b,{to:"/create",children:"CREATION"}),Object(j.jsx)("div",{children:"Creation builds a whitelist of users that can claim either existing fungible tokens or directly mint from a pre-sale candy-machine."}),Object(j.jsxs)("div",{children:["Creators must choose a mint or a candy-machine config and UUID, an off-chain notification method (based on the handles supplied below, e.g email, twitter, etc), and supply a list of recipients and balances with the following JSON schema","\xa0",Object(j.jsx)(p.a,{href:"data:text/plain;charset=utf-8,".concat(JSON.stringify(n(826))),download:"example.json",underline:"none",children:"(Click here for an example)"})]}),Object(j.jsx)("pre",{style:{fontSize:14},children:'\n[\n  {\n    "handle": "<DISTRIBUTION-SPECIFIC-HANDLE>"\n    "amount": <#-TOKENS-OR-CANDY-MINTS>\n  },\n  ...\n]'}),Object(j.jsx)("div",{children:"NB: When a candy-machine is supplied, update authority for the candy-machine will be transferred to the Gumdrop state. This can be reclaimed by closing the Gumdrop."})]})},{name:"claim",inner:Object(j.jsxs)(h.a,{spacing:1,children:[Object(j.jsx)(u.b,{to:"/claim",children:"CLAIMS"}),Object(j.jsx)("div",{children:"Claims are redeemed through a URL with query parameters holding claim-specific keys. Claimants will need to verify ownership of the specified handle by answering a OTP challenge and pay the rent and minting fees if applicable."})]})},{name:"close",inner:Object(j.jsxs)(h.a,{spacing:1,children:[Object(j.jsx)(u.b,{to:"/close",children:"CLOSING"}),Object(j.jsx)("div",{children:"Closing the Gumdrop cleans up the on-chain state and allows creators to recycle any lamports held for rent-exemption after the airdrop is complete."}),Object(j.jsx)("div",{children:"When closing a candy-machine-integrated distributor, update authority will be transferred back to the wallet owner."})]})}];return Object(j.jsx)(h.a,{alignContent:"left",textAlign:"left",spacing:2,children:t.map((function(e){return e.inner}))})},xe=function(){var e=window;return{width:e.innerWidth,height:e.innerHeight}};var ve=function(){var e=Object(o.h)();a.a.useEffect((function(){}),[e.mode]);var t=a.a.useMemo((function(){var t,n;return"dark"!==e.mode&&e.mode?(t="light",n="#111"):(t="dark",n="#eee"),Object(d.a)({palette:{mode:t,action:{disabled:n}}})}),[e.mode]),n=function(){var e=a.a.useState(xe()),t=Object(s.a)(e,2),n=t[0],r=t[1];return a.a.useEffect((function(){var e=function(){r(xe())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}().height;return Object(j.jsx)("div",{className:"App",style:{backgroundColor:"transparent"},children:Object(j.jsxs)(f.a,{theme:t,children:[Object(j.jsx)(b.a,{}),Object(j.jsx)(M,{}),Object(j.jsxs)(g,{height:"".concat(.8*n,"px"),width:"60ch",children:[Object(j.jsx)(m.a,{height:"60px"}),Object(j.jsx)(u.a,{children:Object(j.jsxs)(l.c,{children:[Object(j.jsx)(l.a,{path:"/create",component:ge}),Object(j.jsx)(l.a,{path:"/claim",component:I.a}),Object(j.jsx)(l.a,{path:"/close",component:G}),Object(j.jsx)(l.a,{path:"/",component:ye})]})}),Object(j.jsx)(m.a,{height:"80px"})]})]})})},Oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,904)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};n(827);c.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(o.d,{children:Object(j.jsx)(o.g,{children:Object(j.jsx)(o.a,{children:Object(j.jsx)(o.b,{children:Object(j.jsx)(ve,{})})})})})}),document.getElementById("root")),Oe()},85:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f}));var r=n(2),a=n.n(r),i=(n(14),n(7)),c=(n(6),n(93)),o=n(63),s=n.n(o),u=function(){return(new Date).getTime()/1e3},l=function(e){var t=e._rpcEndpoint.match(/https:\/\/api.([^.]*).solana.com/);return t[1]?t[1]:"mainnet-beta"},d=function(e,t){return"https://explorer.solana.com/tx/".concat(e,"?cluster=").concat(l(t))};function f(e){return b.apply(this,arguments)}function b(){return(b=Object(i.a)(a.a.mark((function e(t){var n,r,o,l,d,f,b,p,j,g,y,x,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,r=t.connection,o=t.timeout,l=void 0===o?15e3:o,d=n.serialize(),f=u(),b=0,e.next=6,r.sendRawTransaction(d,{skipPreflight:!0});case 6:return p=e.sent,s.a.debug("Started awaiting confirmation for",p),j=!1,Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j||!(u()-f<l)){e.next=6;break}return r.sendRawTransaction(d,{skipPreflight:!0}),e.next=4,Object(c.c)(500);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=10,e.next=13,m(p,l,r,"confirmed",!0);case 13:if(g=e.sent){e.next=16;break}throw new Error("Timed out awaiting confirmation on transaction");case 16:if(!g.err){e.next=19;break}throw s.a.error(g.err),new Error("Transaction failed: Custom instruction error");case 19:b=(null===g||void 0===g?void 0:g.slot)||0,e.next=48;break;case 22:if(e.prev=22,e.t0=e.catch(10),s.a.error("Timeout Error caught",e.t0),!e.t0.timeout){e.next=27;break}throw new Error("Timed out awaiting confirmation on transaction");case 27:return y=null,e.prev=28,e.next=31,h(r,n,"single");case 31:y=e.sent.value,e.next=37;break;case 34:e.prev=34,e.t1=e.catch(28),s.a.error("Simulate Transaction error",e.t1);case 37:if(!y||!y.err){e.next=48;break}if(!y.logs){e.next=47;break}x=y.logs.length-1;case 40:if(!(x>=0)){e.next=47;break}if(!(v=y.logs[x]).startsWith("Program log: ")){e.next=44;break}throw new Error("Transaction failed: "+v.slice("Program log: ".length));case 44:--x,e.next=40;break;case 47:throw new Error(JSON.stringify(y.err));case 48:return e.prev=48,j=!0,e.finish(48);case 51:return s.a.debug("Latency (ms)",p,u()-f),e.abrupt("return",{txid:p,slot:b});case 53:case"end":return e.stop()}}),e,null,[[10,22,48,51],[28,34]])})))).apply(this,arguments)}function h(e,t,n){return p.apply(this,arguments)}function p(){return(p=Object(i.a)(a.a.mark((function e(t,n,r){var i,c,o,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._recentBlockhash(t._disableBlockhashCaching);case 2:return n.recentBlockhash=e.sent,i=n.serializeMessage(),c=n._serialize(i),o=c.toString("base64"),s=[o,{encoding:"base64",commitment:r}],e.next=10,t._rpcRequest("simulateTransaction",s);case 10:if(!(u=e.sent).error){e.next=13;break}throw new Error("failed to simulate transaction: "+u.error.message);case 13:return e.abrupt("return",u.result);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t,n){return j.apply(this,arguments)}function j(){return j=Object(i.a)(a.a.mark((function e(t,n,r){var o,u,l,f,b,h=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=h.length>3&&void 0!==h[3]?h[3]:"recent",u=h.length>4&&void 0!==h[4]&&h[4],l=!1,f={slot:0,confirmations:0,err:null},b=0,e.next=7,new Promise(function(){var e=Object(i.a)(a.a.mark((function e(h,p){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){l||(l=!0,s.a.warn("Rejecting for timeout..."),p({timeout:!0}))}),n);try{b=r.onSignature(t,(function(e,t){l=!0,f={err:e.err,slot:t.slot,confirmations:0},e.err?(s.a.warn("Rejected via websocket",e.err),p(f)):(s.a.debug("Resolved via websocket",e),h(f))}),o)}catch(m){l=!0,s.a.error("WS error in setup",t,m)}case 2:if(l||!u){e.next=8;break}return Object(i.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getSignatureStatuses([t]);case 3:n=e.sent,f=n&&n.value[0],console.log(d(t,r)),l||(f?f.err?(s.a.error("REST error for",t,f),l=!0,p(f.err)):f.confirmations?(s.a.debug("REST confirmation for",t,f),l=!0,h(f)):s.a.error("REST no confirmations for",t,f):s.a.debug("REST null result for",t,f)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),l||s.a.error("REST connection error: txid",t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))(),e.next=6,Object(c.c)(2e3);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return f=e.sent,r._signatureSubscriptions[b]&&r.removeSignatureListener(b),l=!0,s.a.debug("Returning status",f),e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}},93:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d}));n(33),n(2),n(7);var r=n(9),a=n(1),i=(n(6),n(26)),c=n.n(i),o=new c.a(10);o.pow(new c.a(18)),o.pow(new c.a(18)),o.pow(new c.a(27)),new c.a(0),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:8});function s(e,t){var n=Object(a.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),i=Object(r.a)(n,2),c=i[0],o=i[1],s=Object(a.useCallback)((function(t){if(c!==t)if(o(t),null===t)localStorage.removeItem(e);else try{localStorage.setItem(e,JSON.stringify(t))}catch(n){}}),[c,e]);return[c,s]}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}new Set(["USDC","wUSDC","USDT"]);function l(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,r){return e.slice(r*t,(r+1)*t)}))}new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});function d(e){return new Promise((function(t){return setTimeout(t,e)}))}}},[[829,1,2]]]);
//# sourceMappingURL=main.df5ebc63.chunk.js.map