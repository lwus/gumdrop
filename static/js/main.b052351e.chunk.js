(this["webpackJsonpreact-template"]=this["webpackJsonpreact-template"]||[]).push([[0],{100:function(e,t,n){"use strict";(function(e){n.d(t,"e",(function(){return j})),n.d(t,"d",(function(){return y})),n.d(t,"h",(function(){return x})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return A})),n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return P})),n.d(t,"c",(function(){return I}));var r=n(9),a=n(2),i=n.n(a),c=n(8),o=n(14),s=n(7),u=n(41),l=n(58),d=n(26),f=n.n(d),b=n(44),p=n(79),h=n(40),m=n(202),j=function(e,t,n){var r=t.match(/\.[0-9a-z]+$/i);if(null===r)throw new Error("Could not parse file extension from ".concat(t));switch(r[0]){case".csv":var a,i=function(e){for(var t=new RegExp('(\\,|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^\\,\\r\\n]*))',"gi"),n=null,r=[[]];n=t.exec(e);)n[1].length&&","!==n[1]&&r.push([]),r[r.length-1].push(n[2]?n[2].replace(new RegExp('""',"g"),'"'):n[3]);return r}(e);if("aws-sms"===n)a="phone number";else{if("aws-email"!==n)throw new Error("Cannot parse csv for ".concat(a));a="email"}var c=i[0].findIndex((function(e){return e.includes(a)}));if(-1===c)throw new Error("Could not find ".concat(a," index"));var s=new Set(i.slice(1).filter((function(e){return e[c].length>0})).map((function(e){return e[c]})));return Object(o.a)(s).map((function(e,t){return{handle:e,amount:1,edition:t}}));case".json":return JSON.parse(e).map((function(e){return{handle:e.handle,amount:e.amount,edition:e.edition,url:e.url}}));default:throw new Error("Cannot parse file format ".concat(r," from ").concat(t))}},g=function(e,t){return"https://explorer.solana.com/address/".concat(t,"?cluster=").concat(e)},y=function(e,t,n,r,a){switch(t){case"transfer":return{type:"Token",meta:g(e,n)};case"candy":return{type:"Candy",meta:g(e,r)};case"edition":return{type:"Edition",meta:g(e,a)};default:throw new Error("Unknown claim integration method ".concat(t))}},x=function(){var e=Object(c.a)(i.a.mark((function e(t,n,r,a){var c,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.forEach((function(e,t){if(!e.handle)throw new Error("Claimant ".concat(t," doesn't have handle"));if(!e.amount)throw new Error("Claimant ".concat(t," doesn't have amount"));if(0===e.amount)throw new Error("Claimant ".concat(t," amount is 0"))})),c=r.reduce((function(e,t){return e+t.amount}),0),e.next=4,Object(p.h)(t,a);case 4:return o=e.sent,e.next=7,Object(p.d)(n,t,o.key,c);case 7:return s=e.sent,e.abrupt("return",{total:c,mint:o,source:s});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(c.a)(i.a.mark((function e(t,n,a,c,o){var s,u,l,d,f,b,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.forEach((function(e,t){if(!e.handle)throw new Error("Claimant ".concat(t," doesn't have handle"));if(!e.amount)throw new Error("Claimant ".concat(t," doesn't have amount"));if(0===e.amount)throw new Error("Claimant ".concat(t," amount is 0"))})),s=a.reduce((function(e,t){return e+t.amount}),0),e.next=4,Object(p.a)(t,c);case 4:return u=e.sent,e.next=7,Object(p.c)(u,o);case 7:return l=e.sent,d=Object(r.a)(l,1),f=d[0],e.next=12,Object(p.b)(t,f);case 12:if(b=e.sent,h=b.data.itemsAvailable.toNumber()-b.itemsRedeemed.toNumber(),!isNaN(h)){e.next=16;break}throw new Error("Could not calculate how many candy machine items are remaining");case 16:if(!(h<s)){e.next=18;break}throw new Error("Distributor is allocated more mints (".concat(s,") ")+"than the candy machine has remaining (".concat(h,")"));case 18:if(b.authority.equals(n)){e.next=20;break}throw new Error("Candy machine authority does not match wallet public key");case 20:return e.abrupt("return",{total:s,config:u,uuid:o,candyMachineKey:f});case 21:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),O=function(e){return e.div(new f.a(8))},w=function(e){return new f.a(7).sub(e.mod(new f.a(8)))},k=function(e){var t=function(e){return e.mod(new f.a(248))}(e);return{index:O(t).toNumber(),mask:new f.a(1).shln(w(t).toNumber()).toNumber()}},S=function(e,t){var n=k(t);return 0!==(e[n.index]&n.mask)},C=function(e,t){var n=k(t);e[n.index]=e[n.index]|n.mask},A=function(){var e=Object(c.a)(i.a.mark((function e(t,n,r,a){var c,s,u,l,d,b,h,m,j,g,y;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.forEach((function(e,t){if(!e.handle)throw new Error("Claimant ".concat(t," doesn't have handle"));if(1!==e.amount)throw new Error("Claimant ".concat(t," has amount ").concat(e.amount,". Expected 1 for edition gumdrop"))})),c=r.reduce((function(e,t){return e+t.amount}),0),e.next=4,Object(p.h)(t,a);case 4:return s=e.sent,e.next=7,Object(p.d)(n,t,s.key,1);case 7:return u=e.sent,e.next=10,Object(p.e)(s.key);case 10:return l=e.sent,e.next=13,t.getAccountInfo(l);case 13:if(null!==(d=e.sent)){e.next=16;break}throw new Error("Could not fetch master edition");case 16:if(console.log("Master edition",d),b=new f.a(d.data.slice(1,9),8,"le").toNumber(),h=0===d.data[9]?null:new f.a(d.data.slice(10,18),8,"le").toNumber(),console.log("Max supply",h),console.log("Current supply",b),!(null!==h&&h<c)){e.next=23;break}throw new Error("Distributor is allocated more editions (".concat(c,") ")+"than the master has total (".concat(h,")"));case 23:m={},j=[],g=i.a.mark((function e(n){var a,c,u,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(a=r[n]).edition){e.next=3;break}throw new Error("Claimant ".concat(n," doesn't have edition"));case 3:if(!(a.edition<=0)){e.next=5;break}throw new Error("Claimant ".concat(n," assigned invalid edition ").concat(a.edition));case 5:if(!(null!==h&&a.edition>h)){e.next=7;break}throw new Error("Claimant ".concat(n," assigned edition ").concat(a.edition," which is beyond the max supply"));case 7:if(!(a.edition in m)){e.next=9;break}throw new Error("Claimant ".concat(n," and ").concat(m[a.edition]," are both assigned to edition ").concat(a.edition));case 9:return c=new f.a(a.edition),e.next=12,Object(p.f)(s.key,c);case 12:if(u=e.sent,void 0!==(l=j.find((function(e){return e[0].equals(u)})))){e.next=20;break}return e.next=17,t.getAccountInfo(u);case 17:null===(d=e.sent)?j.push([u,Array(31)]):j.push([u,Object(o.a)(d.data.slice(1,32))]),l=j[j.length-1];case 20:if(void 0!==l){e.next=22;break}throw new Error("Internal Error: Edition marker info still undefined ".concat(a.edition));case 22:if(!S(l[1],c)){e.next=24;break}throw new Error("Claimant ".concat(n," is assigned to edition ").concat(a.edition," which is already taken"));case 24:C(l[1],c),m[a.edition]=n;case 26:case"end":return e.stop()}}),e)})),y=0;case 27:if(!(y<r.length)){e.next=32;break}return e.delegateYield(g(y),"t0",29);case 29:++y,e.next=27;break;case 32:return e.abrupt("return",{total:c,masterMint:s,masterTokenAccount:u});case 33:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),E=function(e,t){for(var n=[],r=0,a=e.length;r<a;)n.push(e.slice(r,r+=t));return n},P=function(){var t=Object(c.a)(i.a.mark((function t(n,a,c,d,p,j,g,y,x){var v,O,w,k,S,C,A,P,I,M,B,K,T,W,D,N,F,R,U,L,z,q,G,H,_,V,J,X=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:v=X.length>9&&void 0!==X[9]?X[9]:[],O=[],w=0;case 3:if(!(w<y.length)){t.next=27;break}if(k=y[w],c){t.next=15;break}t.prev=6,k.secret=new s.PublicKey(k.handle),t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(6),new Error("Invalid claimant wallet handle ".concat(t.t0));case 13:t.next=22;break;case 15:return S=[k.seed.toBuffer()].concat(Object(o.a)(E(e.from(k.handle),32)),[e.from(k.pin.toArray("le",4))]),t.next=18,s.PublicKey.findProgramAddress(S.map((function(e){return e.slice(0,32)})),h.c);case 18:C=t.sent,A=Object(r.a)(C,1),P=A[0],k.secret=P;case 22:I="edition"===d?Object(o.a)(new f.a(k.edition).toArray("le",8)):[],O.push(e.from([].concat(Object(o.a)(new f.a(w).toArray("le",8)),Object(o.a)(k.secret.toBuffer()),Object(o.a)(k.seed.toBuffer()),Object(o.a)(new f.a(k.amount).toArray("le",8)),Object(o.a)(I))));case 24:++w,t.next=3;break;case 27:return M=new m.a(O),B=M.getRoot(),t.next=31,s.PublicKey.findProgramAddress([e.from("MerkleDistributor"),j.toBuffer()],h.c);case 31:K=t.sent,T=Object(r.a)(K,2),W=T[0],D=T[1],N=0;case 36:if(!(N<y.length)){t.next=50;break}if(F=M.getProof(N),M.verifyProof(N,F,B)){t.next=41;break}throw new Error("Gumdrop merkle tree verification failed");case 41:R=y[N],U=["distributor=".concat(W),"handle=".concat(encodeURIComponent(R.handle)),"amount=".concat(R.amount),"index=".concat(N),"proof=".concat(F.map((function(e){return b.encode(e)})))].concat(Object(o.a)(v)),c?U.push("pin=".concat(R.pin.toNumber())):U.push("pin=NA"),"transfer"===d?U.push("tokenAcc=".concat(x.source)):"candy"===d?(U.push("config=".concat(x.config)),U.push("uuid=".concat(x.uuid))):(U.push("master=".concat(x.masterMint.key)),U.push("edition=".concat(R.edition))),L=U.join("&"),R.url="".concat(p,"/claim?").concat(L);case 47:++N,t.next=36;break;case 50:if((z=Array()).push(new s.TransactionInstruction({programId:h.c,keys:[{pubkey:j,isSigner:!0,isWritable:!1},{pubkey:W,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:s.SystemProgram.programId,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(o.a)(e.from(l.sha256.digest("global:new_distributor")).slice(0,8)),Object(o.a)(new f.a(D).toArray("le",1)),Object(o.a)(B),Object(o.a)(g.toBuffer())))})),"transfer"!==d){t.next=56;break}z.push(u.d.createApproveInstruction(h.i,x.source,W,a,[],x.total)),t.next=73;break;case 56:if("candy"!==d){t.next=65;break}return t.next=59,s.PublicKey.findProgramAddress([e.from("Wallet"),W.toBuffer()],h.c);case 59:q=t.sent,G=Object(r.a)(q,1),H=G[0],z.push(new s.TransactionInstruction({programId:h.b,keys:[{pubkey:x.candyMachineKey,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!0,isWritable:!1}],data:e.from([].concat(Object(o.a)(e.from(l.sha256.digest("global:update_authority")).slice(0,8)),Object(o.a)(new f.a(1).toArray("le",1)),Object(o.a)(H.toBuffer())))})),t.next=73;break;case 65:if("edition"!==d){t.next=73;break}return t.next=68,s.PublicKey.findProgramAddress([W.toBuffer(),h.i.toBuffer(),x.masterMint.key.toBuffer()],h.f);case 68:_=t.sent,V=Object(r.a)(_,1),J=V[0],z.push(u.d.createAssociatedTokenAccountInstruction(h.f,h.i,x.masterMint.key,J,W,a)),z.push(u.d.createTransferInstruction(h.i,x.masterTokenAccount,J,a,[],1));case 73:return t.abrupt("return",z);case 74:case"end":return t.stop()}}),t,null,[[6,10]])})));return function(e,n,r,a,i,c,o,s,u){return t.apply(this,arguments)}}(),I=function(){var t=Object(c.a)(i.a.mark((function t(n,a,c,d,b,m,j,g){var y,x,v,O,w,k,S,C,A,E,P,I,M,B,K,T,W,D,N,F,R,U,L;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.PublicKey.findProgramAddress([e.from("MerkleDistributor"),c.publicKey.toBuffer()],h.c);case 2:return y=t.sent,x=Object(r.a)(y,2),v=x[0],O=x[1],t.next=8,s.PublicKey.findProgramAddress([e.from("Wallet"),v.toBuffer()],h.c);case 8:if(w=t.sent,k=Object(r.a)(w,2),S=k[0],C=k[1],E=Array(),"transfer"!==d){t.next=21;break}return t.next=16,Object(p.h)(n,b);case 16:return P=t.sent,t.next=19,Object(p.d)(a,n,P.key,0);case 19:I=t.sent,E.push(u.d.createRevokeInstruction(h.i,I,a,[]));case 21:if("candy"!==d){t.next=33;break}return t.next=24,Object(p.a)(n,m);case 24:return M=t.sent,t.next=27,Object(p.c)(M,j);case 27:B=t.sent,K=Object(r.a)(B,1),T=K[0],A=[{pubkey:T,isSigner:!1,isWritable:!0},{pubkey:h.b,isSigner:!1,isWritable:!1}],t.next=34;break;case 33:A=[];case 34:if("edition"!==d){t.next=53;break}t.prev=35,W=new s.PublicKey(g),t.next=42;break;case 39:throw t.prev=39,t.t0=t.catch(35),new Error("Invalid mint key ".concat(t.t0));case 42:return t.next=44,s.PublicKey.findProgramAddress([v.toBuffer(),h.i.toBuffer(),W.toBuffer()],h.f);case 44:return D=t.sent,N=Object(r.a)(D,1),F=N[0],t.next=49,s.PublicKey.findProgramAddress([a.toBuffer(),h.i.toBuffer(),W.toBuffer()],h.f);case 49:R=t.sent,U=Object(r.a)(R,1),L=U[0],E.push(new s.TransactionInstruction({programId:h.c,keys:[{pubkey:c.publicKey,isSigner:!0,isWritable:!1},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:F,isSigner:!1,isWritable:!0},{pubkey:L,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:s.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:h.i,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(o.a)(e.from(l.sha256.digest("global:close_distributor_token_account")).slice(0,8)),Object(o.a)(new f.a(O).toArray("le",1))))}));case 53:return E.push(new s.TransactionInstruction({programId:h.c,keys:[{pubkey:c.publicKey,isSigner:!0,isWritable:!1},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:s.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:h.i,isSigner:!1,isWritable:!1}].concat(Object(o.a)(A)),data:e.from([].concat(Object(o.a)(e.from(l.sha256.digest("global:close_distributor")).slice(0,8)),Object(o.a)(new f.a(O).toArray("le",1)),Object(o.a)(new f.a(C).toArray("le",1))))})),t.abrupt("return",E);case 55:case"end":return t.stop()}}),t,null,[[35,39]])})));return function(e,n,r,a,i,c,o,s){return t.apply(this,arguments)}}()}).call(this,n(18).Buffer)},109:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f}));var r=n(2),a=n.n(r),i=(n(14),n(8)),c=(n(7),n(98)),o=n(67),s=n.n(o),u=function(){return(new Date).getTime()/1e3},l=function(e){var t=e._rpcEndpoint.match(/https:\/\/api.([^.]*).solana.com/);return t[1]?t[1]:"mainnet-beta"},d=function(e,t){return"https://explorer.solana.com/tx/".concat(e,"?cluster=").concat(l(t))};function f(e){return b.apply(this,arguments)}function b(){return(b=Object(i.a)(a.a.mark((function e(t){var n,r,o,l,d,f,b,h,j,g,y,x,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,r=t.connection,o=t.timeout,l=void 0===o?15e3:o,d=n.serialize(),f=u(),b=0,e.next=6,r.sendRawTransaction(d,{skipPreflight:!0});case 6:return h=e.sent,s.a.debug("Started awaiting confirmation for",h),j=!1,Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j||!(u()-f<l)){e.next=6;break}return r.sendRawTransaction(d,{skipPreflight:!0}),e.next=4,Object(c.c)(500);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=10,e.next=13,m(h,l,r,"confirmed",!0);case 13:if(g=e.sent){e.next=16;break}throw new Error("Timed out awaiting confirmation on transaction");case 16:if(!g.err){e.next=19;break}throw s.a.error(g.err),new Error("Transaction failed: Custom instruction error");case 19:b=(null===g||void 0===g?void 0:g.slot)||0,e.next=48;break;case 22:if(e.prev=22,e.t0=e.catch(10),s.a.error("Timeout Error caught",e.t0),!e.t0.timeout){e.next=27;break}throw new Error("Timed out awaiting confirmation on transaction");case 27:return y=null,e.prev=28,e.next=31,p(r,n,"single");case 31:y=e.sent.value,e.next=37;break;case 34:e.prev=34,e.t1=e.catch(28),s.a.error("Simulate Transaction error",e.t1);case 37:if(!y||!y.err){e.next=48;break}if(!y.logs){e.next=47;break}x=y.logs.length-1;case 40:if(!(x>=0)){e.next=47;break}if(!(v=y.logs[x]).startsWith("Program log: ")){e.next=44;break}throw new Error("Transaction failed: "+v.slice("Program log: ".length));case 44:--x,e.next=40;break;case 47:throw new Error(JSON.stringify(y.err));case 48:return e.prev=48,j=!0,e.finish(48);case 51:return s.a.debug("Latency (ms)",h,u()-f),e.abrupt("return",{txid:h,slot:b});case 53:case"end":return e.stop()}}),e,null,[[10,22,48,51],[28,34]])})))).apply(this,arguments)}function p(e,t,n){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(a.a.mark((function e(t,n,r){var i,c,o,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._recentBlockhash(t._disableBlockhashCaching);case 2:return n.recentBlockhash=e.sent,i=n.serializeMessage(),c=n._serialize(i),o=c.toString("base64"),s=[o,{encoding:"base64",commitment:r}],e.next=10,t._rpcRequest("simulateTransaction",s);case 10:if(!(u=e.sent).error){e.next=13;break}throw new Error("failed to simulate transaction: "+u.error.message);case 13:return e.abrupt("return",u.result);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t,n){return j.apply(this,arguments)}function j(){return j=Object(i.a)(a.a.mark((function e(t,n,r){var o,u,l,f,b,p=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.length>3&&void 0!==p[3]?p[3]:"recent",u=p.length>4&&void 0!==p[4]&&p[4],l=!1,f={slot:0,confirmations:0,err:null},b=0,e.next=7,new Promise(function(){var e=Object(i.a)(a.a.mark((function e(p,h){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){l||(l=!0,s.a.warn("Rejecting for timeout..."),h({timeout:!0}))}),n);try{b=r.onSignature(t,(function(e,t){l=!0,f={err:e.err,slot:t.slot,confirmations:0},e.err?(s.a.warn("Rejected via websocket",e.err),h(f)):(s.a.debug("Resolved via websocket",e),p(f))}),o)}catch(m){l=!0,s.a.error("WS error in setup",t,m)}case 2:if(l||!u){e.next=8;break}return Object(i.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getSignatureStatuses([t]);case 3:n=e.sent,f=n&&n.value[0],console.log(d(t,r)),l||(f?f.err?(s.a.error("REST error for",t,f),l=!0,h(f.err)):f.confirmations?(s.a.debug("REST confirmation for",t,f),l=!0,p(f)):s.a.error("REST no confirmations for",t,f):s.a.debug("REST null result for",t,f)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),l||s.a.error("REST connection error: txid",t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))(),e.next=6,Object(c.c)(2e3);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return f=e.sent,r._signatureSubscriptions[b]&&r.removeSignatureListener(b),l=!0,s.a.debug("Returning status",f),e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}},131:function(e,t,n){"use strict";n.r(t),n.d(t,"ENDPOINTS",(function(){return m})),n.d(t,"ConnectionProvider",(function(){return y})),n.d(t,"useConnection",(function(){return x})),n.d(t,"useConnectionConfig",(function(){return v})),n.d(t,"getErrorForTransaction",(function(){return w})),n.d(t,"SequenceType",(function(){return O})),n.d(t,"sendTransactionWithRetry",(function(){return k}));var r=n(2),a=n.n(r),i=n(8),c=n(14),o=n(9),s=n(98),u=n(7),l=n(1),d=n.n(l),f=n(109),b=n(232),p=n(22),h=n(4),m=[{name:"mainnet-beta",endpoint:"https://api.mainnet-beta.solana.com",ChainId:b.a.MainnetBeta},{name:"devnet",endpoint:"https://api.devnet.solana.com",ChainId:b.a.Devnet}],j=m[0].endpoint,g=d.a.createContext({endpoint:j,setEndpoint:function(){},connection:new u.Connection(j,"recent"),env:m[0].name,tokens:[],tokenMap:new Map});function y(e){var t,n=e.children,r=void 0===n?void 0:n,a=Object(s.d)("connectionEndpoint",m[0].endpoint),i=Object(o.a)(a,2),d=i[0],f=i[1],p=Object(l.useMemo)((function(){return new u.Connection(d,"recent")}),[d]),j=(null===(t=m.find((function(e){return e.endpoint===d})))||void 0===t?void 0:t.name)||m[0].name,y=Object(l.useState)([]),x=Object(o.a)(y,2),v=x[0],O=x[1],w=Object(l.useState)(new Map),k=Object(o.a)(w,2),S=k[0],C=k[1];return Object(l.useEffect)((function(){(new b.b).resolve().then((function(e){var t,n=e.excludeByTag("nft").filterByChainId((null===(t=m.find((function(e){return e.endpoint===d})))||void 0===t?void 0:t.ChainId)||b.a.MainnetBeta).getList(),r=Object(c.a)(n).reduce((function(e,t){return e.set(t.address,t),e}),new Map);C(r),O(n)}))}),[j,d]),Object(l.useEffect)((function(){var e=p.onAccountChange(u.Keypair.generate().publicKey,(function(){}));return function(){p.removeAccountChangeListener(e)}}),[p]),Object(l.useEffect)((function(){var e=p.onSlotChange((function(){return null}));return function(){p.removeSlotChangeListener(e)}}),[p]),Object(h.jsx)(g.Provider,{value:{endpoint:d,setEndpoint:f,connection:p,tokens:v,tokenMap:S,env:j},children:r})}function x(){return Object(l.useContext)(g).connection}function v(){var e=Object(l.useContext)(g);return{endpoint:e.endpoint,setEndpoint:e.setEndpoint,env:e.env,tokens:e.tokens,tokenMap:e.tokenMap}}var O,w=function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"max");case 2:return e.next=4,t.getParsedConfirmedTransaction(n);case 4:return r=e.sent,i=[],(null===r||void 0===r?void 0:r.meta)&&r.meta.logMessages&&r.meta.logMessages.forEach((function(e){for(var t,n=/Error: (.*)/gm;null!==(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,t.length>1&&i.push(t[1])})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();!function(e){e[e.Sequential=0]="Sequential",e[e.Parallel=1]="Parallel",e[e.StopOnFailure=2]="StopOnFailure"}(O||(O={}));var k=function(){var e=Object(i.a)(a.a.mark((function e(t,n,r,i){var o,s,l,d,b,h,m,j,g,y,x,v=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=v.length>4&&void 0!==v[4]?v[4]:"singleGossip",s=v.length>5&&void 0!==v[5]&&v[5],l=v.length>6?v[6]:void 0,d=v.length>7?v[7]:void 0,n.publicKey){e.next=6;break}throw new p.i;case 6:if(b=new u.Transaction,r.forEach((function(e){return b.add(e)})),e.t0=l,e.t0){e.next=13;break}return e.next=12,t.getRecentBlockhash(o);case 12:e.t0=e.sent;case 13:if(b.recentBlockhash=e.t0.blockhash,s?(h=b).setSigners.apply(h,Object(c.a)(i.map((function(e){return e.publicKey})))):(m=b).setSigners.apply(m,[n.publicKey].concat(Object(c.a)(i.map((function(e){return e.publicKey}))))),i.length>0&&(j=b).partialSign.apply(j,Object(c.a)(i)),s){e.next=26;break}return e.prev=17,e.next=20,n.signTransaction(b);case 20:b=e.sent,e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(17),e.abrupt("return","Failed to sign transaction");case 26:return d&&d(),console.log("About to send"),e.prev=28,e.next=31,Object(f.c)({connection:t,signedTransaction:b});case 31:return g=e.sent,y=g.txid,x=g.slot,e.abrupt("return",{txid:y,slot:x});case 37:return e.prev=37,e.t2=e.catch(28),console.error(e.t2),e.abrupt("return","See console logs");case 41:case"end":return e.stop()}}),e,null,[[17,23],[28,37]])})));return function(t,n,r,a){return e.apply(this,arguments)}}()},202:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var r=n(9),a=n(14),i=n(33),c=n(11),o=n(17),s=n(199),u=function(){function t(e){Object(c.a)(this,t),this.leafs=void 0,this.layers=void 0,this.leafs=e.slice(),this.layers=[];for(var n=this.leafs.map(t.nodeHash);n.length>0&&(console.log("Hashes",this.layers.length,n),this.layers.push(n.slice()),1!==n.length);)n=n.reduce((function(e,n,r,a){if(r%2===0){var i=a[r+1];e.push(t.internalHash(n,i))}return e}),Array())}return Object(o.a)(t,[{key:"getRoot",value:function(){return this.layers[this.layers.length-1][0]}},{key:"getProof",value:function(e){return this.layers.reduce((function(t,n){var r=1^e;return r<n.length&&t.push(n[r]),e=Math.floor(e/2),t}),[])}},{key:"getHexRoot",value:function(){return this.getRoot().toString("hex")}},{key:"getHexProof",value:function(e){return this.getProof(e).map((function(e){return e.toString("hex")}))}},{key:"verifyProof",value:function(e,n,r){var a,c=t.nodeHash(this.leafs[e]),o=Object(i.a)(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;c=t.internalHash(c,s)}}catch(u){o.e(u)}finally{o.f()}return c.equals(r)}}],[{key:"nodeHash",value:function(t){return e.from(s.keccak_256.digest([0].concat(Object(a.a)(t))))}},{key:"internalHash",value:function(t,n){if(!n)return t;var i=[t,n].sort(e.compare),c=Object(r.a)(i,2),o=c[0],u=c[1];return e.from(s.keccak_256.digest([1].concat(Object(a.a)(o),Object(a.a)(u))))}},{key:"verifyClaim",value:function(e,n,r){var a,c=t.nodeHash(e),o=Object(i.a)(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;c=t.internalHash(c,s)}}catch(u){o.e(u)}finally{o.f()}return c.equals(r)}}]),t}()}).call(this,n(18).Buffer)},216:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(2),n(8);var r=n(40),a=function(){return{token:r.i,associatedToken:r.f,bpf_upgrade_loader:r.a,system:r.g,memo:r.e}}},217:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(34),a=n(198),i=(n(1),n(864)),c=(n(739),n(4)),o=["children","closeIcon","bodyStyle","width","style"],s=function(e){var t=e.children,n=(e.closeIcon,e.bodyStyle),s=e.width,u=(e.style,Object(a.a)(e,o));return Object(c.jsx)(i.a,Object(r.a)(Object(r.a)({style:{background:"transparent",borderRadius:16},bodyStyle:Object(r.a)({background:"#333333",display:"flex",flexDirection:"column",alignItems:"center"},n),footer:null,width:s||400},u),{},{children:t}))}},236:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return M}));n(198);var r=n(9),a=n(33),i=n(34),c=n(2),o=n.n(c),s=n(8),u=n(1),l=n.n(u),d=n(131),f=n(84),b=n(7),p=n(41),h=(n(98),n(258)),m=n(40),j=n(216),g=n(4),y=l.a.createContext(null),x=new Map,v=new Map,O=new Map,w=new Map,k=function(){var t=Object(s.a)(o.a.mark((function t(n,r){var a,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getAccountInfo(r);case 2:if(null!==(a=t.sent)){t.next=5;break}throw new Error("Failed to find mint account");case 5:return i=e.from(a.data),t.abrupt("return",K(i));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),S=function(t,n){if(n.data.length>0){var r=e.from(n.data),a=B(r);return{pubkey:t,account:Object(i.a)({},n),info:a}}},C=new Map,A={emitter:new h.a,query:function(){var e=Object(s.a)(o.a.mark((function e(t,n,r){var a,i,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="string"===typeof n?new b.PublicKey(n):n,i=a.toBase58(),!(c=v.get(i))){e.next=5;break}return e.abrupt("return",c);case 5:if(!(s=x.get(i))){e.next=8;break}return e.abrupt("return",s);case 8:return s=t.getAccountInfo(a).then((function(e){if(!e)throw new Error("Account not found");return A.add(a,e,r)})),x.set(i,s),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),add:function(e,t,n,r){var a="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),i=n||C.get(a);if(!i)throw new Error("Deserializer needs to be registered or passed as a parameter");A.registerParser(e,i),x.delete(a);var c=i(a,t);if(c){void 0===r?r=!0:r instanceof Function&&(r=r(c));var o=!v.has(a);return v.set(a,c),A.emitter.raiseCacheUpdated(a,o,i,r),c}},get:function(e){var t;return t="string"!==typeof e?e.toBase58():e,v.get(t)},delete:function(e){var t;return t="string"!==typeof e?e.toBase58():e,!!v.get(t)&&(v.delete(t),A.emitter.raiseCacheDeleted(t),!0)},byParser:function(e){var t,n=[],r=Object(a.a)(C.keys());try{for(r.s();!(t=r.n()).done;){var i=t.value;C.get(i)===e&&n.push(i)}}catch(c){r.e(c)}finally{r.f()}return n},registerParser:function(e,t){if(e){var n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();C.set(n,t)}return e},queryMint:function(){var e=Object(s.a)(o.a.mark((function e(t,n){var r,a,i,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"===typeof n?new b.PublicKey(n):n,a=r.toBase58(),!(i=w.get(a))){e.next=5;break}return e.abrupt("return",i);case 5:if(!(c=O.get(a))){e.next=8;break}return e.abrupt("return",c);case 8:return c=k(t,r).then((function(e){return O.delete(a),w.set(a,e),e})),O.set(a,c),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getMint:function(e){var t;return t="string"!==typeof e?e.toBase58():e,w.get(t)},addMint:function(e,t){var n=K(t.data),r=e.toBase58();return w.set(r,n),n}};var E=function(){var e=Object(d.useConnection)(),t=Object(f.b)().publicKey,n=Object(u.useState)(),a=Object(r.a)(n,2),i=a[0],c=a[1],l=Object(u.useCallback)((function(e){if(t){var n=function(e,t){if(t){var n=new b.PublicKey(e);return{pubkey:e,account:t,info:{address:n,mint:m.j,owner:n,amount:new p.e(t.lamports),delegate:null,delegatedAmount:new p.e(0),isInitialized:!0,isFrozen:!1,isNative:!0,rentExemptReserve:null,closeAuthority:null}}}}(t.toBase58(),e);if(void 0!==n){var r=t.toBase58();A.registerParser(r,S),v.set(r,n),A.emitter.raiseCacheUpdated(r,!1,S,!0)}}}),[t]);return Object(u.useEffect)((function(){var n=0,r=function(e){e&&(l(e),c(e))};return Object(s.a)(o.a.mark((function a(){var i;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&t){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,a.next=5,e.getAccountInfo(t);case 5:i=a.sent,r(i),a.next=12;break;case 9:return a.prev=9,a.t0=a.catch(2),a.abrupt("return");case 12:n=e.onAccountChange(t,r);case 13:case"end":return a.stop()}}),a,null,[[2,9]])})))(),function(){n&&e.removeAccountChangeListener(n)}}),[c,t,e,l]),{nativeAccount:i}},P=new Set,I=function(){var e=Object(s.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return P.add(n.toBase58()),e.next=5,t.getTokenAccountsByOwner(n,{programId:Object(j.a)().token});case 5:e.sent.value.forEach((function(e){A.add(e.pubkey.toBase58(),e.account,S)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function M(e){var t=e.children,n=void 0===t?null:t,a=Object(d.useConnection)(),i=Object(f.b)().publicKey,c=Object(u.useState)([]),o=Object(r.a)(c,2),s=o[0],l=o[1],h=Object(u.useState)([]),m=Object(r.a)(h,2),x=m[0],v=m[1],O=E().nativeAccount,w=null===i||void 0===i?void 0:i.toBase58(),k=Object(u.useCallback)((function(){return A.byParser(S).map((function(e){return A.get(e)})).filter((function(e){return e&&e.info.owner.toBase58()===w})).map((function(e){return e}))}),[w]);return Object(u.useEffect)((function(){var e=k().filter((function(e){return void 0!==e}));v(e)}),[O,s,k]),Object(u.useEffect)((function(){var e=[];return A.emitter.onCache((function(e){if(e.isNew&&e.isActive){var t=e.id,n=e.parser;a.onAccountChange(new b.PublicKey(t),(function(e){A.add(t,e,n)}))}})),function(){e.forEach((function(e){return a.removeAccountChangeListener(e)}))}}),[a]),Object(u.useEffect)((function(){if(a&&i){I(a,i).then((function(){l(k())}));var e=a.onProgramAccountChange(Object(j.a)().token,(function(e){var t=e.accountId;if(e.accountInfo.data.length===p.a.span){var n=B(e.accountInfo.data);P.has(n.owner.toBase58())&&(A.add(t,e.accountInfo,S),l(k()))}}),"singleGossip");return function(){a.removeProgramAccountChangeListener(e)}}l([])}),[a,i,k]),Object(g.jsx)(y.Provider,{value:{userAccounts:x,nativeAccount:O},children:n})}var B=function(e){var t=p.a.decode(e);return t.mint=new b.PublicKey(t.mint),t.owner=new b.PublicKey(t.owner),t.amount=p.e.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new p.e(0)):(t.delegate=new b.PublicKey(t.delegate),t.delegatedAmount=p.e.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=p.e.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new b.PublicKey(t.closeAuthority),t},K=function(e){if(e.length!==p.b.span)throw new Error("Not a valid Mint");var t=p.b.decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new b.PublicKey(t.mintAuthority),t.supply=p.e.fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new b.PublicKey(t.freezeAuthority),t}}).call(this,n(18).Buffer)},258:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(17),a=n(11),i=n(95),c=function e(t,n,r,i){Object(a.a)(this,e),this.id=void 0,this.parser=void 0,this.isNew=void 0,this.isActive=void 0,this.id=t,this.parser=r,this.isNew=n,this.isActive=i};c.type="CacheUpdate";var o=function e(t){Object(a.a)(this,e),this.id=void 0,this.id=t};o.type="CacheUpdate";var s=function e(t){Object(a.a)(this,e),this.ids=void 0,this.ids=t};s.type="MarketUpdate";var u=function(){function e(){Object(a.a)(this,e),this.emitter=new i.EventEmitter}return Object(r.a)(e,[{key:"onMarket",value:function(e){var t=this;return this.emitter.on(s.type,e),function(){return t.emitter.removeListener(s.type,e)}}},{key:"onCache",value:function(e){var t=this;return this.emitter.on(c.type,e),function(){return t.emitter.removeListener(c.type,e)}}},{key:"raiseMarketUpdated",value:function(e){this.emitter.emit(s.type,new s(e))}},{key:"raiseCacheUpdated",value:function(e,t,n,r){this.emitter.emit(c.type,new c(e,t,n,r))}},{key:"raiseCacheDeleted",value:function(e){this.emitter.emit(o.type,new o(e))}}]),e}()},263:function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));var r=n(34),a=n(9),i=n(2),c=n.n(i),o=n(8),s=n(1),u=n.n(s),l=n(84),d=n(55),f=n(36),b=n(365),p=n(156),h=n(870),m=n(204),j=n(867),g=n(861),y=n(369),x=n(520),v=n(302),O=n(871),w=n(521),k=n(524),S=n(522),C=n(303),A=n(525),E=n(82),P=n(494),I=n.n(P),M=n(496),B=n.n(M),K=n(495),T=n.n(K),W=n(498),D=n.n(W),N=n(499),F=n.n(N),R=n(4),U=function(e){var t=e.narrow,n=Object(l.b)(),i=n.disconnect,s=n.publicKey,P=Object(d.j)(),M=P.setEndpoint,K=P.env,W=P.endpoint,N=Object(d.l)().setVisible,U=u.a.useCallback((function(){return N(!0)}),[N]),L=Object(d.k)().setModal,z=Object(E.a)(),q=Object(d.h)(),G=u.a.useCallback((function(){L(d.f.WALLET),N(!0)}),[L,N]),H=[{click:function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=4;break}return e.next=3,navigator.clipboard.writeText(s.toBase58());case 3:Object(f.k)({message:"Wallet update",description:"Address copied to clipboard"});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),innerNarrow:function(){return"Copy Address (".concat(s&&Object(f.l)(s.toBase58()),")")},inner:function(){return Object(R.jsxs)(u.a.Fragment,{children:[Object(R.jsx)(b.a,{}),s&&Object(f.l)(s.toBase58())]})}},{click:U,inner:function(){return"Change\xa0Wallet"}},{click:function(){return i().catch()},inner:function(){return"Disconnect\xa0(".concat(K,")")},expandedExtra:{color:"error",variant:"contained"}}],_=u.a.useState(!1),V=Object(a.a)(_,2),J=V[0],X=V[1],Y=u.a.useState(!1),Q=Object(a.a)(Y,2),Z=Q[0],$=Q[1],ee="hackySkipSet",te=function(e){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&(t.target.classList.contains(ee)||X(e))}},ne=function(e){return Object(R.jsxs)(u.a.Fragment,{children:[Object(R.jsx)(p.a,{onClick:te(!0),children:Object(R.jsx)(I.a,{})}),Object(R.jsx)(h.a,{anchor:"right",open:J,onClose:te(!1),children:Object(R.jsx)(m.a,{sx:{width:250},role:"presentation",onClick:te(!1),onKeyDown:te(!1),children:e})})]})},re=Object(R.jsx)(p.a,{sx:{ml:1},onClick:q.toggleColorMode,color:"inherit",children:"dark"===z.palette.mode?Object(R.jsx)(T.a,{}):Object(R.jsx)(B.a,{})});if(t){var ae=Object(R.jsx)(j.a,{children:Object(R.jsx)(g.a,{primary:"Wallet",primaryTypographyProps:{fontSize:"1.2rem",fontWeight:"medium",letterSpacing:0}})});return Object(R.jsxs)(u.a.Fragment,{children:[!s&&ne(Object(R.jsxs)(y.a,{children:[ae,Object(R.jsx)(x.a,{}),Object(R.jsxs)(v.a,{onClick:function(){return $(!Z)},className:ee,children:["Change Network",Z?Object(R.jsx)(D.a,{}):Object(R.jsx)(F.a,{})]}),Object(R.jsx)(O.a,{in:Z,timeout:"auto",unmountOnExit:!0,children:Object(R.jsx)(y.a,{component:"div",disablePadding:!0,children:d.e.map((function(e){return Object(R.jsx)(v.a,{selected:W===e.endpoint,onClick:function(){return M(e.endpoint)},sx:{pl:4},className:ee,children:e.name},e.name)}))})}),Object(R.jsx)(v.a,{onClick:G,children:"Connect"})]})),s&&ne(Object(R.jsxs)(y.a,{children:[ae,Object(R.jsx)(x.a,{}),H.map((function(e,t){return Object(R.jsx)(v.a,{onClick:e.click,children:e.innerNarrow&&e.innerNarrow()||e.inner()},t)}))]})),re]})}return Object(R.jsxs)(w.a,{direction:"row",spacing:2,sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginRight:"36px"},children:[!s&&Object(R.jsxs)(u.a.Fragment,{children:[Object(R.jsx)(k.a,{variant:"standard",style:{minWidth:"10ch"},children:Object(R.jsx)(S.a,{id:"connected-env-select",onChange:function(e){M(e.target.value)},value:W,children:d.e.map((function(e){var t=e.name,n=e.endpoint;return Object(R.jsx)(C.a,{value:n,children:t},t)}))})}),Object(R.jsx)(A.a,{underline:"none",children:Object(R.jsx)(p.a,{variant:"contained",onClick:G,children:"Connect"})})]}),s&&H.map((function(e,t){return Object(R.jsx)(p.a,Object(r.a)(Object(r.a)({variant:"outlined",onClick:e.click},e.expandedExtra),{},{children:e.inner()}),t)})),re]})}},264:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var r=n(9),a=n(82),i=n(1),c=n.n(i),o=n(4),s=c.a.createContext({}),u=function(e){var t=e.children,n=void 0===t?null:t,i=c.a.useState("dark"),u=Object(r.a)(i,2),l=u[0],d=u[1],f=Object(a.a)();return Object(o.jsx)(s.Provider,{value:{toggleColorMode:function(){d((function(e){return"light"===e?"dark":"light"}))},mode:l,theme:f},children:n})},l=function(){return Object(i.useContext)(s)}},36:function(e,t,n){"use strict";n.d(t,"d",(function(){return r.f})),n.d(t,"e",(function(){return r.h})),n.d(t,"a",(function(){return r.b})),n.d(t,"b",(function(){return r.c})),n.d(t,"c",(function(){return r.d})),n.d(t,"k",(function(){return c})),n.d(t,"l",(function(){return o.b})),n.d(t,"g",(function(){return f.c})),n.d(t,"f",(function(){return f.b})),n.d(t,"j",(function(){return f.g})),n.d(t,"h",(function(){return f.e})),n.d(t,"i",(function(){return f.f}));n(258);var r=n(40),a=(n(216),n(450),n(1),n(518)),i=n(4);function c(e){var t=e.message,n=void 0===t?"":t,r=e.description,c=void 0===r?void 0:r,o=e.txid,s=void 0===o?"":o,u=e.type,l=void 0===u?"info":u,d=e.placement,f=void 0===d?"bottomLeft":d;s&&(c=Object(i.jsx)(i.Fragment,{})),a.a[l]({message:Object(i.jsx)("span",{style:{color:"black"},children:n}),description:Object(i.jsx)("span",{style:{color:"black",opacity:.5},children:c}),placement:f,style:{backgroundColor:"white"}})}var o=n(98);var s=n(7),u=n(139),l=n(44),d=n.n(l);u.BinaryReader.prototype.readPubkey=function(){var e=this.readFixedArray(32);return new s.PublicKey(e)},u.BinaryWriter.prototype.writePubkey=function(e){this.writeFixedArray(e.toBuffer())},u.BinaryReader.prototype.readPubkeyAsString=function(){var e=this.readFixedArray(32);return d.a.encode(e)},u.BinaryWriter.prototype.writePubkeyAsString=function(e){this.writeFixedArray(d.a.decode(e))};var f=n(79)},364:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(165),a=n(824),i=new r.a(a)},40:function(e,t,n){"use strict";n.d(t,"j",(function(){return a})),n.d(t,"i",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return b}));n(11),n(17);var r=n(7),a=(new Map,new r.PublicKey("So11111111111111111111111111111111111111112")),i=new r.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),c=new r.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),o=new r.PublicKey("BPFLoaderUpgradeab1e11111111111111111111111"),s=new r.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),u=new r.PublicKey("11111111111111111111111111111111"),l=new r.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),d=new r.PublicKey("cndyAnrLdpjq1Ssp1z8xxDsB8dxe7u4HL5Nxi2K5WXZ"),f=new r.PublicKey("gdrpGjVffourzkdDRrQmySw4aTHr8a3xmQzzxSwFD1a"),b=new r.PublicKey("MSv9H2sMceAzccBganUXwGq3GXgqYAstmZAbFDZYbAV")},450:function(e,t,n){"use strict";(function(e){n(14),n(7),n(26),n(99)}).call(this,n(18).Buffer)},503:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return J}));var r=n(33),a=n(2),i=n.n(a),c=n(14),o=n(9),s=n(8),u=n(1),l=n.n(u),d=n(504),f=n.n(d),b=n(525),p=n(872),h=n(101),m=n(204),j=n(156),g=n(524),y=n(868),x=n(522),v=n(303),O=n(869),w=n(873),k=n(866),S=n(521),C=n(84),A=n(7),E=n(41),P=n(58),I=n(26),M=n.n(I),B=n(44),K=n(55),T=n(36),W=n(202),D=n(109),N=n(100),F=n(364),R=n(4),U=function(){var t=Object(s.a)(i.a.mark((function t(n,r,a,s){var u,l,d,f,b;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a){t.next=13;break}if(t.prev=1,(u=new A.PublicKey(r)).equals(n)){t.next=5;break}throw new Error("Claimant wallet handle does not match connected wallet");case 5:return t.abrupt("return",[u,[]]);case 8:throw t.prev=8,t.t0=t.catch(1),new Error("Invalid claimant wallet handle ".concat(t.t0));case 11:t.next=20;break;case 13:return l=[s.toBuffer(),e.from(r),e.from(a.toArray("le",4))],t.next=16,A.PublicKey.findProgramAddress([l[0]].concat(Object(c.a)(Object(N.b)(l[1],32)),[l[2]]),T.b);case 16:return d=t.sent,f=Object(o.a)(d,1),b=f[0],t.abrupt("return",[b,l]);case 20:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n,r,a){return t.apply(this,arguments)}}(),L=function(){var t=Object(s.a)(i.a.mark((function t(n,r,a,s,u,l,d,f,b,p){var h,m,j,g,y,x,v,O,w,k,S,C,I,B,K,D,N,F,R;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,h=new A.PublicKey(u),t.next=7;break;case 4:throw t.prev=4,t.t0=t.catch(0),new Error("Invalid tokenAcc key ".concat(t.t0));case 7:return t.next=9,n.getAccountInfo(h);case 9:if(null!==(m=t.sent)){t.next=12;break}throw new Error("Could not fetch distributor token account");case 12:return j=E.a.decode(m.data),g=new A.PublicKey(j.mint),console.log(g.toBase58()),t.next=17,U(r,d,p,g);case 17:if(y=t.sent,x=Object(o.a)(y,2),v=x[0],O=x[1],w=e.from([].concat(Object(c.a)(new M.a(b).toArray("le",8)),Object(c.a)(v.toBuffer()),Object(c.a)(g.toBuffer()),Object(c.a)(new M.a(f).toArray("le",8)))),W.a.verifyClaim(w,l,e.from(s.root))){t.next=25;break}throw new Error("Gumdrop merkle proof does not match");case 25:return t.next=27,A.PublicKey.findProgramAddress([e.from("ClaimStatus"),e.from(new M.a(b).toArray("le",8)),a.toBuffer()],T.b);case 27:return k=t.sent,S=Object(o.a)(k,2),C=S[0],I=S[1],t.next=33,A.PublicKey.findProgramAddress([r.toBuffer(),E.c.toBuffer(),g.toBuffer()],T.d);case 33:return B=t.sent,K=Object(o.a)(B,1),D=K[0],N=[],t.next=39,n.getAccountInfo(D);case 39:if(t.t1=t.sent,null!==t.t1){t.next=42;break}N.push(E.d.createAssociatedTokenAccountInstruction(T.d,E.c,g,D,r,r));case 42:return F=s.temporal.equals(A.PublicKey.default)||v.equals(r)?r:s.temporal,R=new A.TransactionInstruction({programId:T.b,keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:C,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:D,isSigner:!1,isWritable:!0},{pubkey:F,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:A.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:E.c,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(c.a)(e.from(P.sha256.digest("global:claim")).slice(0,8)),Object(c.a)(new M.a(I).toArray("le",1)),Object(c.a)(new M.a(b).toArray("le",8)),Object(c.a)(new M.a(f).toArray("le",8)),Object(c.a)(v.toBuffer()),Object(c.a)(new M.a(l.length).toArray("le",4)),Object(c.a)(e.concat(l))))}),t.abrupt("return",[[].concat(N,[R]),O,[]]);case 45:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e,n,r,a,i,c,o,s,u,l){return t.apply(this,arguments)}}(),z=function(){var t=Object(s.a)(i.a.mark((function t(n,r,a,s,u,l,d,f,b,p,h){var m,j,g,y,x,v,O,w,k,S,C,E,P,I,B,K,D,N,R,L,z,G,H,_,V,J,X,Y,Q,Z;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,m=new A.PublicKey(u),t.next=7;break;case 4:throw t.prev=4,t.t0=t.catch(0),new Error("Invalid candy config key ".concat(t.t0));case 7:return t.next=9,U(r,f,h,m);case 9:if(j=t.sent,g=Object(o.a)(j,2),y=g[0],x=g[1],v=e.from([].concat(Object(c.a)(new M.a(p).toArray("le",8)),Object(c.a)(y.toBuffer()),Object(c.a)(m.toBuffer()),Object(c.a)(new M.a(b).toArray("le",8)))),W.a.verifyClaim(v,d,e.from(s.root))){t.next=17;break}throw new Error("Gumdrop merkle proof does not match");case 17:return t.next=19,A.PublicKey.findProgramAddress([e.from("ClaimCount"),e.from(new M.a(p).toArray("le",8)),a.toBuffer()],T.b);case 19:return O=t.sent,w=Object(o.a)(O,2),k=w[0],S=w[1],t.next=25,A.PublicKey.findProgramAddress([e.from("Wallet"),a.toBuffer()],T.b);case 25:return C=t.sent,E=Object(o.a)(C,2),P=E[0],I=E[1],B=s.temporal.equals(A.PublicKey.default)||y.equals(r)?r:s.temporal,K=[],t.next=33,n.getAccountInfo(k);case 33:if(D=t.sent,N=0,null!==D){t.next=38;break}t.next=46;break;case 38:if(R=F.a.accounts.decode("ClaimCount",D.data),N=R.count,!R.claimant.equals(r)){t.next=44;break}B=r,t.next=46;break;case 44:throw L=R.claimant.toBase58(),new Error("This wallet does not match existing claimant ".concat(L));case 46:if(!(N>=(z=b))){t.next=49;break}throw new Error("Cannot mint another NFT. ".concat(z," NFT(s) were originally allocated")+(N>0?" and ".concat(N," NFT(s) were already minted"):""));case 49:return t.next=51,Object(T.g)(m,l);case 51:return G=t.sent,H=Object(o.a)(G,1),_=H[0],t.next=56,Object(T.f)(n,_);case 56:return V=t.sent,console.log("Candy Machine",V),J=[],t.next=61,q(n,r,a,P,k,B,m,_,V.wallet,e.from([].concat(Object(c.a)(new M.a(I).toArray("le",1)),Object(c.a)(new M.a(S).toArray("le",1)),Object(c.a)(new M.a(p).toArray("le",8)),Object(c.a)(new M.a(b).toArray("le",8)),Object(c.a)(y.toBuffer()),Object(c.a)(new M.a(d.length).toArray("le",4)),Object(c.a)(e.concat(d)))));case 61:return X=t.sent,Y=Object(o.a)(X,2),Q=Y[0],Z=Y[1],J.push(Z),K.push.apply(K,Object(c.a)(Q)),t.abrupt("return",[K,x,J]);case 68:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e,n,r,a,i,c,o,s,u,l,d){return t.apply(this,arguments)}}(),q=function(){var t=Object(s.a)(i.a.mark((function t(n,r,a,o,s,u,l,d,f,b){var p,h,m,j;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p=A.Keypair.generate(),t.next=3,Object(T.j)(p.publicKey);case 3:return h=t.sent,t.next=6,Object(T.h)(p.publicKey);case 6:return m=t.sent,j=[],t.next=10,G(n,r,p.publicKey,j);case 10:return j.push(new A.TransactionInstruction({programId:T.b,keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:p.publicKey,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:A.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:E.c,isSigner:!1,isWritable:!1},{pubkey:T.e,isSigner:!1,isWritable:!1},{pubkey:T.a,isSigner:!1,isWritable:!1},{pubkey:A.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:A.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(c.a)(e.from(P.sha256.digest("global:claim_candy")).slice(0,8)),Object(c.a)(b)))})),t.abrupt("return",[j,p]);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r,a,i,c,o,s,u,l){return t.apply(this,arguments)}}(),G=function(){var e=Object(s.a)(i.a.mark((function e(t,n,r,a){var c,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.PublicKey.findProgramAddress([n.toBuffer(),E.c.toBuffer(),r.toBuffer()],T.d);case 2:return c=e.sent,s=Object(o.a)(c,1),u=s[0],e.t0=a,e.t1=A.SystemProgram,e.t2=n,e.t3=r,e.t4=E.b.span,e.next=12,t.getMinimumBalanceForRentExemption(E.b.span);case 12:e.t5=e.sent,e.t6=E.c,e.t7={fromPubkey:e.t2,newAccountPubkey:e.t3,space:e.t4,lamports:e.t5,programId:e.t6},e.t8=e.t1.createAccount.call(e.t1,e.t7),e.t0.push.call(e.t0,e.t8),a.push(E.d.createInitMintInstruction(E.c,r,0,n,n)),a.push(E.d.createAssociatedTokenAccountInstruction(T.d,E.c,r,u,n,n)),a.push(E.d.createMintToInstruction(E.c,r,u,n,[],1));case 20:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),H=function(){var t=Object(s.a)(i.a.mark((function t(n,r,a,s,u,l,d,f,b,p,h){var m,j,g,y,x,v,O,w,k,S,C,I,B,K,D,N,F,R,L,z,q;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,m=new A.PublicKey(u),t.next=7;break;case 4:throw t.prev=4,t.t0=t.catch(0),new Error("Invalid master mint key ".concat(t.t0));case 7:return t.next=9,U(r,f,h,m);case 9:if(j=t.sent,g=Object(o.a)(j,2),y=g[0],x=g[1],v=e.from([].concat(Object(c.a)(new M.a(p).toArray("le",8)),Object(c.a)(y.toBuffer()),Object(c.a)(m.toBuffer()),Object(c.a)(new M.a(b).toArray("le",8)),Object(c.a)(new M.a(l).toArray("le",8)))),W.a.verifyClaim(v,d,e.from(s.root))){t.next=17;break}throw new Error("Gumdrop merkle proof does not match");case 17:return t.next=19,A.PublicKey.findProgramAddress([e.from("ClaimCount"),e.from(new M.a(p).toArray("le",8)),a.toBuffer()],T.b);case 19:return O=t.sent,w=Object(o.a)(O,2),k=w[0],S=w[1],C=s.temporal.equals(A.PublicKey.default)||y.equals(r)?r:s.temporal,t.next=26,n.getAccountInfo(k);case 26:if(null===t.sent){t.next=29;break}throw new Error("This edition was already claimed");case 29:return I=[],B=A.Keypair.generate(),t.next=33,Object(T.j)(B.publicKey);case 33:return K=t.sent,t.next=36,Object(T.j)(m);case 36:return D=t.sent,t.next=39,Object(T.h)(B.publicKey);case 39:return N=t.sent,t.next=42,Object(T.h)(m);case 42:return F=t.sent,t.next=45,G(n,r,B.publicKey,I);case 45:return t.next=47,A.PublicKey.findProgramAddress([a.toBuffer(),E.c.toBuffer(),m.toBuffer()],T.d);case 47:return R=t.sent,L=Object(o.a)(R,1),z=L[0],t.next=52,Object(T.i)(m,new M.a(l));case 52:return q=t.sent,I.push(new A.TransactionInstruction({programId:T.b,keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:C,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:K,isSigner:!1,isWritable:!0},{pubkey:N,isSigner:!1,isWritable:!0},{pubkey:F,isSigner:!1,isWritable:!0},{pubkey:B.publicKey,isSigner:!1,isWritable:!0},{pubkey:q,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:z,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:D,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:A.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:E.c,isSigner:!1,isWritable:!1},{pubkey:T.e,isSigner:!1,isWritable:!1},{pubkey:A.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],data:e.from([].concat(Object(c.a)(e.from(P.sha256.digest("global:claim_edition")).slice(0,8)),Object(c.a)(new M.a(S).toArray("le",1)),Object(c.a)(new M.a(p).toArray("le",8)),Object(c.a)(new M.a(b).toArray("le",8)),Object(c.a)(new M.a(l).toArray("le",8)),Object(c.a)(y.toBuffer()),Object(c.a)(new M.a(d.length).toArray("le",4)),Object(c.a)(e.concat(d))))})),t.abrupt("return",[I,x,[B]]);case 55:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e,n,r,a,i,c,o,s,u,l,d){return t.apply(this,arguments)}}(),_=function(){var e=Object(s.a)(i.a.mark((function e(t,n){var r,a,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=new A.PublicKey(n),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new Error("Invalid distributor key ".concat(e.t0));case 7:return e.next=9,t.getAccountInfo(r);case 9:if(null!==(a=e.sent)){e.next=12;break}throw new Error("Could not fetch distributor ".concat(n));case 12:if(a.owner.equals(T.b)){e.next=15;break}throw c=a.owner.toBase58(),new Error("Invalid distributor owner ".concat(c));case 15:return o=F.a.accounts.decode("MerkleDistributor",a.data),e.abrupt("return",[r,o]);case 17:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t,n){return e.apply(this,arguments)}}(),V=function(){var t=Object(s.a)(i.a.mark((function t(n,r,a,c){var s,u,l,d,f,b,p;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(n,r);case 2:if(s=t.sent,u=Object(o.a)(s,2),l=u[0],u[1].temporal.equals(T.c)){t.next=10;break}return t.abrupt("return",!1);case 10:if("candy"!==c){t.next=22;break}return t.next=13,A.PublicKey.findProgramAddress([e.from("ClaimCount"),e.from(new M.a(Number(a)).toArray("le",8)),l.toBuffer()],T.b);case 13:return d=t.sent,f=Object(o.a)(d,1),b=f[0],t.next=18,n.getAccountInfo(b);case 18:return p=t.sent,t.abrupt("return",null===p);case 22:return t.abrupt("return",!0);case 23:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),J=function(t){var n=Object(K.i)(),a=Object(C.b)(),u=t.location.search;if(u&&u.length>0)localStorage.setItem("claimQuery",u);else{var d=localStorage.getItem("claimQuery");d&&(u=d)}var E=f.a.parse(u),P=l.a.useState(E.distributor||""),I=Object(o.a)(P,2),W=I[0],N=I[1],F=l.a.useState(E.tokenAcc?"transfer":E.config?"candy":E.master?"edition":""),U=Object(o.a)(F,2),q=U[0],G=U[1],J=l.a.useState(E.tokenAcc||""),X=Object(o.a)(J,2),Y=X[0],Q=X[1],Z=l.a.useState(E.config||""),$=Object(o.a)(Z,2),ee=$[0],te=$[1],ne=l.a.useState(E.uuid||""),re=Object(o.a)(ne,2),ae=re[0],ie=re[1],ce=l.a.useState(E.master||""),oe=Object(o.a)(ce,2),se=oe[0],ue=oe[1],le=l.a.useState(E.edition||""),de=Object(o.a)(le,2),fe=de[0],be=de[1],pe=l.a.useState(E.handle||""),he=Object(o.a)(pe,2),me=he[0],je=he[1],ge=l.a.useState(E.amount||""),ye=Object(o.a)(ge,2),xe=ye[0],ve=ye[1],Oe=l.a.useState(E.index||""),we=Object(o.a)(Oe,2),ke=we[0],Se=we[1],Ce=l.a.useState(E.pin||""),Ae=Object(o.a)(Ce,2),Ee=Ae[0],Pe=Ae[1],Ie=l.a.useState(E.proof||""),Me=Object(o.a)(Ie,2),Be=Me[0],Ke=Me[1],Te=E.guild,We=W.length>0&&("transfer"===q?Y.length>0:"candy"===q?ee.length>0&&ae.length>0:"edition"===q&&(se.length>0&&fe.length>0))&&me.length>0&&xe.length>0&&ke.length>0,De=l.a.useState(!We),Ne=Object(o.a)(De,2),Fe=Ne[0],Re=Ne[1],Ue=l.a.useState(null),Le=Object(o.a)(Ue,2),ze=Le[0],qe=Le[1],Ge=l.a.useState(""),He=Object(o.a)(Ge,2),_e=He[0],Ve=He[1],Je=l.a.useState(!0),Xe=Object(o.a)(Je,2),Ye=Xe[0],Qe=Xe[1];l.a.useEffect((function(){var e=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=Qe,e.next=4,V(n,W,ke,q);case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=10;break;case 8:e.prev=8,e.t2=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[n,W,ke,q]);var Ze="https://n82bm4ts81.execute-api.us-east-2.amazonaws.com/send-OTP",$e=function(){var t=Object(s.a)(i.a.mark((function t(s){var u,l,d,f,b,p,h,m,j,g,y,x,v,O,w,k,S,C,P,I,K,D,N,F,R,U,G,V,J,X,Q,Z;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.preventDefault(),a.connected&&null!==a.publicKey){t.next=3;break}throw new Error("Wallet not connected");case 3:if(u=Number(ke),l=Number(xe),d=null,!isNaN(l)){t.next=8;break}throw new Error("Could not parse amount ".concat(xe));case 8:if(!isNaN(u)){t.next=10;break}throw new Error("Could not parse index ".concat(ke));case 10:if("NA"===E.pin){t.next=18;break}t.prev=11,d=new M.a(Ee),t.next=18;break;case 15:throw t.prev=15,t.t0=t.catch(11),new Error("Could not parse pin ".concat(Ee,": ").concat(t.t0));case 18:return t.next=20,_(n,W);case 20:if(f=t.sent,b=Object(o.a)(f,2),p=b[0],h=b[1],console.log("Distributor",h),m=""===Be?[]:Be.split(",").map((function(t){var n=e.from(B.decode(t));if(32!==n.length)throw new Error("Invalid proof hash length");return n})),"candy"!==q){t.next=37;break}return console.log("Building candy claim"),t.next=30,z(n,a.publicKey,p,h,ee,ae,m,me,l,u,d);case 30:x=t.sent,v=Object(o.a)(x,3),j=v[0],g=v[1],y=v[2],t.next=61;break;case 37:if("transfer"!==q){t.next=47;break}return t.next=40,L(n,a.publicKey,p,h,Y,m,me,l,u,d);case 40:O=t.sent,w=Object(o.a)(O,3),j=w[0],g=w[1],y=w[2],t.next=61;break;case 47:if("edition"!==q){t.next=60;break}if(k=Number(fe),!isNaN(k)){t.next=51;break}throw new Error("Could not parse edition ".concat(fe));case 51:return t.next=53,H(n,a.publicKey,p,h,se,k,m,me,l,u,d);case 53:S=t.sent,C=Object(o.a)(S,3),j=C[0],g=C[1],y=C[2],t.next=61;break;case 60:throw new Error("Unknown claim method ".concat(q));case 61:if(!(null===d&&g.length>0)){t.next=63;break}throw new Error("Internal error: PDA generated when distributing to wallet directly");case 63:return t.t1=A.Transaction,t.t2=a.publicKey,t.next=67,n.getRecentBlockhash("singleGossip");case 67:t.t3=t.sent.blockhash,t.t4={feePayer:t.t2,recentBlockhash:t.t3},P=new t.t1(t.t4),I=new Set,K=Object(r.a)(j);try{for(K.s();!(D=K.n()).done;){N=D.value,P.add(N),F=Object(r.a)(N.keys);try{for(F.s();!(R=F.n()).done;)(U=R.value).isSigner&&I.add(U.pubkey)}catch(i){F.e(i)}finally{F.f()}}}catch(i){K.e(i)}finally{K.f()}if(console.log("Expecting the following signers: ".concat(Object(c.a)(I).map((function(e){return e.toBase58()})))),P.setSigners.apply(P,Object(c.a)(I)),y.length>0&&P.partialSign.apply(P,Object(c.a)(y)),!P.signatures.some((function(e){return e.publicKey.equals(T.c)}))){t.next=101;break}return G={method:"send",transaction:B.encode(P.serializeMessage()),seeds:g},Te&&(G.discordGuild=Te),V={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)},t.next=83,fetch(Ze,V);case 83:if(J=t.sent,console.log(J),200===J.status){t.next=87;break}throw new Error("Failed to send AWS OTP");case 87:return t.prev=87,t.next=90,J.json();case 90:X=t.sent,t.next=96;break;case 93:throw t.prev=93,t.t5=t.catch(87),new Error("Could not parse AWS OTP response");case 96:if(console.log("AWS OTP response data:",X),Te?(Q=!!X.id,Z="discord"):(Q=!!X.MessageId,Z="email"),Q){t.next=100;break}throw new Error("Failed to send AWS OTP");case 100:Object(T.k)({message:"OTP sent",description:"Please check your ".concat(Z," (").concat(me,") for an OTP")});case 101:return t.abrupt("return",P);case 102:case"end":return t.stop()}}),t,null,[[11,15],[87,93]])})));return function(e){return t.apply(this,arguments)}}(),et=function(){var e=Object(s.a)(i.a.mark((function e(t,r){var c,o,s,u,l,d,f,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r){e.next=3;break}throw new Error("Transaction not available for OTP verification");case 3:if(a.connected&&null!==a.publicKey){e.next=5;break}throw new Error("Wallet not connected");case 5:if(!r.signatures.some((function(e){return e.publicKey.equals(T.c)}))){e.next=36;break}if(c=Number(_e),!isNaN(c)&&0!==_e.length){e.next=10;break}throw new Error("Could not parse OTP ".concat(_e));case 10:return o={method:"POST",headers:{"Content-Type":"application/json"},FunctionName:"send-OTP",body:JSON.stringify({method:"verify",otp:c,handle:me})},e.next=13,fetch(Ze,o);case 13:if(s=e.sent,console.log(s),200===s.status){e.next=18;break}throw u=JSON.stringify(s),new Error("Failed to verify AWS OTP. ".concat(u));case 18:return e.prev=18,e.next=21,s.json();case 21:l=e.sent,e.next=27;break;case 24:throw e.prev=24,e.t0=e.catch(18),new Error("Could not parse AWS OTP verification response");case 27:console.log("AWS verify response data:",l),e.prev=28,d=B.decode(l),e.next=35;break;case 32:throw e.prev=32,e.t1=e.catch(28),new Error("Could not decode transaction signature ".concat(l.body));case 35:r.addSignature(T.c,d);case 36:return e.prev=36,e.next=39,a.signTransaction(r);case 39:f=e.sent,e.next=45;break;case 42:throw e.prev=42,e.t2=e.catch(36),new Error("Failed to sign transaction");case 45:return e.next=47,Object(D.c)({connection:n,signedTransaction:f});case 47:return p=e.sent,console.log(p),Object(T.k)({message:"Claim succeeded",description:Object(R.jsx)(b.a,{href:Object(D.b)(p.txid,n),children:"View transaction on explorer"})}),qe(null),e.prev=51,e.t3=Qe,e.next=55,V(n,W,ke,q);case 55:e.t4=e.sent,(0,e.t3)(e.t4),e.next=61;break;case 59:e.prev=59,e.t5=e.catch(51);case 61:case"end":return e.stop()}}),e,null,[[18,24],[28,32],[36,42],[51,59]])})));return function(t,n){return e.apply(this,arguments)}}(),tt=l.a.useState(!1),nt=Object(o.a)(tt,2),rt=nt[0],at=nt[1],it=function(){return Object(R.jsx)(p.a,{size:24,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})},ct=function(e){return"candy"===e?Object(R.jsxs)(l.a.Fragment,{children:[Object(R.jsx)(h.a,{id:"config-text-field",label:"Candy Config",value:ee,onChange:function(e){return te(e.target.value)},disabled:!Fe}),Object(R.jsx)(h.a,{id:"config-uuid-text-field",label:"Candy UUID",value:ae,onChange:function(e){return ie(e.target.value)},disabled:!Fe})]}):"transfer"===e?Object(R.jsx)(l.a.Fragment,{children:Object(R.jsx)(h.a,{id:"token-acc-text-field",label:"Source Token Account",value:Y,onChange:function(e){return Q(e.target.value)},disabled:!Fe})}):"edition"===e?Object(R.jsxs)(l.a.Fragment,{children:[Object(R.jsx)(h.a,{id:"master-mint-text-field",label:"Master Mint",value:se,onChange:function(e){return ue(e.target.value)},disabled:!Fe}),Object(R.jsx)(h.a,{id:"edition-text-field",label:"Edition",value:fe,onChange:function(e){return be(e.target.value)},disabled:!Fe})]}):void 0},ot=[{name:"Populate Claim",inner:function(e){return Object(R.jsxs)(l.a.Fragment,{children:[Object(R.jsx)(h.a,{id:"distributor-text-field",label:"Distributor",value:W,onChange:function(e){return N(e.target.value)},disabled:!Fe}),Object(R.jsxs)(g.a,{fullWidth:!0,children:[Object(R.jsx)(y.a,{id:"claim-method-label",disabled:!Fe,children:"Claim Method"}),Object(R.jsxs)(x.a,{labelId:"claim-method-label",id:"claim-method-select",value:q,label:"Claim Method",onChange:function(e){G(e.target.value)},style:{textAlign:"left"},disabled:!Fe,children:[Object(R.jsx)(v.a,{value:"transfer",children:"Token Transfer"}),Object(R.jsx)(v.a,{value:"candy",children:"Candy Machine"}),Object(R.jsx)(v.a,{value:"edition",children:"Limited Edition"})]})]}),""!==q&&ct(q),"edition"!==q&&Object(R.jsx)(h.a,{id:"amount-text-field",label:"Amount",value:xe,onChange:function(e){return ve(e.target.value)},disabled:!Fe}),Object(R.jsx)(h.a,{id:"handle-text-field",label:"Handle",value:me,onChange:function(e){return je(e.target.value)},disabled:!Fe}),Object(R.jsx)(h.a,{id:"index-text-field",label:"Index",value:ke,onChange:function(e){return Se(e.target.value)},disabled:!Fe}),"NA"!==E.pin&&Object(R.jsx)(h.a,{id:"pin-text-field",label:"Pin",value:Ee,onChange:function(e){return Pe(e.target.value)},disabled:!Fe}),Object(R.jsx)(h.a,{id:"proof-text-field",label:"Proof",multiline:!0,value:Be,onChange:function(e){return Ke(e.target.value)},disabled:!Fe}),Object(R.jsx)(j.a,{color:"info",onClick:function(e){return Re(!Fe)},children:Fe?"Stop Editing":"Edit Claim"}),Object(R.jsx)(m.a,{}),Object(R.jsxs)(m.a,{sx:{position:"relative"},children:[Object(R.jsx)(j.a,{disabled:!a.connected||!We||rt,variant:"contained",style:{width:"100%"},color:Ye?"primary":"success",onClick:function(t){at(!0);var r=function(){var r=Object(s.a)(i.a.mark((function r(){var a,c;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,V(n,W,ke,q);case 3:return a=r.sent,r.next=6,$e(t);case 6:if(c=r.sent,a){r.next=12;break}return r.next=10,et(t,c);case 10:r.next=13;break;case 12:qe(c);case 13:at(!1),e(),r.next=21;break;case 17:r.prev=17,r.t0=r.catch(0),Object(T.k)({message:"Claim failed",description:"".concat(r.t0)}),at(!1);case 21:case"end":return r.stop()}}),r,null,[[0,17]])})));return function(){return r.apply(this,arguments)}}();r()},children:Ye?"Next":"Claim Gumdrop"}),rt&&it()]})]})}}];Ye&&ot.push({name:"Verify OTP",inner:function(e){return Object(R.jsxs)(l.a.Fragment,{children:[Object(R.jsx)(h.a,{id:"otp-text-field",label:"OTP",value:_e,onChange:function(e){return Ve(e.target.value)}}),Object(R.jsx)(m.a,{}),Object(R.jsxs)(m.a,{sx:{position:"relative"},children:[Object(R.jsx)(j.a,{disabled:!a.connected||!_e||rt,variant:"contained",color:"success",style:{width:"100%"},onClick:function(t){at(!0);var n=function(){var n=Object(s.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,et(t,ze);case 3:at(!1),e(),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),Object(T.k)({message:"Claim failed",description:"".concat(n.t0)}),at(!1);case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();n()},children:"Claim Gumdrop"}),rt&&it()]})]})}});var st=l.a.useState(0),ut=Object(o.a)(st,2),lt=ut[0],dt=ut[1],ft=Math.min(lt,ot.length-1),bt=Object(R.jsxs)(l.a.Fragment,{children:[Object(R.jsx)(O.a,{activeStep:ft,children:ot.map((function(e,t){return Object(R.jsx)(w.a,{children:Object(R.jsx)(k.a,{children:e.name})},e.name)}))}),Object(R.jsx)(m.a,{})]});return Object(R.jsxs)(S.a,{spacing:2,children:[Ye&&bt,ot[ft].inner((function(){dt((function(e){return e===ot.length-1?0:e+1}))})),ft>0&&Object(R.jsx)(j.a,{color:"info",onClick:function(){dt((function(e){return e-1}))},children:"Back"})]})}}).call(this,n(18).Buffer)},544:function(e,t){},545:function(e,t){},55:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return a.ENDPOINTS})),n.d(t,"d",(function(){return a.ConnectionProvider})),n.d(t,"i",(function(){return a.useConnection})),n.d(t,"j",(function(){return a.useConnectionConfig})),n.d(t,"l",(function(){return h})),n.d(t,"g",(function(){return y})),n.d(t,"f",(function(){return m})),n.d(t,"k",(function(){return v})),n.d(t,"b",(function(){return O.a})),n.d(t,"h",(function(){return O.b}));var r=n(236),a=n(131),i=n(9),c=n(84),o=n(155),s=n(227),u=n(1),l=n.n(u),d=n(36),f=n(217),b=(n(915),n(98),n(4)),p=(n(263),n.p,Object(u.createContext)({}));function h(){return Object(u.useContext)(p)}var m,j=function(){var e=Object(c.b)(),t=e.wallets,n=e.wallet,r=e.select,a=h(),o=a.visible,l=a.setVisible,d=Object(u.useState)(!1),p=Object(i.a)(d,2)[1],m=Object(u.useCallback)((function(){l(!1),p(!1)}),[l,p]);return Object(b.jsxs)(f.a,{visible:o,onCancel:m,children:[Object(b.jsx)("div",{style:{background:"linear-gradient(180deg, #D329FC 0%, #8F6DDE 49.48%, #19E6AD 100%)",borderRadius:36,width:50,height:50,textAlign:"center",verticalAlign:"middle",fontWeight:700,fontSize:"1.3rem",lineHeight:2.4,marginBottom:10}}),Object(b.jsx)("h2",{style:{color:"white",fontWeight:"bold",fontSize:"1.2rem"},children:n?"Change provider":""}),Object(b.jsx)("p",{style:{color:"white",fontSize:"1rem"},children:n?"Choose from the following options:":"Please sign into your wallet"}),Object(b.jsx)("br",{}),t.map((function(e){return Object(b.jsx)(s.a,{size:"large",type:e===n?"primary":"ghost",onClick:function(){r(e.name),m()},icon:Object(b.jsx)("img",{alt:"".concat(e.name),width:20,height:20,src:e.icon,style:{marginRight:30,float:"left"}}),style:{display:"block",width:"100%",textAlign:"left",marginBottom:8,color:"white"},children:e.name},e.name)}))]})},g=function(e){var t=e.children,n=Object(c.b)().publicKey,r=Object(u.useState)(!!n),a=Object(i.a)(r,2),o=a[0],s=a[1],l=Object(u.useState)(!1),f=Object(i.a)(l,2),h=f[0],m=f[1];return Object(u.useEffect)((function(){if(n){var e=n.toBase58(),t=e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e;Object(d.k)({message:"Wallet update",description:"Connected to wallet "+t})}}),[n]),Object(u.useEffect)((function(){!n&&o&&Object(d.k)({message:"Wallet update",description:"Disconnected from wallet"}),s(!!n)}),[n,o,s]),Object(b.jsxs)(p.Provider,{value:{visible:h,setVisible:m},children:[t,Object(b.jsx)(j,{})]})},y=function(e){var t=e.children,n=Object(u.useMemo)((function(){return[Object(o.c)(),Object(o.d)(),Object(o.g)({options:{clientId:"BEB_D44HovHuXH0Ace97QVqSu1ahCKndjpGhzhVcMy_9XmDTbHyqTbzQTufcyaN0kFwtlVbfPzJwpJXg94gWJqE",uxMode:"redirect"}}),Object(o.a)(),Object(o.f)(),Object(o.b)(),Object(o.e)()]}),[]),r=Object(u.useCallback)((function(e){console.error(e),Object(d.k)({message:"Wallet error",description:e.message})}),[]);return Object(b.jsx)(c.a,{wallets:n,onError:r,autoConnect:!0,children:Object(b.jsx)(g,{children:t})})};!function(e){e.WALLET="wallet"}(m||(m={}));var x=l.a.createContext({setModal:function(){return null},removeModal:function(){return null}}),v=function(){var e=Object(u.useContext)(x);if(void 0===e)throw new Error("useModal must be used within a ModalProvider");return e},O=n(264)},566:function(e,t){},567:function(e,t){},626:function(e,t){},628:function(e,t){},642:function(e,t){},646:function(e,t){},648:function(e,t){},660:function(e,t){},662:function(e,t){},689:function(e,t){},691:function(e,t){},696:function(e,t){},698:function(e,t){},705:function(e,t){},717:function(e,t){},720:function(e,t){},731:function(e,t){},739:function(e,t,n){},79:function(e,t,n){"use strict";(function(e){n.d(t,"h",(function(){return b})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return g})),n.d(t,"g",(function(){return y})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return v}));var r=n(9),a=n(2),i=n.n(a),c=n(8),o=n(165),s=n(7),u=n(41),l=n(26),d=n.n(l),f=n(40),b=function(){var t=Object(c.a)(i.a.mark((function t(n,r){var a,c,o,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,a=new s.PublicKey(r),t.next=7;break;case 4:throw t.prev=4,t.t0=t.catch(0),new Error("Invalid mint key ".concat(t.t0));case 7:return t.next=9,n.getAccountInfo(a);case 9:if(null!==(c=t.sent)){t.next=12;break}throw new Error("Could not fetch mint");case 12:if(c.owner.equals(f.i)){t.next=15;break}throw o=c.owner.toBase58(),new Error("Invalid mint owner ".concat(o));case 15:if(c.data.length===u.b.span){t.next=17;break}throw new Error("Invalid mint size ".concat(c.data.length));case 17:return l=u.b.decode(e.from(c.data)),t.abrupt("return",{key:a,info:l});case 19:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e,n){return t.apply(this,arguments)}}(),p=function(){var t=Object(c.a)(i.a.mark((function t(n,a,c,o){var l,b,p,h,m;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.PublicKey.findProgramAddress([n.toBuffer(),f.i.toBuffer(),c.toBuffer()],f.f);case 2:return l=t.sent,b=Object(r.a)(l,1),p=b[0],t.next=7,a.getAccountInfo(p);case 7:if(null!==(h=t.sent)){t.next=10;break}throw new Error("Could not fetch creator token account");case 10:if(h.data.length===u.a.span){t.next=12;break}throw new Error("Invalid token account size ".concat(h.data.length));case 12:if(m=u.a.decode(e.from(h.data)),!(new d.a(m.amount,8,"le").toNumber()<o)){t.next=15;break}throw new Error("Creator token account does not have enough tokens");case 15:return t.abrupt("return",p);case 16:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o.a,e.next=3,o.b.fetchIdl(t,{connection:n});case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=new s.PublicKey(n),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new Error("Invalid config key ".concat(e.t0));case 7:return e.next=9,t.getAccountInfo(r);case 9:if(null!==(a=e.sent)){e.next=12;break}throw new Error("Could not fetch config");case 12:if(a.owner.equals(f.b)){e.next=14;break}throw new Error("Invalid config owner ".concat(a.owner.toBase58()));case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var t=Object(c.a)(i.a.mark((function t(n,r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.PublicKey.findProgramAddress([e.from("candy_machine"),n.toBuffer(),e.from(r)],f.b);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),g=function(){var e=Object(c.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(f.b,t);case 2:if(null!==(r=e.sent)){e.next=5;break}throw new Error("Could not fetch candy machine IDL");case 5:return e.next=7,t.getAccountInfo(n);case 7:if(null!==(a=e.sent)){e.next=10;break}throw new Error("Could not fetch candy machine");case 10:return e.abrupt("return",r.accounts.decode("CandyMachine",a.data));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var t=Object(c.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.PublicKey.findProgramAddress([e.from("metadata"),f.h.toBuffer(),n.toBuffer()],f.h);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Object(c.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.PublicKey.findProgramAddress([e.from("metadata"),f.h.toBuffer(),n.toBuffer(),e.from("edition")],f.h);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(c.a)(i.a.mark((function t(n,r){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.div(new d.a(248)).toNumber(),t.next=3,s.PublicKey.findProgramAddress([e.from("metadata"),f.h.toBuffer(),n.toBuffer(),e.from("edition"),e.from(String(a))],f.h);case 3:return t.abrupt("return",t.sent[0]);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}).call(this,n(18).Buffer)},817:function(e,t,n){},824:function(e){e.exports=JSON.parse('{"version":"0.0.0","name":"merkle_distributor","instructions":[{"name":"newDistributor","accounts":[{"name":"base","isMut":false,"isSigner":true},{"name":"distributor","isMut":true,"isSigner":false},{"name":"payer","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"root","type":{"array":["u8",32]}},{"name":"temporal","type":"publicKey"}]},{"name":"closeDistributor","accounts":[{"name":"base","isMut":false,"isSigner":true},{"name":"distributor","isMut":true,"isSigner":false},{"name":"distributorWallet","isMut":true,"isSigner":false},{"name":"receiver","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"walletBump","type":"u8"}]},{"name":"claim","accounts":[{"name":"distributor","isMut":true,"isSigner":false},{"name":"claimStatus","isMut":true,"isSigner":false},{"name":"from","isMut":true,"isSigner":false},{"name":"to","isMut":true,"isSigner":false},{"name":"temporal","isMut":false,"isSigner":true},{"name":"payer","isMut":false,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"bump","type":"u8"},{"name":"index","type":"u64"},{"name":"amount","type":"u64"},{"name":"claimantSecret","type":"publicKey"},{"name":"proof","type":{"vec":{"array":["u8",32]}}}]},{"name":"claimCandy","accounts":[{"name":"distributor","isMut":true,"isSigner":false},{"name":"distributorWallet","isMut":true,"isSigner":false},{"name":"claimCount","isMut":true,"isSigner":false},{"name":"temporal","isMut":false,"isSigner":true},{"name":"payer","isMut":false,"isSigner":true},{"name":"candyMachineConfig","isMut":false,"isSigner":false},{"name":"candyMachine","isMut":true,"isSigner":false},{"name":"candyMachineWallet","isMut":true,"isSigner":false},{"name":"candyMachineMint","isMut":true,"isSigner":false},{"name":"candyMachineMetadata","isMut":true,"isSigner":false},{"name":"candyMachineMasterEdition","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"tokenMetadataProgram","isMut":false,"isSigner":false},{"name":"candyMachineProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"clock","isMut":false,"isSigner":false}],"args":[{"name":"walletBump","type":"u8"},{"name":"claimBump","type":"u8"},{"name":"index","type":"u64"},{"name":"amount","type":"u64"},{"name":"claimantSecret","type":"publicKey"},{"name":"proof","type":{"vec":{"array":["u8",32]}}}]}],"accounts":[{"name":"MerkleDistributor","type":{"kind":"struct","fields":[{"name":"base","type":"publicKey"},{"name":"bump","type":"u8"},{"name":"root","type":{"array":["u8",32]}},{"name":"temporal","type":"publicKey"}]}},{"name":"ClaimStatus","type":{"kind":"struct","fields":[{"name":"isClaimed","type":"bool"},{"name":"claimant","type":"publicKey"},{"name":"claimedAt","type":"i64"},{"name":"amount","type":"u64"}]}},{"name":"ClaimCount","type":{"kind":"struct","fields":[{"name":"count","type":"u64"},{"name":"claimant","type":"publicKey"}]}},{"name":"CandyMachine","type":{"kind":"struct","fields":[{"name":"authority","type":"publicKey"},{"name":"wallet","type":"publicKey"},{"name":"tokenMint","type":{"option":"publicKey"}},{"name":"config","type":"publicKey"},{"name":"data","type":{"defined":"CandyMachineData"}},{"name":"itemsRedeemed","type":"u64"},{"name":"bump","type":"u8"}]}}],"types":[{"name":"CandyMachineData","type":{"kind":"struct","fields":[{"name":"uuid","type":"string"},{"name":"price","type":"u64"},{"name":"itemsAvailable","type":"u64"},{"name":"goLiveDate","type":{"option":"i64"}}]}}],"events":[{"name":"ClaimedEvent","fields":[{"name":"index","type":"u64","index":false},{"name":"claimant","type":"publicKey","index":false},{"name":"amount","type":"u64","index":false}]}],"errors":[{"code":300,"name":"InvalidProof","msg":"Invalid Merkle proof."},{"code":301,"name":"DropAlreadyClaimed","msg":"Drop already claimed."},{"code":302,"name":"Unauthorized","msg":"Account is not authorized to execute this instruction"},{"code":303,"name":"OwnerMismatch","msg":"Token account owner did not match intended owner"},{"code":304,"name":"TemporalMismatch","msg":"Temporal signer did not match distributor"}]}')},853:function(e){e.exports=JSON.parse('[{"handle":"alice@solana.com","mint":"58iV1fAXFvXoPk28xpB2ihedEnM9HSRkiPHXXm1r4V8z","amount":1500000000},{"handle":"bob@solana.com","mint":"58iV1fAXFvXoPk28xpB2ihedEnM9HSRkiPHXXm1r4V8z","amount":1500000000}]')},854:function(e,t,n){},855:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(49),c=n.n(i),o=n(55),s=(n(813),n(814),n(815),n(816),n(9)),u=n(154),l=n(59),d=n(511),f=n(921),b=n(912),p=n(521),h=n(525),m=n(204),j=(n(817),n(156)),g=n(870),y=n(369),x=n(867),v=n(861),O=n(520),w=n(302),k=n(500),S=n.n(k),C=n(501),A=n.n(C),E=n(263),P=n(4),I=function(e){var t=e.narrow,n=[{href:"/gumdrop/",innerNarrow:"About",inner:Object(P.jsx)(S.a,{})},{href:"/gumdrop/create",inner:"Create"},{href:"/gumdrop/claim",inner:"Claim"},{href:"/gumdrop/close",inner:"Close"}],r=a.a.useState(!1),i=Object(s.a)(r,2),c=i[0],o=i[1],l=function(e){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&o(e)}};return Object(P.jsxs)(m.a,{sx:{height:"52px",display:"flex",bgcolor:"action.disabledBackground",overflow:"auto"},children:[t?Object(P.jsxs)(a.a.Fragment,{children:[Object(P.jsx)(j.a,{onClick:l(!0),children:Object(P.jsx)(A.a,{})}),Object(P.jsx)(g.a,{open:c,onClose:l(!1),children:Object(P.jsx)(m.a,{sx:{width:250},role:"presentation",onClick:l(!1),onKeyDown:l(!1),children:Object(P.jsxs)(y.a,{children:[Object(P.jsx)(x.a,{children:Object(P.jsx)(v.a,{primary:"Gumdrop",primaryTypographyProps:{fontSize:"1.2rem",fontWeight:"medium",letterSpacing:0}})}),Object(P.jsx)(O.a,{}),n.map((function(e,t){return Object(P.jsx)(u.b,{to:e.href,style:{color:"inherit"},children:Object(P.jsx)(w.a,{children:e.innerNarrow||e.inner})},t)}))]})})})]}):Object(P.jsx)(p.a,{direction:"row",spacing:2,sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginLeft:"36px"},children:n.map((function(e,t){return Object(P.jsx)(u.b,{to:e.href,children:Object(P.jsx)(j.a,{variant:"outlined",style:{minWidth:0},children:e.inner})},t)}))}),Object(P.jsx)(m.a,{sx:{flexGrow:1,minWidth:"36px"}}),Object(P.jsx)(E.a,{narrow:t})]})},M=n(503),B=n(2),K=n.n(B),T=n(8),W=n(101),D=n(872),N=n(524),F=n(868),R=n(522),U=n(303),L=n(84),z=n(7),q=n(36),G=n(100),H=n(109),_=function(){var e=Object(o.i)(),t=Object(L.b)(),n=a.a.useState(""),r=Object(s.a)(n,2),i=r[0],c=r[1],u=a.a.useState(localStorage.getItem("claimMethod")||"transfer"),l=Object(s.a)(u,2),d=l[0],f=l[1],b=a.a.useState(localStorage.getItem("mint")||""),g=Object(s.a)(b,2),y=g[0],x=g[1],v=a.a.useState(localStorage.getItem("candyConfig")||""),O=Object(s.a)(v,2),w=O[0],k=O[1],S=a.a.useState(localStorage.getItem("candyUUID")||""),C=Object(s.a)(S,2),A=C[0],E=C[1],I=a.a.useState(localStorage.getItem("masterMint")||""),M=Object(s.a)(I,2),B=M[0],_=M[1],V=function(){var n=Object(T.a)(K.a.mark((function n(r){var a,c,s;return K.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),t.connected&&null!==t.publicKey){n.next=3;break}throw new Error("Wallet not connected");case 3:return a=z.Keypair.fromSecretKey(new Uint8Array(JSON.parse(i))),n.next=6,Object(G.c)(e,t.publicKey,a,d,y,w,A,B);case 6:return c=n.sent,n.next=9,o.c.sendTransactionWithRetry(e,t,c,[a]);case 9:s=n.sent,console.log(s),"string"===typeof s?Object(q.k)({message:"Close failed",description:s}):Object(q.k)({message:"Close succeeded",description:Object(P.jsx)(h.a,{href:Object(H.b)(s.txid,e),children:"View transaction on explorer"})});case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),J=a.a.useState(!1),X=Object(s.a)(J,2),Y=X[0],Q=X[1];return Object(P.jsxs)(p.a,{spacing:2,children:[Object(P.jsx)(W.a,{id:"base-text-field",label:"Base Private Key",value:i,onChange:function(e){return c(e.target.value)}}),Object(P.jsxs)(N.a,{fullWidth:!0,children:[Object(P.jsx)(F.a,{id:"claim-method-label",children:"Claim Method"}),Object(P.jsxs)(R.a,{labelId:"claim-method-label",id:"claim-method-select",value:d,label:"Claim Method",onChange:function(e){localStorage.setItem("claimMethod",e.target.value),f(e.target.value)},style:{textAlign:"left"},children:[Object(P.jsx)(U.a,{value:"transfer",children:"Token Transfer"}),Object(P.jsx)(U.a,{value:"candy",children:"Candy Machine"}),Object(P.jsx)(U.a,{value:"edition",children:"Limited Edition"})]})]}),""!==d&&function(e){return"candy"===e?Object(P.jsxs)(a.a.Fragment,{children:[Object(P.jsx)(W.a,{id:"config-text-field",label:"Candy Config",value:w,onChange:function(e){return k(e.target.value)}}),Object(P.jsx)(W.a,{id:"config-uuid-text-field",label:"Candy UUID",value:A,onChange:function(e){return E(e.target.value)}})]}):"transfer"===e?Object(P.jsx)(a.a.Fragment,{children:Object(P.jsx)(W.a,{id:"mint-text-field",label:"Mint",value:y,onChange:function(e){return x(e.target.value)}})}):"edition"===e?Object(P.jsx)(a.a.Fragment,{children:Object(P.jsx)(W.a,{id:"master-mint-text-field",label:"Master Mint",value:B,onChange:function(e){return _(e.target.value)}})}):void 0}(d),Object(P.jsxs)(m.a,{sx:{position:"relative"},children:[Object(P.jsx)(j.a,{disabled:!t.connected||!i||Y,variant:"contained",style:{width:"100%"},onClick:function(e){Q(!0);var t=function(){var t=Object(T.a)(K.a.mark((function t(){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,V(e);case 3:Q(!1),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),Object(q.k)({message:"Close failed",description:"".concat(t.t0)}),Q(!1);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}();t()},children:"Close Gumdrop"}),Y&&Object(P.jsx)(D.a,{size:24,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]})]})},V=n(34),J=n(925),X=n(926),Y=n(927),Q=n(928),Z=n(929),$=n(930),ee=n(509),te=n.n(ee),ne=n(26),re=n.n(ne),ae=n(33),ie=n(67),ce=n.n(ie),oe=n(914),se=n(918),ue=(n(913),n(917),function(e,t,n){var r=function(e,t){return n?'<a href="'.concat(e,'">').concat(t,"</a>"):"".concat(t," ").concat(e)};if("Token"===t.type)return{subject:"Gumdrop Token Drop",message:"You received ".concat(e.amount," token(s) ")+"(click ".concat(r(t.meta,"here")," to view more information about the token mint). ")+r(e.url,"Click here to claim them!")};if("Candy"===t.type)return{subject:"Gumdrop NFT Drop",message:"You received ".concat(e.amount," Candy Machine pre-sale mint(s) ")+"(click ".concat(r(t.meta,"here")," to view the candy machine configuration on explorer). ")+r(e.url,"Click here to claim them!")};if("Edition"===t.type)return{subject:"Gumdrop NFT Drop",message:"You received ".concat(e.amount," limited-edition print(s) ")+"(click ".concat(r(t.meta,"here")," to view the master edition mint on explorer). ")+r(e.url,"Click here to claim them!")};throw new Error("Internal Error: Unknown drop type ".concat(t.type))}),le=function(){var e=Object(T.a)(K.a.mark((function e(t,n,r,a){var i,c,o,s,u,l;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.accessKeyId&&t.secretAccessKey){e.next=2;break}throw new Error("AWS SES auth keys not supplied");case 2:if(0!==r.length){e.next=4;break}return e.abrupt("return",[]);case 4:ce.a.debug("SES auth",t),i=new oe.a({region:"us-east-2",credentials:{accessKeyId:t.accessKeyId,secretAccessKey:t.secretAccessKey}}),c=function(){var e=Object(T.a)(K.a.mark((function e(t,r){var a,c,o;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ue(t,r,!0),c={Destination:{ToAddresses:[t.handle]},Content:{Simple:{Subject:{Data:a.subject,Charset:"utf-8"},Body:{Html:{Data:a.message+"<br><br><div>If you would like to unsubscribe from new Gumdrops, change your subscription preferences here: <a href='{{amazonSESUnsubscribeUrl}}'>AWS subscription preferences</a></div>",Charset:"utf-8"}}}},FromEmailAddress:n,ListManagementOptions:{ContactListName:"Gumdrop",TopicName:r.type}},e.prev=2,e.next=5,i.send(new se.a(c));case 5:return o=e.sent,e.abrupt("return",{status:"success",handle:t.handle,messageId:o.MessageId});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",{status:"error",handle:t.handle,error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}(),o=Array(),s=Object(ae.a)(r),e.prev=9,s.s();case 11:if((u=s.n()).done){e.next=20;break}return l=u.value,e.t0=o,e.next=16,c(l,a);case 16:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 18:e.next=11;break;case 20:e.next=25;break;case 22:e.prev=22,e.t2=e.catch(9),s.e(e.t2);case 25:return e.prev=25,s.f(),e.finish(25);case 28:return e.abrupt("return",o);case 29:case"end":return e.stop()}}),e,null,[[9,22,25,28]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),de=function(){var e=Object(T.a)(K.a.mark((function e(t,n,r,a){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Array());case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),fe=function(){var e=Object(T.a)(K.a.mark((function e(t,n,r,a){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Array());case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),be=function(e){return e.map((function(e){return{handle:e.handle,amount:e.amount,url:e.url}}))},pe=n(264),he=function(e){var t=a.a.useRef(null),n=a.a.useState(0),r=Object(s.a)(n,2),i=r[0],c=r[1],o=a.a.useState(!1),u=Object(s.a)(o,2),l=u[0],d=u[1],f=function(e){e.preventDefault(),e.stopPropagation()},b=function(e){e.preventDefault(),e.stopPropagation(),c(i+1),e.dataTransfer.items&&e.dataTransfer.items.length>0&&d(!0)},p=function(e){e.preventDefault(),e.stopPropagation();var t=i-1;c(t),0===t&&d(!1)},h=function(t){t.preventDefault(),t.stopPropagation(),d(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0&&(e.handleDrop(t.dataTransfer.files),t.dataTransfer.clearData(),c(0))};a.a.useEffect((function(){var e=t.current;if(null!==e)return e.addEventListener("dragenter",b),e.addEventListener("dragleave",p),e.addEventListener("dragover",f),e.addEventListener("drop",h),function(){e.removeEventListener("dragenter",b),e.removeEventListener("dragleave",p),e.removeEventListener("dragover",f),e.removeEventListener("drop",h)}}));var m="dark"===Object(pe.b)().mode?"rgba(255,255,255,.1)":"rgba(0, 0, 0,.1)";return Object(P.jsx)("div",{ref:t,style:l?{backgroundColor:m}:{},children:e.children})},me=n(217),je=function(){var e=new Uint8Array(4);return window.crypto.getRandomValues(e),e},ge="\xa0",ye=function(e,t,n,r,a){if("AWS SES"===e)return le(t,n,r,a);if("Manual"===e)return de(t,n,r,a);if("Wallets"===e)return fe(t,n,r,a);throw new Error("Unrecognized claim distribution method ".concat(e))},xe=function(e){var t=document.createElement("div");document.body.appendChild(t);var n=function(){c.a.unmountComponentAtNode(t),document.body.removeChild(t)};return new Promise((function(n){!function(n){var r=n.onSubmit,a=n.onDismiss;c.a.render(e({onSubmit:r,onDismiss:a,show:!0}),t)}({onSubmit:function(e){return n(e)},onDismiss:function(){return n(void 0)}})})).finally((function(){!function(n,r){var a=n.onSubmit,i=n.onDismiss;c.a.render(e({onSubmit:a,onDismiss:i,show:!1}),t,r)}({onSubmit:function(){},onDismiss:function(){}},n)}))},ve=function(e){var t=e.show,n=e.onSubmit,r=e.onDismiss,a=[{click:function(){return n("create")},name:"Create and Send"},{click:function(){return n("send")},name:"Send only"}];return Object(P.jsxs)(me.a,{visible:t,onCancel:r,width:"70ch",children:[Object(P.jsx)("p",{style:{color:"white",fontSize:"0.9rem",marginTop:8,width:"90%"},children:"Uploaded distribution list has URLs for all claimants. Skip creation of airdrop and only re-send links?"}),Object(P.jsx)("br",{}),Object(P.jsx)(p.a,{direction:"row",spacing:2,style:{width:"100%"},children:a.map((function(e){return Object(P.jsx)(j.a,{style:{width:"100%",color:"white",marginBottom:8},variant:"outlined",onClick:e.click,children:e.name},e.name)}))})]})},Oe=function(e){var t=encodeURIComponent(JSON.stringify(e));return"data:text/plain;charset=utf-8,".concat(t)},we=function(e,t,n,r,a){var i=1e3;return function(c){var o=c.show,s=c.onSubmit,u=c.onDismiss;return Object(P.jsxs)(me.a,{visible:o,onCancel:u,width:"70ch",children:[Object(P.jsxs)("h2",{style:{color:"white",fontWeight:"bold",fontSize:"1.2rem"},children:["Claim Distribution Preview",e.length>i?" (First ".concat(i,")"):""]}),Object(P.jsx)("p",{style:{color:"white",fontSize:"1rem",textAlign:"center"},children:"Approving will save the keypair authority generated for gumdrop state. This keypair is necessary to close the gumdrop later!"}),Object(P.jsx)(J.a,{sx:{"td, th":{color:"white"},backgroundColor:"#444444",borderRadius:"5px",maxHeight:"30ch"},children:Object(P.jsxs)(X.a,{size:"small",children:[Object(P.jsx)(Y.a,{children:Object(P.jsxs)(Q.a,{children:[Object(P.jsx)(Z.a,{children:"Handle"}),Object(P.jsx)(Z.a,{children:"edition"===n?"Edition":"Tokens"}),t&&Object(P.jsx)(Z.a,{children:"Pin"})]})}),Object(P.jsx)($.a,{children:e.slice(0,i).map((function(e,a){return Object(P.jsxs)(Q.a,{sx:{"td, th":{border:0}},children:[Object(P.jsxs)(Z.a,{component:"th",scope:"row",children:[e.handle," "]}),Object(P.jsx)(Z.a,{children:"transfer"===n?(i=e.amount,c=r.mint.info,String(i/Math.pow(10,c.decimals))):"candy"===n?e.amount:e.edition}),t&&Object(P.jsx)(Z.a,{children:e.pin.toNumber()})]},a);var i,c}))})]})}),Object(P.jsx)(m.a,{style:{height:"3ch"}}),Object(P.jsxs)(p.a,{direction:"row",spacing:2,style:{width:"100%"},children:[Object(P.jsx)(j.a,{style:{width:"100%",color:"white",marginBottom:8},variant:"outlined",onClick:function(){return s(!1)},children:"Cancel"}),Object(P.jsx)(h.a,{href:Oe(Array.from(a.secretKey)),download:"".concat(a.publicKey.toBase58(),".json"),underline:"none",style:{width:"100%"},children:Object(P.jsx)(j.a,{style:{width:"100%",color:"white",marginBottom:8},variant:"outlined",onClick:function(){return s(!0)},children:"Approve"})})]})]})}},ke=function(e){var t,n=Object(o.i)(),r=Object(L.b)(),i=a.a.useState(localStorage.getItem("claimMethod")||""),c=Object(s.a)(i,2),u=c[0],l=c[1],d=a.a.useState(localStorage.getItem("candyConfig")||""),f=Object(s.a)(d,2),b=f[0],g=f[1],y=a.a.useState(localStorage.getItem("candyUUID")||""),x=Object(s.a)(y,2),v=x[0],O=x[1],w=a.a.useState(localStorage.getItem("mint")||""),k=Object(s.a)(w,2),S=k[0],C=k[1],A=a.a.useState(localStorage.getItem("masterMint")||""),E=Object(s.a)(A,2),I=E[0],M=E[1],B=a.a.useState(""),_=Object(s.a)(B,2),J=_[0],X=_[1],Y=a.a.useState(""),Q=Object(s.a)(Y,2),Z=Q[0],$=Q[1],ee=a.a.useState([]),ne=Object(s.a)(ee,2),ae=ne[0],ie=ne[1],ce=a.a.useState([]),oe=Object(s.a)(ce,2),se=oe[0],ue=oe[1],le=a.a.useState(localStorage.getItem("otpAuth")||"default"),de=Object(s.a)(le,2),fe=de[0],pe=de[1],me=a.a.useState(localStorage.getItem("commMethod")||""),ke=Object(s.a)(me,2),Se=ke[0],Ce=ke[1],Ae=a.a.useState({}),Ee=Object(s.a)(Ae,2),Pe=Ee[0],Ie=Ee[1],Me=a.a.useState(localStorage.getItem("commSource")||""),Be=Object(s.a)(Me,2),Ke=Be[0],Te=Be[1],We=a.a.useState(""),De=Object(s.a)(We,2),Ne=De[0],Fe=De[1],Re=a.a.useState(""),Ue=Object(s.a)(Re,2),Le=Ue[0],ze=Ue[1],qe=function(){var e=Object(T.a)(K.a.mark((function e(t,n){var r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(Se,Pe,Ke,t,n);case 2:r=e.sent,console.log("Responses",r),ue(r),"AWS SES"===Se&&Object(q.k)({message:"Gumdrop email distribution completed"});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(T.a)(K.a.mark((function e(t){var a,i,c,s,l,d,f,p,m,j;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),ie([]),ue([]),r.connected&&null!==r.publicKey){e.next=5;break}throw new Error("Wallet not connected");case 5:if(0!==(a=Object(G.e)(Z,J,Se)).length){e.next=8;break}throw new Error("No claimants provided");case 8:return i=Object(G.d)(Object(H.a)(n),u,S,b,I),e.next=11,ye(Se,Pe,Ke,[],i);case 11:if(c=function(e){return void 0!==e.url&&null!==e.url},!a.reduce((function(e,t){return e&&c(t)}),!0)){e.next=28;break}return e.next=15,xe(ve);case 15:if(s=e.sent,console.log("Resend only",s),"send"!==s){e.next=24;break}return ie(be(a)),e.next=21,qe(a,i);case 21:return e.abrupt("return");case 24:if("create"!==s){e.next=27;break}e.next=28;break;case 27:throw new Error("Dismissed");case 28:e.t0=u,e.next="transfer"===e.t0?31:"candy"===e.t0?35:"edition"===e.t0?39:43;break;case 31:return e.next=33,Object(G.h)(n,r.publicKey,a,S);case 33:return l=e.sent,e.abrupt("break",44);case 35:return e.next=37,Object(G.f)(n,r.publicKey,a,b,v);case 37:return l=e.sent,e.abrupt("break",44);case 39:return e.next=41,Object(G.g)(n,r.publicKey,a,I);case 41:return l=e.sent,e.abrupt("break",44);case 43:throw new Error("Unknown claim method ".concat(u));case 44:if(console.log("Claims info",l),a.forEach((function(e){e.pin=new re.a(je()),e.seed="transfer"===u?l.mint.key:"candy"===u?l.config:l.masterMint.key})),"Wallets"!==Se){e.next=50;break}d=q.b,e.next=59;break;case 50:if("default"!==fe){e.next=54;break}d=q.c,e.next=59;break;case 54:if("none"!==fe){e.next=58;break}d=z.PublicKey.default,e.next=59;break;case 58:throw new Error("Unknown OTP authorization type ".concat(fe));case 59:return console.log("Temporal signer: ".concat(d.toBase58())),f=z.Keypair.generate(),console.log("Base ".concat(f.publicKey.toBase58())),p="Wallets"!==Se,e.next=65,Object(G.a)(n,r.publicKey,p,u,"".concat(window.location.origin,"/gumdrop"),f.publicKey,d,a,l);case 65:return m=e.sent,e.next=68,xe(we(a,p,u,l,f));case 68:if(!0!==e.sent){e.next=72;break}e.next=73;break;case 72:throw new Error("Claim distribution preview not approved");case 73:return ie(be(a)),e.next=76,o.c.sendTransactionWithRetry(n,r,m,[f]);case 76:if(j=e.sent,console.log(j),"string"!==typeof j){e.next=82;break}throw new Error(j);case 82:Object(q.k)({message:"Gumdrop creation succeeded",description:Object(P.jsx)(h.a,{href:Object(H.b)(j.txid,n),children:"View transaction on explorer"})});case 83:return console.log("Distributing claim URLs"),e.next=86,qe(a,i);case 86:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),He=function(e){if(1===e.length){var t=e[0],n=new FileReader;n.onload=function(e){if(null!==e&&null!==e.target)if("string"===typeof e.target.result){try{Object(G.e)(e.target.result,t.name,Se)}catch(n){return Object(q.k)({message:"File upload failed for: ".concat(t.name),description:Object(P.jsxs)("span",{children:["Could not parse uploaded file.",ge,Object(P.jsx)(h.a,{href:"#/",children:"Does it follow the JSON scheme?"})]})}),X(""),void $("")}X(t.name),$(e.target.result)}else Object(q.k)({message:"File upload failed for: ".concat(t.name),description:"Could not read uploaded file"})},n.readAsText(t)}else Object(q.k)({message:"File upload failed",description:"Received ".concat(e.length," files")})},_e=Object(P.jsxs)(a.a.Fragment,{children:[Object(P.jsx)(he,{handleDrop:He,children:Object(P.jsxs)(p.a,{direction:"row",style:{height:"15ch"},sx:{border:"1px dashed grey",justifyContent:"center",alignContent:"center"},children:[Object(P.jsxs)(j.a,{variant:"text",component:"label",style:{padding:0,marginTop:"5ch",marginBottom:"5ch"},children:["Upload a ",""===J?"distribution":"different"," list",Object(P.jsx)("input",{type:"file",onChange:function(e){He(e.target.files),e.target.value=""},hidden:!0})]}),ge,Object(P.jsx)(j.a,{variant:"text",component:"label",disabled:!0,style:{padding:0,color:"#eee"},children:"or drag it here"})]})}),""!==J?Object(P.jsxs)(j.a,{variant:"text",component:"label",disabled:!0,style:{padding:0,color:"#eee"},children:[Object(P.jsx)(te.a,{}),Object(P.jsxs)("span",{children:[ge," Uploaded ",J]})]}):Object(P.jsx)(m.a,{})]}),Ve=a.a.useState(!1),Je=Object(s.a)(Ve,2),Xe=Je[0],Ye=Je[1],Qe=Object(P.jsxs)(m.a,{sx:{position:"relative"},children:[Object(P.jsxs)(j.a,{disabled:!r.connected||!Se||!J||Xe,variant:"contained",style:{width:"100%"},onClick:function(e){Ye(!0);var t=function(){var t=Object(T.a)(K.a.mark((function t(){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ge(e);case 3:Ye(!1),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),Object(q.k)({message:"Create failed",description:"".concat(t.t0)}),Ye(!1);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}();t()},children:["Create",ae.length>0?" Another ":" ","Gumdrop"]}),Xe&&Object(P.jsx)(D.a,{size:24,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]}),Ze=Object(P.jsx)(a.a.Fragment,{children:Object(P.jsxs)(N.a,{fullWidth:!0,children:[Object(P.jsx)(F.a,{id:"otp-auth-label",children:"OTP Authorization"}),Object(P.jsxs)(R.a,{labelId:"otp-auth-label",id:"otp-auth-select",value:fe,label:"OTP Authorization",onChange:function(e){localStorage.setItem("otpAuth",e.target.value),pe(e.target.value)},style:{textAlign:"left"},children:[Object(P.jsxs)(U.a,{value:"default",children:["Default",ge,Object(P.jsxs)(h.a,{href:(t=q.c,"https://explorer.solana.com/address/".concat(t.toBase58(),"?cluster=").concat(Object(H.a)(n))),underline:"none",target:"_blank",rel:"noopener noreferrer",children:["(",Object(q.l)(q.c.toBase58()),")"]})]}),Object(P.jsx)(U.a,{value:"none",children:"None"})]})]})});return Object(P.jsxs)(p.a,{spacing:2,children:[Object(P.jsxs)(N.a,{fullWidth:!0,children:[Object(P.jsx)(F.a,{id:"claim-method-label",children:"Claim Method"}),Object(P.jsxs)(R.a,{labelId:"claim-method-label",id:"claim-method-select",value:u,label:"Claim Method",onChange:function(e){localStorage.setItem("claimMethod",e.target.value),l(e.target.value)},style:{textAlign:"left"},children:[Object(P.jsx)(U.a,{value:"transfer",children:"Token Transfer"}),Object(P.jsx)(U.a,{value:"candy",children:"Candy Machine"}),Object(P.jsx)(U.a,{value:"edition",children:"Limited Edition"})]})]}),""!==u&&function(e){return"candy"===e?Object(P.jsxs)(a.a.Fragment,{children:[Object(P.jsx)(W.a,{id:"config-text-field",label:"Candy Config",value:b,onChange:function(e){g(e.target.value),localStorage.setItem("candyConfig",e.target.value)}}),Object(P.jsx)(W.a,{id:"config-uuid-text-field",label:"Candy UUID",value:v,onChange:function(e){O(e.target.value),localStorage.setItem("candyUUID",e.target.value)}})]}):"transfer"===e?Object(P.jsx)(W.a,{id:"mint-text-field",label:"Mint",value:S,onChange:function(e){localStorage.setItem("mint",e.target.value),C(e.target.value)}}):"edition"===e?Object(P.jsx)(W.a,{id:"master-mint-text-field",label:"Master Mint",value:I,onChange:function(e){localStorage.setItem("masterMint",e.target.value),M(e.target.value)}}):void 0}(u),Object(P.jsxs)(N.a,{fullWidth:!0,children:[Object(P.jsx)(F.a,{id:"comm-method-label",children:"Distribution Method"}),Object(P.jsxs)(R.a,{labelId:"comm-method-label",id:"comm-method-select",value:Se,label:"Distribution Method",onChange:function(e){"Discord"!==e.target.value?(localStorage.setItem("commMethod",e.target.value),Ce(e.target.value)):Object(q.k)({message:"Discord distribution unavailable",description:"Please use the CLI for this. Discord does not support browser-connection requests"})},style:{textAlign:"left"},children:[Object(P.jsx)(U.a,{value:"AWS SES",children:"AWS SES"}),Object(P.jsx)(U.a,{value:"Discord",children:"Discord"}),Object(P.jsx)(U.a,{value:"Wallets",children:"Wallets"}),Object(P.jsx)(U.a,{value:"Manual",children:"Manual"})]})]}),""!==Se&&function(e){return"AWS SES"===e?Object(P.jsxs)(a.a.Fragment,{children:[Object(P.jsx)(W.a,{id:"comm-access-key-id-field",label:"".concat(e," Access Key Id"),value:Ne,onChange:function(e){Ie((function(t){return Object(V.a)(Object(V.a)({},t),{},{accessKeyId:e.target.value})})),Fe(e.target.value)}}),Object(P.jsx)(W.a,{id:"comm-secret-access-key-field",label:"".concat(e," Secret Access Key"),value:Le,onChange:function(e){Ie((function(t){return Object(V.a)(Object(V.a)({},t),{},{secretAccessKey:e.target.value})})),ze(e.target.value)}}),Object(P.jsx)(W.a,{id:"comm-source-field",label:"".concat(e," Source"),value:Ke,onChange:function(e){localStorage.setItem("commSource",e.target.value),Te(e.target.value)}})]}):null}(Se),""!==Se&&"Wallets"!==Se&&Ze,""!==Se&&_e,Qe,ae.length>0&&Object(P.jsx)(h.a,{href:Oe(ae),download:"claimURLs.json",underline:"none",style:{width:"100%"},children:Object(P.jsx)(j.a,{variant:"contained",style:{width:"100%"},children:"Download claim URLs"})}),se.length>0&&Object(P.jsx)(h.a,{href:Oe(se),download:"responses.json",underline:"none",style:{width:"100%"},children:Object(P.jsx)(j.a,{variant:"contained",style:{width:"100%"},children:"Download distribution responses"})})]})},Se=function(e){var t=[{name:"summary",inner:Object(P.jsxs)(p.a,{spacing:1,children:[Object(P.jsx)("div",{children:"The Gumdrop program leverages the Solana blockchain and merkle trees to facilitate airdrops to a large number of whitelisted users at a low cost to creators."}),Object(P.jsxs)("div",{children:["In the Solana ecosystem, the cost of token airdrops is currently largely due to rent costs being","\xa0",Object(P.jsx)(h.a,{href:"https://docs.solana.com/implemented-proposals/rent",underline:"none",children:'"fixed at the genesis"'}),". With the large increase in SOLUSD since genesis, rent costs when creating accounts for thousands of users have duly skyrocketed."]}),Object(P.jsx)("div",{children:"Simultaneously, NFT projects often have a presale to early project followers and contributors. However, the candy-machine doesn't have the ability to grant early minting to a whitelisted subset of wallets while also using the same asset configuration for open launch."}),Object(P.jsxs)("div",{children:["Gumdrop (originally pioneered for token airdrops by"," ",Object(P.jsx)(h.a,{href:"https://github.com/Uniswap/merkle-distributor",underline:"none",children:"Uniswap"})," ","and ported to Solana by","\xa0",Object(P.jsx)(h.a,{href:"https://github.com/saber-hq/merkle-distributor",underline:"none",children:"Saber"}),") solves both these issues by building a space-efficient hash structure (the merkle tree) such that an on-chain program can validate whether the user is part of a whitelist. Moreover, Gumdrop allows creators to directly send whitelisted users an airdrop reclamation link by building the tree with off-chain handles (e.g email, discord, etc) and allowing the user to redeem into any wallet."]})]})},{name:"create",inner:Object(P.jsxs)(p.a,{spacing:1,children:[Object(P.jsx)(u.b,{to:"/gumdrop/create",children:"CREATION"}),Object(P.jsx)("div",{children:"Creation builds a whitelist of users that can claim either existing fungible tokens or directly mint from a pre-sale candy-machine."}),Object(P.jsxs)("div",{children:["Creators must choose a mint or a candy-machine config and UUID, an off-chain notification method (based on the handles supplied below, e.g email, discord, etc), and supply a list of recipients and balances with the following JSON schema","\xa0",Object(P.jsx)(h.a,{href:"data:text/plain;charset=utf-8,".concat(JSON.stringify(n(853))),download:"example.json",underline:"none",children:"(Click here for an example)"})]}),Object(P.jsx)("pre",{style:{fontSize:14},children:'\n[\n  {\n    "handle": "<DISTRIBUTION-SPECIFIC-HANDLE>"\n    "amount": <#-TOKENS-OR-CANDY-MINTS>\n  },\n  ...\n]'}),Object(P.jsx)("div",{children:"NB: When a candy-machine is supplied, update authority for the candy-machine will be transferred to the Gumdrop state. This can be reclaimed by closing the Gumdrop."})]})},{name:"claim",inner:Object(P.jsxs)(p.a,{spacing:1,children:[Object(P.jsx)(u.b,{to:"/gumdrop/claim",children:"CLAIMS"}),Object(P.jsx)("div",{children:"Claims are redeemed through a URL with query parameters holding claim-specific keys. Claimants will need to verify ownership of the specified handle by answering a OTP challenge and pay the rent and minting fees if applicable."})]})},{name:"close",inner:Object(P.jsxs)(p.a,{spacing:1,children:[Object(P.jsx)(u.b,{to:"/gumdrop/close",children:"CLOSING"}),Object(P.jsx)("div",{children:"Closing the Gumdrop cleans up the on-chain state and allows creators to recycle any lamports held for rent-exemption after the airdrop is complete."}),Object(P.jsx)("div",{children:"When closing a candy-machine-integrated distributor, update authority will be transferred back to the wallet owner."})]})}];return Object(P.jsx)(p.a,{alignContent:"left",textAlign:"left",spacing:2,children:t.map((function(e,t){return Object(P.jsx)("div",{children:e.inner},t)}))})},Ce=function(){var e=window;return{width:e.innerWidth,height:e.innerHeight}};var Ae=function(){var e=Object(o.h)();a.a.useEffect((function(){}),[e.mode]);var t=a.a.useMemo((function(){var t;return t="dark"!==e.mode&&e.mode?"light":"dark",Object(d.a)({palette:{mode:t}})}),[e.mode]),n=function(){var e=a.a.useState(Ce()),t=Object(s.a)(e,2),n=t[0],r=t[1];return a.a.useEffect((function(){var e=function(){r(Ce())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}().width;return Object(P.jsx)("div",{className:"App",style:{backgroundColor:"transparent"},children:Object(P.jsx)(f.a,{theme:t,children:Object(P.jsxs)(u.a,{children:[Object(P.jsx)(b.a,{}),Object(P.jsx)(I,{narrow:n<670}),Object(P.jsxs)(m.a,{maxWidth:"60ch",width:"calc(100% - 60px)",style:{marginLeft:"auto",marginRight:"auto"},children:[Object(P.jsx)(m.a,{height:"40px"}),Object(P.jsxs)(l.c,{children:[Object(P.jsx)(l.a,{path:"/gumdrop/create",component:ke}),Object(P.jsx)(l.a,{path:"/gumdrop/claim",component:M.a}),Object(P.jsx)(l.a,{path:"/gumdrop/close",component:_}),Object(P.jsx)(l.a,{path:"/gumdrop/",component:Se})]}),Object(P.jsx)(m.a,{height:"80px"})]})]})})})},Ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,932)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};n(854);c.a.render(Object(P.jsx)(a.a.StrictMode,{children:Object(P.jsx)(o.d,{children:Object(P.jsx)(o.g,{children:Object(P.jsx)(o.a,{children:Object(P.jsx)(o.b,{children:Object(P.jsx)(Ae,{})})})})})}),document.getElementById("root")),Ee()},98:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d}));n(33),n(2),n(8);var r=n(9),a=n(1),i=(n(7),n(26)),c=n.n(i),o=new c.a(10);o.pow(new c.a(18)),o.pow(new c.a(18)),o.pow(new c.a(27)),new c.a(0),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:8});function s(e,t){var n=Object(a.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),i=Object(r.a)(n,2),c=i[0],o=i[1],s=Object(a.useCallback)((function(t){if(c!==t)if(o(t),null===t)localStorage.removeItem(e);else try{localStorage.setItem(e,JSON.stringify(t))}catch(n){}}),[c,e]);return[c,s]}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}new Set(["USDC","wUSDC","USDT"]);function l(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,r){return e.slice(r*t,(r+1)*t)}))}new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});function d(e){return new Promise((function(t){return setTimeout(t,e)}))}}},[[855,1,2]]]);
//# sourceMappingURL=main.b052351e.chunk.js.map